<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.36" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://doc.zzq8.cn/studynotes/SQL/MySQL%E5%AE%9E%E6%88%9845%E8%AE%B2.html"><meta property="og:site_name" content="Zz"><meta property="og:title" content="MySQLÂÆûÊàò45ËÆ≤"><meta property="og:description" content="MySQLÂÆûÊàò45ËÆ≤ ÂèñËá™ÊûÅÂÆ¢Êó∂Èó¥‰∏ìÊ†èÔºåÁî®‰∫éËá™Â∑±Â§ç‰π†ÔºÅËØ¶ÁªÜËØÑËÆ∫ÁúãÂÆòÊñπÁöÑ ‰ΩúËÄÖÔºöÊûóÊôìÊñåÔºåÁΩëÂêç‚Äú‰∏ÅÂ•á‚ÄùÔºåÂâçÈòøÈáåËµÑÊ∑±ÊäÄÊúØ‰∏ìÂÆ∂ ÂéüÁêÜÂÖàË°åÔºåÂÜçÂÆûË∑µÈ™åËØÅ„ÄÇÂàáËÆ∞‰∏çË¶Å‰∏çÊáÇË£ÖÊáÇÔºÅ ‰∏Ä„ÄÅÂü∫Á°ÄÁØá 01‰∏®Âü∫Á°ÄÊû∂ÊûÑÔºö‰∏ÄÊù°SQLÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑÔºü 1.MySQL Êü•ËØ¢ÊãÜËß£ ‰∏ÄÊù°Êü•ËØ¢ËØ≠Âè•ÁöÑÊâßË°åËøáÁ®ã‰∏ÄËà¨ÊòØÁªèËøáËøûÊé•Âô®„ÄÅÂàÜÊûêÂô®„ÄÅ‰ºòÂåñÂô®„ÄÅÊâßË°åÂô®Á≠âÂäüËÉΩÊ®°ÂùóÔºåÊúÄÂêéÂà∞ËææÂ≠òÂÇ®ÂºïÊìé„ÄÇ Áúã‰∏Ä‰∏™‰∫ãÂÑø..."><meta property="og:type" content="article"><meta property="og:image" content="https://images.zzq8.cn/img/202212021612352.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-20T09:13:11.000Z"><meta property="article:modified_time" content="2024-04-20T09:13:11.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MySQLÂÆûÊàò45ËÆ≤","image":["https://images.zzq8.cn/img/202212021612352.png","data:image/png;base64,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","https://images.zzq8.cn/img/202212021612352.png","https://images.zzq8.cn/img/202212071028735.png","https://images.zzq8.cn/img/202212071121771.png","https://images.zzq8.cn/img/202212081721046.png","https://images.zzq8.cn/img/202212121837867.png","https://images.zzq8.cn/img/202212131454238.jpeg","https://images.zzq8.cn/img/202212131523685.jpeg","https://images.zzq8.cn/img/202212131532800.jpeg","https://images.zzq8.cn/img/202212141738821.png"],"dateModified":"2024-04-20T09:13:11.000Z","author":[]}</script><title>MySQLÂÆûÊàò45ËÆ≤ | Zz</title><meta name="description" content="MySQLÂÆûÊàò45ËÆ≤ ÂèñËá™ÊûÅÂÆ¢Êó∂Èó¥‰∏ìÊ†èÔºåÁî®‰∫éËá™Â∑±Â§ç‰π†ÔºÅËØ¶ÁªÜËØÑËÆ∫ÁúãÂÆòÊñπÁöÑ ‰ΩúËÄÖÔºöÊûóÊôìÊñåÔºåÁΩëÂêç‚Äú‰∏ÅÂ•á‚ÄùÔºåÂâçÈòøÈáåËµÑÊ∑±ÊäÄÊúØ‰∏ìÂÆ∂ ÂéüÁêÜÂÖàË°åÔºåÂÜçÂÆûË∑µÈ™åËØÅ„ÄÇÂàáËÆ∞‰∏çË¶Å‰∏çÊáÇË£ÖÊáÇÔºÅ ‰∏Ä„ÄÅÂü∫Á°ÄÁØá 01‰∏®Âü∫Á°ÄÊû∂ÊûÑÔºö‰∏ÄÊù°SQLÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑÔºü 1.MySQL Êü•ËØ¢ÊãÜËß£ ‰∏ÄÊù°Êü•ËØ¢ËØ≠Âè•ÁöÑÊâßË°åËøáÁ®ã‰∏ÄËà¨ÊòØÁªèËøáËøûÊé•Âô®„ÄÅÂàÜÊûêÂô®„ÄÅ‰ºòÂåñÂô®„ÄÅÊâßË°åÂô®Á≠âÂäüËÉΩÊ®°ÂùóÔºåÊúÄÂêéÂà∞ËææÂ≠òÂÇ®ÂºïÊìé„ÄÇ Áúã‰∏Ä‰∏™‰∫ãÂÑø...">
    <link rel="preload" href="/assets/style-DdgbutwI.css" as="style"><link rel="stylesheet" href="/assets/style-DdgbutwI.css">
    <link rel="modulepreload" href="/assets/app-BCyHbxhX.js"><link rel="modulepreload" href="/assets/MySQLÂÆûÊàò45ËÆ≤.html-BowF94Zz.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-r4ySNswZ.js" as="script"><link rel="prefetch" href="/assets/2023Âπ¥ÊÄªÁªì.html-NVbOS18I.js" as="script"><link rel="prefetch" href="/assets/ÊâæÂ∑•‰ΩúÊúâÊÑü.html-B09PV0Vu.js" as="script"><link rel="prefetch" href="/assets/index.html-gNQ3mA0S.js" as="script"><link rel="prefetch" href="/assets/disable.html-DreVlwgH.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-BwsZXT-u.js" as="script"><link rel="prefetch" href="/assets/layout.html-BT8wg4Qk.js" as="script"><link rel="prefetch" href="/assets/markdown.html-D7MoeVQJ.js" as="script"><link rel="prefetch" href="/assets/page.html-Cap39Ek0.js" as="script"><link rel="prefetch" href="/assets/TODO.html-BgBOUN1D.js" as="script"><link rel="prefetch" href="/assets/Tradingview.html-CMeCDuGf.js" as="script"><link rel="prefetch" href="/assets/HttpRequest.html-D_e3KBBl.js" as="script"><link rel="prefetch" href="/assets/JWT.html-CNv5a-1_.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-Cz6WWIv9.js" as="script"><link rel="prefetch" href="/assets/ËÆ°ÁΩëÈóÆÈ¢òÔºàÂæÖËß£ÂÜ≥Ôºâ.html-C7DDmapY.js" as="script"><link rel="prefetch" href="/assets/DistributedLock.html-dOoZcdM6.js" as="script"><link rel="prefetch" href="/assets/Advanced.html-BPX0v81y.js" as="script"><link rel="prefetch" href="/assets/Basic.html-DsWyKPKZ.js" as="script"><link rel="prefetch" href="/assets/ElasticSearch.html-BvhC4v1Q.js" as="script"><link rel="prefetch" href="/assets/JUC.html-B8L-EJ9Q.js" as="script"><link rel="prefetch" href="/assets/JVM.html-C7wywSNm.js" as="script"><link rel="prefetch" href="/assets/MyBatis.html-DWzFWsXh.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-2LpJ3bFE.js" as="script"><link rel="prefetch" href="/assets/SpringCloud.html-DP_XQVkf.js" as="script"><link rel="prefetch" href="/assets/SpringIntegration.html-BzlNRr3C.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-DkGxuZI8.js" as="script"><link rel="prefetch" href="/assets/Java Ê†∏ÂøÉÊäÄÊúØÈù¢ËØïÁ≤æËÆ≤.html-pG417RQI.js" as="script"><link rel="prefetch" href="/assets/JavaSE.html-DJ76hAkP.js" as="script"><link rel="prefetch" href="/assets/KnowledgePlanet-JavaGuide.html-OIiqXuwt.js" as="script"><link rel="prefetch" href="/assets/Lambda.html-DszZL9vk.js" as="script"><link rel="prefetch" href="/assets/Steam.html-D_8b8TbT.js" as="script"><link rel="prefetch" href="/assets/Â∞öÁ°ÖË∞∑ÁªèÂÖ∏JavaÈù¢ËØïÈ¢òÁ¨¨‰∏ÄÂ≠£.html-DJSdt95q.js" as="script"><link rel="prefetch" href="/assets/LinuxRef.html-Du438Yju.js" as="script"><link rel="prefetch" href="/assets/LinuxÁéØÂ¢ÉÈÉ®ÁΩ≤(JRE„ÄÅMySQL„ÄÅNginx).html-BeY5334A.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-CpX0SnDv.js" as="script"><link rel="prefetch" href="/assets/Redis.html-CakU7Djx.js" as="script"><link rel="prefetch" href="/assets/RedisAdvanced.html-BP5Q7JfL.js" as="script"><link rel="prefetch" href="/assets/RuoYi.html-BM8_byiQ.js" as="script"><link rel="prefetch" href="/assets/MysqlÁ¥¢Âºï_ÂÅöÈ¢òÊÄªÁªì.html-Ddrvj4CS.js" as="script"><link rel="prefetch" href="/assets/5am-Project.html-DbSlS-4r.js" as="script"><link rel="prefetch" href="/assets/Clash.html-C-ELX9vG.js" as="script"><link rel="prefetch" href="/assets/Git_SVN.html-BlV77Dzd.js" as="script"><link rel="prefetch" href="/assets/GitHub Actions.html-TcpBxEWl.js" as="script"><link rel="prefetch" href="/assets/MacOS.html-CCpED74r.js" as="script"><link rel="prefetch" href="/assets/Maven.html-B-eZWz0G.js" as="script"><link rel="prefetch" href="/assets/Regexr.html-CwGMI7vo.js" as="script"><link rel="prefetch" href="/assets/StudyList.html-2Ta8OQuk.js" as="script"><link rel="prefetch" href="/assets/VuePress Theme Hope.html-DD9bHXOS.js" as="script"><link rel="prefetch" href="/assets/WTG (WindowsToGo).html-D4OKfqEs.js" as="script"><link rel="prefetch" href="/assets/Windows_Software.html-zYBV4O5D.js" as="script"><link rel="prefetch" href="/assets/idea_windows Âø´Êç∑ÈîÆÂèä‰ΩøÁî®ÊäÄÂ∑ß.html-CIcaJ5Jn.js" as="script"><link rel="prefetch" href="/assets/Books.html-CdNxHAz4.js" as="script"><link rel="prefetch" href="/assets/FirstYear.html-CaXoB8Z6.js" as="script"><link rel="prefetch" href="/assets/upupor.html-DWim1HB5.js" as="script"><link rel="prefetch" href="/assets/Âø´ÊéíÔºàÂàÜÊ≤ªÊÄùÊÉ≥Ôºâ.html-E64E4yCo.js" as="script"><link rel="prefetch" href="/assets/ËÆ°ÁªÑÂéü.html-CHb6cw5t.js" as="script"><link rel="prefetch" href="/assets/Â∞ö‰∏ä‰ºòÈÄâ_Abandon.html-C7BVUdAK.js" as="script"><link rel="prefetch" href="/assets/2020 Á®ãÂ∫èÂëòÊâæÂ∑•‰ΩúÊåáÂçó.html-qe5A9Tt9.js" as="script"><link rel="prefetch" href="/assets/Á®ãÂ∫èÂëòÂ¶Ç‰ΩïÈ´òÊïàÂ≠¶‰π†Ôºà‰ª• Java ‰∏∫‰æãÔºâ.html-AK2dXSZR.js" as="script"><link rel="prefetch" href="/assets/Chrome‰π¶Á≠æË¢´Âä´ÊåÅ.html-B7C9SXUv.js" as="script"><link rel="prefetch" href="/assets/Kali Á†¥Ëß£ WIFI.html-Ry7vBqoF.js" as="script"><link rel="prefetch" href="/assets/ShareListÊåÇËΩΩÈòøÈáå‰∫ëÁõò.html-CMVlBTMK.js" as="script"><link rel="prefetch" href="/assets/Windows To Go UÁõò.html-BwjSv9yA.js" as="script"><link rel="prefetch" href="/assets/docsifyÂø´ÈÄüÈÉ®ÁΩ≤‰ºòÁæéÁöÑÂú®Á∫øÊñáÊ°£.html-Cmn9HQfj.js" as="script"><link rel="prefetch" href="/assets/Â§©Â§©ÈÉΩÂú®Áî®ÁöÑËΩØÁ°¨‰ª∂.html-Blp41r3a.js" as="script"><link rel="prefetch" href="/assets/Spring.html-BZwQE5Mj.js" as="script"><link rel="prefetch" href="/assets/404.html-BAv11cqp.js" as="script"><link rel="prefetch" href="/assets/index.html-DjE_Uhbp.js" as="script"><link rel="prefetch" href="/assets/index.html-Cc_QaZzp.js" as="script"><link rel="prefetch" href="/assets/index.html-CLCzLhPx.js" as="script"><link rel="prefetch" href="/assets/index.html-BSmMk81H.js" as="script"><link rel="prefetch" href="/assets/index.html-8zd7jxIx.js" as="script"><link rel="prefetch" href="/assets/index.html-BMJyR_JP.js" as="script"><link rel="prefetch" href="/assets/index.html-DgqzNcO5.js" as="script"><link rel="prefetch" href="/assets/index.html-DRSVY2gT.js" as="script"><link rel="prefetch" href="/assets/index.html-Bo-WuEVR.js" as="script"><link rel="prefetch" href="/assets/index.html-CQ1CTTDI.js" as="script"><link rel="prefetch" href="/assets/index.html-CKoqHQil.js" as="script"><link rel="prefetch" href="/assets/index.html-D06IhkPh.js" as="script"><link rel="prefetch" href="/assets/index.html-Dgocs79y.js" as="script"><link rel="prefetch" href="/assets/index.html-BLSSTNTo.js" as="script"><link rel="prefetch" href="/assets/index.html-BsOJDTdP.js" as="script"><link rel="prefetch" href="/assets/index.html-CHmz9AkB.js" as="script"><link rel="prefetch" href="/assets/index.html-DbL-94zZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DN5XejaG.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh-mpCH3.js" as="script"><link rel="prefetch" href="/assets/index.html-Bnr8m4Zl.js" as="script"><link rel="prefetch" href="/assets/index.html-DUr63q15.js" as="script"><link rel="prefetch" href="/assets/index.html-DvwT6df1.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script"><link rel="prefetch" href="/assets/style-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/docsearch-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/index-Ds2TtRM5.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Ë∑≥Ëá≥‰∏ªË¶ÅÂÖßÂÆπ</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">Zz</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link active" href="/studynotes/" aria-label="‰ª£Á†ÅÁ¨îËÆ∞"><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>‰ª£Á†ÅÁ¨îËÆ∞<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/demo/" aria-label="ÊµÆÁîüÊùÇËÆ∞"><span class="font-icon icon fa-fw fa-sm fas fa-fish-fins" style=""></span>ÊµÆÁîüÊùÇËÆ∞<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ËµÑÊ∫êÂÆùÂ∫ì"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>ËµÑÊ∫êÂÆùÂ∫ì</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/resources/books/" aria-label="‰π¶Á±çËµÑÊ∫ê"><span class="font-icon icon fa-fw fa-sm fas fa-book-open" style=""></span>‰π¶Á±çËµÑÊ∫ê<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/resources/videos/" aria-label="ÂΩ±Èü≥ËµÑÊ∫ê"><span class="font-icon icon fa-fw fa-sm fas fa-play" style=""></span>ÂΩ±Èü≥ËµÑÊ∫ê<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ÁΩëÁ´ôÁõ∏ÂÖ≥"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-id-card" style=""></span>ÁΩëÁ´ôÁõ∏ÂÖ≥</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/about-the-author/" aria-label="ÂÖ≥‰∫é‰ΩúËÄÖ"><span class="font-icon icon fa-fw fa-sm fas fa-user" style=""></span>ÂÖ≥‰∫é‰ΩúËÄÖ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/timeline/" aria-label="Êõ¥Êñ∞ÂéÜÂè≤"><span class="font-icon icon fa-fw fa-sm fas fa-history" style=""></span>Êõ¥Êñ∞ÂéÜÂè≤<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/zzq8/zzq8" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="ÊêúÁ¥¢ÊñáÊ°£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">ÊêúÁ¥¢ÊñáÊ°£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">408 Network</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Distributed Lock</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Guli Mall</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java Framework</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java SE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JUC</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JVM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">MQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">No SQL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ruo Yi</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">SQL</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/studynotes/SQL/MySQL%E5%AE%9E%E6%88%9845%E8%AE%B2.html" aria-label="MySQLÂÆûÊàò45ËÆ≤"><!---->MySQLÂÆûÊàò45ËÆ≤<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/SQL/Mysql%E7%B4%A2%E5%BC%95_%E5%81%9A%E9%A2%98%E6%80%BB%E7%BB%93.html" aria-label="MySQLÁ¥¢Âºï"><!---->MySQLÁ¥¢Âºï<!----></a></li></ul></section></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/TODO.html" aria-label="TODO"><!---->TODO<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Upupor</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ZOther</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MySQLÂÆûÊàò45ËÆ≤</h1><div class="page-info"><!----><!----><!----><!----><span class="page-word-info" aria-label="Â≠óÊï∞üî†" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>Á∫¶ 32320 Â≠ó</span><meta property="wordCount" content="32320"></span><span class="page-reading-time-info" aria-label="ÈòÖËØªÊó∂Èó¥‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>Â§ßÁ∫¶ 108 ÂàÜÈíü</span><meta property="timeRequired" content="PT108M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">Ê≠§È°µÂÜÖÂÆπ<button type="button" class="print-button" title="ÊâìÂç∞"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-mysql-Êü•ËØ¢ÊãÜËß£">1.MySQL Êü•ËØ¢ÊãÜËß£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-ËøûÊé•Âô®">2.ËøûÊé•Âô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-Êü•ËØ¢ÁºìÂ≠ò">3.Êü•ËØ¢ÁºìÂ≠ò</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-ÂàÜÊûêÂô®">4.ÂàÜÊûêÂô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-‰ºòÂåñÂô®">5.‰ºòÂåñÂô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-ÊâßË°åÂô®">6.ÊâßË°åÂô®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä">1.ÂâçË®Ä</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-redo-log">2.redo log</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-binlog">3.binlog</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-‰∏§Èò∂ÊÆµÊèê‰∫§">4.‰∏§Èò∂ÊÆµÊèê‰∫§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-Â∞èÁªì">5.Â∞èÁªì</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#Ë°•ÂÖÖ">Ë°•ÂÖÖ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä-1">1.ÂâçË®Ä</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-ÈöîÁ¶ªÊÄß‰∏éÈöîÁ¶ªÁ∫ßÂà´">2.ÈöîÁ¶ªÊÄß‰∏éÈöîÁ¶ªÁ∫ßÂà´</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-‰∫ãÂä°ÈöîÁ¶ªÁöÑÂÆûÁé∞">3.‰∫ãÂä°ÈöîÁ¶ªÁöÑÂÆûÁé∞</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-‰∫ãÂä°ÁöÑÂêØÂä®ÊñπÂºè">4.‰∫ãÂä°ÁöÑÂêØÂä®ÊñπÂºè</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-Â∞èÁªì-1">5.Â∞èÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä-2">1.ÂâçË®Ä</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#Ë°•ÂÖÖ-Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπ">Ë°•ÂÖÖÔºöÁ¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-Á¥¢ÂºïÁöÑÂ∏∏ËßÅÊ®°Âûã">2.Á¥¢ÂºïÁöÑÂ∏∏ËßÅÊ®°Âûã</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-1-ÂìàÂ∏åË°®">2.1.ÂìàÂ∏åË°®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-2-ÊúâÂ∫èÊï∞ÁªÑ">2.2.ÊúâÂ∫èÊï∞ÁªÑ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-3-ÊêúÁ¥¢Ê†ë">2.3.ÊêúÁ¥¢Ê†ë</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-innodb-ÁöÑÁ¥¢ÂºïÊ®°Âûã">3.InnoDB ÁöÑÁ¥¢ÂºïÊ®°Âûã</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-Á¥¢ÂºïÁª¥Êä§">4.Á¥¢ÂºïÁª¥Êä§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-Â∞èÁªì-2">5.Â∞èÁªì</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#Ë°•ÂÖÖ-int-4-„ÄÅint-8-„ÄÅint-11-ÂàÜÂà´Âç†Áî®Âá†‰∏™Â≠óËäÇ">Ë°•ÂÖÖÔºöintÔºà4Ôºâ„ÄÅintÔºà8Ôºâ„ÄÅintÔºà11Ôºâ ÂàÜÂà´Âç†Áî®Âá†‰∏™Â≠óËäÇ Ôºü</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä-3">1.ÂâçË®Ä</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-Ë¶ÜÁõñÁ¥¢Âºï">2.Ë¶ÜÁõñÁ¥¢Âºï</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô">3.ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-Á¥¢Âºï‰∏ãÊé®">4.Á¥¢Âºï‰∏ãÊé®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-Â∞èÁªì-3">5.Â∞èÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä-4">1.ÂâçË®Ä</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-ÂÖ®Â±ÄÈîÅ">2.ÂÖ®Â±ÄÈîÅ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-Ë°®Á∫ßÈîÅ">3.Ë°®Á∫ßÈîÅ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-Â∞èÁªì">4.Â∞èÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä-5">1.ÂâçË®Ä</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-‰ªé‰∏§Èò∂ÊÆµÈîÅËØ¥Ëµ∑">2.‰ªé‰∏§Èò∂ÊÆµÈîÅËØ¥Ëµ∑</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã">3.Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-Â∞èÁªì-1">4.Â∞èÁªì</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-ÂâçË®Ä-6">1.ÂâçË®Ä</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-Âø´ÁÖß-Âú®-mvcc-ÈáåÊòØÊÄé‰πàÂ∑•‰ΩúÁöÑ">2.‚ÄúÂø´ÁÖß‚ÄùÂú® MVCC ÈáåÊòØÊÄé‰πàÂ∑•‰ΩúÁöÑÔºü</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="mysqlÂÆûÊàò45ËÆ≤" tabindex="-1"><a class="header-anchor" href="#mysqlÂÆûÊàò45ËÆ≤"><span>MySQLÂÆûÊàò45ËÆ≤</span></a></h1><blockquote><p>ÂèñËá™ÊûÅÂÆ¢Êó∂Èó¥‰∏ìÊ†èÔºåÁî®‰∫éËá™Â∑±Â§ç‰π†ÔºÅËØ¶ÁªÜËØÑËÆ∫ÁúãÂÆòÊñπÁöÑ ‰ΩúËÄÖÔºö<strong>ÊûóÊôìÊñå</strong>ÔºåÁΩëÂêç‚Äú‰∏ÅÂ•á‚ÄùÔºåÂâçÈòøÈáåËµÑÊ∑±ÊäÄÊúØ‰∏ìÂÆ∂</p><p>ÂéüÁêÜÂÖàË°åÔºåÂÜçÂÆûË∑µÈ™åËØÅ„ÄÇÂàáËÆ∞‰∏çË¶Å‰∏çÊáÇË£ÖÊáÇÔºÅ</p></blockquote><h1 id="‰∏Ä„ÄÅÂü∫Á°ÄÁØá" tabindex="-1"><a class="header-anchor" href="#‰∏Ä„ÄÅÂü∫Á°ÄÁØá"><span>‰∏Ä„ÄÅÂü∫Á°ÄÁØá</span></a></h1><h1 id="_01‰∏®Âü∫Á°ÄÊû∂ÊûÑ-‰∏ÄÊù°sqlÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ" tabindex="-1"><a class="header-anchor" href="#_01‰∏®Âü∫Á°ÄÊû∂ÊûÑ-‰∏ÄÊù°sqlÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ"><span>01‰∏®Âü∫Á°ÄÊû∂ÊûÑÔºö‰∏ÄÊù°SQLÊü•ËØ¢ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑÔºü</span></a></h1><h2 id="_1-mysql-Êü•ËØ¢ÊãÜËß£" tabindex="-1"><a class="header-anchor" href="#_1-mysql-Êü•ËØ¢ÊãÜËß£"><span>1.MySQL Êü•ËØ¢ÊãÜËß£</span></a></h2><blockquote><p>‰∏ÄÊù°Êü•ËØ¢ËØ≠Âè•ÁöÑÊâßË°åËøáÁ®ã‰∏ÄËà¨ÊòØÁªèËøáËøûÊé•Âô®„ÄÅÂàÜÊûêÂô®„ÄÅ‰ºòÂåñÂô®„ÄÅÊâßË°åÂô®Á≠âÂäüËÉΩÊ®°ÂùóÔºåÊúÄÂêéÂà∞ËææÂ≠òÂÇ®ÂºïÊìé„ÄÇ</p></blockquote><p>Áúã‰∏Ä‰∏™‰∫ãÂÑøÂçÉ‰∏á‰∏çË¶ÅÁõ¥Êé•Èô∑ÂÖ•ÁªÜËäÇÈáåÔºå‰Ω†Â∫îËØ•ÂÖàÈ∏üÁû∞ÂÖ∂ÂÖ®Ë≤åÔºåËøôÊ†∑ËÉΩÂ§üÂ∏ÆÂä©‰Ω†‰ªéÈ´òÁª¥Â∫¶ÁêÜËß£ÈóÆÈ¢ò„ÄÇ</p><!----><figure><img src="https://images.zzq8.cn/img/202212021612352.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!----><p>Â§ß‰ΩìÊù•ËØ¥ÔºåMySQL ÂèØ‰ª•ÂàÜ‰∏∫ Server Â±ÇÂíåÂ≠òÂÇ®ÂºïÊìéÂ±Ç‰∏§ÈÉ®ÂàÜ„ÄÇ</p><blockquote><p>Server Â±Ç</p></blockquote><p>ÂåÖÊã¨ËøûÊé•Âô®„ÄÅÊü•ËØ¢ÁºìÂ≠ò„ÄÅÂàÜÊûêÂô®„ÄÅ‰ºòÂåñÂô®„ÄÅÊâßË°åÂô®Á≠âÔºåÊ∂µÁõñ MySQL ÁöÑÂ§ßÂ§öÊï∞Ê†∏ÂøÉÊúçÂä°ÂäüËÉΩÔºå‰ª•ÂèäÊâÄÊúâÁöÑÂÜÖÁΩÆÂáΩÊï∞ÔºàÂ¶ÇÊó•Êúü„ÄÅÊó∂Èó¥„ÄÅÊï∞Â≠¶ÂíåÂä†ÂØÜÂáΩÊï∞Á≠âÔºâÔºåÊâÄÊúâË∑®Â≠òÂÇ®ÂºïÊìéÁöÑÂäüËÉΩÈÉΩÂú®Ëøô‰∏ÄÂ±ÇÂÆûÁé∞ÔºåÊØîÂ¶ÇÂ≠òÂÇ®ËøáÁ®ã„ÄÅËß¶ÂèëÂô®„ÄÅËßÜÂõæÁ≠â„ÄÇ</p><blockquote><p>Â≠òÂÇ®ÂºïÊìéÂ±Ç</p></blockquote><p>Ë¥üË¥£Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÂíåÊèêÂèñ„ÄÇÂÖ∂Êû∂ÊûÑÊ®°ÂºèÊòØÊèí‰ª∂ÂºèÁöÑÔºåÊîØÊåÅ InnoDB„ÄÅMyISAM„ÄÅMemory Á≠âÂ§ö‰∏™Â≠òÂÇ®ÂºïÊìé„ÄÇÁé∞Âú®ÊúÄÂ∏∏Áî®ÁöÑÂ≠òÂÇ®ÂºïÊìéÊòØ InnoDBÔºåÂÆÉ‰ªé MySQL 5.5.5 ÁâàÊú¨ÂºÄÂßãÊàê‰∏∫‰∫ÜÈªòËÆ§Â≠òÂÇ®ÂºïÊìé„ÄÇ</p><p>‰πüÂ∞±ÊòØËØ¥Ôºå‰Ω†ÊâßË°å create table Âª∫Ë°®ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÂºïÊìéÁ±ªÂûãÔºåÈªòËÆ§‰ΩøÁî®ÁöÑÂ∞±ÊòØ InnoDB„ÄÇ‰∏çËøáÔºå‰Ω†‰πüÂèØ‰ª•ÈÄöËøáÊåáÂÆöÂ≠òÂÇ®ÂºïÊìéÁöÑÁ±ªÂûãÊù•ÈÄâÊã©Âà´ÁöÑÂºïÊìéÔºåÊØîÂ¶ÇÂú® create table ËØ≠Âè•‰∏≠‰ΩøÁî® engine=memory, Êù•ÊåáÂÆö‰ΩøÁî®ÂÜÖÂ≠òÂºïÊìéÂàõÂª∫Ë°®„ÄÇ‰∏çÂêåÂ≠òÂÇ®ÂºïÊìéÁöÑË°®Êï∞ÊçÆÂ≠òÂèñÊñπÂºè‰∏çÂêåÔºåÊîØÊåÅÁöÑÂäüËÉΩ‰πü‰∏çÂêåÔºåÂú®ÂêéÈù¢ÁöÑÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨‰ºöËÆ®ËÆ∫Âà∞ÂºïÊìéÁöÑÈÄâÊã©„ÄÇ</p><p>‰ªéÂõæ‰∏≠‰∏çÈöæÁúãÂá∫Ôºå‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÂÖ±Áî®‰∏Ä‰∏™ <strong>Server Â±Ç</strong>Ôºå‰πüÂ∞±ÊòØ‰ªéËøûÊé•Âô®Âà∞ÊâßË°åÂô®ÁöÑÈÉ®ÂàÜ„ÄÇ‰Ω†ÂèØ‰ª•ÂÖàÂØπÊØè‰∏™ÁªÑ‰ª∂ÁöÑÂêçÂ≠óÊúâ‰∏™Âç∞Ë±°ÔºåÊé•‰∏ãÊù•Êàë‰ºöÁªìÂêàÂºÄÂ§¥ÊèêÂà∞ÁöÑÈÇ£Êù° SQL ËØ≠Âè•ÔºåÂ∏¶‰Ω†Ëµ∞‰∏ÄÈÅçÊï¥‰∏™ÊâßË°åÊµÅÁ®ãÔºå‰æùÊ¨°Áúã‰∏ãÊØè‰∏™ÁªÑ‰ª∂ÁöÑ‰ΩúÁî®„ÄÇ</p><p><strong>‰∫ãÂä°ÔºàÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂºïÊìéÈÉΩÊîØÊåÅ‰∫ãÂä°„ÄÇÊØîÂ¶Ç MySQL ÂéüÁîüÁöÑ MyISAM ÂºïÊìéÂ∞±‰∏çÊîØÊåÅ‰∫ãÂä°ÔºåËøô‰πüÊòØ MyISAM Ë¢´ InnoDB Âèñ‰ª£ÁöÑÈáçË¶ÅÂéüÂõ†‰πã‰∏Ä„ÄÇÔºâ„ÄÅ</strong></p><p><mark><strong>Á¥¢Âºï„ÄÅË°åÈîÅ...ÈÉΩÊòØÂú®ËøôÂ±ÇÂÆûÁé∞ÔºÅ</strong></mark></p><h2 id="_2-ËøûÊé•Âô®" tabindex="-1"><a class="header-anchor" href="#_2-ËøûÊé•Âô®"><span>2.ËøûÊé•Âô®</span></a></h2><p>Á¨¨‰∏ÄÊ≠•Ôºå‰Ω†‰ºöÂÖàËøûÊé•Âà∞Ëøô‰∏™Êï∞ÊçÆÂ∫ì‰∏äÔºåËøôÊó∂ÂÄôÊé•ÂæÖ‰Ω†ÁöÑÂ∞±ÊòØËøûÊé•Âô®„ÄÇËøûÊé•Âô®Ë¥üË¥£Ë∑üÂÆ¢Êà∑Á´ØÂª∫Á´ãËøûÊé•„ÄÅËé∑ÂèñÊùÉÈôê„ÄÅÁª¥ÊåÅÂíåÁÆ°ÁêÜËøûÊé•„ÄÇËøûÊé•ÂëΩ‰ª§‰∏ÄËà¨ÊòØËøô‰πàÂÜôÁöÑÔºö</p><div class="language-cmd line-numbers-mode" data-ext="cmd" data-title="cmd"><pre class="language-cmd"><code>mysql -h$ip -P$port -u$user -p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ËæìÂÆåÂëΩ‰ª§‰πãÂêéÔºå‰Ω†Â∞±ÈúÄË¶ÅÂú®‰∫§‰∫íÂØπËØùÈáåÈù¢ËæìÂÖ•ÂØÜÁ†Å„ÄÇËôΩÁÑ∂ÂØÜÁ†Å‰πüÂèØ‰ª•Áõ¥Êé•Ë∑üÂú® -p ÂêéÈù¢ÂÜôÂú®ÂëΩ‰ª§Ë°å‰∏≠Ôºå‰ΩÜËøôÊ†∑ÂèØËÉΩ‰ºöÂØºËá¥‰Ω†ÁöÑÂØÜÁ†ÅÊ≥ÑÈú≤„ÄÇÂ¶ÇÊûú‰Ω†ËøûÁöÑÊòØÁîü‰∫ßÊúçÂä°Âô®ÔºåÂº∫ÁÉàÂª∫ËÆÆ‰Ω†‰∏çË¶ÅËøô‰πàÂÅö„ÄÇ</p><p>ËøûÊé•ÂëΩ‰ª§‰∏≠ÁöÑ mysql ÊòØÂÆ¢Êà∑Á´ØÂ∑•ÂÖ∑ÔºåÁî®Êù•Ë∑üÊúçÂä°Á´ØÂª∫Á´ãËøûÊé•„ÄÇÂú®ÂÆåÊàêÁªèÂÖ∏ÁöÑ TCP Êè°ÊâãÂêéÔºåËøûÊé•Âô®Â∞±Ë¶ÅÂºÄÂßãËÆ§ËØÅ‰Ω†ÁöÑË∫´‰ªΩÔºåËøô‰∏™Êó∂ÂÄôÁî®ÁöÑÂ∞±ÊòØ‰Ω†ËæìÂÖ•ÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†Å„ÄÇ</p><ul><li>Â¶ÇÊûúÁî®Êà∑ÂêçÊàñÂØÜÁ†Å‰∏çÂØπÔºå‰Ω†Â∞±‰ºöÊî∂Âà∞‰∏Ä‰∏™&quot;Access denied for user&quot;ÁöÑÈîôËØØÔºåÁÑ∂ÂêéÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÁªìÊùüÊâßË°å„ÄÇ</li><li>Â¶ÇÊûúÁî®Êà∑ÂêçÂØÜÁ†ÅËÆ§ËØÅÈÄöËøáÔºåËøûÊé•Âô®‰ºöÂà∞ÊùÉÈôêË°®ÈáåÈù¢Êü•Âá∫‰Ω†Êã•ÊúâÁöÑÊùÉÈôê„ÄÇ‰πãÂêéÔºåËøô‰∏™ËøûÊé•ÈáåÈù¢ÁöÑÊùÉÈôêÂà§Êñ≠ÈÄªËæëÔºåÈÉΩÂ∞Ü‰æùËµñ‰∫éÊ≠§Êó∂ËØªÂà∞ÁöÑÊùÉÈôê„ÄÇ</li></ul><p>ËøôÂ∞±ÊÑèÂë≥ÁùÄÔºå‰∏Ä‰∏™Áî®Êà∑ÊàêÂäüÂª∫Á´ãËøûÊé•ÂêéÔºåÂç≥‰Ωø‰Ω†Áî®ÁÆ°ÁêÜÂëòË¥¶Âè∑ÂØπËøô‰∏™Áî®Êà∑ÁöÑÊùÉÈôêÂÅö‰∫Ü‰øÆÊîπÔºå‰πü‰∏ç‰ºöÂΩ±ÂìçÂ∑≤ÁªèÂ≠òÂú®ËøûÊé•ÁöÑÊùÉÈôê„ÄÇ‰øÆÊîπÂÆåÊàêÂêéÔºåÂè™ÊúâÂÜçÊñ∞Âª∫ÁöÑËøûÊé•Êâç‰ºö‰ΩøÁî®Êñ∞ÁöÑÊùÉÈôêËÆæÁΩÆ„ÄÇ</p><p>ËøûÊé•ÂÆåÊàêÂêéÔºåÂ¶ÇÊûú‰Ω†Ê≤°ÊúâÂêéÁª≠ÁöÑÂä®‰ΩúÔºåËøô‰∏™ËøûÊé•Â∞±Â§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅÔºå‰Ω†ÂèØ‰ª•Âú® <!----> ÂëΩ‰ª§‰∏≠ÁúãÂà∞ÂÆÉ„ÄÇÊñáÊú¨‰∏≠Ëøô‰∏™ÂõæÊòØ show processlist ÁöÑÁªìÊûúÔºåÂÖ∂‰∏≠ÁöÑ Command ÂàóÊòæÁ§∫‰∏∫‚ÄúSleep‚ÄùÁöÑËøô‰∏ÄË°åÔºåÂ∞±Ë°®Á§∫Áé∞Âú®Á≥ªÁªüÈáåÈù¢Êúâ‰∏Ä‰∏™Á©∫Èó≤ËøûÊé•„ÄÇ</p><p>Êâ©Â±ïÔºöshow processlist ÊòæÁ§∫ÁöÑ‰ø°ÊÅØÈÉΩÊòØÊù•Ëá™MySQLÁ≥ªÁªüÂ∫ì information_schema ‰∏≠ÁöÑ processlist Ë°®„ÄÇÊâÄ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÊü•ËØ¢ËØ≠Âè•ÂèØ‰ª•Ëé∑ÂæóÁõ∏ÂêåÁöÑÁªìÊûúÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>select * from information_schema.processlist #ÂÆûÊµãËÉΩÊü•Áî®ÂÖ¨Âè∏MySQLÊúçÂä°Âô®ÁöÑ‰∫∫ÔºÅ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="data:image/png;base64,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" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ÂÆ¢Êà∑Á´ØÂ¶ÇÊûúÂ§™ÈïøÊó∂Èó¥Ê≤°Âä®ÈùôÔºåËøûÊé•Âô®Â∞±‰ºöËá™Âä®Â∞ÜÂÆÉÊñ≠ÂºÄ„ÄÇËøô‰∏™Êó∂Èó¥ÊòØÁî±ÂèÇÊï∞ wait_timeout ÊéßÂà∂ÁöÑÔºåÈªòËÆ§ÂÄºÊòØ 8 Â∞èÊó∂„ÄÇ</p><p>Â¶ÇÊûúÂú®ËøûÊé•Ë¢´Êñ≠ÂºÄ‰πãÂêéÔºåÂÆ¢Êà∑Á´ØÂÜçÊ¨°ÂèëÈÄÅËØ∑Ê±ÇÁöÑËØùÔºåÂ∞±‰ºöÊî∂Âà∞‰∏Ä‰∏™ÈîôËØØÊèêÈÜíÔºö Lost connection to MySQL server during query„ÄÇËøôÊó∂ÂÄôÂ¶ÇÊûú‰Ω†Ë¶ÅÁªßÁª≠ÔºåÂ∞±ÈúÄË¶ÅÈáçËøûÔºåÁÑ∂ÂêéÂÜçÊâßË°åËØ∑Ê±Ç‰∫Ü„ÄÇ</p><p>Êï∞ÊçÆÂ∫ìÈáåÈù¢ÔºåÈïøËøûÊé•ÊòØÊåáËøûÊé•ÊàêÂäüÂêéÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÊåÅÁª≠ÊúâËØ∑Ê±ÇÔºåÂàô‰∏ÄÁõ¥‰ΩøÁî®Âêå‰∏Ä‰∏™ËøûÊé•„ÄÇÁü≠ËøûÊé•ÂàôÊòØÊåáÊØèÊ¨°ÊâßË°åÂÆåÂæàÂ∞ëÁöÑÂá†Ê¨°Êü•ËØ¢Â∞±Êñ≠ÂºÄËøûÊé•Ôºå‰∏ãÊ¨°Êü•ËØ¢ÂÜçÈáçÊñ∞Âª∫Á´ã‰∏Ä‰∏™„ÄÇ</p><p>Âª∫Á´ãËøûÊé•ÁöÑËøáÁ®ãÈÄöÂ∏∏ÊòØÊØîËæÉÂ§çÊùÇÁöÑÔºåÊâÄ‰ª•ÊàëÂª∫ËÆÆ‰Ω†Âú®‰ΩøÁî®‰∏≠Ë¶ÅÂ∞ΩÈáèÂáèÂ∞ëÂª∫Á´ãËøûÊé•ÁöÑÂä®‰ΩúÔºå‰πüÂ∞±ÊòØÂ∞ΩÈáè‰ΩøÁî®ÈïøËøûÊé•„ÄÇ</p><p>‰ΩÜÊòØÂÖ®ÈÉ®‰ΩøÁî®ÈïøËøûÊé•ÂêéÔºå‰Ω†ÂèØËÉΩ‰ºöÂèëÁé∞ÔºåÊúâ‰∫õÊó∂ÂÄô MySQL Âç†Áî®ÂÜÖÂ≠òÊ∂®ÂæóÁâπÂà´Âø´Ôºå<strong>ËøôÊòØÂõ†‰∏∫ MySQL Âú®ÊâßË°åËøáÁ®ã‰∏≠‰∏¥Êó∂‰ΩøÁî®ÁöÑÂÜÖÂ≠òÊòØÁÆ°ÁêÜÂú®ËøûÊé•ÂØπË±°ÈáåÈù¢ÁöÑ</strong>„ÄÇËøô‰∫õËµÑÊ∫ê‰ºöÂú®ËøûÊé•Êñ≠ÂºÄÁöÑÊó∂ÂÄôÊâçÈáäÊîæ„ÄÇÊâÄ‰ª•Â¶ÇÊûúÈïøËøûÊé•Á¥ØÁßØ‰∏ãÊù•ÔºåÂèØËÉΩÂØºËá¥ÂÜÖÂ≠òÂç†Áî®Â§™Â§ßÔºåË¢´Á≥ªÁªüÂº∫Ë°åÊùÄÊéâÔºàOOMÔºâÔºå‰ªéÁé∞Ë±°ÁúãÂ∞±ÊòØ MySQL ÂºÇÂ∏∏ÈáçÂêØ‰∫Ü„ÄÇ</p><p>ÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢Ôºü‰Ω†ÂèØ‰ª•ËÄÉËôë‰ª•‰∏ã‰∏§ÁßçÊñπÊ°à„ÄÇ</p><ol><li>ÂÆöÊúüÊñ≠ÂºÄÈïøËøûÊé•„ÄÇ‰ΩøÁî®‰∏ÄÊÆµÊó∂Èó¥ÔºåÊàñËÄÖÁ®ãÂ∫èÈáåÈù¢Âà§Êñ≠ÊâßË°åËøá‰∏Ä‰∏™Âç†Áî®ÂÜÖÂ≠òÁöÑÂ§ßÊü•ËØ¢ÂêéÔºåÊñ≠ÂºÄËøûÊé•Ôºå‰πãÂêéË¶ÅÊü•ËØ¢ÂÜçÈáçËøû„ÄÇ</li><li>Â¶ÇÊûú‰Ω†Áî®ÁöÑÊòØ MySQL 5.7 ÊàñÊõ¥Êñ∞ÁâàÊú¨Ôºå<strong>ÂèØ‰ª•Âú®ÊØèÊ¨°ÊâßË°å‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑÊìç‰ΩúÂêéÔºåÈÄöËøáÊâßË°å mysql_reset_connection Êù•ÈáçÊñ∞ÂàùÂßãÂåñËøûÊé•ËµÑÊ∫ê</strong>„ÄÇËøô‰∏™ËøáÁ®ã‰∏çÈúÄË¶ÅÈáçËøûÂíåÈáçÊñ∞ÂÅöÊùÉÈôêÈ™åËØÅÔºå‰ΩÜÊòØ‰ºöÂ∞ÜËøûÊé•ÊÅ¢Â§çÂà∞ÂàöÂàöÂàõÂª∫ÂÆåÊó∂ÁöÑÁä∂ÊÄÅ„ÄÇ</li></ol><h2 id="_3-Êü•ËØ¢ÁºìÂ≠ò" tabindex="-1"><a class="header-anchor" href="#_3-Êü•ËØ¢ÁºìÂ≠ò"><span>3.Êü•ËØ¢ÁºìÂ≠ò</span></a></h2><p>ËøûÊé•Âª∫Á´ãÂÆåÊàêÂêéÔºå‰Ω†Â∞±ÂèØ‰ª•ÊâßË°å select ËØ≠Âè•‰∫Ü„ÄÇÊâßË°åÈÄªËæëÂ∞±‰ºöÊù•Âà∞Á¨¨‰∫åÊ≠•ÔºöÊü•ËØ¢ÁºìÂ≠ò„ÄÇ</p><p>MySQL ÊãøÂà∞‰∏Ä‰∏™Êü•ËØ¢ËØ∑Ê±ÇÂêéÔºå‰ºöÂÖàÂà∞Êü•ËØ¢ÁºìÂ≠òÁúãÁúãÔºå‰πãÂâçÊòØ‰∏çÊòØÊâßË°åËøáËøôÊù°ËØ≠Âè•„ÄÇ‰πãÂâçÊâßË°åËøáÁöÑËØ≠Âè•ÂèäÂÖ∂ÁªìÊûúÂèØËÉΩ‰ºö‰ª• key-value ÂØπÁöÑÂΩ¢ÂºèÔºåË¢´Áõ¥Êé•ÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇkey ÊòØÊü•ËØ¢ÁöÑËØ≠Âè•Ôºåvalue ÊòØÊü•ËØ¢ÁöÑÁªìÊûú„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÊü•ËØ¢ËÉΩÂ§üÁõ¥Êé•Âú®Ëøô‰∏™ÁºìÂ≠ò‰∏≠ÊâæÂà∞ keyÔºåÈÇ£‰πàËøô‰∏™ value Â∞±‰ºöË¢´Áõ¥Êé•ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</p><p>Â¶ÇÊûúËØ≠Âè•‰∏çÂú®Êü•ËØ¢ÁºìÂ≠ò‰∏≠ÔºåÂ∞±‰ºöÁªßÁª≠ÂêéÈù¢ÁöÑÊâßË°åÈò∂ÊÆµ„ÄÇÊâßË°åÂÆåÊàêÂêéÔºåÊâßË°åÁªìÊûú‰ºöË¢´Â≠òÂÖ•Êü•ËØ¢ÁºìÂ≠ò‰∏≠„ÄÇ‰Ω†ÂèØ‰ª•ÁúãÂà∞ÔºåÂ¶ÇÊûúÊü•ËØ¢ÂëΩ‰∏≠ÁºìÂ≠òÔºåMySQL ‰∏çÈúÄË¶ÅÊâßË°åÂêéÈù¢ÁöÑÂ§çÊùÇÊìç‰ΩúÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•ËøîÂõûÁªìÊûúÔºåËøô‰∏™ÊïàÁéá‰ºöÂæàÈ´ò„ÄÇ</p><p><strong>‰ΩÜÊòØÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÊàë‰ºöÂª∫ËÆÆ‰Ω†‰∏çË¶Å‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÔºå‰∏∫‰ªÄ‰πàÂë¢ÔºüÂõ†‰∏∫Êü•ËØ¢ÁºìÂ≠òÂæÄÂæÄÂºäÂ§ß‰∫éÂà©„ÄÇ</strong></p><p>Êü•ËØ¢ÁºìÂ≠òÁöÑÂ§±ÊïàÈùûÂ∏∏È¢ëÁπÅÔºåÂè™Ë¶ÅÊúâÂØπ‰∏Ä‰∏™Ë°®ÁöÑÊõ¥Êñ∞ÔºåËøô‰∏™Ë°®‰∏äÊâÄÊúâÁöÑÊü•ËØ¢ÁºìÂ≠òÈÉΩ‰ºöË¢´Ê∏ÖÁ©∫„ÄÇÂõ†Ê≠§ÂæàÂèØËÉΩ‰Ω†Ë¥πÂä≤Âú∞ÊääÁªìÊûúÂ≠òËµ∑Êù•ÔºåËøòÊ≤°‰ΩøÁî®Âë¢ÔºåÂ∞±Ë¢´‰∏Ä‰∏™Êõ¥Êñ∞ÂÖ®Ê∏ÖÁ©∫‰∫Ü„ÄÇÂØπ‰∫éÊõ¥Êñ∞ÂéãÂäõÂ§ßÁöÑÊï∞ÊçÆÂ∫ìÊù•ËØ¥ÔºåÊü•ËØ¢ÁºìÂ≠òÁöÑÂëΩ‰∏≠Áéá‰ºöÈùûÂ∏∏‰Ωé„ÄÇÈô§Èùû‰Ω†ÁöÑ‰∏öÂä°Â∞±ÊòØÊúâ‰∏ÄÂº†ÈùôÊÄÅË°®ÔºåÂæàÈïøÊó∂Èó¥Êâç‰ºöÊõ¥Êñ∞‰∏ÄÊ¨°„ÄÇÊØîÂ¶ÇÔºå‰∏Ä‰∏™Á≥ªÁªüÈÖçÁΩÆË°®ÔºåÈÇ£ËøôÂº†Ë°®‰∏äÁöÑÊü•ËØ¢ÊâçÈÄÇÂêà‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇ</p><p>Â•ΩÂú® MySQL ‰πüÊèê‰æõ‰∫ÜËøôÁßç‚ÄúÊåâÈúÄ‰ΩøÁî®‚ÄùÁöÑÊñπÂºè„ÄÇ‰Ω†ÂèØ‰ª•Â∞ÜÂèÇÊï∞ <strong>query_cache_type</strong> ËÆæÁΩÆÊàê DEMANDÔºàËøòÊúâ ON„ÄÅOFFÔºâÔºåËøôÊ†∑ÂØπ‰∫éÈªòËÆ§ÁöÑ SQL ËØ≠Âè•ÈÉΩ‰∏ç‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠ò„ÄÇËÄåÂØπ‰∫é‰Ω†Á°ÆÂÆöË¶Å‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÁöÑËØ≠Âè•ÔºåÂèØ‰ª•Áî® SQL_CACHE ÊòæÂºèÊåáÂÆöÔºåÂÉè‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè•‰∏ÄÊ†∑Ôºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; select SQL_CACHE * from T where ID=10Ôºõ
show variables like &#39;%query_cache%&#39; # variables ÂèØ‰ª•ÁúãÊü•ËØ¢ÁºìÂ≠òÂèÇÊï∞ query_cache_type
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåMySQL 8.0 ÁâàÊú¨Áõ¥Êé•Â∞ÜÊü•ËØ¢ÁºìÂ≠òÁöÑÊï¥ÂùóÂäüËÉΩÂà†Êéâ‰∫ÜÔºå‰πüÂ∞±ÊòØËØ¥ 8.0 ÂºÄÂßãÂΩªÂ∫ïÊ≤°ÊúâËøô‰∏™ÂäüËÉΩ‰∫Ü„ÄÇÔºàËØ≠Âè•‰∏ÄÊõ¥Êñ∞Â∞±Ê≤°ÂëΩ‰∏≠Áéá‰ΩéÔºåÂ∫üÊó∂Èó¥Ôºâ</p><h2 id="_4-ÂàÜÊûêÂô®" tabindex="-1"><a class="header-anchor" href="#_4-ÂàÜÊûêÂô®"><span>4.ÂàÜÊûêÂô®</span></a></h2><blockquote><p>ÂÅö‰ªÄ‰πàÔºöËØçÊ≥ïÂàÜÊûê -&gt; ËØ≠Ê≥ïÂàÜÊûê</p></blockquote><p>Â¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠òÔºåÂ∞±Ë¶ÅÂºÄÂßãÁúüÊ≠£ÊâßË°åËØ≠Âè•‰∫Ü„ÄÇÈ¶ñÂÖàÔºåMySQL ÈúÄË¶ÅÁü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πàÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπ SQL ËØ≠Âè•ÂÅöËß£Êûê„ÄÇ</p><p>ÂàÜÊûêÂô®ÂÖà‰ºöÂÅö‚ÄúËØçÊ≥ïÂàÜÊûê‚Äù„ÄÇ‰Ω†ËæìÂÖ•ÁöÑÊòØÁî±Â§ö‰∏™Â≠óÁ¨¶‰∏≤ÂíåÁ©∫Ê†ºÁªÑÊàêÁöÑ‰∏ÄÊù° SQL ËØ≠Âè•ÔºåMySQL ÈúÄË¶ÅËØÜÂà´Âá∫ÈáåÈù¢ÁöÑÂ≠óÁ¨¶‰∏≤ÂàÜÂà´ÊòØ‰ªÄ‰πàÔºå‰ª£Ë°®‰ªÄ‰πà„ÄÇ</p><p>MySQL ‰ªé‰Ω†ËæìÂÖ•ÁöÑ&quot;select&quot;Ëøô‰∏™ÂÖ≥ÈîÆÂ≠óËØÜÂà´Âá∫Êù•ÔºåËøôÊòØ‰∏Ä‰∏™Êü•ËØ¢ËØ≠Âè•„ÄÇÂÆÉ‰πüË¶ÅÊääÂ≠óÁ¨¶‰∏≤‚ÄúT‚ÄùËØÜÂà´Êàê‚ÄúË°®Âêç T‚ÄùÔºåÊääÂ≠óÁ¨¶‰∏≤‚ÄúID‚ÄùËØÜÂà´Êàê‚ÄúÂàó ID‚Äù„ÄÇ</p><p>ÂÅöÂÆå‰∫ÜËøô‰∫õËØÜÂà´‰ª•ÂêéÔºåÂ∞±Ë¶ÅÂÅö‚ÄúËØ≠Ê≥ïÂàÜÊûê‚Äù„ÄÇÊ†πÊçÆËØçÊ≥ïÂàÜÊûêÁöÑÁªìÊûúÔºåËØ≠Ê≥ïÂàÜÊûêÂô®‰ºöÊ†πÊçÆËØ≠Ê≥ïËßÑÂàôÔºåÂà§Êñ≠‰Ω†ËæìÂÖ•ÁöÑËøô‰∏™ SQL ËØ≠Âè•ÊòØÂê¶Êª°Ë∂≥ MySQL ËØ≠Ê≥ï„ÄÇ</p><p>Â¶ÇÊûú‰Ω†ÁöÑËØ≠Âè•‰∏çÂØπÔºåÂ∞±‰ºöÊî∂Âà∞‚ÄúYou have an error in your SQL syntax‚ÄùÁöÑÈîôËØØÊèêÈÜíÔºåÊØîÂ¶Ç‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè• select Â∞ëÊâì‰∫ÜÂºÄÂ§¥ÁöÑÂ≠óÊØç‚Äús‚Äù„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; elect * from t where ID=1;
 
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;elect * from t where ID=1&#39; at line 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>‰∏ÄËà¨ËØ≠Ê≥ïÈîôËØØ‰ºöÊèêÁ§∫Á¨¨‰∏Ä‰∏™Âá∫Áé∞ÈîôËØØÁöÑ‰ΩçÁΩÆÔºåÊâÄ‰ª•‰Ω†Ë¶ÅÂÖ≥Ê≥®ÁöÑÊòØÁ¥ßÊé•‚Äúuse near‚ÄùÁöÑÂÜÖÂÆπ„ÄÇ</p><h2 id="_5-‰ºòÂåñÂô®" tabindex="-1"><a class="header-anchor" href="#_5-‰ºòÂåñÂô®"><span>5.‰ºòÂåñÂô®</span></a></h2><blockquote><p>ÊÄé‰πàÂÅö</p></blockquote><p>ÁªèËøá‰∫ÜÂàÜÊûêÂô®ÔºåMySQL Â∞±Áü•ÈÅì‰Ω†Ë¶ÅÂÅö‰ªÄ‰πà‰∫Ü„ÄÇÂú®ÂºÄÂßãÊâßË°å‰πãÂâçÔºåËøòË¶ÅÂÖàÁªèËøá‰ºòÂåñÂô®ÁöÑÂ§ÑÁêÜ„ÄÇ</p><p>‰ºòÂåñÂô®ÊòØÂú®Ë°®ÈáåÈù¢ÊúâÂ§ö‰∏™Á¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂÜ≥ÂÆö‰ΩøÁî®Âì™‰∏™Á¥¢ÂºïÔºõÊàñËÄÖÂú®‰∏Ä‰∏™ËØ≠Âè•ÊúâÂ§öË°®ÂÖ≥ËÅîÔºàjoinÔºâÁöÑÊó∂ÂÄôÔºåÂÜ≥ÂÆöÂêÑ‰∏™Ë°®ÁöÑËøûÊé•È°∫Â∫è„ÄÇÊØîÂ¶Ç‰Ω†ÊâßË°å‰∏ãÈù¢ËøôÊ†∑ÁöÑËØ≠Âè•ÔºåËøô‰∏™ËØ≠Âè•ÊòØÊâßË°å‰∏§‰∏™Ë°®ÁöÑ joinÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; select * from t1 join t2 using(ID)  where t1.c=10 and t2.d=20;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>Êó¢ÂèØ‰ª•ÂÖà‰ªéË°® t1 ÈáåÈù¢ÂèñÂá∫ c=10 ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞Ë°® t2ÔºåÂÜçÂà§Êñ≠ t2 ÈáåÈù¢ d ÁöÑÂÄºÊòØÂê¶Á≠â‰∫é 20„ÄÇ</li><li>‰πüÂèØ‰ª•ÂÖà‰ªéË°® t2 ÈáåÈù¢ÂèñÂá∫ d=20 ÁöÑËÆ∞ÂΩïÁöÑ ID ÂÄºÔºåÂÜçÊ†πÊçÆ ID ÂÄºÂÖ≥ËÅîÂà∞ t1ÔºåÂÜçÂà§Êñ≠ t1 ÈáåÈù¢ c ÁöÑÂÄºÊòØÂê¶Á≠â‰∫é 10„ÄÇ</li></ul><p>Ëøô‰∏§ÁßçÊâßË°åÊñπÊ≥ïÁöÑÈÄªËæëÁªìÊûúÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÊâßË°åÁöÑÊïàÁéá‰ºöÊúâ‰∏çÂêåÔºåËÄå‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÂÜ≥ÂÆöÈÄâÊã©‰ΩøÁî®Âì™‰∏Ä‰∏™ÊñπÊ°à„ÄÇ</p><p>‰ºòÂåñÂô®Èò∂ÊÆµÂÆåÊàêÂêéÔºåËøô‰∏™ËØ≠Âè•ÁöÑÊâßË°åÊñπÊ°àÂ∞±Á°ÆÂÆö‰∏ãÊù•‰∫ÜÔºåÁÑ∂ÂêéËøõÂÖ•ÊâßË°åÂô®Èò∂ÊÆµ„ÄÇÂ¶ÇÊûú‰Ω†ËøòÊúâ‰∏Ä‰∫õÁñëÈóÆÔºåÊØîÂ¶Ç<strong>‰ºòÂåñÂô®ÊòØÊÄé‰πàÈÄâÊã©Á¥¢Âºï</strong>ÁöÑÔºåÊúâÊ≤°ÊúâÂèØËÉΩÈÄâÊã©ÈîôÁ≠âÁ≠âÔºåÊ≤°ÂÖ≥Á≥ªÔºåÊàë‰ºöÂú®ÂêéÈù¢ÁöÑÊñáÁ´†‰∏≠ÂçïÁã¨Â±ïÂºÄËØ¥Êòé‰ºòÂåñÂô®ÁöÑÂÜÖÂÆπ„ÄÇ</p><h2 id="_6-ÊâßË°åÂô®" tabindex="-1"><a class="header-anchor" href="#_6-ÊâßË°åÂô®"><span>6.ÊâßË°åÂô®</span></a></h2><p>MySQL ÈÄöËøáÂàÜÊûêÂô®Áü•ÈÅì‰∫Ü‰Ω†Ë¶ÅÂÅö‰ªÄ‰πàÔºåÈÄöËøá‰ºòÂåñÂô®Áü•ÈÅì‰∫ÜËØ•ÊÄé‰πàÂÅöÔºå‰∫éÊòØÂ∞±ËøõÂÖ•‰∫ÜÊâßË°åÂô®Èò∂ÊÆµÔºåÂºÄÂßãÊâßË°åËØ≠Âè•„ÄÇ</p><p>ÂºÄÂßãÊâßË°åÁöÑÊó∂ÂÄôÔºåË¶ÅÂÖàÂà§Êñ≠‰∏Ä‰∏ã‰Ω†ÂØπËøô‰∏™Ë°® T ÊúâÊ≤°ÊúâÊâßË°åÊü•ËØ¢ÁöÑÊùÉÈôêÔºåÂ¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±‰ºöËøîÂõûÊ≤°ÊúâÊùÉÈôêÁöÑÈîôËØØÔºåÂ¶Ç‰∏ãÊâÄÁ§∫ (Âú®Â∑•Á®ãÂÆûÁé∞‰∏äÔºåÂ¶ÇÊûúÂëΩ‰∏≠Êü•ËØ¢ÁºìÂ≠òÔºå‰ºöÂú®Êü•ËØ¢ÁºìÂ≠òËøîÂõûÁªìÊûúÁöÑÊó∂ÂÄôÔºåÂÅöÊùÉÈôêÈ™åËØÅ„ÄÇÊü•ËØ¢‰πü‰ºöÂú®‰ºòÂåñÂô®‰πãÂâçË∞ÉÁî® precheck È™åËØÅÊùÉÈôê)„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; select * from T where ID=10;
 
ERROR 1142 (42000): SELECT command denied to user &#39;b&#39;@&#39;localhost&#39; for table &#39;T&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Â¶ÇÊûúÊúâÊùÉÈôêÔºåÂ∞±ÊâìÂºÄË°®ÁªßÁª≠ÊâßË°å„ÄÇÊâìÂºÄË°®ÁöÑÊó∂ÂÄôÔºåÊâßË°åÂô®Â∞±‰ºöÊ†πÊçÆË°®ÁöÑÂºïÊìéÂÆö‰πâÔºåÂéª‰ΩøÁî®Ëøô‰∏™ÂºïÊìéÊèê‰æõÁöÑÊé•Âè£„ÄÇ</p><p>ÊØîÂ¶ÇÊàë‰ª¨Ëøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑË°® T ‰∏≠ÔºåID Â≠óÊÆµÊ≤°ÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàÊâßË°åÂô®ÁöÑÊâßË°åÊµÅÁ®ãÊòØËøôÊ†∑ÁöÑÔºö</p><ol><li>Ë∞ÉÁî® InnoDB ÂºïÊìéÊé•Âè£ÂèñËøô‰∏™Ë°®ÁöÑÁ¨¨‰∏ÄË°åÔºåÂà§Êñ≠ ID ÂÄºÊòØ‰∏çÊòØ 10ÔºåÂ¶ÇÊûú‰∏çÊòØÂàôË∑≥ËøáÔºåÂ¶ÇÊûúÊòØÂàôÂ∞ÜËøôË°åÂ≠òÂú®ÁªìÊûúÈõÜ‰∏≠Ôºõ</li><li>Ë∞ÉÁî®ÂºïÊìéÊé•Âè£Âèñ‚Äú‰∏ã‰∏ÄË°å‚ÄùÔºåÈáçÂ§çÁõ∏ÂêåÁöÑÂà§Êñ≠ÈÄªËæëÔºåÁõ¥Âà∞ÂèñÂà∞Ëøô‰∏™Ë°®ÁöÑÊúÄÂêé‰∏ÄË°å„ÄÇ</li><li>ÊâßË°åÂô®Â∞Ü‰∏äËø∞ÈÅçÂéÜËøáÁ®ã‰∏≠ÊâÄÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑË°åÁªÑÊàêÁöÑËÆ∞ÂΩïÈõÜ‰Ωú‰∏∫ÁªìÊûúÈõÜËøîÂõûÁªôÂÆ¢Êà∑Á´Ø„ÄÇ</li></ol><p>Ëá≥Ê≠§ÔºåËøô‰∏™ËØ≠Âè•Â∞±ÊâßË°åÂÆåÊàê‰∫Ü„ÄÇ</p><p>ÂØπ‰∫éÊúâÁ¥¢ÂºïÁöÑË°®ÔºåÊâßË°åÁöÑÈÄªËæë‰πüÂ∑Æ‰∏çÂ§ö„ÄÇÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî®ÁöÑÊòØ‚ÄúÂèñÊª°Ë∂≥Êù°‰ª∂ÁöÑÁ¨¨‰∏ÄË°å‚ÄùËøô‰∏™Êé•Âè£Ôºå‰πãÂêéÂæ™ÁéØÂèñ‚ÄúÊª°Ë∂≥Êù°‰ª∂ÁöÑ‰∏ã‰∏ÄË°å‚ÄùËøô‰∏™Êé•Âè£ÔºåËøô‰∫õÊé•Âè£ÈÉΩÊòØÂºïÊìé‰∏≠Â∑≤ÁªèÂÆö‰πâÂ•ΩÁöÑ„ÄÇ</p><p>‰Ω†‰ºöÂú®Êï∞ÊçÆÂ∫ìÁöÑÊÖ¢Êü•ËØ¢Êó•Âøó‰∏≠ÁúãÂà∞‰∏Ä‰∏™ rows_examined ÁöÑÂ≠óÊÆµÔºåË°®Á§∫Ëøô‰∏™ËØ≠Âè•ÊâßË°åËøáÁ®ã‰∏≠Êâ´Êèè‰∫ÜÂ§öÂ∞ëË°å„ÄÇËøô‰∏™ÂÄºÂ∞±ÊòØÂú®ÊâßË°åÂô®ÊØèÊ¨°Ë∞ÉÁî®ÂºïÊìéËé∑ÂèñÊï∞ÊçÆË°åÁöÑÊó∂ÂÄôÁ¥ØÂä†ÁöÑ„ÄÇ</p><p>Âú®Êúâ‰∫õÂú∫ÊôØ‰∏ãÔºåÊâßË°åÂô®Ë∞ÉÁî®‰∏ÄÊ¨°ÔºåÂú®ÂºïÊìéÂÜÖÈÉ®ÂàôÊâ´Êèè‰∫ÜÂ§öË°åÔºåÂõ†Ê≠§**ÂºïÊìéÊâ´ÊèèË°åÊï∞Ë∑ü rows_examined Âπ∂‰∏çÊòØÂÆåÂÖ®Áõ∏ÂêåÁöÑ„ÄÇ**Êàë‰ª¨ÂêéÈù¢‰ºö‰∏ìÈó®Êúâ‰∏ÄÁØáÊñáÁ´†Êù•ËÆ≤Â≠òÂÇ®ÂºïÊìéÁöÑÂÜÖÈÉ®Êú∫Âà∂ÔºåÈáåÈù¢‰ºöÊúâËØ¶ÁªÜÁöÑËØ¥Êòé„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>#Ê≥®ÊÑèÂú®‰∫§‰∫íÁïåÈù¢ËøõË°åÁöÑËÆæÁΩÆÔºåÂ¶ÇÊûúÊï∞ÊçÆÂ∫ìËøõË°åÈáçÂêØÔºåËøô‰∫õËÆæÁΩÆÈÉΩ‰ºöÂ§±Êïà„ÄÇÂ¶ÇÊûúË¶ÅÊ∞∏‰πÖÁîüÊïàÔºåÈúÄË¶Å‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Ôºö
show variables like &#39;slow_query_log%&#39; # ÊÖ¢Êü•ËØ¢ÊòØÂê¶ÂºÄÂêØÔºå‰øùÂ≠òË∑ØÂæÑ
show variables like &#39;long_query_time&#39; # Unit s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ë°•ÂÖÖÔºöÊàë‰ª¨ÈÄöËøáÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåÂèØ‰ª•ÂÆö‰ΩçÂà∞ÊòØÂì™‰∏ÄÊù°ËØ≠Âè•Êü•ËØ¢ÊØîËæÉÊÖ¢ÔºåÊâæÂà∞ËøôÊù°ËØ≠Âè•‰πãÂêéÔºåÂ¶Ç‰ΩïÂéªÂàÜÊûêÂÆÉÊÖ¢ÁöÑÂéüÂõ†Âë¢?ÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÔºåÂèØ‰ª•ÈÄöËøáexplainËß£ÊûêÔºåÊâßË°åÂëΩ‰ª§Ôºöexplain (sqlËØ≠Âè•)</p><img src="https://images.zzq8.cn/img/202212051532175.png" alt="image-20221205153205065" style="zoom:50%;"><!----><p>ÈúÄË¶ÅÈáçÁÇπÂÖ≥Ê≥®possible_keys„ÄÅkey„ÄÅrowsËøôÂá†‰∏™Â±ûÊÄßÂÄº„ÄÇ</p><p>possible_keysË°®Á§∫ËØ•ËØ≠Âè•ÂèØËÉΩ‰ºöÁî®Âà∞ÁöÑÁ¥¢Âºï„ÄÇ</p><p>keyË°®Á§∫ËØ•ËØ≠Âè•ÂÆûÈôÖÁî®Âà∞ÁöÑÁ¥¢Âºï„ÄÇ</p><p>rowsË°®Á§∫ËØ•ËØ≠Âè•Êâ´ÊèèÁöÑË°åÊï∞„ÄÇ</p><p>ÈÄöËøáËøô‰∫õÂ±ûÊÄßÔºåÊàë‰ª¨ÂèØ‰ª•Â§ßËá¥ÁöÑÂàÜÊûê‰∏Ä‰∏ãÔºåÁ¨¨‰∏ÄÊù°ËØ≠Âè•Ê≤°ÊúâËµ∞Á¥¢ÂºïÔºåÂÆÉÊâ´Êèè‰∫Ü9‰∏áÂ§öË°åÊï∞ÊçÆÔºåÊâÄ‰ª•Êü•ËØ¢ÈÄüÂ∫¶ÊØîËæÉÊÖ¢ÔºåËÄåÁ¨¨‰∫åÊù°ËØ≠Âè•Ëµ∞‰∫Ü‰∏ªÈîÆÁ¥¢ÂºïÔºå‰ªÖ‰ªÖÊâ´Êèè‰∫Ü‰∏ÄÊù°ËØ≠Âè•ÔºåÊâÄ‰ª•ÂÆÉÁöÑÊâßË°åÈÄüÂ∫¶ÊØîËæÉÂø´„ÄÇËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•Âø´ÈÄüÂÆö‰ΩçÂà∞ÈóÆÈ¢òÔºåÁÑ∂ÂêéÈíàÂØπÊÄßÁöÑÂéªËß£ÂÜ≥„ÄÇ</p><blockquote><p>Personal QuestionÔºöÊúâ‰∏™ÈóÆÈ¢ò‰∏çÂ§™ÊòéÁôΩÔºå‰∏∫‰ªÄ‰πàÂØπÊùÉÈôêÁöÑÊ£ÄÊü•‰∏çÂú®‰ºòÂåñÂô®‰πãÂâçÂÅöÔºü</p><p>‰ΩúËÄÖÂõûÂ§ç: Êúâ‰∫õÊó∂ÂÄôÔºåSQLËØ≠Âè•Ë¶ÅÊìç‰ΩúÁöÑË°®‰∏çÂè™ÊòØSQLÂ≠óÈù¢‰∏äÈÇ£‰∫õ„ÄÇÊØîÂ¶ÇÂ¶ÇÊûúÊúâ‰∏™<a href="https://javaguide.cn/database/mysql/a-thousand-lines-of-mysql-study-notes.html#%E8%A7%A6%E5%8F%91%E5%99%A8" target="_blank" rel="noopener noreferrer">Ëß¶ÂèëÂô®<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ÔºåÂæóÂú®ÊâßË°åÂô®Èò∂ÊÆµÔºàËøáÁ®ã‰∏≠ÔºâÊâçËÉΩÁ°ÆÂÆö„ÄÇ‰ºòÂåñÂô®Èò∂ÊÆµÂâçÊòØÊó†ËÉΩ‰∏∫ÂäõÁöÑ</p></blockquote><blockquote><p>QuestionÔºö</p><p>ÊàëÁªô‰Ω†Áïô‰∏Ä‰∏™ÈóÆÈ¢òÂêßÔºåÂ¶ÇÊûúË°® T ‰∏≠Ê≤°ÊúâÂ≠óÊÆµ kÔºåËÄå‰Ω†ÊâßË°å‰∫ÜËøô‰∏™ËØ≠Âè• select * from T where k=1, ÈÇ£ËÇØÂÆöÊòØ‰ºöÊä•‚Äú‰∏çÂ≠òÂú®Ëøô‰∏™Âàó‚ÄùÁöÑÈîôËØØÔºö ‚ÄúUnknown column ‚Äòk‚Äô in ‚Äòwhere clause‚Äô‚Äù„ÄÇ‰Ω†ËßâÂæóËøô‰∏™ÈîôËØØÊòØÂú®Êàë‰ª¨‰∏äÈù¢ÊèêÂà∞ÁöÑÂì™‰∏™Èò∂ÊÆµÊä•Âá∫Êù•ÁöÑÂë¢Ôºü</p><p>AnswerÔºö</p><p>ÊàëÁåúÊòØ ÂàÜÊûêÂô®Èò∂ÊÆµ Bingo</p></blockquote><h1 id="_02‰∏®Êó•ÂøóÁ≥ªÁªü-‰∏ÄÊù°sqlÊõ¥Êñ∞ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ" tabindex="-1"><a class="header-anchor" href="#_02‰∏®Êó•ÂøóÁ≥ªÁªü-‰∏ÄÊù°sqlÊõ¥Êñ∞ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ"><span>02‰∏®Êó•ÂøóÁ≥ªÁªüÔºö‰∏ÄÊù°SQLÊõ¥Êñ∞ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑÔºü</span></a></h1><h2 id="_1-ÂâçË®Ä" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä"><span>1.ÂâçË®Ä</span></a></h2><blockquote><p>‰∏ÄÊù°Êõ¥Êñ∞ËØ≠Âè•ÁöÑÊâßË°åÊµÅÁ®ãÂèàÊòØÊÄéÊ†∑ÁöÑÂë¢Ôºü</p></blockquote><p>‰πãÂâç‰Ω†ÂèØËÉΩÁªèÂ∏∏Âê¨ DBA Âêå‰∫ãËØ¥ÔºåMySQL ÂèØ‰ª•ÊÅ¢Â§çÂà∞Âçä‰∏™ÊúàÂÜÖ‰ªªÊÑè‰∏ÄÁßíÁöÑÁä∂ÊÄÅÔºåÊÉäÂèπÁöÑÂêåÊó∂Ôºå‰Ω†ÊòØ‰∏çÊòØÂøÉ‰∏≠‰πü‰ºö‰∏çÂÖç‰ºöÂ•ΩÂ•áÔºåËøôÊòØÊÄéÊ†∑ÂÅöÂà∞ÁöÑÂë¢Ôºü</p><p>Êàë‰ª¨ËøòÊòØ‰ªé‰∏Ä‰∏™Ë°®ÁöÑ‰∏ÄÊù°Êõ¥Êñ∞ËØ≠Âè•ËØ¥Ëµ∑Ôºå‰∏ãÈù¢ÊòØËøô‰∏™Ë°®ÁöÑÂàõÂª∫ËØ≠Âè•ÔºåËøô‰∏™Ë°®Êúâ‰∏Ä‰∏™‰∏ªÈîÆ ID Âíå‰∏Ä‰∏™Êï¥ÂûãÂ≠óÊÆµ cÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; create table T(ID int primary key, c int);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Â¶ÇÊûúË¶ÅÂ∞Ü ID=2 Ëøô‰∏ÄË°åÁöÑÂÄºÂä† 1ÔºåSQL ËØ≠Âè•Â∞±‰ºöËøô‰πàÂÜôÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; update T set c=c+1 where ID=2;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ÂâçÈù¢ÊàëÊúâË∑ü‰Ω†‰ªãÁªçËøá SQL ËØ≠Âè•Âü∫Êú¨ÁöÑÊâßË°åÈìæË∑ØÔºåËøôÈáåÊàëÂÜçÊääÈÇ£Âº†ÂõæÊãøËøáÊù•Ôºå‰Ω†‰πüÂèØ‰ª•ÂÖàÁÆÄÂçïÁúãÁúãËøô‰∏™ÂõæÂõûÈ°æ‰∏ã„ÄÇÈ¶ñÂÖàÔºåÂèØ‰ª•Á°ÆÂÆöÁöÑËØ¥ÔºåÊü•ËØ¢ËØ≠Âè•ÁöÑÈÇ£‰∏ÄÂ•óÊµÅÁ®ãÔºåÊõ¥Êñ∞ËØ≠Âè•‰πüÊòØÂêåÊ†∑‰ºöËµ∞‰∏ÄÈÅç„ÄÇ</p><figure><img src="https://images.zzq8.cn/img/202212021612352.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!----><p>‰Ω†ÊâßË°åËØ≠Âè•ÂâçË¶ÅÂÖàËøûÊé•Êï∞ÊçÆÂ∫ìÔºåËøôÊòØËøûÊé•Âô®ÁöÑÂ∑•‰Ωú„ÄÇ</p><p>ÂâçÈù¢Êàë‰ª¨ËØ¥ËøáÔºåÂú®‰∏Ä‰∏™Ë°®‰∏äÊúâÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåË∑üËøô‰∏™Ë°®ÊúâÂÖ≥ÁöÑÊü•ËØ¢ÁºìÂ≠ò‰ºöÂ§±ÊïàÔºåÊâÄ‰ª•ËøôÊù°ËØ≠Âè•Â∞±‰ºöÊääË°® T ‰∏äÊâÄÊúâÁºìÂ≠òÁªìÊûúÈÉΩÊ∏ÖÁ©∫„ÄÇËøô‰πüÂ∞±ÊòØÊàë‰ª¨‰∏ÄËà¨‰∏çÂª∫ËÆÆ‰ΩøÁî®Êü•ËØ¢ÁºìÂ≠òÁöÑÂéüÂõ†„ÄÇ</p><p>Êé•‰∏ãÊù•ÔºåÂàÜÊûêÂô®‰ºöÈÄöËøáËØçÊ≥ïÂíåËØ≠Ê≥ïËß£ÊûêÁü•ÈÅìËøôÊòØ‰∏ÄÊù°Êõ¥Êñ∞ËØ≠Âè•„ÄÇ‰ºòÂåñÂô®ÂÜ≥ÂÆöË¶Å‰ΩøÁî® ID Ëøô‰∏™Á¥¢Âºï„ÄÇÁÑ∂ÂêéÔºåÊâßË°åÂô®Ë¥üË¥£ÂÖ∑‰ΩìÊâßË°åÔºåÊâæÂà∞Ëøô‰∏ÄË°åÔºåÁÑ∂ÂêéÊõ¥Êñ∞„ÄÇ</p><p><strong>‰∏éÊü•ËØ¢ÊµÅÁ®ã‰∏ç‰∏ÄÊ†∑ÁöÑÊòØÔºåÊõ¥Êñ∞ÊµÅÁ®ãËøòÊ∂âÂèä‰∏§‰∏™ÈáçË¶ÅÁöÑÊó•ÂøóÊ®°Âùó</strong>ÔºåÂÆÉ‰ª¨Ê≠£ÊòØÊàë‰ª¨‰ªäÂ§©Ë¶ÅËÆ®ËÆ∫ÁöÑ‰∏ªËßíÔºöredo logÔºàÈáçÂÅöÊó•ÂøóÔºâÂíå binlogÔºàÂΩíÊ°£Êó•ÂøóÔºâ„ÄÇÂ¶ÇÊûúÊé•Ëß¶ MySQLÔºåÈÇ£Ëøô‰∏§‰∏™ËØçËÇØÂÆöÊòØÁªï‰∏çËøáÁöÑÔºåÊàëÂêéÈù¢ÁöÑÂÜÖÂÆπÈáå‰πü‰ºö‰∏çÊñ≠Âú∞Âíå‰Ω†Âº∫Ë∞É„ÄÇ‰∏çËøáËØùËØ¥ÂõûÊù•Ôºåredo log Âíå binlog Âú®ËÆæËÆ°‰∏äÊúâÂæàÂ§öÊúâÊÑèÊÄùÁöÑÂú∞ÊñπÔºåËøô‰∫õËÆæËÆ°ÊÄùË∑Ø‰πüÂèØ‰ª•Áî®Âà∞‰Ω†Ëá™Â∑±ÁöÑÁ®ãÂ∫èÈáå„ÄÇ</p><h2 id="_2-redo-log" tabindex="-1"><a class="header-anchor" href="#_2-redo-log"><span>2.redo log</span></a></h2><blockquote><p>redo log ÊòØ InnoDB ÂºïÊìéÁâπÊúâÁöÑÊó•Âøó„ÄÇ</p><p>‰∏Ä‰∏™Âõ∫ÂÆöÂ§ßÂ∞èÔºå**‚ÄúÂæ™ÁéØÂÜô‚Äù**ÁöÑÊó•ÂøóÊñá‰ª∂ÔºåËÆ∞ÂΩïÁöÑÊòØÁâ©ÁêÜÊó•Âøó‚Äî‚Äî‚ÄúÂú®Êüê‰∏™Êï∞ÊçÆÈ°µ‰∏äÂÅö‰∫ÜÊüê‰∏™‰øÆÊîπ‚ÄùÔºàÈ°µÁöÑÊ¶ÇÂøµÁúãÂ∞èÁªìÔºâ„ÄÇ</p><p><a href="https://cloud.tencent.com/developer/article/1757612" target="_blank" rel="noopener noreferrer">‰∏ÄÁõ¥Ë¥πËß£ÁöÑÔºåËøô‰∏™Êó•ÂøóÂ≠òÂú®ÁöÑÂøÖË¶ÅÊÄßÔºö<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ÊÉ≥Ë¶ÅÊÅ¢Â§ç<strong>Êú™Âà∑Áõò‰ΩÜÂ∑≤ÁªèÂÜôÂÖ• redo log Âíå binlog ÁöÑÊï∞ÊçÆ</strong>Âà∞ÂÜÖÂ≠òÊó∂Ôºåbinlog ÊòØÊó†Ê≥ïÊÅ¢Â§çÁöÑ„ÄÇËôΩÁÑ∂ binlog Êã•ÊúâÂÖ®ÈáèÁöÑÊó•ÂøóÔºå‰ΩÜÊ≤°Êúâ‰∏Ä‰∏™Ê†áÂøóËÆ© innoDB Âà§Êñ≠Âì™‰∫õÊï∞ÊçÆÂ∑≤ÁªèÂà∑ÁõòÔºåÂì™‰∫õÊï∞ÊçÆËøòÊ≤°Êúâ„ÄÇ</p><p>‰ΩÜ redo log ‰∏ç‰∏ÄÊ†∑ÔºåÂè™Ë¶ÅÂà∑ÂÖ•Á£ÅÁõòÁöÑÊï∞ÊçÆÔºåÈÉΩ‰ºö‰ªé redo log ‰∏≠ÊäπÊéâÔºåÊï∞ÊçÆÂ∫ìÈáçÂêØÂêéÔºåÁõ¥Êé•Êää redo log ‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÊÅ¢Â§çËá≥ÂÜÖÂ≠òÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πà redo log ÂÖ∑Êúâ crash-safe ÁöÑËÉΩÂäõÔºåËÄå binlog ‰∏çÂÖ∑Â§á„ÄÇ</p></blockquote><p>‰∏çÁü•ÈÅì‰Ω†ËøòËÆ∞‰∏çËÆ∞Âæó„ÄäÂ≠î‰πôÂ∑±„ÄãËøôÁØáÊñáÁ´†ÔºåÈÖíÂ∫óÊéåÊüúÊúâ‰∏Ä‰∏™Á≤âÊùøÔºå‰∏ìÈó®Áî®Êù•ËÆ∞ÂΩïÂÆ¢‰∫∫ÁöÑËµäË¥¶ËÆ∞ÂΩï„ÄÇÂ¶ÇÊûúËµäË¥¶ÁöÑ‰∫∫‰∏çÂ§öÔºåÈÇ£‰πà‰ªñÂèØ‰ª•ÊääÈ°æÂÆ¢ÂêçÂíåË¥¶ÁõÆÂÜôÂú®Êùø‰∏ä„ÄÇ‰ΩÜÂ¶ÇÊûúËµäË¥¶ÁöÑ‰∫∫Â§ö‰∫ÜÔºåÁ≤âÊùøÊÄª‰ºöÊúâËÆ∞‰∏ç‰∏ãÁöÑÊó∂ÂÄôÔºåËøô‰∏™Êó∂ÂÄôÊéåÊüú‰∏ÄÂÆöËøòÊúâ‰∏Ä‰∏™‰∏ìÈó®ËÆ∞ÂΩïËµäË¥¶ÁöÑË¥¶Êú¨„ÄÇ</p><p>Â¶ÇÊûúÊúâ‰∫∫Ë¶ÅËµäË¥¶ÊàñËÄÖËøòË¥¶ÁöÑËØùÔºåÊéåÊüú‰∏ÄËà¨Êúâ‰∏§ÁßçÂÅöÊ≥ïÔºö</p><ul><li>‰∏ÄÁßçÂÅöÊ≥ïÊòØÁõ¥Êé•ÊääË¥¶Êú¨ÁøªÂá∫Êù•ÔºåÊääËøôÊ¨°ËµäÁöÑË¥¶Âä†‰∏äÂéªÊàñËÄÖÊâ£Èô§ÊéâÔºõ</li><li>Âè¶‰∏ÄÁßçÂÅöÊ≥ïÊòØÂÖàÂú®Á≤âÊùø‰∏äËÆ∞‰∏ãËøôÊ¨°ÁöÑË¥¶ÔºåÁ≠âÊâìÁÉä‰ª•ÂêéÂÜçÊääË¥¶Êú¨ÁøªÂá∫Êù•Ê†∏ÁÆó„ÄÇ</li></ul><p>Âú®ÁîüÊÑèÁ∫¢ÁÅ´ÊüúÂè∞ÂæàÂøôÊó∂ÔºåÊéåÊüú‰∏ÄÂÆö‰ºöÈÄâÊã©ÂêéËÄÖÔºåÂõ†‰∏∫ÂâçËÄÖÊìç‰ΩúÂÆûÂú®ÊòØÂ§™È∫ªÁÉ¶‰∫Ü„ÄÇÈ¶ñÂÖàÔºå‰Ω†ÂæóÊâæÂà∞Ëøô‰∏™‰∫∫ÁöÑËµäË¥¶ÊÄªÈ¢ùÈÇ£Êù°ËÆ∞ÂΩï„ÄÇ‰Ω†ÊÉ≥ÊÉ≥ÔºåÂØÜÂØÜÈ∫ªÈ∫ªÂá†ÂçÅÈ°µÔºåÊéåÊüúË¶ÅÊâæÂà∞ÈÇ£‰∏™ÂêçÂ≠óÔºåÂèØËÉΩËøòÂæóÂ∏¶‰∏äËÄÅËä±ÈïúÊÖ¢ÊÖ¢ÊâæÔºåÊâæÂà∞‰πãÂêéÂÜçÊãøÂá∫ÁÆóÁõòËÆ°ÁÆóÔºåÊúÄÂêéÂÜçÂ∞ÜÁªìÊûúÂÜôÂõûÂà∞Ë¥¶Êú¨‰∏ä„ÄÇ</p><p>ËøôÊï¥‰∏™ËøáÁ®ãÊÉ≥ÊÉ≥ÈÉΩÈ∫ªÁÉ¶„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºåËøòÊòØÂÖàÂú®Á≤âÊùø‰∏äËÆ∞‰∏Ä‰∏ãÊñπ‰æø„ÄÇ‰Ω†ÊÉ≥ÊÉ≥ÔºåÂ¶ÇÊûúÊéåÊüúÊ≤°ÊúâÁ≤âÊùøÁöÑÂ∏ÆÂä©ÔºåÊØèÊ¨°ËÆ∞Ë¥¶ÈÉΩÂæóÁøªË¥¶Êú¨ÔºåÊïàÁéáÊòØ‰∏çÊòØ‰ΩéÂæóËÆ©‰∫∫Èöæ‰ª•ÂøçÂèóÔºü</p><p>ÂêåÊ†∑ÔºåÂú® MySQL Èáå‰πüÊúâËøô‰∏™ÈóÆÈ¢òÔºåÂ¶ÇÊûúÊØè‰∏ÄÊ¨°ÁöÑÊõ¥Êñ∞Êìç‰ΩúÈÉΩÈúÄË¶ÅÂÜôËøõÁ£ÅÁõòÔºåÁÑ∂ÂêéÁ£ÅÁõò‰πüË¶ÅÊâæÂà∞ÂØπÂ∫îÁöÑÈÇ£Êù°ËÆ∞ÂΩïÔºåÁÑ∂ÂêéÂÜçÊõ¥Êñ∞ÔºåÊï¥‰∏™ËøáÁ®ã IO ÊàêÊú¨„ÄÅÊü•ÊâæÊàêÊú¨ÈÉΩÂæàÈ´ò„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåMySQL ÁöÑËÆæËÆ°ËÄÖÂ∞±Áî®‰∫ÜÁ±ª‰ººÈÖíÂ∫óÊéåÊüúÁ≤âÊùøÁöÑÊÄùË∑ØÊù•ÊèêÂçáÊõ¥Êñ∞ÊïàÁéá„ÄÇ</p><p>ËÄåÁ≤âÊùøÂíåË¥¶Êú¨ÈÖçÂêàÁöÑÊï¥‰∏™ËøáÁ®ãÔºåÂÖ∂ÂÆûÂ∞±ÊòØ MySQL ÈáåÁªèÂ∏∏ËØ¥Âà∞ÁöÑ WAL ÊäÄÊúØÔºåWAL ÁöÑÂÖ®Áß∞ÊòØ Write-Ahead LoggingÔºåÂÆÉÁöÑÂÖ≥ÈîÆÁÇπÂ∞±ÊòØ<strong>ÂÖàÂÜôÊó•ÂøóÔºåÂÜçÂÜôÁ£ÅÁõò</strong>Ôºå‰πüÂ∞±ÊòØÂÖàÂÜôÁ≤âÊùøÔºåÁ≠â‰∏çÂøôÁöÑÊó∂ÂÄôÂÜçÂÜôË¥¶Êú¨„ÄÇ</p><blockquote><p>QuestionÔºöÂÜôredoÊó•Âøó‰πüÊòØÂÜôioÔºàÊàëÁêÜËß£‰πüÊòØÂ§ñÈÉ®Â≠òÂÇ®Ôºâ„ÄÇÂêåÊ†∑ËÄóË¥πÊÄßËÉΩ„ÄÇÊÄé‰πàËÉΩÂÅöÂà∞‰ºòÂåñÂë¢</p><p>AnswerÔºöÂÜôredo logÊòØÈ°∫Â∫èÂÜôÔºàÂõ∫ÂÆöÁöÑ‰ΩçÁΩÆÂæ™ÁéØÂÜôÂÖ•ÔºâÔºå‰∏çÁî®Âéª‚ÄúÊâæ‰ΩçÁΩÆ‚ÄùÔºåËÄåÊõ¥Êñ∞Êï∞ÊçÆÈúÄË¶ÅÊâæ‰ΩçÁΩÆ</p></blockquote><p>ÂÖ∑‰ΩìÊù•ËØ¥ÔºåÂΩìÊúâ‰∏ÄÊù°ËÆ∞ÂΩïÈúÄË¶ÅÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåInnoDB ÂºïÊìéÂ∞±‰ºöÂÖàÊääËÆ∞ÂΩïÂÜôÂà∞ redo logÔºàÁ≤âÊùøÔºâÈáåÈù¢ÔºåÂπ∂Êõ¥Êñ∞ÂÜÖÂ≠òÔºåËøô‰∏™Êó∂ÂÄôÊõ¥Êñ∞Â∞±ÁÆóÂÆåÊàê‰∫Ü„ÄÇÂêåÊó∂ÔºåInnoDB ÂºïÊìé‰ºöÂú®ÈÄÇÂΩìÁöÑÊó∂ÂÄôÔºåÂ∞ÜËøô‰∏™Êìç‰ΩúËÆ∞ÂΩïÊõ¥Êñ∞Âà∞Á£ÅÁõòÈáåÈù¢ÔºåËÄåËøô‰∏™Êõ¥Êñ∞ÂæÄÂæÄÊòØÂú®Á≥ªÁªüÊØîËæÉÁ©∫Èó≤ÁöÑÊó∂ÂÄôÂÅöÔºåËøôÂ∞±ÂÉèÊâìÁÉä‰ª•ÂêéÊéåÊüúÂÅöÁöÑ‰∫ã„ÄÇ</p><p>Â¶ÇÊûú‰ªäÂ§©ËµäË¥¶ÁöÑ‰∏çÂ§öÔºåÊéåÊüúÂèØ‰ª•Á≠âÊâìÁÉäÂêéÂÜçÊï¥ÁêÜ„ÄÇ‰ΩÜÂ¶ÇÊûúÊüêÂ§©ËµäË¥¶ÁöÑÁâπÂà´Â§öÔºåÁ≤âÊùøÂÜôÊª°‰∫ÜÔºåÂèàÊÄé‰πàÂäûÂë¢ÔºüËøô‰∏™Êó∂ÂÄôÊéåÊüúÂè™Â•ΩÊîæ‰∏ãÊâã‰∏≠ÁöÑÊ¥ªÂÑøÔºåÊääÁ≤âÊùø‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜËµäË¥¶ËÆ∞ÂΩïÊõ¥Êñ∞Âà∞Ë¥¶Êú¨‰∏≠ÔºåÁÑ∂ÂêéÊääËøô‰∫õËÆ∞ÂΩï‰ªéÁ≤âÊùø‰∏äÊì¶ÊéâÔºå‰∏∫ËÆ∞Êñ∞Ë¥¶ËÖæÂá∫Á©∫Èó¥„ÄÇ</p><p>‰∏éÊ≠§Á±ª‰ººÔºåInnoDB ÁöÑ redo log ÊòØÂõ∫ÂÆöÂ§ßÂ∞èÁöÑÔºåÊØîÂ¶ÇÂèØ‰ª•ÈÖçÁΩÆ‰∏∫‰∏ÄÁªÑ 4 ‰∏™Êñá‰ª∂ÔºåÊØè‰∏™Êñá‰ª∂ÁöÑÂ§ßÂ∞èÊòØ 1GBÔºåÈÇ£‰πàËøôÂùó‚ÄúÁ≤âÊùø‚ÄùÊÄªÂÖ±Â∞±ÂèØ‰ª•ËÆ∞ÂΩï 4GB ÁöÑÊìç‰Ωú„ÄÇ‰ªéÂ§¥ÂºÄÂßãÂÜôÔºåÂÜôÂà∞Êú´Â∞æÂ∞±ÂèàÂõûÂà∞ÂºÄÂ§¥Âæ™ÁéØÂÜôÔºåÂ¶Ç‰∏ãÈù¢Ëøô‰∏™ÂõæÊâÄÁ§∫„ÄÇ</p><p><img src="https://images.zzq8.cn/img/202212071028735.png" alt="" loading="lazy">write pos ÊòØÂΩìÂâçËÆ∞ÂΩïÁöÑ‰ΩçÁΩÆÔºå‰∏ÄËæπÂÜô‰∏ÄËæπÂêéÁßªÔºåÂÜôÂà∞Á¨¨ 3 Âè∑Êñá‰ª∂Êú´Â∞æÂêéÂ∞±ÂõûÂà∞ 0 Âè∑Êñá‰ª∂ÂºÄÂ§¥„ÄÇcheckpoint ÊòØÂΩìÂâçË¶ÅÊì¶Èô§ÁöÑ‰ΩçÁΩÆÔºå‰πüÊòØÂæÄÂêéÊé®ÁßªÂπ∂‰∏îÂæ™ÁéØÁöÑÔºåÊì¶Èô§ËÆ∞ÂΩïÂâçË¶ÅÊääËÆ∞ÂΩïÊõ¥Êñ∞Âà∞Êï∞ÊçÆÊñá‰ª∂„ÄÇ</p><p>write pos Âíå checkpoint ‰πãÈó¥ÁöÑÊòØ‚ÄúÁ≤âÊùø‚Äù‰∏äËøòÁ©∫ÁùÄÁöÑÈÉ®ÂàÜÔºåÂèØ‰ª•Áî®Êù•ËÆ∞ÂΩïÊñ∞ÁöÑÊìç‰Ωú„ÄÇÂ¶ÇÊûú write pos ËøΩ‰∏ä checkpointÔºåË°®Á§∫‚ÄúÁ≤âÊùø‚ÄùÊª°‰∫ÜÔºåËøôÊó∂ÂÄô‰∏çËÉΩÂÜçÊâßË°åÊñ∞ÁöÑÊõ¥Êñ∞ÔºåÂæóÂÅú‰∏ãÊù•ÂÖàÊì¶Êéâ‰∏Ä‰∫õËÆ∞ÂΩïÔºåÊää checkpoint Êé®Ëøõ‰∏Ä‰∏ã„ÄÇ</p><p>Êúâ‰∫Ü redo logÔºåInnoDB Â∞±ÂèØ‰ª•‰øùËØÅÂç≥‰ΩøÊï∞ÊçÆÂ∫ìÂèëÁîüÂºÇÂ∏∏ÈáçÂêØÔºå‰πãÂâçÊèê‰∫§ÁöÑËÆ∞ÂΩïÈÉΩ‰∏ç‰ºö‰∏¢Â§±ÔºåËøô‰∏™ËÉΩÂäõÁß∞‰∏∫<strong>crash-safe</strong>„ÄÇ</p><blockquote><p>QuestionÔºö‰∏∫‰ªÄ‰πà redo log ÂÖ∑Êúâ crash-safe ÁöÑËÉΩÂäõÔºåËÄå binlog Ê≤°ÊúâÔºü</p><p><a href="https://cloud.tencent.com/developer/article/1757612" target="_blank" rel="noopener noreferrer">Answer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ÔºöËôΩÁÑ∂ binlog Êã•ÊúâÂÖ®ÈáèÁöÑÊó•ÂøóÔºå‰ΩÜÊ≤°Êúâ‰∏Ä‰∏™Ê†áÂøóËÆ© innoDB Âà§Êñ≠Âì™‰∫õÊï∞ÊçÆÂ∑≤ÁªèÂà∑ÁõòÔºåÂì™‰∫õÊï∞ÊçÆËøòÊ≤°Êúâ„ÄÇ</p><p>‰ΩÜ redo log ‰∏ç‰∏ÄÊ†∑ÔºåÂè™Ë¶ÅÂà∑ÂÖ•Á£ÅÁõòÁöÑÊï∞ÊçÆÔºåÈÉΩ‰ºö‰ªé redo log ‰∏≠ÊäπÊéâÔºåÊï∞ÊçÆÂ∫ìÈáçÂêØÂêéÔºåÁõ¥Êé•Êää redo log ‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÊÅ¢Â§çËá≥ÂÜÖÂ≠òÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ</p></blockquote><p>Ë¶ÅÁêÜËß£ crash-safe Ëøô‰∏™Ê¶ÇÂøµÔºåÂèØ‰ª•ÊÉ≥ÊÉ≥Êàë‰ª¨ÂâçÈù¢ËµäË¥¶ËÆ∞ÂΩïÁöÑ‰æãÂ≠ê„ÄÇÂè™Ë¶ÅËµäË¥¶ËÆ∞ÂΩïËÆ∞Âú®‰∫ÜÁ≤âÊùø‰∏äÊàñÂÜôÂú®‰∫ÜË¥¶Êú¨‰∏äÔºå‰πãÂêéÂç≥‰ΩøÊéåÊüúÂøòËÆ∞‰∫ÜÔºåÊØîÂ¶ÇÁ™ÅÁÑ∂ÂÅú‰∏öÂá†Â§©ÔºåÊÅ¢Â§çÁîüÊÑèÂêé‰æùÁÑ∂ÂèØ‰ª•ÈÄöËøáË¥¶Êú¨ÂíåÁ≤âÊùø‰∏äÁöÑÊï∞ÊçÆÊòéÁ°ÆËµäË¥¶Ë¥¶ÁõÆ„ÄÇ</p><h2 id="_3-binlog" tabindex="-1"><a class="header-anchor" href="#_3-binlog"><span>3.binlog</span></a></h2><blockquote><p>‰Ω†‰∏ÄËà¨ÁúãÂà∞ binlog Â∞±Ë¶ÅÊÉ≥Âà∞<strong>‰∏ª‰ªéÂ§çÂà∂</strong>„ÄÇÂΩìÁÑ∂ÔºåÈô§‰∫Ü‰∏ª‰ªéÂ§çÂà∂‰πãÂ§ñÔºåbinlog ËøòËÉΩÂ∏ÆÂä©Êàë‰ª¨ÂÆûÁé∞<strong>Êï∞ÊçÆÊÅ¢Â§ç</strong>„ÄÇ</p><p>Êúâ‰∏§ÁßçÊ®°ÂºèÔºåstatement Ê†ºÂºèÁöÑËØùÊòØËÆ∞sqlËØ≠Âè•Ôºå row Ê†ºÂºè‰ºöËÆ∞ÂΩïË°åÁöÑÂÜÖÂÆπÔºåËÆ∞‰∏§Êù°ÔºåÊõ¥Êñ∞ÂâçÂíåÊõ¥Êñ∞ÂêéÈÉΩÊúâ„ÄÇ</p><p>‰∏Ä‰∏™Êó†ÈôêÂ§ßÂ∞èÔºå**‚ÄúËøΩÂä†ÂÜô‚Äù**ÁöÑÊó•ÂøóÊñá‰ª∂ÔºåËÆ∞ÂΩïÁöÑÊòØÈÄªËæëÊó•Âøó‚Äî‚Äî‚ÄúÁªô ID=2 Ëøô‰∏ÄË°åÁöÑ c Â≠óÊÆµÂä†1‚Äù„ÄÇ</p></blockquote><p>ÂâçÈù¢Êàë‰ª¨ËÆ≤ËøáÔºåMySQL Êï¥‰ΩìÊù•ÁúãÔºåÂÖ∂ÂÆûÂ∞±Êúâ‰∏§ÂùóÔºö‰∏ÄÂùóÊòØ Server Â±ÇÔºåÂÆÉ‰∏ªË¶ÅÂÅöÁöÑÊòØ MySQL ÂäüËÉΩÂ±ÇÈù¢ÁöÑ‰∫ãÊÉÖÔºõËøòÊúâ‰∏ÄÂùóÊòØÂºïÊìéÂ±ÇÔºåË¥üË¥£Â≠òÂÇ®Áõ∏ÂÖ≥ÁöÑÂÖ∑‰Ωì‰∫ãÂÆú„ÄÇ‰∏äÈù¢Êàë‰ª¨ËÅäÂà∞ÁöÑÁ≤âÊùø redo log ÊòØ InnoDB ÂºïÊìéÁâπÊúâÁöÑÊó•ÂøóÔºåËÄå Server Â±Ç‰πüÊúâËá™Â∑±ÁöÑÊó•ÂøóÔºåÁß∞‰∏∫ binlogÔºàÂΩíÊ°£Êó•ÂøóÔºâ„ÄÇ</p><p><mark>ÊàëÊÉ≥‰Ω†ËÇØÂÆö‰ºöÈóÆÔºå‰∏∫‰ªÄ‰πà‰ºöÊúâ‰∏§‰ªΩÊó•ÂøóÂë¢Ôºü</mark></p><p>Âõ†‰∏∫ÊúÄÂºÄÂßã MySQL ÈáåÂπ∂Ê≤°Êúâ InnoDB ÂºïÊìé„ÄÇMySQL Ëá™Â∏¶ÁöÑÂºïÊìéÊòØ MyISAMÔºå‰ΩÜÊòØ MyISAM Ê≤°Êúâ crash-safe ÁöÑËÉΩÂäõÔºåbinlog Êó•ÂøóÂè™ËÉΩÁî®‰∫éÂΩíÊ°£„ÄÇËÄå InnoDB ÊòØÂè¶‰∏Ä‰∏™ÂÖ¨Âè∏‰ª•Êèí‰ª∂ÂΩ¢ÂºèÂºïÂÖ• MySQL ÁöÑÔºåÊó¢ÁÑ∂Âè™‰æùÈù† binlog ÊòØÊ≤°Êúâ crash-safe ËÉΩÂäõÁöÑÔºåÊâÄ‰ª• InnoDB ‰ΩøÁî®Âè¶Â§ñ‰∏ÄÂ•óÊó•ÂøóÁ≥ªÁªü‚Äî‚Äî‰πüÂ∞±ÊòØ redo log Êù•ÂÆûÁé∞ crash-safe ËÉΩÂäõ„ÄÇ</p><p><mark>Ëøô‰∏§ÁßçÊó•ÂøóÊúâ‰ª•‰∏ã‰∏âÁÇπ‰∏çÂêåÔºö</mark></p><ol><li>redo log ÊòØ InnoDB ÂºïÊìéÁâπÊúâÁöÑÔºõbinlog ÊòØ MySQL ÁöÑ Server Â±ÇÂÆûÁé∞ÁöÑÔºåÊâÄÊúâÂºïÊìéÈÉΩÂèØ‰ª•‰ΩøÁî®„ÄÇ</li><li>redo log ÊòØÁâ©ÁêÜÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØ‚ÄúÂú®Êüê‰∏™Êï∞ÊçÆÈ°µ‰∏äÂÅö‰∫Ü‰ªÄ‰πà‰øÆÊîπ‚ÄùÔºõbinlog ÊòØÈÄªËæëÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØËøô‰∏™ËØ≠Âè•ÁöÑÂéüÂßãÈÄªËæëÔºåÊØîÂ¶Ç‚ÄúÁªô ID=2 Ëøô‰∏ÄË°åÁöÑ c Â≠óÊÆµÂä† 1 ‚Äù„ÄÇ</li><li>redo log ÊòØÂæ™ÁéØÂÜôÁöÑÔºåÁ©∫Èó¥Âõ∫ÂÆö‰ºöÁî®ÂÆåÔºõbinlog ÊòØÂèØ‰ª•ËøΩÂä†ÂÜôÂÖ•ÁöÑ„ÄÇ‚ÄúËøΩÂä†ÂÜô‚ÄùÊòØÊåá binlog Êñá‰ª∂ÂÜôÂà∞‰∏ÄÂÆöÂ§ßÂ∞èÂêé‰ºöÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™ÔºåÂπ∂‰∏ç‰ºöË¶ÜÁõñ‰ª•ÂâçÁöÑÊó•Âøó„ÄÇ</li></ol><p>Êúâ‰∫ÜÂØπËøô‰∏§‰∏™Êó•ÂøóÁöÑÊ¶ÇÂøµÊÄßÁêÜËß£ÔºåÊàë‰ª¨ÂÜçÊù•ÁúãÊâßË°åÂô®Âíå InnoDB ÂºïÊìéÂú®ÊâßË°åËøô‰∏™ÁÆÄÂçïÁöÑ update ËØ≠Âè•Êó∂ÁöÑÂÜÖÈÉ®ÊµÅÁ®ã„ÄÇ</p><ol><li>ÊâßË°åÂô®ÂÖàÊâæÂºïÊìéÂèñ ID=2 Ëøô‰∏ÄË°å„ÄÇID ÊòØ‰∏ªÈîÆÔºåÂºïÊìéÁõ¥Êé•Áî®Ê†ëÊêúÁ¥¢ÊâæÂà∞Ëøô‰∏ÄË°å„ÄÇÂ¶ÇÊûú ID=2 Ëøô‰∏ÄË°åÊâÄÂú®ÁöÑÊï∞ÊçÆÈ°µÊú¨Êù•Â∞±Âú®ÂÜÖÂ≠ò‰∏≠ÔºåÂ∞±Áõ¥Êé•ËøîÂõûÁªôÊâßË°åÂô®ÔºõÂê¶ÂàôÔºåÈúÄË¶ÅÂÖà‰ªéÁ£ÅÁõòËØªÂÖ•ÂÜÖÂ≠òÔºåÁÑ∂ÂêéÂÜçËøîÂõû„ÄÇ</li><li>ÊâßË°åÂô®ÊãøÂà∞ÂºïÊìéÁªôÁöÑË°åÊï∞ÊçÆÔºåÊääËøô‰∏™ÂÄºÂä†‰∏ä 1ÔºåÊØîÂ¶ÇÂéüÊù•ÊòØ NÔºåÁé∞Âú®Â∞±ÊòØ N+1ÔºåÂæóÂà∞Êñ∞ÁöÑ‰∏ÄË°åÊï∞ÊçÆÔºåÂÜçË∞ÉÁî®ÂºïÊìéÊé•Âè£ÂÜôÂÖ•ËøôË°åÊñ∞Êï∞ÊçÆ„ÄÇ</li><li>ÂºïÊìéÂ∞ÜËøôË°åÊñ∞Êï∞ÊçÆÊõ¥Êñ∞Âà∞ÂÜÖÂ≠ò‰∏≠ÔºåÂêåÊó∂Â∞ÜËøô‰∏™Êõ¥Êñ∞Êìç‰ΩúËÆ∞ÂΩïÂà∞ redo log ÈáåÈù¢ÔºåÊ≠§Êó∂ redo log Â§Ñ‰∫é prepare Áä∂ÊÄÅ„ÄÇÁÑ∂ÂêéÂëäÁü•ÊâßË°åÂô®ÊâßË°åÂÆåÊàê‰∫ÜÔºåÈöèÊó∂ÂèØ‰ª•Êèê‰∫§‰∫ãÂä°„ÄÇ</li><li>ÊâßË°åÂô®ÁîüÊàêËøô‰∏™Êìç‰ΩúÁöÑ binlogÔºåÂπ∂Êää binlog ÂÜôÂÖ•Á£ÅÁõò„ÄÇ</li><li>ÊâßË°åÂô®Ë∞ÉÁî®ÂºïÊìéÁöÑÊèê‰∫§‰∫ãÂä°Êé•Âè£ÔºåÂºïÊìéÊääÂàöÂàöÂÜôÂÖ•ÁöÑ redo log ÊîπÊàêÊèê‰∫§ÔºàcommitÔºâÁä∂ÊÄÅÔºåÊõ¥Êñ∞ÂÆåÊàê„ÄÇ</li></ol><p>ËøôÈáåÊàëÁªôÂá∫Ëøô‰∏™ update ËØ≠Âè•ÁöÑÊâßË°åÊµÅÁ®ãÂõæÔºåÂõæ‰∏≠ÊµÖËâ≤Ê°ÜË°®Á§∫ÊòØÂú® InnoDB ÂÜÖÈÉ®ÊâßË°åÁöÑÔºåÊ∑±Ëâ≤Ê°ÜË°®Á§∫ÊòØÂú®ÊâßË°åÂô®‰∏≠ÊâßË°åÁöÑ„ÄÇ</p><figure><img src="https://images.zzq8.cn/img/202212071121771.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!----><p>‰Ω†ÂèØËÉΩÊ≥®ÊÑèÂà∞‰∫ÜÔºåÊúÄÂêé‰∏âÊ≠•Áúã‰∏äÂéªÊúâÁÇπ‚ÄúÁªï‚ÄùÔºåÂ∞Ü redo log ÁöÑÂÜôÂÖ•ÊãÜÊàê‰∫Ü‰∏§‰∏™Ê≠•È™§Ôºöprepare Âíå commitÔºåËøôÂ∞±ÊòØ&quot;‰∏§Èò∂ÊÆµÊèê‰∫§&quot;„ÄÇ</p><h2 id="_4-‰∏§Èò∂ÊÆµÊèê‰∫§" tabindex="-1"><a class="header-anchor" href="#_4-‰∏§Èò∂ÊÆµÊèê‰∫§"><span>4.‰∏§Èò∂ÊÆµÊèê‰∫§</span></a></h2><p>‰∏∫‰ªÄ‰πàÂøÖÈ°ªÊúâ‚Äú‰∏§Èò∂ÊÆµÊèê‰∫§‚ÄùÂë¢ÔºüËøôÊòØ‰∏∫‰∫ÜËÆ©‰∏§‰ªΩÊó•Âøó‰πãÈó¥ÁöÑÈÄªËæë‰∏ÄËá¥„ÄÇË¶ÅËØ¥ÊòéËøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨Âæó‰ªéÊñáÁ´†ÂºÄÂ§¥ÁöÑÈÇ£‰∏™ÈóÆÈ¢òËØ¥Ëµ∑Ôºö<strong>ÊÄéÊ†∑ËÆ©Êï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞Âçä‰∏™ÊúàÂÜÖ‰ªªÊÑè‰∏ÄÁßíÁöÑÁä∂ÊÄÅÔºü</strong></p><p>ÂâçÈù¢Êàë‰ª¨ËØ¥Ëøá‰∫ÜÔºåbinlog ‰ºöËÆ∞ÂΩïÊâÄÊúâÁöÑÈÄªËæëÊìç‰ΩúÔºåÂπ∂‰∏îÊòØÈááÁî®‚ÄúËøΩÂä†ÂÜô‚ÄùÁöÑÂΩ¢Âºè„ÄÇ**Â¶ÇÊûú‰Ω†ÁöÑ DBA ÊâøËØ∫ËØ¥Âçä‰∏™ÊúàÂÜÖÂèØ‰ª•ÊÅ¢Â§çÔºåÈÇ£‰πàÂ§á‰ªΩÁ≥ªÁªü‰∏≠‰∏ÄÂÆö‰ºö‰øùÂ≠òÊúÄËøëÂçä‰∏™ÊúàÁöÑÊâÄÊúâ binlogÔºåÂêåÊó∂Á≥ªÁªü‰ºöÂÆöÊúüÂÅöÊï¥Â∫ìÂ§á‰ªΩ„ÄÇ**ËøôÈáåÁöÑ‚ÄúÂÆöÊúü‚ÄùÂèñÂÜ≥‰∫éÁ≥ªÁªüÁöÑÈáçË¶ÅÊÄßÔºåÂèØ‰ª•ÊòØ‰∏ÄÂ§©‰∏ÄÂ§áÔºå‰πüÂèØ‰ª•ÊòØ‰∏ÄÂë®‰∏ÄÂ§á„ÄÇ</p><p>ÂΩìÈúÄË¶ÅÊÅ¢Â§çÂà∞ÊåáÂÆöÁöÑÊüê‰∏ÄÁßíÊó∂ÔºåÊØîÂ¶ÇÊüêÂ§©‰∏ãÂçà‰∏§ÁÇπÂèëÁé∞‰∏≠ÂçàÂçÅ‰∫åÁÇπÊúâ‰∏ÄÊ¨°ËØØÂà†Ë°®ÔºåÈúÄË¶ÅÊâæÂõûÊï∞ÊçÆÔºåÈÇ£‰Ω†ÂèØ‰ª•Ëøô‰πàÂÅöÔºö</p><ul><li>È¶ñÂÖàÔºåÊâæÂà∞ÊúÄËøëÁöÑ‰∏ÄÊ¨°ÂÖ®ÈáèÂ§á‰ªΩÔºåÂ¶ÇÊûú‰Ω†ËøêÊ∞îÂ•ΩÔºåÂèØËÉΩÂ∞±ÊòØÊò®Â§©Êôö‰∏äÁöÑ‰∏Ä‰∏™Â§á‰ªΩÔºå‰ªéËøô‰∏™Â§á‰ªΩÊÅ¢Â§çÂà∞‰∏¥Êó∂Â∫ìÔºõ</li><li>ÁÑ∂ÂêéÔºå‰ªéÂ§á‰ªΩÁöÑÊó∂Èó¥ÁÇπÂºÄÂßãÔºåÂ∞ÜÂ§á‰ªΩÁöÑ binlog ‰æùÊ¨°ÂèñÂá∫Êù•ÔºåÈáçÊîæÂà∞‰∏≠ÂçàËØØÂà†Ë°®‰πãÂâçÁöÑÈÇ£‰∏™Êó∂Âàª„ÄÇ</li></ul><p>ËøôÊ†∑‰Ω†ÁöÑ‰∏¥Êó∂Â∫ìÂ∞±Ë∑üËØØÂà†‰πãÂâçÁöÑÁ∫ø‰∏äÂ∫ì‰∏ÄÊ†∑‰∫ÜÔºåÁÑ∂Âêé‰Ω†ÂèØ‰ª•ÊääË°®Êï∞ÊçÆ‰ªé‰∏¥Êó∂Â∫ìÂèñÂá∫Êù•ÔºåÊåâÈúÄË¶ÅÊÅ¢Â§çÂà∞Á∫ø‰∏äÂ∫ìÂéª„ÄÇ</p><p>Â•Ω‰∫ÜÔºåËØ¥ÂÆå‰∫ÜÊï∞ÊçÆÊÅ¢Â§çËøáÁ®ãÔºåÊàë‰ª¨ÂõûÊù•ËØ¥ËØ¥Ôºå‰∏∫‰ªÄ‰πàÊó•ÂøóÈúÄË¶Å‚Äú‰∏§Èò∂ÊÆµÊèê‰∫§‚Äù„ÄÇËøôÈáå‰∏çÂ¶®Áî®ÂèçËØÅÊ≥ïÊù•ËøõË°åËß£Èáä„ÄÇ</p><p>Áî±‰∫é redo log Âíå binlog ÊòØ‰∏§‰∏™Áã¨Á´ãÁöÑÈÄªËæëÔºåÂ¶ÇÊûú‰∏çÁî®‰∏§Èò∂ÊÆµÊèê‰∫§ÔºåË¶Å‰πàÂ∞±ÊòØÂÖàÂÜôÂÆå redo log ÂÜçÂÜô binlogÔºåÊàñËÄÖÈááÁî®ÂèçËøáÊù•ÁöÑÈ°∫Â∫è„ÄÇÊàë‰ª¨ÁúãÁúãËøô‰∏§ÁßçÊñπÂºè‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ</p><p>‰ªçÁÑ∂Áî®ÂâçÈù¢ÁöÑ update ËØ≠Âè•Êù•ÂÅö‰æãÂ≠ê„ÄÇÂÅáËÆæÂΩìÂâç ID=2 ÁöÑË°åÔºåÂ≠óÊÆµ c ÁöÑÂÄºÊòØ 0ÔºåÂÜçÂÅáËÆæÊâßË°å update ËØ≠Âè•ËøáÁ®ã‰∏≠Âú®ÂÜôÂÆåÁ¨¨‰∏Ä‰∏™Êó•ÂøóÂêéÔºåÁ¨¨‰∫å‰∏™Êó•ÂøóËøòÊ≤°ÊúâÂÜôÂÆåÊúüÈó¥ÂèëÁîü‰∫Ü crashÔºå‰ºöÂá∫Áé∞‰ªÄ‰πàÊÉÖÂÜµÂë¢Ôºü</p><ol><li><strong>ÂÖàÂÜô redo log ÂêéÂÜô binlog</strong>„ÄÇÂÅáËÆæÂú® redo log ÂÜôÂÆåÔºåbinlog ËøòÊ≤°ÊúâÂÜôÂÆåÁöÑÊó∂ÂÄôÔºåMySQL ËøõÁ®ãÂºÇÂ∏∏ÈáçÂêØ„ÄÇÁî±‰∫éÊàë‰ª¨ÂâçÈù¢ËØ¥ËøáÁöÑÔºåredo log ÂÜôÂÆå‰πãÂêéÔºåÁ≥ªÁªüÂç≥‰ΩøÂ¥©Ê∫ÉÔºå‰ªçÁÑ∂ËÉΩÂ§üÊääÊï∞ÊçÆÊÅ¢Â§çÂõûÊù•ÔºåÊâÄ‰ª•ÊÅ¢Â§çÂêéËøô‰∏ÄË°å c ÁöÑÂÄºÊòØ 1„ÄÇ ‰ΩÜÊòØÁî±‰∫é binlog Ê≤°ÂÜôÂÆåÂ∞± crash ‰∫ÜÔºåËøôÊó∂ÂÄô binlog ÈáåÈù¢Â∞±Ê≤°ÊúâËÆ∞ÂΩïËøô‰∏™ËØ≠Âè•„ÄÇÂõ†Ê≠§Ôºå‰πãÂêéÂ§á‰ªΩÊó•ÂøóÁöÑÊó∂ÂÄôÔºåÂ≠òËµ∑Êù•ÁöÑ binlog ÈáåÈù¢Â∞±Ê≤°ÊúâËøôÊù°ËØ≠Âè•„ÄÇ ÁÑ∂Âêé‰Ω†‰ºöÂèëÁé∞ÔºåÂ¶ÇÊûúÈúÄË¶ÅÁî®Ëøô‰∏™ binlog Êù•ÊÅ¢Â§ç‰∏¥Êó∂Â∫ìÁöÑËØùÔºåÁî±‰∫éËøô‰∏™ËØ≠Âè•ÁöÑ binlog ‰∏¢Â§±ÔºåËøô‰∏™‰∏¥Êó∂Â∫ìÂ∞±‰ºöÂ∞ë‰∫ÜËøô‰∏ÄÊ¨°Êõ¥Êñ∞ÔºåÊÅ¢Â§çÂá∫Êù•ÁöÑËøô‰∏ÄË°å c ÁöÑÂÄºÂ∞±ÊòØ 0Ôºå‰∏éÂéüÂ∫ìÁöÑÂÄº‰∏çÂêå„ÄÇ</li><li><strong>ÂÖàÂÜô binlog ÂêéÂÜô redo log</strong>„ÄÇÂ¶ÇÊûúÂú® binlog ÂÜôÂÆå‰πãÂêé crashÔºåÁî±‰∫é redo log ËøòÊ≤°ÂÜôÔºåÂ¥©Ê∫ÉÊÅ¢Â§ç‰ª•ÂêéËøô‰∏™‰∫ãÂä°Êó†ÊïàÔºåÊâÄ‰ª•Ëøô‰∏ÄË°å c ÁöÑÂÄºÊòØ 0„ÄÇ‰ΩÜÊòØ binlog ÈáåÈù¢Â∑≤ÁªèËÆ∞ÂΩï‰∫Ü‚ÄúÊää c ‰ªé 0 ÊîπÊàê 1‚ÄùËøô‰∏™Êó•Âøó„ÄÇÊâÄ‰ª•ÔºåÂú®‰πãÂêéÁî® binlog Êù•ÊÅ¢Â§çÁöÑÊó∂ÂÄôÂ∞±Â§ö‰∫Ü‰∏Ä‰∏™‰∫ãÂä°Âá∫Êù•ÔºåÊÅ¢Â§çÂá∫Êù•ÁöÑËøô‰∏ÄË°å c ÁöÑÂÄºÂ∞±ÊòØ 1Ôºå‰∏éÂéüÂ∫ìÁöÑÂÄº‰∏çÂêå„ÄÇ</li></ol><p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂ¶ÇÊûú‰∏ç‰ΩøÁî®‚Äú‰∏§Èò∂ÊÆµÊèê‰∫§‚ÄùÔºåÈÇ£‰πàÊï∞ÊçÆÂ∫ìÁöÑÁä∂ÊÄÅÂ∞±ÊúâÂèØËÉΩÂíåÁî®ÂÆÉÁöÑÊó•ÂøóÊÅ¢Â§çÂá∫Êù•ÁöÑÂ∫ìÁöÑÁä∂ÊÄÅ‰∏ç‰∏ÄËá¥„ÄÇ</p><p>‰Ω†ÂèØËÉΩ‰ºöËØ¥ÔºåËøô‰∏™Ê¶ÇÁéáÊòØ‰∏çÊòØÂæà‰ΩéÔºåÂπ≥Êó∂‰πüÊ≤°Êúâ‰ªÄ‰πàÂä®‰∏çÂä®Â∞±ÈúÄË¶ÅÊÅ¢Â§ç‰∏¥Êó∂Â∫ìÁöÑÂú∫ÊôØÂëÄÔºü</p><p>ÂÖ∂ÂÆû‰∏çÊòØÁöÑÔºå‰∏çÂè™ÊòØËØØÊìç‰ΩúÂêéÈúÄË¶ÅÁî®Ëøô‰∏™ËøáÁ®ãÊù•ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇÂΩì‰Ω†ÈúÄË¶ÅÊâ©ÂÆπÁöÑÊó∂ÂÄôÔºå‰πüÂ∞±ÊòØÈúÄË¶ÅÂÜçÂ§öÊê≠Âª∫‰∏Ä‰∫õÂ§áÂ∫ìÊù•Â¢ûÂä†Á≥ªÁªüÁöÑËØªËÉΩÂäõÁöÑÊó∂ÂÄôÔºåÁé∞Âú®Â∏∏ËßÅÁöÑÂÅöÊ≥ï‰πüÊòØÁî®ÂÖ®ÈáèÂ§á‰ªΩÂä†‰∏äÂ∫îÁî® binlog Êù•ÂÆûÁé∞ÁöÑÔºåËøô‰∏™‚Äú‰∏ç‰∏ÄËá¥‚ÄùÂ∞±‰ºöÂØºËá¥‰Ω†ÁöÑÁ∫ø‰∏äÂá∫Áé∞‰∏ª‰ªéÊï∞ÊçÆÂ∫ì‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ„ÄÇ</p><p>ÁÆÄÂçïËØ¥Ôºåredo log Âíå binlog ÈÉΩÂèØ‰ª•Áî®‰∫éË°®Á§∫‰∫ãÂä°ÁöÑÊèê‰∫§Áä∂ÊÄÅÔºåËÄå‰∏§Èò∂ÊÆµÊèê‰∫§Â∞±ÊòØËÆ©Ëøô‰∏§‰∏™Áä∂ÊÄÅ‰øùÊåÅÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥„ÄÇ</p><h2 id="_5-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_5-Â∞èÁªì"><span>5.Â∞èÁªì</span></a></h2><p>‰ªäÂ§©ÔºåÊàë‰ªãÁªç‰∫Ü MySQL ÈáåÈù¢ÊúÄÈáçË¶ÅÁöÑ‰∏§‰∏™Êó•ÂøóÔºåÂç≥Áâ©ÁêÜÊó•Âøó redo log ÂíåÈÄªËæëÊó•Âøó binlog„ÄÇ</p><p><mark>Ë°•ÂÖÖÔºöÂú®‰∫ãÂä°‰∏≠ËØ≠Âè•Êõ¥Êñ∞‰ºöÁîüÊàê undo logÔºàÂõûÊªöÊó•ÂøóÔºâÂêóÔºü Ë°çÁîüÂá∫ Â§öÁâàÊú¨Âíå row trx_id ÁöÑÊ¶ÇÂøµ</mark> <a href="#08%E4%B8%A8%E4%BA%8B%E5%8A%A1%E5%88%B0%E5%BA%95%E6%98%AF%E9%9A%94%E7%A6%BB%E7%9A%84%E8%BF%98%E6%98%AF%E4%B8%8D%E9%9A%94%E7%A6%BB%E7%9A%84%EF%BC%9F">08‰∏®‰∫ãÂä°Âà∞Â∫ïÊòØÈöîÁ¶ªÁöÑËøòÊòØ‰∏çÈöîÁ¶ªÁöÑÔºü</a> ÂØπ‰∫é MySQL Êï∞ÊçÆÂ∫ìÊù•ËØ¥Ôºå<strong>‰∏ç‰ªÖ‰∫ãÂä°ÁöÑÊõ¥Êñ∞Êìç‰Ωú‰ºöËÆ∞ÂΩïÂú® Binlog ‰∏≠ÔºåÈùû‰∫ãÂä°</strong>ÁöÑ UPDATE ËØ≠Âè•‰πü‰ºöË¢´ËÆ∞ÂΩïÂú® Binlog ‰∏≠„ÄÇ Undo LogÔºöËÆ∞ÂΩï‰∫Ü<code>‰∫ãÂä°</code>ÊâßË°åÂâçÁöÑÊï∞ÊçÆÔºåÁî®‰∫éÂõûÊªö‰∫ãÂä° Âíå ÂÆûÁé∞MVCCÂäüËÉΩ</p><p>redo log Áî®‰∫é‰øùËØÅ crash-safe ËÉΩÂäõ„ÄÇinnodb_flush_log_at_trx_commit Ëøô‰∏™ÂèÇÊï∞ËÆæÁΩÆÊàê 1 ÁöÑÊó∂ÂÄôÔºåË°®Á§∫ÊØèÊ¨°‰∫ãÂä°ÁöÑ redo log ÈÉΩÁõ¥Êé•ÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò„ÄÇËøô‰∏™ÂèÇÊï∞ÊàëÂª∫ËÆÆ‰Ω†ËÆæÁΩÆÊàê 1ÔºåËøôÊ†∑ÂèØ‰ª•‰øùËØÅ MySQL ÂºÇÂ∏∏ÈáçÂêØ‰πãÂêéÊï∞ÊçÆ‰∏ç‰∏¢Â§±„ÄÇ</p><p>sync_binlog Ëøô‰∏™ÂèÇÊï∞ËÆæÁΩÆÊàê 1 ÁöÑÊó∂ÂÄôÔºåË°®Á§∫ÊØèÊ¨°‰∫ãÂä°ÁöÑ binlog ÈÉΩÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò„ÄÇËøô‰∏™ÂèÇÊï∞Êàë‰πüÂª∫ËÆÆ‰Ω†ËÆæÁΩÆÊàê 1ÔºåËøôÊ†∑ÂèØ‰ª•‰øùËØÅ MySQL ÂºÇÂ∏∏ÈáçÂêØ‰πãÂêé binlog ‰∏ç‰∏¢Â§±„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>show variables like &#39;innodb_flush_log_at_trx_commit&#39; #ÊàëÊü•ÈªòËÆ§ÊòØ 1
show variables like &#39;sync_binlog&#39; #ÊàëÊü•ÈªòËÆ§ÊòØ 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊàëËøòË∑ü‰Ω†‰ªãÁªç‰∫Ü‰∏é MySQL Êó•ÂøóÁ≥ªÁªüÂØÜÂàáÁõ∏ÂÖ≥ÁöÑ‚Äú‰∏§Èò∂ÊÆµÊèê‰∫§‚Äù„ÄÇ‰∏§Èò∂ÊÆµÊèê‰∫§ÊòØË∑®Á≥ªÁªüÁª¥ÊåÅÊï∞ÊçÆÈÄªËæë‰∏ÄËá¥ÊÄßÊó∂Â∏∏Áî®ÁöÑ‰∏Ä‰∏™ÊñπÊ°àÔºåÂç≥‰Ωø‰Ω†‰∏çÂÅöÊï∞ÊçÆÂ∫ìÂÜÖÊ†∏ÂºÄÂèëÔºåÊó•Â∏∏ÂºÄÂèë‰∏≠‰πüÊúâÂèØËÉΩ‰ºöÁî®Âà∞„ÄÇ</p><blockquote><p>QÔºöÊñáÁ´†ÁöÑÊúÄÂêéÔºåÊàëÁªô‰Ω†Áïô‰∏Ä‰∏™ÊÄùËÄÉÈ¢òÂêß„ÄÇÂâçÈù¢ÊàëËØ¥Âà∞ÂÆöÊúüÂÖ®ÈáèÂ§á‰ªΩÁöÑÂë®Êúü‚ÄúÂèñÂÜ≥‰∫éÁ≥ªÁªüÈáçË¶ÅÊÄßÔºåÊúâÁöÑÊòØ‰∏ÄÂ§©‰∏ÄÂ§áÔºåÊúâÁöÑÊòØ‰∏ÄÂë®‰∏ÄÂ§á‚Äù„ÄÇÈÇ£‰πàÂú®‰ªÄ‰πàÂú∫ÊôØ‰∏ãÔºå‰∏ÄÂ§©‰∏ÄÂ§á‰ºöÊØî‰∏ÄÂë®‰∏ÄÂ§áÊõ¥Êúâ‰ºòÂäøÂë¢ÔºüÊàñËÄÖËØ¥ÔºåÂÆÉÂΩ±Âìç‰∫ÜËøô‰∏™Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÁöÑÂì™‰∏™ÊåáÊ†áÔºü</p></blockquote><h3 id="Ë°•ÂÖÖ" tabindex="-1"><a class="header-anchor" href="#Ë°•ÂÖÖ"><span>Ë°•ÂÖÖ</span></a></h3><blockquote><p>Êï∞ÊçÆÈ°µÔºöInnoDB Â∞ÜÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂàíÂàÜ‰∏∫Ëã•Âπ≤‰∏™„ÄåÈ°µ„ÄçÔºå‰ª•È°µ‰Ωú‰∏∫Á£ÅÁõòÂíåÂÜÖÂ≠ò‰∫§‰∫íÁöÑÂü∫Êú¨Âçï‰ΩçÔºå‰∏Ä‰∏™È°µÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫ 16KB</p></blockquote><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>show status like &#39;innodb_page_size&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>‰πüÂ∞±ÊòØËØ¥ÔºåÂç≥‰æøÊàë‰ª¨Âè™Êü•ËØ¢‰∏ÄÊù°ËÆ∞ÂΩïÔºåInnoDB ‰πü‰ºöÊääËá≥Â∞ë 16KB ÁöÑÂÜÖÂÆπ‰ªéÁ£ÅÁõòËØªÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇ</p><p>ÂèØ‰ª•Êää„ÄåÈ°µ„ÄçÁêÜËß£‰∏∫‰∏Ä‰∏™ÂÆπÂô®ÔºåËøô‰∏™ÂÆπÂô®ÊòØÁî®Êù•Â≠òÂÇ®„ÄåËÆ∞ÂΩï„ÄçÁöÑ„ÄÇ</p><h1 id="_03‰∏®‰∫ãÂä°ÈöîÁ¶ª-‰∏∫‰ªÄ‰πà‰Ω†Êîπ‰∫ÜÊàëËøòÁúã‰∏çËßÅ" tabindex="-1"><a class="header-anchor" href="#_03‰∏®‰∫ãÂä°ÈöîÁ¶ª-‰∏∫‰ªÄ‰πà‰Ω†Êîπ‰∫ÜÊàëËøòÁúã‰∏çËßÅ"><span>03‰∏®‰∫ãÂä°ÈöîÁ¶ªÔºö‰∏∫‰ªÄ‰πà‰Ω†Êîπ‰∫ÜÊàëËøòÁúã‰∏çËßÅÔºü</span></a></h1><h2 id="_1-ÂâçË®Ä-1" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä-1"><span>1.ÂâçË®Ä</span></a></h2><p>ÊèêÂà∞‰∫ãÂä°Ôºå‰Ω†ËÇØÂÆö‰∏çÈôåÁîüÔºåÂíåÊï∞ÊçÆÂ∫ìÊâì‰∫§ÈÅìÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÊÄªÊòØ‰ºöÁî®Âà∞‰∫ãÂä°„ÄÇÊúÄÁªèÂÖ∏ÁöÑ‰æãÂ≠êÂ∞±ÊòØËΩ¨Ë¥¶Ôºå‰Ω†Ë¶ÅÁªôÊúãÂèãÂ∞èÁéãËΩ¨ 100 ÂùóÈí±ÔºåËÄåÊ≠§Êó∂‰Ω†ÁöÑÈì∂Ë°åÂç°Âè™Êúâ 100 ÂùóÈí±„ÄÇ</p><p>ËΩ¨Ë¥¶ËøáÁ®ãÂÖ∑‰ΩìÂà∞Á®ãÂ∫èÈáå‰ºöÊúâ‰∏ÄÁ≥ªÂàóÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇÊü•ËØ¢‰ΩôÈ¢ù„ÄÅÂÅöÂä†ÂáèÊ≥ï„ÄÅÊõ¥Êñ∞‰ΩôÈ¢ùÁ≠âÔºåËøô‰∫õÊìç‰ΩúÂøÖÈ°ª‰øùËØÅÊòØ‰∏Ä‰ΩìÁöÑÔºå‰∏çÁÑ∂Á≠âÁ®ãÂ∫èÊü•ÂÆå‰πãÂêéÔºåËøòÊ≤°ÂÅöÂáèÊ≥ï‰πãÂâçÔºå‰Ω†Ëøô 100 ÂùóÈí±ÔºåÂÆåÂÖ®ÂèØ‰ª•ÂÄüÁùÄËøô‰∏™Êó∂Èó¥Â∑ÆÂÜçÊü•‰∏ÄÊ¨°ÔºåÁÑ∂ÂêéÂÜçÁªôÂè¶Â§ñ‰∏Ä‰∏™ÊúãÂèãËΩ¨Ë¥¶ÔºåÂ¶ÇÊûúÈì∂Ë°åËøô‰πàÊï¥Ôºå‰∏çÂ∞±‰π±‰∫Ü‰πàÔºüËøôÊó∂Â∞±Ë¶ÅÁî®Âà∞‚Äú‰∫ãÂä°‚ÄùËøô‰∏™Ê¶ÇÂøµ‰∫Ü„ÄÇ</p><p>ÁÆÄÂçïÊù•ËØ¥Ôºå‰∫ãÂä°Â∞±ÊòØË¶Å‰øùËØÅ‰∏ÄÁªÑÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºåË¶Å‰πàÂÖ®ÈÉ®ÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®Â§±Ë¥•„ÄÇÂú® MySQL ‰∏≠Ôºå‰∫ãÂä°ÊîØÊåÅÊòØÂú®ÂºïÊìéÂ±ÇÂÆûÁé∞ÁöÑ„ÄÇ‰Ω†Áé∞Âú®Áü•ÈÅìÔºåMySQL ÊòØ‰∏Ä‰∏™ÊîØÊåÅÂ§öÂºïÊìéÁöÑÁ≥ªÁªüÔºå‰ΩÜÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂºïÊìéÈÉΩÊîØÊåÅ‰∫ãÂä°„ÄÇÊØîÂ¶Ç <strong>MySQL ÂéüÁîüÁöÑ MyISAM ÂºïÊìéÂ∞±‰∏çÊîØÊåÅ‰∫ãÂä°</strong>ÔºåËøô‰πüÊòØ MyISAM Ë¢´ InnoDB Âèñ‰ª£ÁöÑÈáçË¶ÅÂéüÂõ†‰πã‰∏Ä„ÄÇ</p><p>‰ªäÂ§©ÁöÑÊñáÁ´†ÈáåÔºåÊàëÂ∞Ü‰ºö‰ª• InnoDB ‰∏∫‰æãÔºåÂâñÊûê MySQL Âú®‰∫ãÂä°ÊîØÊåÅÊñπÈù¢ÁöÑÁâπÂÆöÂÆûÁé∞ÔºåÂπ∂Âü∫‰∫éÂéüÁêÜÁªôÂá∫Áõ∏Â∫îÁöÑÂÆûË∑µÂª∫ËÆÆÔºåÂ∏åÊúõËøô‰∫õÊ°à‰æãËÉΩÂä†Ê∑±‰Ω†ÂØπ MySQL ‰∫ãÂä°ÂéüÁêÜÁöÑÁêÜËß£„ÄÇ</p><h2 id="_2-ÈöîÁ¶ªÊÄß‰∏éÈöîÁ¶ªÁ∫ßÂà´" tabindex="-1"><a class="header-anchor" href="#_2-ÈöîÁ¶ªÊÄß‰∏éÈöîÁ¶ªÁ∫ßÂà´"><span>2.ÈöîÁ¶ªÊÄß‰∏éÈöîÁ¶ªÁ∫ßÂà´</span></a></h2><p>ÊèêÂà∞‰∫ãÂä°Ôºå‰Ω†ËÇØÂÆö‰ºöÊÉ≥Âà∞ ACIDÔºàAtomicity„ÄÅConsistency„ÄÅIsolation„ÄÅDurabilityÔºåÂç≥ÂéüÂ≠êÊÄß„ÄÅ‰∏ÄËá¥ÊÄß„ÄÅÈöîÁ¶ªÊÄß„ÄÅÊåÅ‰πÖÊÄßÔºâÔºå‰ªäÂ§©Êàë‰ª¨Â∞±Êù•ËØ¥ËØ¥ÂÖ∂‰∏≠ IÔºå‰πüÂ∞±ÊòØ‚ÄúÈöîÁ¶ªÊÄß‚Äù„ÄÇ</p><p>ÂΩìÊï∞ÊçÆÂ∫ì‰∏äÊúâÂ§ö‰∏™‰∫ãÂä°ÂêåÊó∂ÊâßË°åÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØËÉΩÂá∫Áé∞ËÑèËØªÔºàdirty readÔºâ„ÄÅ‰∏çÂèØÈáçÂ§çËØªÔºànon-repeatable readÔºâ„ÄÅÂπªËØªÔºàphantom readÔºâÁöÑÈóÆÈ¢ò„ÄêÁªüÁß∞<code>‰∏ÄËá¥ÊÄßÈóÆÈ¢ò</code>„ÄëÔºå‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÔºåÂ∞±Êúâ‰∫Ü‚ÄúÈöîÁ¶ªÁ∫ßÂà´‚ÄùÁöÑÊ¶ÇÂøµ„ÄÇ</p><p>Âú®Ë∞àÈöîÁ¶ªÁ∫ßÂà´‰πãÂâçÔºå‰Ω†È¶ñÂÖàË¶ÅÁü•ÈÅìÔºå‰Ω†ÈöîÁ¶ªÂæóË∂ä‰∏•ÂÆûÔºåÊïàÁéáÂ∞±‰ºöË∂ä‰Ωé„ÄÇÂõ†Ê≠§ÂæàÂ§öÊó∂ÂÄôÔºåÊàë‰ª¨ÈÉΩË¶ÅÂú®‰∫åËÄÖ‰πãÈó¥ÂØªÊâæ‰∏Ä‰∏™Âπ≥Ë°°ÁÇπ„ÄÇSQL Ê†áÂáÜÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÂåÖÊã¨ÔºöËØªÊú™Êèê‰∫§Ôºàread uncommittedÔºâ„ÄÅËØªÊèê‰∫§Ôºàread committedÔºâ„ÄÅÂèØÈáçÂ§çËØªÔºàrepeatable readÔºâÂíå‰∏≤Ë°åÂåñÔºàserializable Ôºâ„ÄÇ‰∏ãÈù¢ÊàëÈÄê‰∏Ä‰∏∫‰Ω†Ëß£ÈáäÔºö</p><p><a href="https://www.liaoxuefeng.com/wiki/1177760294764384/1219071817284064" target="_blank" rel="noopener noreferrer">Â¢ûÂä†ÂØπÂ∫îËß£ÂÜ≥Âì™‰∏™ÈóÆÈ¢ò <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> Âä†‰∏äËã±ÊñáÂêéÁª≠</p><ul><li><code>Read Uncommitted</code> ËØªÊú™Êèê‰∫§ÊòØÊåáÔºå‰∏Ä‰∏™‰∫ãÂä°ËøòÊ≤°Êèê‰∫§Êó∂ÔºåÂÆÉÂÅöÁöÑÂèòÊõ¥Â∞±ËÉΩË¢´Âà´ÁöÑ‰∫ãÂä°ÁúãÂà∞„ÄÇ<strong>ÔºàËÑèËØªÔºàDirty ReadÔºâÂèä ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØªÔºâ</strong><ul><li>Read UncommittedÊòØÈöîÁ¶ªÁ∫ßÂà´ÊúÄ‰ΩéÁöÑ‰∏ÄÁßç‰∫ãÂä°Á∫ßÂà´„ÄÇÂú®ËøôÁßçÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºå‰∏Ä‰∏™‰∫ãÂä°‰ºöËØªÂà∞Âè¶‰∏Ä‰∏™‰∫ãÂä°Êõ¥Êñ∞Âêé‰ΩÜÊú™Êèê‰∫§ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÂè¶‰∏Ä‰∏™‰∫ãÂä°ÂõûÊªöÔºåÈÇ£‰πàÂΩìÂâç‰∫ãÂä°ËØªÂà∞ÁöÑÊï∞ÊçÆÂ∞±ÊòØËÑèÊï∞ÊçÆÔºåËøôÂ∞±ÊòØËÑèËØªÔºàDirty ReadÔºâ„ÄÇ</li></ul></li><li><code>Read Committed</code> ËØªÊèê‰∫§ÊòØÊåáÔºå‰∏Ä‰∏™‰∫ãÂä°Êèê‰∫§‰πãÂêéÔºåÂÆÉÂÅöÁöÑÂèòÊõ¥Êâç‰ºöË¢´ÂÖ∂‰ªñ‰∫ãÂä°ÁúãÂà∞„ÄÇ<strong>Ôºà‰∏çÂèØÈáçÂ§çËØªÔºàNon Repeatable ReadÔºâÂèä ÂπªËØªÔºâ</strong><ul><li>‰∏çÂèØÈáçÂ§çËØªÊòØÊåáÔºåÂú®‰∏Ä‰∏™‰∫ãÂä°ÂÜÖÔºåÂ§öÊ¨°ËØªÂêå‰∏ÄÊï∞ÊçÆÔºåÂú®Ëøô‰∏™‰∫ãÂä°ËøòÊ≤°ÊúâÁªìÊùüÊó∂ÔºåÂ¶ÇÊûúÂè¶‰∏Ä‰∏™‰∫ãÂä°ÊÅ∞Â•Ω‰øÆÊîπ‰∫ÜËøô‰∏™Êï∞ÊçÆÔºåÈÇ£‰πàÔºåÂú®Á¨¨‰∏Ä‰∏™‰∫ãÂä°‰∏≠Ôºå‰∏§Ê¨°ËØªÂèñÁöÑÊï∞ÊçÆÂ∞±ÂèØËÉΩ‰∏ç‰∏ÄËá¥„ÄÇ</li><li><mark>Oracle Âíå SQL Server ÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´„ÄÇ</mark></li></ul></li><li><code>Repeatable Read</code> ÂèØÈáçÂ§çËØªÊòØÊåáÔºå‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åËøáÁ®ã‰∏≠ÁúãÂà∞ÁöÑÊï∞ÊçÆÔºåÊÄªÊòØË∑üËøô‰∏™‰∫ãÂä°Âú®ÂêØÂä®Êó∂ÁúãÂà∞ÁöÑÊï∞ÊçÆÊòØ‰∏ÄËá¥ÁöÑ„ÄÇÂΩìÁÑ∂Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÊú™Êèê‰∫§ÂèòÊõ¥ÂØπÂÖ∂‰ªñ‰∫ãÂä°‰πüÊòØ‰∏çÂèØËßÅÁöÑ„ÄÇ<strong>ÔºàÂπªËØªÔºàPhantom ReadÔºâÔºâ</strong><ul><li>ÂπªËØªÊòØÊåáÔºåÂú®‰∏Ä‰∏™‰∫ãÂä°‰∏≠ÔºåÁ¨¨‰∏ÄÊ¨°Êü•ËØ¢ÊüêÊù°ËÆ∞ÂΩïÔºåÂèëÁé∞Ê≤°ÊúâÔºå‰ΩÜÊòØÔºåÂΩìËØïÂõæÊõ¥Êñ∞ËøôÊù°‰∏çÂ≠òÂú®ÁöÑËÆ∞ÂΩïÊó∂ÔºåÁ´üÁÑ∂ËÉΩÊàêÂäüÔºåÂπ∂‰∏îÔºåÂÜçÊ¨°ËØªÂèñÂêå‰∏ÄÊù°ËÆ∞ÂΩïÔºåÂÆÉÂ∞±Á•ûÂ•áÂú∞Âá∫Áé∞‰∫Ü„ÄÇ</li><li>REPEATABLE-READ ÈöîÁ¶ªÁ∫ßÂà´ÊòØÂü∫‰∫é MVCC ÂÆûÁé∞ÁöÑ</li><li><mark>MySQL ÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´„ÄÇ</mark></li></ul></li><li><code>Serializable</code> ‰∏≤Ë°åÂåñÔºåÈ°æÂêçÊÄù‰πâÊòØÂØπ‰∫éÂêå‰∏ÄË°åËÆ∞ÂΩïÔºå‚ÄúÂÜô‚Äù‰ºöÂä†‚ÄúÂÜôÈîÅ‚ÄùÔºå‚ÄúËØª‚Äù‰ºöÂä†‚ÄúËØªÈîÅ‚Äù„ÄÇÂΩìÂá∫Áé∞ËØªÂÜôÈîÅÂÜ≤Á™ÅÁöÑÊó∂ÂÄôÔºåÂêéËÆøÈóÆÁöÑ‰∫ãÂä°ÂøÖÈ°ªÁ≠âÂâç‰∏Ä‰∏™‰∫ãÂä°ÊâßË°åÂÆåÊàêÔºåÊâçËÉΩÁªßÁª≠ÊâßË°å„ÄÇ</li></ul><p>XDÔºö</p><p>1Ôºâ‰ª•commit‰∏∫ÁïåÔºåËØªÊú™Êèê‰∫§ÊòØcommit‰πãÂâçÁöÑ‰øÆÊîπÈÉΩÂèØËßÅ</p><p>2ÔºâËØªÂ∑≤Êèê‰∫§ÊòØcommit‰πãÂêéÂèØËßÅ</p><p>3ÔºâÂèØÈáçÂ§çËØªÂ∞±ÊòØ‰ª•‰∫ãÂä°ÂêØÂä®ÈÇ£‰∏™Êó∂Èó¥ÁÇπÁöÑÊï∞ÊçÆ‰∏∫ÂáÜÔºåÂ∞±ÊòØÈÇ£‰∏™ÁÇπÂºÄ‰∏™ËßÜÂõæ</p><p>ÂÖ∂‰∏≠‚ÄúËØªÊèê‰∫§‚ÄùÂíå‚ÄúÂèØÈáçÂ§çËØª‚ÄùÊØîËæÉÈöæÁêÜËß£ÔºåÊâÄ‰ª•ÊàëÁî®‰∏Ä‰∏™‰æãÂ≠êËØ¥ÊòéËøôÂá†ÁßçÈöîÁ¶ªÁ∫ßÂà´„ÄÇÂÅáËÆæÊï∞ÊçÆË°® T ‰∏≠Âè™Êúâ‰∏ÄÂàóÔºåÂÖ∂‰∏≠‰∏ÄË°åÁöÑÂÄº‰∏∫ 1Ôºå‰∏ãÈù¢ÊòØÊåâÁÖßÊó∂Èó¥È°∫Â∫èÊâßË°å‰∏§‰∏™‰∫ãÂä°ÁöÑË°å‰∏∫„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; create table T(c int) engine=InnoDB;
insert into T(c) values(1);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://images.zzq8.cn/img/202212081721046.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Êàë‰ª¨Êù•ÁúãÁúãÂú®‰∏çÂêåÁöÑÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºå‰∫ãÂä° A ‰ºöÊúâÂì™‰∫õ‰∏çÂêåÁöÑËøîÂõûÁªìÊûúÔºå‰πüÂ∞±ÊòØÂõæÈáåÈù¢ V1„ÄÅV2„ÄÅV3 ÁöÑËøîÂõûÂÄºÂàÜÂà´ÊòØ‰ªÄ‰πà„ÄÇ</p><ul><li>Ëã•ÈöîÁ¶ªÁ∫ßÂà´ÊòØ‚ÄúËØªÊú™Êèê‰∫§‚ÄùÔºå Âàô V1 ÁöÑÂÄºÂ∞±ÊòØ 2„ÄÇËøôÊó∂ÂÄô‰∫ãÂä° B ËôΩÁÑ∂ËøòÊ≤°ÊúâÊèê‰∫§Ôºå‰ΩÜÊòØÁªìÊûúÂ∑≤ÁªèË¢´ A ÁúãÂà∞‰∫Ü„ÄÇÂõ†Ê≠§ÔºåV2„ÄÅV3 ‰πüÈÉΩÊòØ 2„ÄÇ</li><li>Ëã•ÈöîÁ¶ªÁ∫ßÂà´ÊòØ‚ÄúËØªÊèê‰∫§‚ÄùÔºåÂàô V1 ÊòØ 1ÔºåV2 ÁöÑÂÄºÊòØ 2„ÄÇ‰∫ãÂä° B ÁöÑÊõ¥Êñ∞Âú®Êèê‰∫§ÂêéÊâçËÉΩË¢´ A ÁúãÂà∞„ÄÇÊâÄ‰ª•Ôºå V3 ÁöÑÂÄº‰πüÊòØ 2„ÄÇ</li><li>Ëã•ÈöîÁ¶ªÁ∫ßÂà´ÊòØ‚ÄúÂèØÈáçÂ§çËØª‚ÄùÔºåÂàô V1„ÄÅV2 ÊòØ 1ÔºåV3 ÊòØ 2„ÄÇ‰πãÊâÄ‰ª• V2 ËøòÊòØ 1ÔºåÈÅµÂæ™ÁöÑÂ∞±ÊòØËøô‰∏™Ë¶ÅÊ±ÇÔºö‰∫ãÂä°Âú®ÊâßË°åÊúüÈó¥ÁúãÂà∞ÁöÑÊï∞ÊçÆÂâçÂêéÂøÖÈ°ªÊòØ‰∏ÄËá¥ÁöÑ„ÄÇ</li><li>Ëã•ÈöîÁ¶ªÁ∫ßÂà´ÊòØ‚Äú‰∏≤Ë°åÂåñ‚ÄùÔºåÂàôÂú®‰∫ãÂä° B ÊâßË°å‚ÄúÂ∞Ü 1 ÊîπÊàê 2‚ÄùÁöÑÊó∂ÂÄôÔºå‰ºöË¢´ÈîÅ‰Ωè„ÄÇÁõ¥Âà∞‰∫ãÂä° A Êèê‰∫§ÂêéÔºå‰∫ãÂä° B ÊâçÂèØ‰ª•ÁªßÁª≠ÊâßË°å„ÄÇÊâÄ‰ª•‰ªé A ÁöÑËßíÂ∫¶ÁúãÔºå V1„ÄÅV2 ÂÄºÊòØ 1ÔºåV3 ÁöÑÂÄºÊòØ 2„ÄÇ</li></ul><p><strong>Âú®ÂÆûÁé∞‰∏äÔºåÊï∞ÊçÆÂ∫ìÈáåÈù¢‰ºöÂàõÂª∫‰∏Ä‰∏™ËßÜÂõæÔºåËÆøÈóÆÁöÑÊó∂ÂÄô‰ª•ËßÜÂõæÁöÑÈÄªËæëÁªìÊûú‰∏∫ÂáÜ„ÄÇÂú®‚ÄúÂèØÈáçÂ§çËØª‚ÄùÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåËøô‰∏™ËßÜÂõæÊòØÂú®‰∫ãÂä°ÂêØÂä®Êó∂ÂàõÂª∫ÁöÑÔºåÊï¥‰∏™‰∫ãÂä°Â≠òÂú®ÊúüÈó¥ÈÉΩÁî®Ëøô‰∏™ËßÜÂõæ„ÄÇÂú®‚ÄúËØªÊèê‰∫§‚ÄùÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåËøô‰∏™ËßÜÂõæÊòØÂú®ÊØè‰∏™ SQL ËØ≠Âè•ÂºÄÂßãÊâßË°åÁöÑÊó∂ÂÄôÂàõÂª∫ÁöÑ„ÄÇËøôÈáåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå‚ÄúËØªÊú™Êèê‰∫§‚ÄùÈöîÁ¶ªÁ∫ßÂà´‰∏ãÁõ¥Êé•ËøîÂõûËÆ∞ÂΩï‰∏äÁöÑÊúÄÊñ∞ÂÄºÔºåÊ≤°ÊúâËßÜÂõæÊ¶ÇÂøµÔºõËÄå‚Äú‰∏≤Ë°åÂåñ‚ÄùÈöîÁ¶ªÁ∫ßÂà´‰∏ãÁõ¥Êé•Áî®Âä†ÈîÅÁöÑÊñπÂºèÊù•ÈÅøÂÖçÂπ∂Ë°åËÆøÈóÆ„ÄÇ</strong></p><p>Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞Âú®‰∏çÂêåÁöÑÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºåÊï∞ÊçÆÂ∫ìË°å‰∏∫ÊòØÊúâÊâÄ‰∏çÂêåÁöÑ„ÄÇ<mark>Oracle Êï∞ÊçÆÂ∫ìÁöÑÈªòËÆ§ÈöîÁ¶ªÁ∫ßÂà´ÂÖ∂ÂÆûÂ∞±ÊòØ‚ÄúËØªÊèê‰∫§‚Äù</mark>ÔºåÂõ†Ê≠§ÂØπ‰∫é‰∏Ä‰∫õ‰ªé Oracle ËøÅÁßªÂà∞ MySQL ÁöÑÂ∫îÁî®Ôºå‰∏∫‰øùËØÅÊï∞ÊçÆÂ∫ìÈöîÁ¶ªÁ∫ßÂà´ÁöÑ‰∏ÄËá¥Ôºå‰Ω†‰∏ÄÂÆöË¶ÅËÆ∞ÂæóÂ∞Ü MySQL ÁöÑÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆ‰∏∫‚ÄúËØªÊèê‰∫§‚Äù„ÄÇ</p><p>ÈÖçÁΩÆÁöÑÊñπÂºèÊòØÔºåÂ∞ÜÂêØÂä®ÂèÇÊï∞ transaction-isolation ÁöÑÂÄºËÆæÁΩÆÊàê READ-COMMITTED„ÄÇ‰Ω†ÂèØ‰ª•Áî® show variables Êù•Êü•ÁúãÂΩìÂâçÁöÑÂÄº„ÄÇÂ¶ÇÊûú‰ΩøÁî®InnoDBÔºåÈªòËÆ§ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊòØRepeatable Read„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; show variables like &#39;transaction_isolation&#39;;
 
+-----------------------+----------------+
 
| Variable_name | Value |
 
+-----------------------+----------------+
 
| transaction_isolation | READ-COMMITTED |
 
+-----------------------+----------------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊÄªÁªìÊù•ËØ¥ÔºåÂ≠òÂú®Âç≥ÂêàÁêÜÔºåÂì™‰∏™ÈöîÁ¶ªÁ∫ßÂà´ÈÉΩÊúâÂÆÉËá™Â∑±ÁöÑ‰ΩøÁî®Âú∫ÊôØÔºå‰Ω†Ë¶ÅÊ†πÊçÆËá™Â∑±ÁöÑ‰∏öÂä°ÊÉÖÂÜµÊù•ÂÆö„ÄÇÊàëÊÉ≥<strong>‰Ω†ÂèØËÉΩ‰ºöÈóÆÈÇ£‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶Å‚ÄúÂèØÈáçÂ§çËØª‚ÄùÁöÑÂú∫ÊôØÂë¢</strong>ÔºüÊàë‰ª¨Êù•Áúã‰∏Ä‰∏™Êï∞ÊçÆÊ†°ÂØπÈÄªËæëÁöÑÊ°à‰æã„ÄÇ</p><p>ÂÅáËÆæ‰Ω†Âú®ÁÆ°ÁêÜ‰∏Ä‰∏™‰∏™‰∫∫Èì∂Ë°åË¥¶Êà∑Ë°®„ÄÇ‰∏Ä‰∏™Ë°®Â≠ò‰∫ÜÊØè‰∏™ÊúàÊúàÂ∫ïÁöÑ‰ΩôÈ¢ùÔºå‰∏Ä‰∏™Ë°®Â≠ò‰∫ÜË¥¶ÂçïÊòéÁªÜ„ÄÇËøôÊó∂ÂÄô‰Ω†Ë¶ÅÂÅöÊï∞ÊçÆÊ†°ÂØπÔºå‰πüÂ∞±ÊòØÂà§Êñ≠‰∏ä‰∏™ÊúàÁöÑ‰ΩôÈ¢ùÂíåÂΩìÂâç‰ΩôÈ¢ùÁöÑÂ∑ÆÈ¢ùÔºåÊòØÂê¶‰∏éÊú¨ÊúàÁöÑË¥¶ÂçïÊòéÁªÜ‰∏ÄËá¥„ÄÇ‰Ω†‰∏ÄÂÆöÂ∏åÊúõÂú®Ê†°ÂØπËøáÁ®ã‰∏≠ÔºåÂç≥‰ΩøÊúâÁî®Êà∑ÂèëÁîü‰∫Ü‰∏ÄÁ¨îÊñ∞ÁöÑ‰∫§ÊòìÔºå‰πü‰∏çÂΩ±Âìç‰Ω†ÁöÑÊ†°ÂØπÁªìÊûú„ÄÇ</p><p>ËøôÊó∂ÂÄô‰ΩøÁî®‚ÄúÂèØÈáçÂ§çËØª‚ÄùÈöîÁ¶ªÁ∫ßÂà´Â∞±ÂæàÊñπ‰æø„ÄÇ‰∫ãÂä°ÂêØÂä®Êó∂ÁöÑËßÜÂõæÂèØ‰ª•ËÆ§‰∏∫ÊòØÈùôÊÄÅÁöÑÔºå‰∏çÂèóÂÖ∂‰ªñ‰∫ãÂä°Êõ¥Êñ∞ÁöÑÂΩ±Âìç„ÄÇ</p><h2 id="_3-‰∫ãÂä°ÈöîÁ¶ªÁöÑÂÆûÁé∞" tabindex="-1"><a class="header-anchor" href="#_3-‰∫ãÂä°ÈöîÁ¶ªÁöÑÂÆûÁé∞"><span>3.‰∫ãÂä°ÈöîÁ¶ªÁöÑÂÆûÁé∞</span></a></h2><p>ÁêÜËß£‰∫Ü‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÔºåÊàë‰ª¨ÂÜçÊù•ÁúãÁúã‰∫ãÂä°ÈöîÁ¶ªÂÖ∑‰ΩìÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ„ÄÇËøôÈáåÊàë‰ª¨Â±ïÂºÄËØ¥Êòé‚ÄúÂèØÈáçÂ§çËØª‚Äù„ÄÇ(MySQL default isolation level)</p><img src="https://images.zzq8.cn/img/202306031634681.png" alt="image-20230603163250059" style="zoom:50%;"><p>Âú® MySQL ‰∏≠ÔºåÂÆûÈôÖ‰∏ä<mark>ÊØèÊù°ËÆ∞ÂΩïÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÈÉΩ‰ºöÂêåÊó∂ËÆ∞ÂΩï‰∏ÄÊù°ÂõûÊªöÊìç‰Ωú</mark>„ÄÇËÆ∞ÂΩï‰∏äÁöÑÊúÄÊñ∞ÂÄºÔºåÈÄöËøáÂõûÊªöÊìç‰ΩúÔºåÈÉΩÂèØ‰ª•ÂæóÂà∞Ââç‰∏Ä‰∏™Áä∂ÊÄÅÁöÑÂÄº„ÄÇ</p><p>ÂÅáËÆæ‰∏Ä‰∏™ÂÄº‰ªé 1 Ë¢´ÊåâÈ°∫Â∫èÊîπÊàê‰∫Ü 2„ÄÅ3„ÄÅ4ÔºåÂú®<code>ÂõûÊªöÊó•Âøó undo log</code> ÈáåÈù¢Â∞±‰ºöÊúâÁ±ª‰ºº‰∏ãÈù¢ÁöÑËÆ∞ÂΩï„ÄÇ</p><img src="https://images.zzq8.cn/img/202212081753521.png" style="zoom:67%;"><img src="https://images.zzq8.cn/img/202306031640164.png" alt="image-20230603163923678" style="zoom:67%;"><p>ÂΩìÂâçÂÄºÊòØ 4Ôºå‰ΩÜÊòØÂú®Êü•ËØ¢ËøôÊù°ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºå<strong>‰∏çÂêåÊó∂ÂàªÂêØÂä®ÁöÑ‰∫ãÂä°‰ºöÊúâ‰∏çÂêåÁöÑ read-view</strong>„ÄÇÂ¶ÇÂõæ‰∏≠ÁúãÂà∞ÁöÑÔºåÂú®ËßÜÂõæ A„ÄÅB„ÄÅC ÈáåÈù¢ÔºåËøô‰∏Ä‰∏™ËÆ∞ÂΩïÁöÑÂÄºÂàÜÂà´ÊòØ 1„ÄÅ2„ÄÅ4Ôºå<mark>Âêå‰∏ÄÊù°ËÆ∞ÂΩïÂú®Á≥ªÁªü‰∏≠ÂèØ‰ª•Â≠òÂú®Â§ö‰∏™ÁâàÊú¨ÔºåÂ∞±ÊòØÊï∞ÊçÆÂ∫ìÁöÑÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMVCC)</mark>„ÄÇÂØπ‰∫é read-view AÔºåË¶ÅÂæóÂà∞ 1ÔºåÂ∞±ÂøÖÈ°ªÂ∞ÜÂΩìÂâçÂÄº‰æùÊ¨°ÊâßË°åÂõæ‰∏≠ÊâÄÊúâÁöÑÂõûÊªöÊìç‰ΩúÂæóÂà∞„ÄÇ MVCC ÂèØ‰ª•Áúã‰ΩúÊòØË°åÁ∫ßÈîÅÁöÑ‰∏Ä‰∏™ÂçáÁ∫ßÔºåÊâÄ‰ª• MyISAM ‰∏çÊîØÊåÅ MVCCÔºåËÄå InnoDB ÊîØÊåÅ</p><p><strong>Ë°•ÂÖÖÔºö<strong>Â§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMVCCÔºâÊòØ‰∏ÄÁßçÁî®Êù•Ëß£ÂÜ≥<code>ËØª-ÂÜôÂÜ≤Á™Å</code>ÁöÑ</strong>Êó†ÈîÅÂπ∂ÂèëÊéßÂà∂</strong></p><ul><li><code>ËØª-ËØª</code>Ôºö‰∏çÂ≠òÂú®‰ªª‰ΩïÈóÆÈ¢òÔºå‰πü‰∏çÈúÄË¶ÅÂπ∂ÂèëÊéßÂà∂</li><li><code>ËØª-ÂÜô</code>ÔºöÊúâÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºåÂèØËÉΩ‰ºöÈÄ†Êàê‰∫ãÂä°ÈöîÁ¶ªÊÄßÈóÆÈ¢òÔºåÂèØËÉΩÈÅáÂà∞ËÑèËØªÔºåÂπªËØªÔºå‰∏çÂèØÈáçÂ§çËØª</li><li><code>ÂÜô-ÂÜô</code>ÔºöÊúâÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÔºåÂèØËÉΩ‰ºöÂ≠òÂú®Êõ¥Êñ∞‰∏¢Â§±ÈóÆÈ¢òÔºåÊØîÂ¶ÇÁ¨¨‰∏ÄÁ±ªÊõ¥Êñ∞‰∏¢Â§±ÔºåÁ¨¨‰∫åÁ±ªÊõ¥Êñ∞‰∏¢Â§±</li></ul><p>ÊâÄ‰ª•<strong>Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂõ†‰∏∫Êúâ‰∫Ü MVCCÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÂΩ¢Êàê‰∏§‰∏™ÁªÑÂêàÔºö</strong></p><blockquote><p>Ë°•ÂÖÖÔºö</p><p>MVCCÔºàÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºâÊòØ‰∏ÄÁßçÊï∞ÊçÆÂ∫ì‰∫ãÂä°ÊéßÂà∂ÊäÄÊúØÔºåÂÆÉÂèØ‰ª•Ëß£ÂÜ≥ËØªÂÜôÂÜ≤Á™ÅÁöÑÈóÆÈ¢òÔºåÂÖ∂Âü∫Êú¨ÊÄùÊÉ≥ÊòØÂú®Êï∞ÊçÆÂ∫ì‰∏≠Áª¥Êä§Â§ö‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆÔºå‰ª•‰æøÂú®Âπ∂ÂèëËØªÂÜôÊìç‰ΩúÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÂèØ‰ª•ËØªÂèñÂà∞Ëá™Â∑±ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÁâàÊú¨Ôºå‰ªéËÄåÈÅøÂÖç‰∫ÜÊï∞ÊçÆËØªÂÜôÂÜ≤Á™ÅÁöÑÈóÆÈ¢ò„ÄÇ</p><p>ÊÇ≤ËßÇÈîÅSQLËêΩÂú∞ÔºöÂÖ∑‰ΩìÊù•ËØ¥Ôºå<code>SELECT ... FOR UPDATE</code> ËØ≠Âè•‰ºöÂØπÊü•ËØ¢Âà∞ÁöÑË°åÂä†‰∏äÊéíÂÆÉÈîÅÔºàExclusive LockÔºâÔºåËøôÊÑèÂë≥ÁùÄÂÖ∂‰ªñ‰∫ãÂä°‰∏çËÉΩÂêåÊó∂ÂØπËøô‰∫õË°åËøõË°å‰øÆÊîπ„ÄÇÂú®Â§ö‰∏™‰∫ãÂä°ÂêåÊó∂Êü•ËØ¢Âêå‰∏ÄÁªÑÊï∞ÊçÆÊó∂ÔºåÂ¶ÇÊûúÂÖ∂‰∏≠‰∏Ä‰∏™‰∫ãÂä°‰ΩøÁî®‰∫Ü <code>FOR UPDATE</code>ÔºåÂàôÂÖ∂‰ªñ‰∫ãÂä°ÂøÖÈ°ªÁ≠âÂæÖËØ•‰∫ãÂä°ÈáäÊîæÈîÅ‰πãÂêéÊâçËÉΩËøõË°å‰øÆÊîπÊìç‰Ωú„ÄÇ</p><blockquote><p>Ë°åÁ∫ßÈîÅÈÉΩÊòØÂü∫‰∫éÁ¥¢ÂºïÁöÑÔºåÂ¶ÇÊûú‰∏ÄÊù° SQL ËØ≠Âè•Áî®‰∏çÂà∞Á¥¢ÂºïÊòØ‰∏ç‰ºö‰ΩøÁî®Ë°åÁ∫ßÈîÅÁöÑÔºåËÄå‰ºö‰ΩøÁî®Ë°®Á∫ßÈîÅÊääÊï¥Âº†Ë°®ÈîÅ‰ΩèÔºåËøôÁÇπÈúÄË¶ÅÂí±‰ª¨Ê†ºÂ§ñÁöÑÊ≥®ÊÑè</p><ul><li>ÂΩì <code>SELECT... FOR UPDATE</code> Êü•ËØ¢Êù°‰ª∂ÊòéÁ°ÆÊåáÂÆö‰∏ªÈîÆÊó∂Ôºå‰∏∫<strong>Ë°åÈîÅ</strong>„ÄÇ</li><li>ÂΩì <code>SELECT... FOR UPDATE</code> Êü•ËØ¢Êù°‰ª∂ÊòéÁ°ÆÊåáÂÆöÁ¥¢ÂºïÊó∂Ôºå‰∏∫<strong>Ë°åÈîÅ</strong>ÔºåÊâÄÊúâÊª°Ë∂≥Ê≠§Êù°‰ª∂ÁöÑË°åÈÉΩ‰ºöË¢´Âä†ÈîÅ„ÄÇ</li><li>ÂΩì <code>SELECT... FOR UPDATE</code> Êü•ËØ¢Êù°‰ª∂ÊâÄÊåáÂÆö‰∏ªÈîÆ‰∏∫‰∏Ä‰∏™ËåÉÂõ¥Êó∂Ôºå‰∏∫<strong>Ë°åÈîÅ</strong>ÔºåÊâÄÊúâÊª°Ë∂≥Ê≠§Êù°‰ª∂ÁöÑË°åÈÉΩ‰ºöË¢´Âä†ÈîÅ„ÄÇ</li><li>ÂΩì <code>SELECT... FOR UPDATE</code> Êü•ËØ¢Êù°‰ª∂Êó†‰∏ªÈîÆ„ÄÅÊó†Á¥¢ÂºïÊó∂Ôºå‰∏∫<strong>Ë°®ÈîÅ</strong>„ÄÇ</li><li>ÂΩì <code>SELECT... FOR UPDATE</code> Êü•ËØ¢Êù°‰ª∂ÊòéÁ°ÆÊåáÂÆöÁ¥¢ÂºïÊàñ‰∏ªÈîÆÊó∂Ôºå‰ΩÜÊü•ËØ¢Êó†ÁªìÊûúÊó∂Ôºå‰∏ç‰ºöÂä†Ë°åÈîÅÔºåÊõ¥‰∏ç‰ºöÂä†Ë°®ÈîÅ</li></ul></blockquote><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>‰ª•‰∏ãÊòØ‰∏Ä‰∏™‰ΩøÁî®ÊÇ≤ËßÇÈîÅËß£ÂÜ≥ÂÜôÂÜôÂÜ≤Á™ÅÁöÑÂÆû‰æãËØ≠Âè•Ôºö

<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_table <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span>
<span class="token comment">-- ÂØπ id ‰∏∫ 1 ÁöÑÊï∞ÊçÆË°åÂä†ÊÇ≤ËßÇÈîÅ</span>
<span class="token keyword">UPDATE</span> my_table <span class="token keyword">SET</span> column1 <span class="token operator">=</span> <span class="token string">&#39;new value&#39;</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
<span class="token comment">-- ‰∫ãÂä°ÁªìÊùüÔºåÈáäÊîæÈîÅ</span>
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰∫ãÂä°È¶ñÂÖà‰ΩøÁî® <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span> ËØ≠Âè•ÂØπ id ‰∏∫ <span class="token number">1</span> ÁöÑÊï∞ÊçÆË°åËøõË°åÂä†ÈîÅ„ÄÇËøôÂ∞ÜÂØºËá¥ÂÖ∂‰ªñ‰∫ãÂä°Âú®Â∞ùËØï‰øÆÊîπÁõ∏ÂêåÊï∞ÊçÆË°åÊó∂Ë¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ËØ•‰∫ãÂä°ÈáäÊîæÈîÅ„ÄÇÁÑ∂ÂêéÔºå‰∫ãÂä°ÊâßË°åÊõ¥Êñ∞Êìç‰ΩúÂπ∂Êèê‰∫§‰∫ãÂä°ÔºåÈáäÊîæÈîÅ„ÄÇ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><ul><li><code>MVCC + ÊÇ≤ËßÇÈîÅÔºöselect * from xxxx where id = 1 for update;</code> MVCC Ëß£ÂÜ≥ËØªÂÜôÂÜ≤Á™ÅÔºåÊÇ≤ËßÇÈîÅËß£ÂÜ≥ÂÜôÂÜôÂÜ≤Á™Å</li><li><code>MVCC + ‰πêËßÇÈîÅÔºöupdate t_goods set count = count -1 , version = version + 1 where good_id=2 and version = 1</code> MVCC Ëß£ÂÜ≥ËØªÂÜôÂÜ≤Á™ÅÔºå‰πêËßÇÈîÅËß£ÂÜ≥ÂÜôÂÜôÂÜ≤Á™Å</li></ul><p><strong>ÂêåÊó∂‰Ω†‰ºöÂèëÁé∞ÔºåÂç≥‰ΩøÁé∞Âú®ÊúâÂè¶Â§ñ‰∏Ä‰∏™‰∫ãÂä°Ê≠£Âú®Â∞Ü 4 ÊîπÊàê 5ÔºåËøô‰∏™‰∫ãÂä°Ë∑ü read-view A„ÄÅB„ÄÅC ÂØπÂ∫îÁöÑ‰∫ãÂä°ÊòØ‰∏ç‰ºöÂÜ≤Á™ÅÁöÑ„ÄÇ</strong>ÔºàXDÔºöMVCC Ëß£ÂÜ≥ËØªÂÜôÂÜ≤Á™Å„ÄÇÊàëÂú®Ëá™Â∑±ËßÜÂõæÊîπËá™Â∑±ÁöÑÔºå‰Ω†‰ª¨ËØªÂèñ‰Ω†‰ª¨Ëá™Â∑±ËßÜÂõæÁöÑ‰∫í‰∏çÂÜ≤Á™ÅÔºâ</p><p>‰Ω†‰∏ÄÂÆö‰ºöÈóÆÔºåÂõûÊªöÊó•ÂøóÊÄª‰∏çËÉΩ‰∏ÄÁõ¥‰øùÁïôÂêßÔºå‰ªÄ‰πàÊó∂ÂÄôÂà†Èô§Âë¢ÔºüÁ≠îÊ°àÊòØÔºåÂú®‰∏çÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÂà†Èô§„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÁ≥ªÁªü‰ºöÂà§Êñ≠ÔºåÂΩìÊ≤°Êúâ‰∫ãÂä°ÂÜçÈúÄË¶ÅÁî®Âà∞Ëøô‰∫õÂõûÊªöÊó•ÂøóÊó∂ÔºåÂõûÊªöÊó•Âøó‰ºöË¢´Âà†Èô§„ÄÇ</p><p>‰ªÄ‰πàÊó∂ÂÄôÊâç‰∏çÈúÄË¶Å‰∫ÜÂë¢ÔºüÂ∞±ÊòØÂΩìÁ≥ªÁªüÈáåÊ≤°ÊúâÊØîËøô‰∏™ÂõûÊªöÊó•ÂøóÊõ¥Êó©ÁöÑ read-view ÁöÑÊó∂ÂÄô„ÄÇ</p><p>Âü∫‰∫é‰∏äÈù¢ÁöÑËØ¥ÊòéÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàÂª∫ËÆÆ‰Ω†Â∞ΩÈáè‰∏çË¶Å‰ΩøÁî®Èïø‰∫ãÂä°„ÄÇ</p><p>Èïø‰∫ãÂä°ÊÑèÂë≥ÁùÄÁ≥ªÁªüÈáåÈù¢‰ºöÂ≠òÂú®ÂæàËÄÅÁöÑ‰∫ãÂä°ËßÜÂõæ„ÄÇÁî±‰∫éËøô‰∫õ‰∫ãÂä°ÈöèÊó∂ÂèØËÉΩËÆøÈóÆÊï∞ÊçÆÂ∫ìÈáåÈù¢ÁöÑ‰ªª‰ΩïÊï∞ÊçÆÔºåÊâÄ‰ª•Ëøô‰∏™‰∫ãÂä°Êèê‰∫§‰πãÂâçÔºåÊï∞ÊçÆÂ∫ìÈáåÈù¢ÂÆÉÂèØËÉΩÁî®Âà∞ÁöÑÂõûÊªöËÆ∞ÂΩïÈÉΩÂøÖÈ°ª‰øùÁïôÔºåËøôÂ∞±‰ºöÂØºËá¥Â§ßÈáèÂç†Áî®Â≠òÂÇ®Á©∫Èó¥„ÄÇ</p><p>Âú® MySQL 5.5 Âèä‰ª•ÂâçÁöÑÁâàÊú¨ÔºåÂõûÊªöÊó•ÂøóÊòØË∑üÊï∞ÊçÆÂ≠óÂÖ∏‰∏ÄËµ∑ÊîæÂú® ibdata Êñá‰ª∂ÈáåÁöÑÔºåÂç≥‰ΩøÈïø‰∫ãÂä°ÊúÄÁªàÊèê‰∫§ÔºåÂõûÊªöÊÆµË¢´Ê∏ÖÁêÜÔºåÊñá‰ª∂‰πü‰∏ç‰ºöÂèòÂ∞è„ÄÇÊàëËßÅËøáÊï∞ÊçÆÂè™Êúâ 20GBÔºåËÄåÂõûÊªöÊÆµÊúâ 200GB ÁöÑÂ∫ì„ÄÇÊúÄÁªàÂè™Â•Ω‰∏∫‰∫ÜÊ∏ÖÁêÜÂõûÊªöÊÆµÔºåÈáçÂª∫Êï¥‰∏™Â∫ì„ÄÇ</p><p>Èô§‰∫ÜÂØπÂõûÊªöÊÆµÁöÑÂΩ±ÂìçÔºåÈïø‰∫ãÂä°ËøòÂç†Áî®ÈîÅËµÑÊ∫êÔºå‰πüÂèØËÉΩÊãñÂûÆÊï¥‰∏™Â∫ìÔºåËøô‰∏™Êàë‰ª¨‰ºöÂú®ÂêéÈù¢ËÆ≤ÈîÅÁöÑÊó∂ÂÄôÂ±ïÂºÄ„ÄÇ</p><h2 id="_4-‰∫ãÂä°ÁöÑÂêØÂä®ÊñπÂºè" tabindex="-1"><a class="header-anchor" href="#_4-‰∫ãÂä°ÁöÑÂêØÂä®ÊñπÂºè"><span>4.‰∫ãÂä°ÁöÑÂêØÂä®ÊñπÂºè</span></a></h2><p>Â¶ÇÂâçÈù¢ÊâÄËø∞ÔºåÈïø‰∫ãÂä°ÊúâËøô‰∫õÊΩúÂú®È£éÈô©ÔºåÊàëÂΩìÁÑ∂ÊòØÂª∫ËÆÆ‰Ω†Â∞ΩÈáèÈÅøÂÖç„ÄÇÂÖ∂ÂÆûÂæàÂ§öÊó∂ÂÄô‰∏öÂä°ÂºÄÂèëÂêåÂ≠¶Âπ∂‰∏çÊòØÊúâÊÑè‰ΩøÁî®Èïø‰∫ãÂä°ÔºåÈÄöÂ∏∏ÊòØÁî±‰∫éËØØÁî®ÊâÄËá¥„ÄÇMySQL ÁöÑ‰∫ãÂä°ÂêØÂä®ÊñπÂºèÊúâ‰ª•‰∏ãÂá†ÁßçÔºö</p><ol><li>ÊòæÂºèÂêØÂä®‰∫ãÂä°ËØ≠Âè•Ôºå begin Êàñ start transaction„ÄÇÈÖçÂ•óÁöÑÊèê‰∫§ËØ≠Âè•ÊòØ commitÔºåÂõûÊªöËØ≠Âè•ÊòØ rollback„ÄÇ</li><li>set autocommit=0ÔºåËøô‰∏™ÂëΩ‰ª§‰ºöÂ∞ÜËøô‰∏™Á∫øÁ®ãÁöÑËá™Âä®Êèê‰∫§ÂÖ≥Êéâ„ÄÇÊÑèÂë≥ÁùÄÂ¶ÇÊûú‰Ω†Âè™ÊâßË°å‰∏Ä‰∏™ select ËØ≠Âè•ÔºåËøô‰∏™‰∫ãÂä°Â∞±ÂêØÂä®‰∫ÜÔºåËÄå‰∏îÂπ∂‰∏ç‰ºöËá™Âä®Êèê‰∫§„ÄÇËøô‰∏™‰∫ãÂä°ÊåÅÁª≠Â≠òÂú®Áõ¥Âà∞‰Ω†‰∏ªÂä®ÊâßË°å commit Êàñ rollback ËØ≠Âè•ÔºåÊàñËÄÖÊñ≠ÂºÄËøûÊé•„ÄÇ</li></ol><p>Êúâ‰∫õÂÆ¢Êà∑Á´ØËøûÊé•Ê°ÜÊû∂‰ºöÈªòËÆ§ËøûÊé•ÊàêÂäüÂêéÂÖàÊâßË°å‰∏Ä‰∏™ set autocommit=0 ÁöÑÂëΩ‰ª§„ÄÇËøôÂ∞±ÂØºËá¥Êé•‰∏ãÊù•ÁöÑÊü•ËØ¢ÈÉΩÂú®‰∫ãÂä°‰∏≠ÔºåÂ¶ÇÊûúÊòØÈïøËøûÊé•ÔºåÂ∞±ÂØºËá¥‰∫ÜÊÑèÂ§ñÁöÑÈïø‰∫ãÂä°„ÄÇ</p><p>Âõ†Ê≠§ÔºåÊàë‰ºöÂª∫ËÆÆ‰Ω†ÊÄªÊòØ‰ΩøÁî® set autocommit=1, ÈÄöËøáÊòæÂºèËØ≠Âè•ÁöÑÊñπÂºèÊù•ÂêØÂä®‰∫ãÂä°„ÄÇ</p><p>‰ΩÜÊòØÊúâÁöÑÂºÄÂèëÂêåÂ≠¶‰ºöÁ∫†Áªì‚ÄúÂ§ö‰∏ÄÊ¨°‰∫§‰∫í‚ÄùÁöÑÈóÆÈ¢ò„ÄÇÂØπ‰∫é‰∏Ä‰∏™ÈúÄË¶ÅÈ¢ëÁπÅ‰ΩøÁî®‰∫ãÂä°ÁöÑ‰∏öÂä°ÔºåÁ¨¨‰∫åÁßçÊñπÂºèÊØè‰∏™‰∫ãÂä°Âú®ÂºÄÂßãÊó∂ÈÉΩ‰∏çÈúÄË¶Å‰∏ªÂä®ÊâßË°å‰∏ÄÊ¨° ‚Äúbegin‚ÄùÔºåÂáèÂ∞ë‰∫ÜËØ≠Âè•ÁöÑ‰∫§‰∫íÊ¨°Êï∞„ÄÇÂ¶ÇÊûú‰Ω†‰πüÊúâËøô‰∏™È°æËôëÔºåÊàëÂª∫ËÆÆ‰Ω†‰ΩøÁî® commit work and chain ËØ≠Ê≥ï„ÄÇ</p><p>Âú® autocommit ‰∏∫ 1 ÁöÑÊÉÖÂÜµ‰∏ãÔºåÁî® begin ÊòæÂºèÂêØÂä®ÁöÑ‰∫ãÂä°ÔºåÂ¶ÇÊûúÊâßË°å commit ÂàôÊèê‰∫§‰∫ãÂä°„ÄÇ<strong>Â¶ÇÊûúÊâßË°å commit work and chainÔºåÂàôÊòØÊèê‰∫§‰∫ãÂä°Âπ∂Ëá™Âä®ÂêØÂä®‰∏ã‰∏Ä‰∏™‰∫ãÂä°ÔºåËøôÊ†∑‰πüÁúÅÂéª‰∫ÜÂÜçÊ¨°ÊâßË°å begin ËØ≠Âè•ÁöÑÂºÄÈîÄ„ÄÇÂêåÊó∂Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑÊòØ‰ªéÁ®ãÂ∫èÂºÄÂèëÁöÑËßíÂ∫¶ÊòéÁ°ÆÂú∞Áü•ÈÅìÊØè‰∏™ËØ≠Âè•ÊòØÂê¶Â§Ñ‰∫é‰∫ãÂä°‰∏≠„ÄÇ</strong></p><p>‰Ω†ÂèØ‰ª•Âú® information_schema Â∫ìÁöÑ innodb_trx Ëøô‰∏™Ë°®‰∏≠Êü•ËØ¢Èïø‰∫ãÂä°ÔºåÊØîÂ¶Ç‰∏ãÈù¢Ëøô‰∏™ËØ≠Âè•ÔºåÁî®‰∫éÊü•ÊâæÊåÅÁª≠Êó∂Èó¥Ë∂ÖËøá 60s ÁöÑ‰∫ãÂä°„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>select * from information_schema.innodb_trx where TIME_TO_SEC(timediff(now(),trx_started))&gt;60
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_5-Â∞èÁªì-1" tabindex="-1"><a class="header-anchor" href="#_5-Â∞èÁªì-1"><span>5.Â∞èÁªì</span></a></h2><blockquote><p>Ë°•ÂÖÖÈù¢ËØïÈ¢òÔºö<mark>ËØ¥‰∏Ä‰∏ãmysql‰∏≠‰∫ãÂä°ÁöÑÂÆûÁé∞ÂéüÁêÜ</mark></p><ol><li><p>mysqlÊòØÁî±mvccÂÆûÁé∞ÁöÑ‰∫ãÂä°ÊéßÂà∂</p></li><li><p>MVCCÁöÑÂÆûÁé∞‰æùËµñ‰∫éÔºöÈöêËóèÂ≠óÊÆµ„ÄÅReadView„ÄÅundolog</p></li><li><p>ReadView Êï∞ÊçÆÁöÑÂèØËßÅÊÄßÂíå‰∫ãÂä°ÁöÑÈöîÁ¶ªÁ∫ßÂà´ÊúâÂÖ≥</p></li></ol><p>PS: ÈöêËóèÂ≠óÊÆµ</p><ul><li>DB_TRX_ID(‰∫ãÂä°ID)</li><li>DB_ROLL_PTR(ÊåáÂêëËØ•Ë°åÁöÑ undo log)</li><li>DB_ROW_IDÔºàÂ¶ÇÊûúÊ≤°Êúâ‰∏ªÈîÆÂàô‰ºöËá™Âä®ÁîüÊàêËøô‰∏™ÂΩì‰∏ªÈîÆÔºâ</li></ul></blockquote><p>ËøôÁØáÊñáÁ´†ÈáåÈù¢ÔºåÊàë‰ªãÁªç‰∫Ü MySQL ÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÁöÑÁé∞Ë±°ÂíåÂÆûÁé∞ÔºåÊ†πÊçÆÂÆûÁé∞ÂéüÁêÜÂàÜÊûê‰∫ÜÈïø‰∫ãÂä°Â≠òÂú®ÁöÑÈ£éÈô©Ôºå‰ª•ÂèäÂ¶Ç‰ΩïÁî®Ê≠£Á°ÆÁöÑÊñπÂºèÈÅøÂÖçÈïø‰∫ãÂä°„ÄÇÂ∏åÊúõÊàë‰∏æÁöÑ‰æãÂ≠êËÉΩÂ§üÂ∏ÆÂä©‰Ω†ÁêÜËß£‰∫ãÂä°ÔºåÂπ∂Êõ¥Â•ΩÂú∞‰ΩøÁî® MySQL ÁöÑ‰∫ãÂä°ÁâπÊÄß„ÄÇ</p><blockquote><p>QÔºöÂ¶Ç‰ΩïÈÅøÂÖçÈïø‰∫ãÂä°ÂØπ‰∏öÂä°ÁöÑÂΩ±ÂìçÔºü</p><p><strong>È¶ñÂÖàÔºå‰ªéÂ∫îÁî®ÂºÄÂèëÁ´ØÊù•ÁúãÔºö</strong></p><ol><li>Á°ÆËÆ§ÊòØÂê¶‰ΩøÁî®‰∫Ü set autocommit=0„ÄÇËøô‰∏™Á°ÆËÆ§Â∑•‰ΩúÂèØ‰ª•Âú®ÊµãËØïÁéØÂ¢É‰∏≠ÂºÄÂ±ïÔºåÊää MySQL ÁöÑ general_log ÂºÄËµ∑Êù•ÔºåÁÑ∂ÂêéÈöè‰æøË∑ë‰∏Ä‰∏™‰∏öÂä°ÈÄªËæëÔºåÈÄöËøá general_log ÁöÑÊó•ÂøóÊù•Á°ÆËÆ§„ÄÇ‰∏ÄËà¨Ê°ÜÊû∂Â¶ÇÊûú‰ºöËÆæÁΩÆËøô‰∏™ÂÄºÔºå‰πüÂ∞±‰ºöÊèê‰æõÂèÇÊï∞Êù•ÊéßÂà∂Ë°å‰∏∫Ôºå‰Ω†ÁöÑÁõÆÊ†áÂ∞±ÊòØÊääÂÆÉÊîπÊàê 1„ÄÇ</li><li>Á°ÆËÆ§ÊòØÂê¶Êúâ‰∏çÂøÖË¶ÅÁöÑÂè™ËØª‰∫ãÂä°„ÄÇÊúâ‰∫õÊ°ÜÊû∂‰ºö‰π†ÊÉØ‰∏çÁÆ°‰ªÄ‰πàËØ≠Âè•ÂÖàÁî® begin/commit Ê°ÜËµ∑Êù•„ÄÇÊàëËßÅËøáÊúâ‰∫õÊòØ‰∏öÂä°Âπ∂Ê≤°ÊúâËøô‰∏™ÈúÄË¶ÅÔºå‰ΩÜÊòØ‰πüÊääÂ•ΩÂá†‰∏™ select ËØ≠Âè•ÊîæÂà∞‰∫Ü‰∫ãÂä°‰∏≠„ÄÇËøôÁßçÂè™ËØª‰∫ãÂä°ÂèØ‰ª•ÂéªÊéâ„ÄÇ</li><li>‰∏öÂä°ËøûÊé•Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºåÊ†πÊçÆ‰∏öÂä°Êú¨Ë∫´ÁöÑÈ¢Ñ‰º∞ÔºåÈÄöËøá SET MAX_EXECUTION_TIME ÂëΩ‰ª§ÔºåÊù•ÊéßÂà∂ÊØè‰∏™ËØ≠Âè•ÊâßË°åÁöÑÊúÄÈïøÊó∂Èó¥ÔºåÈÅøÂÖçÂçï‰∏™ËØ≠Âè•ÊÑèÂ§ñÊâßË°åÂ§™ÈïøÊó∂Èó¥„ÄÇÔºà‰∏∫‰ªÄ‰πà‰ºöÊÑèÂ§ñÔºüÂú®ÂêéÁª≠ÁöÑÊñáÁ´†‰∏≠‰ºöÊèêÂà∞ËøôÁ±ªÊ°à‰æãÔºâ</li></ol><p><strong>ÂÖ∂Ê¨°Ôºå‰ªéÊï∞ÊçÆÂ∫ìÁ´ØÊù•ÁúãÔºö</strong></p><ol><li>ÁõëÊéß information_schema.Innodb_trx Ë°®ÔºåËÆæÁΩÆÈïø‰∫ãÂä°ÈòàÂÄºÔºåË∂ÖËøáÂ∞±Êä•Ë≠¶ / ÊàñËÄÖ killÔºõ</li><li>Percona ÁöÑ pt-kill Ëøô‰∏™Â∑•ÂÖ∑‰∏çÈîôÔºåÊé®Ëçê‰ΩøÁî®Ôºõ</li><li>Âú®‰∏öÂä°ÂäüËÉΩÊµãËØïÈò∂ÊÆµË¶ÅÊ±ÇËæìÂá∫ÊâÄÊúâÁöÑ general_logÔºåÂàÜÊûêÊó•ÂøóË°å‰∏∫ÊèêÂâçÂèëÁé∞ÈóÆÈ¢òÔºõ</li><li>Â¶ÇÊûú‰ΩøÁî®ÁöÑÊòØ MySQL 5.6 ÊàñËÄÖÊõ¥Êñ∞ÁâàÊú¨ÔºåÊää innodb_undo_tablespaces ËÆæÁΩÆÊàê 2ÔºàÊàñÊõ¥Â§ßÁöÑÂÄºÔºâ„ÄÇÂ¶ÇÊûúÁúüÁöÑÂá∫Áé∞Â§ß‰∫ãÂä°ÂØºËá¥ÂõûÊªöÊÆµËøáÂ§ßÔºåËøôÊ†∑ËÆæÁΩÆÂêéÊ∏ÖÁêÜËµ∑Êù•Êõ¥Êñπ‰æø„ÄÇ</li></ol></blockquote><h1 id="_04‰∏®Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢Âºï-‰∏ä" tabindex="-1"><a class="header-anchor" href="#_04‰∏®Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢Âºï-‰∏ä"><span>04‰∏®Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÔºà‰∏äÔºâ</span></a></h1><h2 id="_1-ÂâçË®Ä-2" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä-2"><span>1.ÂâçË®Ä</span></a></h2><p>ÊèêÂà∞Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÔºåÊàëÊÉ≥‰Ω†Âπ∂‰∏çÈôåÁîüÔºåÂú®Êó•Â∏∏Â∑•‰Ωú‰∏≠‰ºöÁªèÂ∏∏Êé•Ëß¶Âà∞„ÄÇÊØîÂ¶ÇÊüê‰∏Ä‰∏™ SQL Êü•ËØ¢ÊØîËæÉÊÖ¢ÔºåÂàÜÊûêÂÆåÂéüÂõ†‰πãÂêéÔºå‰Ω†ÂèØËÉΩÂ∞±‰ºöËØ¥‚ÄúÁªôÊüê‰∏™Â≠óÊÆµÂä†‰∏™Á¥¢ÂºïÂêß‚Äù‰πãÁ±ªÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ‰ΩÜÂà∞Â∫ï‰ªÄ‰πàÊòØÁ¥¢ÂºïÔºåÁ¥¢ÂºïÂèàÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÂë¢Ôºü‰ªäÂ§©Â∞±ËÆ©Êàë‰ª¨‰∏ÄËµ∑Êù•ËÅäËÅäËøô‰∏™ËØùÈ¢òÂêß„ÄÇ</p><p>Êï∞ÊçÆÂ∫ìÁ¥¢ÂºïÁöÑÂÜÖÂÆπÊØîËæÉÂ§öÔºåÊàëÂàÜÊàê‰∫Ü‰∏ä‰∏ã‰∏§ÁØáÊñáÁ´†„ÄÇÁ¥¢ÂºïÊòØÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÈáåÈù¢ÊúÄÈáçË¶ÅÁöÑÊ¶ÇÂøµ‰πã‰∏ÄÔºåÊâÄ‰ª•ÊàëÂ∏åÊúõ‰Ω†ËÉΩÂ§üËÄêÂøÉÁúãÂÆå„ÄÇÂú®ÂêéÈù¢ÁöÑÂÆûÊàòÊñáÁ´†‰∏≠ÔºåÊàë‰πü‰ºöÁªèÂ∏∏ÂºïÁî®Ëøô‰∏§ÁØáÊñáÁ´†‰∏≠ÊèêÂà∞ÁöÑÁü•ËØÜÁÇπÔºåÂä†Ê∑±‰Ω†ÂØπÊï∞ÊçÆÂ∫ìÁ¥¢ÂºïÁöÑÁêÜËß£„ÄÇ</p><p>‰∏ÄÂè•ËØùÁÆÄÂçïÊù•ËØ¥ÔºåÁ¥¢ÂºïÁöÑÂá∫Áé∞ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏∫‰∫ÜÊèêÈ´òÊï∞ÊçÆÊü•ËØ¢ÁöÑÊïàÁéáÔºåÂ∞±ÂÉè‰π¶ÁöÑÁõÆÂΩï‰∏ÄÊ†∑„ÄÇ‰∏ÄÊú¨ 500 È°µÁöÑ‰π¶ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Âø´ÈÄüÊâæÂà∞ÂÖ∂‰∏≠ÁöÑÊüê‰∏Ä‰∏™Áü•ËØÜÁÇπÔºåÂú®‰∏çÂÄüÂä©ÁõÆÂΩïÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÇ£Êàë‰º∞ËÆ°‰Ω†ÂèØÂæóÊâæ‰∏Ä‰ºöÂÑø„ÄÇÂêåÊ†∑ÔºåÂØπ‰∫éÊï∞ÊçÆÂ∫ìÁöÑË°®ËÄåË®ÄÔºåÁ¥¢ÂºïÂÖ∂ÂÆûÂ∞±ÊòØÂÆÉÁöÑ‚ÄúÁõÆÂΩï‚Äù„ÄÇ</p><h3 id="Ë°•ÂÖÖ-Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπ" tabindex="-1"><a class="header-anchor" href="#Ë°•ÂÖÖ-Á¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπ"><span>Ë°•ÂÖÖÔºöÁ¥¢ÂºïÁöÑ‰ºòÁº∫ÁÇπ</span></a></h3><h4 id="‰ºòÁÇπ" tabindex="-1"><a class="header-anchor" href="#‰ºòÁÇπ"><span>‰ºòÁÇπ:</span></a></h4><ul><li>‰ΩøÁî®Á¥¢ÂºïÂèØ‰ª•Â§ßÂ§ßÂä†Âø´ Êï∞ÊçÆÁöÑÊ£ÄÁ¥¢ÈÄüÂ∫¶ÔºàÂ§ßÂ§ßÂáèÂ∞ëÊ£ÄÁ¥¢ÁöÑÊï∞ÊçÆÈáèÔºâ, Ëøô‰πüÊòØÂàõÂª∫Á¥¢ÂºïÁöÑÊúÄ‰∏ªË¶ÅÁöÑÂéüÂõ†„ÄÇ</li><li>ÈÄöËøáÂàõÂª∫ÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÔºåÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÂ∫ìË°®‰∏≠ÊØè‰∏ÄË°åÊï∞ÊçÆÁöÑÂîØ‰∏ÄÊÄß„ÄÇ</li></ul><h4>Áº∫ÁÇπ:</h4> * ÂàõÂª∫Á¥¢ÂºïÂíåÁª¥Êä§Á¥¢ÂºïÈúÄË¶ÅËÄóË¥πËÆ∏Â§öÊó∂Èó¥„ÄÇ**ÂΩìÂØπË°®‰∏≠ÁöÑÊï∞ÊçÆËøõË°å==Â¢ûÂà†Êîπ==ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊï∞ÊçÆÊúâÁ¥¢ÂºïÔºåÈÇ£‰πàÁ¥¢Âºï‰πüÈúÄË¶ÅÂä®ÊÄÅÁöÑ‰øÆÊîπÔºå‰ºöÈôç‰Ωé SQL ÊâßË°åÊïàÁéá„ÄÇ** * Á¥¢ÂºïÈúÄË¶Å‰ΩøÁî®Áâ©ÁêÜÊñá‰ª∂Â≠òÂÇ®Ôºå‰πü‰ºöËÄóË¥π‰∏ÄÂÆöÁ©∫Èó¥„ÄÇ <p>‰ΩÜÊòØÔºå<b>‰ΩøÁî®Á¥¢Âºï‰∏ÄÂÆöËÉΩÊèêÈ´òÊü•ËØ¢ÊÄßËÉΩÂêó?</b></p><p>Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÁ¥¢ÂºïÊü•ËØ¢ÈÉΩÊòØÊØîÂÖ®Ë°®Êâ´ÊèèË¶ÅÂø´ÁöÑ„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÈáè‰∏çÂ§ßÔºåÈÇ£‰πà‰ΩøÁî®Á¥¢Âºï‰πü‰∏ç‰∏ÄÂÆöËÉΩÂ§üÂ∏¶Êù•ÂæàÂ§ßÊèêÂçá„ÄÇ</p><p><a href="https://javaguide.cn/database/mysql/mysql-index.html#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">ÂéüÊñáÈìæÊé•</a></p><h4 id="Èù¢ËØïÈ¢ò-Áôæ‰∏áÁ∫ßÂà´‰ª•‰∏äÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂà†Èô§" tabindex="-1"><a class="header-anchor" href="#Èù¢ËØïÈ¢ò-Áôæ‰∏áÁ∫ßÂà´‰ª•‰∏äÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂà†Èô§"><span>Èù¢ËØïÈ¢ò-Áôæ‰∏áÁ∫ßÂà´‰ª•‰∏äÁöÑÊï∞ÊçÆÂ¶Ç‰ΩïÂà†Èô§Ôºü</span></a></h4><p>Áúã‰∏ãÊñá title</p><h2 id="_2-Á¥¢ÂºïÁöÑÂ∏∏ËßÅÊ®°Âûã" tabindex="-1"><a class="header-anchor" href="#_2-Á¥¢ÂºïÁöÑÂ∏∏ËßÅÊ®°Âûã"><span>2.Á¥¢ÂºïÁöÑÂ∏∏ËßÅÊ®°Âûã</span></a></h2><blockquote><p>Á¥¢ÂºïÂ∞±ÊòØÊï∞ÊçÆÁªìÊûÑ!!‰∏ÄÁßç‰∏∫‰∫ÜÊèêÂçáÊ£ÄÁ¥¢ÊïàÁéáÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂú® MySQL ‰∏≠ÔºåÊó†ËÆ∫ÊòØ Innodb ËøòÊòØ MyIsamÔºåÈÉΩ‰ΩøÁî®‰∫Ü B+Ê†ë‰Ωú‰∏∫Á¥¢ÂºïÁªìÊûÑ</p><p>ÂìàÂ∏åË°®ËøôÁßçÁªìÊûÑÈÄÇÁî®‰∫éÂè™ÊúâÁ≠âÂÄºÊü•ËØ¢ÁöÑÂú∫ÊôØ ÊúâÂ∫èÊï∞ÁªÑÁ¥¢ÂºïÂè™ÈÄÇÁî®‰∫éÈùôÊÄÅÂ≠òÂÇ®ÂºïÊìé ÊêúÁ¥¢Ê†ë</p></blockquote><p>Á¥¢ÂºïÁöÑÂá∫Áé∞ÊòØ‰∏∫‰∫ÜÊèêÈ´òÊü•ËØ¢ÊïàÁéáÔºå‰ΩÜÊòØÂÆûÁé∞Á¥¢ÂºïÁöÑÊñπÂºèÂç¥ÊúâÂæàÂ§öÁßçÔºåÊâÄ‰ª•ËøôÈáå‰πüÂ∞±ÂºïÂÖ•‰∫ÜÁ¥¢ÂºïÊ®°ÂûãÁöÑÊ¶ÇÂøµ„ÄÇÂèØ‰ª•Áî®‰∫éÊèêÈ´òËØªÂÜôÊïàÁéáÁöÑÊï∞ÊçÆÁªìÊûÑÂæàÂ§öÔºåËøôÈáåÊàëÂÖàÁªô‰Ω†‰ªãÁªç‰∏âÁßçÂ∏∏ËßÅ„ÄÅ‰πüÊØîËæÉÁÆÄÂçïÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØ<strong>ÂìàÂ∏åË°®„ÄÅÊúâÂ∫èÊï∞ÁªÑÂíåÊêúÁ¥¢Ê†ë</strong>„ÄÇ</p><p>‰∏ãÈù¢Êàë‰∏ªË¶Å‰ªé‰ΩøÁî®ÁöÑËßíÂ∫¶Ôºå‰∏∫‰Ω†ÁÆÄÂçïÂàÜÊûê‰∏Ä‰∏ãËøô‰∏âÁßçÊ®°ÂûãÁöÑÂå∫Âà´„ÄÇ</p><h3 id="_2-1-ÂìàÂ∏åË°®" tabindex="-1"><a class="header-anchor" href="#_2-1-ÂìàÂ∏åË°®"><span>2.1.ÂìàÂ∏åË°®</span></a></h3><p>ÂìàÂ∏åË°®ÊòØ‰∏ÄÁßç‰ª•ÈîÆ - ÂÄºÔºàkey-valueÔºâÂ≠òÂÇ®Êï∞ÊçÆÁöÑÁªìÊûÑÔºåÊàë‰ª¨Âè™Ë¶ÅËæìÂÖ•ÂæÖÊü•ÊâæÁöÑÂÄºÂç≥ keyÔºåÂ∞±ÂèØ‰ª•ÊâæÂà∞ÂÖ∂ÂØπÂ∫îÁöÑÂÄºÂç≥ Value„ÄÇÂìàÂ∏åÁöÑÊÄùË∑ØÂæàÁÆÄÂçïÔºåÊääÂÄºÊîæÂú®Êï∞ÁªÑÈáåÔºåÁî®‰∏Ä‰∏™ÂìàÂ∏åÂáΩÊï∞Êää key Êç¢ÁÆóÊàê‰∏Ä‰∏™Á°ÆÂÆöÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéÊää value ÊîæÂú®Êï∞ÁªÑÁöÑËøô‰∏™‰ΩçÁΩÆ„ÄÇ</p><p>‰∏çÂèØÈÅøÂÖçÂú∞ÔºåÂ§ö‰∏™ key ÂÄºÁªèËøáÂìàÂ∏åÂáΩÊï∞ÁöÑÊç¢ÁÆóÔºå‰ºöÂá∫Áé∞Âêå‰∏Ä‰∏™ÂÄºÁöÑÊÉÖÂÜµ„ÄÇÂ§ÑÁêÜËøôÁßçÊÉÖÂÜµÁöÑ‰∏ÄÁßçÊñπÊ≥ïÊòØÔºåÊãâÂá∫‰∏Ä‰∏™ÈìæË°®„ÄÇ</p><p>ÂÅáËÆæÔºå‰Ω†Áé∞Âú®Áª¥Êä§ÁùÄ‰∏Ä‰∏™Ë∫´‰ªΩËØÅ‰ø°ÊÅØÂíåÂßìÂêçÁöÑË°®ÔºåÈúÄË¶ÅÊ†πÊçÆË∫´‰ªΩËØÅÂè∑Êü•ÊâæÂØπÂ∫îÁöÑÂêçÂ≠óÔºåËøôÊó∂ÂØπÂ∫îÁöÑÂìàÂ∏åÁ¥¢ÂºïÁöÑÁ§∫ÊÑèÂõæÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p><img src="https://images.zzq8.cn/img/202212101020092.png" style="zoom:50%;"><!----><p>Âõæ‰∏≠ÔºåUser2 Âíå User4 Ê†πÊçÆË∫´‰ªΩËØÅÂè∑ÁÆóÂá∫Êù•ÁöÑÂÄºÈÉΩÊòØ NÔºå‰ΩÜÊ≤°ÂÖ≥Á≥ªÔºåÂêéÈù¢ËøòË∑ü‰∫Ü‰∏Ä‰∏™ÈìæË°®„ÄÇÂÅáËÆæÔºåËøôÊó∂ÂÄô‰Ω†Ë¶ÅÊü• ID_card_n2 ÂØπÂ∫îÁöÑÂêçÂ≠óÊòØ‰ªÄ‰πàÔºåÂ§ÑÁêÜÊ≠•È™§Â∞±ÊòØÔºöÈ¶ñÂÖàÔºåÂ∞Ü ID_card_n2 ÈÄöËøáÂìàÂ∏åÂáΩÊï∞ÁÆóÂá∫ NÔºõÁÑ∂ÂêéÔºåÊåâÈ°∫Â∫èÈÅçÂéÜÔºåÊâæÂà∞ User2„ÄÇ</p><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂõæ‰∏≠Âõõ‰∏™ ID_card_n ÁöÑÂÄºÂπ∂‰∏çÊòØÈÄíÂ¢ûÁöÑÔºåËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÂ¢ûÂä†Êñ∞ÁöÑ User Êó∂ÈÄüÂ∫¶‰ºöÂæàÂø´ÔºåÂè™ÈúÄË¶ÅÂæÄÂêéËøΩÂä†„ÄÇ‰ΩÜÁº∫ÁÇπÊòØÔºåÂõ†‰∏∫‰∏çÊòØÊúâÂ∫èÁöÑÔºåÊâÄ‰ª•ÂìàÂ∏åÁ¥¢ÂºïÂÅöÂå∫Èó¥Êü•ËØ¢ÁöÑÈÄüÂ∫¶ÊòØÂæàÊÖ¢ÁöÑ„ÄÇ</p><p>‰Ω†ÂèØ‰ª•ËÆæÊÉ≥‰∏ãÔºåÂ¶ÇÊûú‰Ω†Áé∞Âú®Ë¶ÅÊâæË∫´‰ªΩËØÅÂè∑Âú® [ID_card_X, ID_card_Y] Ëøô‰∏™Âå∫Èó¥ÁöÑÊâÄÊúâÁî®Êà∑ÔºåÂ∞±ÂøÖÈ°ªÂÖ®ÈÉ®Êâ´Êèè‰∏ÄÈÅç‰∫Ü„ÄÇ</p><p>ÊâÄ‰ª•Ôºå<strong>ÂìàÂ∏åË°®ËøôÁßçÁªìÊûÑÈÄÇÁî®‰∫éÂè™ÊúâÁ≠âÂÄºÊü•ËØ¢ÁöÑÂú∫ÊôØ</strong>ÔºåÊØîÂ¶Ç Memcached ÂèäÂÖ∂‰ªñ‰∏Ä‰∫õ NoSQL ÂºïÊìé„ÄÇ</p><h3 id="_2-2-ÊúâÂ∫èÊï∞ÁªÑ" tabindex="-1"><a class="header-anchor" href="#_2-2-ÊúâÂ∫èÊï∞ÁªÑ"><span>2.2.ÊúâÂ∫èÊï∞ÁªÑ</span></a></h3><p>ËÄå<strong>ÊúâÂ∫èÊï∞ÁªÑÂú®Á≠âÂÄºÊü•ËØ¢Ôºà‰∫åÂàÜÔºâÂíåËåÉÂõ¥Êü•ËØ¢Âú∫ÊôØ‰∏≠ÁöÑÊÄßËÉΩÂ∞±ÈÉΩÈùûÂ∏∏‰ºòÁßÄ</strong>„ÄÇËøòÊòØ‰∏äÈù¢Ëøô‰∏™Ê†πÊçÆË∫´‰ªΩËØÅÂè∑Êü•ÂêçÂ≠óÁöÑ‰æãÂ≠êÔºåÂ¶ÇÊûúÊàë‰ª¨‰ΩøÁî®ÊúâÂ∫èÊï∞ÁªÑÊù•ÂÆûÁé∞ÁöÑËØùÔºåÁ§∫ÊÑèÂõæÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p><img src="https://images.zzq8.cn/img/202212101020345.png" style="zoom:50%;"><!----><p>ËøôÈáåÊàë‰ª¨ÂÅáËÆæË∫´‰ªΩËØÅÂè∑Ê≤°ÊúâÈáçÂ§çÔºåËøô‰∏™Êï∞ÁªÑÂ∞±ÊòØÊåâÁÖßË∫´‰ªΩËØÅÂè∑ÈÄíÂ¢ûÁöÑÈ°∫Â∫è‰øùÂ≠òÁöÑ„ÄÇËøôÊó∂ÂÄôÂ¶ÇÊûú‰Ω†Ë¶ÅÊü• ID_card_n2 ÂØπÂ∫îÁöÑÂêçÂ≠óÔºåÁî®‰∫åÂàÜÊ≥ïÂ∞±ÂèØ‰ª•Âø´ÈÄüÂæóÂà∞ÔºåËøô‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(log(N))„ÄÇ</p><p>ÂêåÊó∂ÂæàÊòæÁÑ∂ÔºåËøô‰∏™Á¥¢ÂºïÁªìÊûÑÊîØÊåÅËåÉÂõ¥Êü•ËØ¢„ÄÇ‰Ω†Ë¶ÅÊü•Ë∫´‰ªΩËØÅÂè∑Âú® [ID_card_X, ID_card_Y] Âå∫Èó¥ÁöÑ UserÔºåÂèØ‰ª•ÂÖàÁî®‰∫åÂàÜÊ≥ïÊâæÂà∞ ID_card_XÔºàÂ¶ÇÊûú‰∏çÂ≠òÂú® ID_card_XÔºåÂ∞±ÊâæÂà∞Â§ß‰∫é ID_card_X ÁöÑÁ¨¨‰∏Ä‰∏™ UserÔºâÔºåÁÑ∂ÂêéÂêëÂè≥ÈÅçÂéÜÔºåÁõ¥Âà∞Êü•Âà∞Á¨¨‰∏Ä‰∏™Â§ß‰∫é ID_card_Y ÁöÑË∫´‰ªΩËØÅÂè∑ÔºåÈÄÄÂá∫Âæ™ÁéØ„ÄÇ</p><p>Â¶ÇÊûú‰ªÖ‰ªÖÁúãÊü•ËØ¢ÊïàÁéáÔºåÊúâÂ∫èÊï∞ÁªÑÂ∞±ÊòØÊúÄÂ•ΩÁöÑÊï∞ÊçÆÁªìÊûÑ‰∫Ü„ÄÇ‰ΩÜÊòØÔºåÂú®ÈúÄË¶ÅÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±È∫ªÁÉ¶‰∫ÜÔºå‰Ω†ÂæÄ‰∏≠Èó¥ÊèíÂÖ•‰∏Ä‰∏™ËÆ∞ÂΩïÂ∞±ÂøÖÈ°ªÂæóÊå™Âä®ÂêéÈù¢ÊâÄÊúâÁöÑËÆ∞ÂΩïÔºåÊàêÊú¨Â§™È´ò„ÄÇ</p><p>ÊâÄ‰ª•Ôºå<strong>ÊúâÂ∫èÊï∞ÁªÑÁ¥¢ÂºïÂè™ÈÄÇÁî®‰∫éÈùôÊÄÅÂ≠òÂÇ®ÂºïÊìé</strong>ÔºåÊØîÂ¶Ç‰Ω†Ë¶Å‰øùÂ≠òÁöÑÊòØ 2017 Âπ¥Êüê‰∏™ÂüéÂ∏ÇÁöÑÊâÄÊúâ‰∫∫Âè£‰ø°ÊÅØÔºåËøôÁ±ª‰∏ç‰ºöÂÜç‰øÆÊîπÁöÑÊï∞ÊçÆ„ÄÇ</p><h3 id="_2-3-ÊêúÁ¥¢Ê†ë" tabindex="-1"><a class="header-anchor" href="#_2-3-ÊêúÁ¥¢Ê†ë"><span>2.3.<mark>ÊêúÁ¥¢Ê†ë</mark></span></a></h3><p>‰∫åÂèâÊêúÁ¥¢Ê†ë‰πüÊòØËØæÊú¨ÈáåÁöÑÁªèÂÖ∏Êï∞ÊçÆÁªìÊûÑ‰∫Ü„ÄÇËøòÊòØ‰∏äÈù¢Ê†πÊçÆË∫´‰ªΩËØÅÂè∑Êü•ÂêçÂ≠óÁöÑ‰æãÂ≠êÔºåÂ¶ÇÊûúÊàë‰ª¨Áî®‰∫åÂèâÊêúÁ¥¢Ê†ëÊù•ÂÆûÁé∞ÁöÑËØùÔºåÁ§∫ÊÑèÂõæÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p><img src="https://images.zzq8.cn/img/202212101021739.png" style="zoom:50%;"><!----><p>‰∫åÂèâÊêúÁ¥¢Ê†ëÁöÑÁâπÁÇπÊòØÔºöÊØè‰∏™ËäÇÁÇπÁöÑÂ∑¶ÂÑøÂ≠êÂ∞è‰∫éÁà∂ËäÇÁÇπÔºåÁà∂ËäÇÁÇπÂèàÂ∞è‰∫éÂè≥ÂÑøÂ≠ê„ÄÇËøôÊ†∑Â¶ÇÊûú‰Ω†Ë¶ÅÊü• ID_card_n2 ÁöÑËØùÔºåÊåâÁÖßÂõæ‰∏≠ÁöÑÊêúÁ¥¢È°∫Â∫èÂ∞±ÊòØÊåâÁÖß UserA -&gt; UserC -&gt; UserF -&gt; User2 Ëøô‰∏™Ë∑ØÂæÑÂæóÂà∞„ÄÇËøô‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(log(N))„ÄÇ</p><p><strong>ÂΩìÁÑ∂‰∏∫‰∫ÜÁª¥ÊåÅ O(log(N)) ÁöÑÊü•ËØ¢Â§çÊùÇÂ∫¶Ôºå‰Ω†Â∞±ÈúÄË¶Å‰øùÊåÅËøôÊ£µÊ†ëÊòØÂπ≥Ë°°‰∫åÂèâÊ†ë</strong>„ÄÇ‰∏∫‰∫ÜÂÅöËøô‰∏™‰øùËØÅÔºåÊõ¥Êñ∞ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰πüÊòØ O(log(N))„ÄÇ</p><p><strong>Ë°•ÂÖÖÔºö<strong>‰∫åÂèâÊü•ÊâæÊ†ëÁî±‰∫éÂ≠òÂú®ÈÄÄÂåñÊàêÈìæË°®ÁöÑÂèØËÉΩÊÄßÔºå‰ºö‰ΩøÂæóÊü•ËØ¢Êìç‰ΩúÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰ªé O(logn)Èôç‰Ωé‰∏∫ O(n)„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥‰∫åÂèâÊü•ÊâæÊ†ë‰ºöÂú®ÊûÅÁ´ØÊÉÖÂÜµ‰∏ãÈÄÄÂåñÊàêÈìæË°®ÁöÑÈóÆÈ¢òÔºåÂêéÈù¢Â∞±Êúâ‰∫∫ÊèêÂá∫</strong>Âπ≥Ë°°‰∫åÂèâÊü•ÊâæÊ†ëÔºàAVL Ê†ëÔºâ</strong>„ÄÇ</p><p>Ê†ëÂèØ‰ª•Êúâ‰∫åÂèâÔºå‰πüÂèØ‰ª•ÊúâÂ§öÂèâ„ÄÇÂ§öÂèâÊ†ëÂ∞±ÊòØÊØè‰∏™ËäÇÁÇπÊúâÂ§ö‰∏™ÂÑøÂ≠êÔºåÂÑøÂ≠ê‰πãÈó¥ÁöÑÂ§ßÂ∞è‰øùËØÅ‰ªéÂ∑¶Âà∞Âè≥ÈÄíÂ¢û„ÄÇ‰∫åÂèâÊ†ëÊòØÊêúÁ¥¢ÊïàÁéáÊúÄÈ´òÁöÑÔºå‰ΩÜÊòØÂÆûÈôÖ‰∏ä<mark>Â§ßÂ§öÊï∞ÁöÑÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®Âç¥Âπ∂‰∏ç‰ΩøÁî®‰∫åÂèâÊ†ë„ÄÇÂÖ∂ÂéüÂõ†ÊòØÔºåÁ¥¢Âºï‰∏çÊ≠¢Â≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËøòË¶ÅÂÜôÂà∞Á£ÅÁõò‰∏ä</mark>„ÄÇ</p><p>‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°‰∏Ä‰∏ã‰∏ÄÊ£µ 100 ‰∏áËäÇÁÇπÁöÑÂπ≥Ë°°‰∫åÂèâÊ†ëÔºåÊ†ëÈ´ò 20„ÄÇ‰∏ÄÊ¨°Êü•ËØ¢ÂèØËÉΩÈúÄË¶ÅËÆøÈóÆ 20 ‰∏™Êï∞ÊçÆÂùó„ÄÇÂú®Êú∫Ê¢∞Á°¨ÁõòÊó∂‰ª£Ôºå‰ªéÁ£ÅÁõòÈöèÊú∫ËØª‰∏Ä‰∏™Êï∞ÊçÆÂùóÈúÄË¶Å 10 ms Â∑¶Âè≥ÁöÑÂØªÂùÄÊó∂Èó¥„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂØπ‰∫é‰∏Ä‰∏™ 100 ‰∏áË°åÁöÑË°®ÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫åÂèâÊ†ëÊù•Â≠òÂÇ®ÔºåÂçïÁã¨ËÆøÈóÆ‰∏Ä‰∏™Ë°åÂèØËÉΩÈúÄË¶Å 20 ‰∏™ 10 ms ÁöÑÊó∂Èó¥ÔºåËøô‰∏™Êü•ËØ¢ÂèØÁúüÂ§üÊÖ¢ÁöÑ„ÄÇ</p><p><a href="https://new.qq.com/rain/a/20211223A01TAX00" target="_blank" rel="noopener noreferrer"><strong>Ë°•ÂÖÖÔºö</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>1ÔºâÁî±‰∫éÊ†ëÊòØÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏≠ÁöÑÔºåËÆøÈóÆÊØè‰∏™ËäÇÁÇπÔºåÈÉΩÂØπÂ∫î‰∏ÄÊ¨°Á£ÅÁõò I/O Êìç‰ΩúÔºàÂÅáËÆæ‰∏Ä‰∏™ËäÇÁÇπÁöÑÂ§ßÂ∞è„ÄåÂ∞è‰∫é„ÄçÊìç‰ΩúÁ≥ªÁªüÁöÑÊúÄÂ∞èËØªÂÜôÂçï‰ΩçÂùóÁöÑÂ§ßÂ∞èÔºâÔºå‰πüÂ∞±ÊòØËØ¥<strong>Ê†ëÁöÑÈ´òÂ∫¶Â∞±Á≠â‰∫éÊØèÊ¨°Êü•ËØ¢Êï∞ÊçÆÊó∂Á£ÅÁõò IO Êìç‰ΩúÁöÑÊ¨°Êï∞</strong>ÔºåÊâÄ‰ª•Ê†ëÁöÑÈ´òÂ∫¶Ë∂äÈ´òÔºåÂ∞±‰ºöÂΩ±ÂìçÊü•ËØ¢ÊÄßËÉΩ„ÄÇ</p><p>2ÔºâËøôÈáåÊúâÁÇπ‰∏çÁêÜËß£Ôºå‰∏∫‰ªÄ‰πàÊ†ëÈ´ò20Â∞±ÊòØ20‰∏™Êï∞ÊçÆÂùóÔºü</p><p>ÊØè‰∏™Âè∂Â≠êÁªìÁÇπÂ∞±ÊòØ‰∏Ä‰∏™ÂùóÔºåÊØè‰∏™ÂùóÂåÖÂê´‰∏§‰∏™Êï∞ÊçÆÔºåÂùó‰πãÈó¥ÈÄöËøáÈìæÂºèÊñπÂºèÈìæÊé•„ÄÇÊ†ëÈ´ò20ÁöÑËØùÔºåÂ∞±Ë¶ÅÈÅçÂéÜ20‰∏™Âùó</p><p><strong>B+Ê†ëÁöÑÈùûÂè∂Â≠êËäÇÁÇπ‰∏ç‰øùÂ≠òÊï∞ÊçÆÔºåÂè™ËøõË°åÊï∞ÊçÆÁ¥¢ÂºïÔºàÂÖ≥ÈîÆÂ≠óËÆ∞ÂΩïÁöÑÊåáÈíàÔºâ</strong></p><p><strong>B+Ê†ëÂè∂Â≠êËäÇÁÇπ‰øùÂ≠ò‰∫ÜÁà∂ËäÇÁÇπÁöÑÊâÄÊúâÂÖ≥ÈîÆÂ≠óËÆ∞ÂΩïÁöÑÊåáÈíàÔºåÊâÄÊúâÊï∞ÊçÆÂú∞ÂùÄÂøÖÈ°ªË¶ÅÂà∞Âè∂Â≠êËäÇÁÇπÊâçËÉΩËé∑ÂèñÂà∞„ÄÇÊâÄ‰ª•ÊØèÊ¨°Êï∞ÊçÆÊü•ËØ¢ÁöÑÊ¨°Êï∞ÈÉΩ‰∏ÄÊ†∑Ôºõ</strong></p><p>**Ë°•ÂÖÖÔºö**Êï∞ÊçÆÂ∫ìÂ≠òÂÇ®Â§ßÂ§ö‰∏çÈÄÇÁî®‰∫åÂèâÊ†ëÔºåÂõ†‰∏∫Ê†ëÈ´òËøáÈ´òÔºå‰ºöÈÄÇÁî®NÂèâÊ†ë„ÄÇ ËøôÈáå N ÂèâÊ†ëÊ≤°ÂæàÁêÜËß£ÔºåB+Ê†ëÈöæÈÅìÊòØ N ÂèâÔºü</p><p><mark>Á≠îÔºöÊòØÁöÑ„ÄÇBÊ†ëÂíåÂπ≥Ë°°‰∫åÂèâÊ†ë‰∏çÂêåÔºåBÊ†ëÂ±û‰∫éÂ§öÂèâÊ†ëÂèàÂêç<strong>Âπ≥Ë°°Â§öË∑ØÊü•ÊâæÊ†ë</strong>ÔºàÊü•ÊâæË∑ØÂæÑ‰∏çÂè™‰∏§‰∏™Ôºâ</mark></p><p><strong>B+TreeËøôÁßçÂ§öÂèâÊ†ëÔºåÊõ¥Âä†ÁüÆÂÆΩÔºåÊõ¥ÈÄÇÂêàÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏≠</strong></p><p>‰∏∫‰∫ÜËÆ©‰∏Ä‰∏™Êü•ËØ¢Â∞ΩÈáèÂ∞ëÂú∞ËØªÁ£ÅÁõòÔºåÂ∞±ÂøÖÈ°ªËÆ©Êü•ËØ¢ËøáÁ®ãËÆøÈóÆÂ∞ΩÈáèÂ∞ëÁöÑÊï∞ÊçÆÂùó„ÄÇÈÇ£‰πàÔºåÊàë‰ª¨Â∞±‰∏çÂ∫îËØ•‰ΩøÁî®‰∫åÂèâÊ†ëÔºåËÄåÊòØË¶Å‰ΩøÁî®‚ÄúN Âèâ‚ÄùÊ†ë„ÄÇËøôÈáåÔºå‚ÄúN Âèâ‚ÄùÊ†ë‰∏≠ÁöÑ‚ÄúN‚ÄùÂèñÂÜ≥‰∫éÊï∞ÊçÆÂùóÁöÑÂ§ßÂ∞è„ÄÇ</p><p>‰ª• InnoDB ÁöÑ‰∏Ä‰∏™Êï¥Êï∞Â≠óÊÆµÁ¥¢Âºï‰∏∫‰æãÔºåËøô‰∏™ N Â∑Æ‰∏çÂ§öÊòØ 1200„ÄÇËøôÊ£µÊ†ëÈ´òÊòØ 4 ÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•Â≠ò 1200 ÁöÑ 3 Ê¨°Êñπ‰∏™ÂÄºÔºåËøôÂ∑≤Áªè 17 ‰∫ø‰∫Ü„ÄÇËÄÉËôëÂà∞Ê†ëÊ†πÁöÑÊï∞ÊçÆÂùóÊÄªÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÔºå‰∏Ä‰∏™ 10 ‰∫øË°åÁöÑË°®‰∏ä‰∏Ä‰∏™Êï¥Êï∞Â≠óÊÆµÁöÑÁ¥¢ÂºïÔºåÊü•Êâæ‰∏Ä‰∏™ÂÄºÊúÄÂ§öÂè™ÈúÄË¶ÅËÆøÈóÆ 3 Ê¨°Á£ÅÁõò„ÄÇÂÖ∂ÂÆûÔºåÊ†ëÁöÑÁ¨¨‰∫åÂ±Ç‰πüÊúâÂæàÂ§ßÊ¶ÇÁéáÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈÇ£‰πàËÆøÈóÆÁ£ÅÁõòÁöÑÂπ≥ÂùáÊ¨°Êï∞Â∞±Êõ¥Â∞ë‰∫Ü„ÄÇ</p><p>N ÂèâÊ†ëÁî±‰∫éÂú®ËØªÂÜô‰∏äÁöÑÊÄßËÉΩ‰ºòÁÇπÔºå‰ª•ÂèäÈÄÇÈÖçÁ£ÅÁõòÁöÑËÆøÈóÆÊ®°ÂºèÔºåÂ∑≤ÁªèË¢´ÂπøÊ≥õÂ∫îÁî®Âú®Êï∞ÊçÆÂ∫ìÂºïÊìé‰∏≠‰∫Ü„ÄÇ</p><p>‰∏çÁÆ°ÊòØÂìàÂ∏åËøòÊòØÊúâÂ∫èÊï∞ÁªÑÔºåÊàñËÄÖ N ÂèâÊ†ëÔºåÂÆÉ‰ª¨ÈÉΩÊòØ‰∏çÊñ≠Ëø≠‰ª£„ÄÅ‰∏çÊñ≠‰ºòÂåñÁöÑ‰∫ßÁâ©ÊàñËÄÖËß£ÂÜ≥ÊñπÊ°à„ÄÇÊï∞ÊçÆÂ∫ìÊäÄÊúØÂèëÂ±ïÂà∞‰ªäÂ§©ÔºåË∑≥Ë°®„ÄÅLSM Ê†ëÁ≠âÊï∞ÊçÆÁªìÊûÑ‰πüË¢´Áî®‰∫éÂºïÊìéËÆæËÆ°‰∏≠ÔºåËøôÈáåÊàëÂ∞±‰∏çÂÜç‰∏Ä‰∏ÄÂ±ïÂºÄ‰∫Ü„ÄÇ</p><p>‰Ω†ÂøÉÈáåË¶ÅÊúâ‰∏™Ê¶ÇÂøµÔºåÊï∞ÊçÆÂ∫ìÂ∫ïÂ±ÇÂ≠òÂÇ®ÁöÑÊ†∏ÂøÉÂ∞±ÊòØÂü∫‰∫éËøô‰∫õÊï∞ÊçÆÊ®°ÂûãÁöÑ„ÄÇÊØèÁ¢∞Âà∞‰∏Ä‰∏™Êñ∞Êï∞ÊçÆÂ∫ìÔºåÊàë‰ª¨ÈúÄË¶ÅÂÖàÂÖ≥Ê≥®ÂÆÉÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåËøôÊ†∑ÊâçËÉΩ‰ªéÁêÜËÆ∫‰∏äÂàÜÊûêÂá∫Ëøô‰∏™Êï∞ÊçÆÂ∫ìÁöÑÈÄÇÁî®Âú∫ÊôØ„ÄÇ</p><p>Êà™Ê≠¢Âà∞ËøôÈáåÔºåÊàëÁî®‰∫ÜÂçäÁØáÊñáÁ´†ÁöÑÁØáÂπÖÂíå‰Ω†‰ªãÁªç‰∫Ü‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÈÄÇÁî®Âú∫ÊôØÔºå‰Ω†ÂèØËÉΩ‰ºöËßâÂæóÊúâ‰∫õÊûØÁá•„ÄÇ‰ΩÜÊòØÔºåÊàëÂª∫ËÆÆ‰Ω†ËøòÊòØË¶ÅÂ§öËä±‰∏Ä‰∫õÊó∂Èó¥Êù•ÁêÜËß£ËøôÈÉ®ÂàÜÂÜÖÂÆπÔºåÊØïÁ´üËøôÊòØÊï∞ÊçÆÂ∫ìÂ§ÑÁêÜÊï∞ÊçÆÁöÑÊ†∏ÂøÉÊ¶ÇÂøµ‰πã‰∏ÄÔºåÂú®ÂàÜÊûêÈóÆÈ¢òÁöÑÊó∂ÂÄô‰ºöÁªèÂ∏∏Áî®Âà∞„ÄÇÂΩì‰Ω†ÁêÜËß£‰∫ÜÁ¥¢ÂºïÁöÑÊ®°ÂûãÂêéÔºåÂ∞±‰ºöÂèëÁé∞Âú®ÂàÜÊûêÈóÆÈ¢òÁöÑÊó∂ÂÄô‰ºöÊúâ‰∏Ä‰∏™Êõ¥Ê∏ÖÊô∞ÁöÑËßÜËßíÔºå‰Ωì‰ºöÂà∞ÂºïÊìéËÆæËÆ°ÁöÑÁ≤æÂ¶ô‰πãÂ§Ñ„ÄÇ</p><p>Áé∞Âú®ÔºåÊàë‰ª¨‰∏ÄËµ∑ËøõÂÖ•Áõ∏ÂØπÂÅèÂÆûÊàòÁöÑÂÜÖÂÆπÂêß„ÄÇ</p><p>Âú® MySQL ‰∏≠ÔºåÁ¥¢ÂºïÊòØÂú®Â≠òÂÇ®ÂºïÊìéÂ±ÇÂÆûÁé∞ÁöÑÔºåÊâÄ‰ª•Âπ∂Ê≤°ÊúâÁªü‰∏ÄÁöÑÁ¥¢ÂºïÊ†áÂáÜÔºåÂç≥‰∏çÂêåÂ≠òÂÇ®ÂºïÊìéÁöÑÁ¥¢ÂºïÁöÑÂ∑•‰ΩúÊñπÂºèÂπ∂‰∏ç‰∏ÄÊ†∑„ÄÇËÄåÂç≥‰ΩøÂ§ö‰∏™Â≠òÂÇ®ÂºïÊìéÊîØÊåÅÂêå‰∏ÄÁßçÁ±ªÂûãÁöÑÁ¥¢ÂºïÔºåÂÖ∂Â∫ïÂ±ÇÁöÑÂÆûÁé∞‰πüÂèØËÉΩ‰∏çÂêå„ÄÇÁî±‰∫é InnoDB Â≠òÂÇ®ÂºïÊìéÂú® MySQL Êï∞ÊçÆÂ∫ì‰∏≠‰ΩøÁî®ÊúÄ‰∏∫ÂπøÊ≥õÔºåÊâÄ‰ª•‰∏ãÈù¢ÊàëÂ∞±‰ª• InnoDB ‰∏∫‰æãÔºåÂíå‰Ω†ÂàÜÊûê‰∏Ä‰∏ãÂÖ∂‰∏≠ÁöÑÁ¥¢ÂºïÊ®°Âûã„ÄÇ</p><h2 id="_3-innodb-ÁöÑÁ¥¢ÂºïÊ®°Âûã" tabindex="-1"><a class="header-anchor" href="#_3-innodb-ÁöÑÁ¥¢ÂºïÊ®°Âûã"><span>3.InnoDB ÁöÑÁ¥¢ÂºïÊ®°Âûã</span></a></h2><p>Âú® InnoDB ‰∏≠ÔºåË°®ÈÉΩÊòØÊ†πÊçÆ‰∏ªÈîÆÈ°∫Â∫è‰ª•Á¥¢ÂºïÁöÑÂΩ¢ÂºèÂ≠òÊîæÁöÑÔºåËøôÁßçÂ≠òÂÇ®ÊñπÂºèÁöÑË°®Áß∞‰∏∫Á¥¢ÂºïÁªÑÁªáË°®„ÄÇÂèàÂõ†‰∏∫ÂâçÈù¢Êàë‰ª¨ÊèêÂà∞ÁöÑÔºåInnoDB ‰ΩøÁî®‰∫Ü B+ Ê†ëÁ¥¢ÂºïÊ®°ÂûãÔºåÊâÄ‰ª•Êï∞ÊçÆÈÉΩÊòØÂ≠òÂÇ®Âú® B+ Ê†ë‰∏≠ÁöÑ„ÄÇ</p><p>ÊØè‰∏Ä‰∏™Á¥¢ÂºïÂú® InnoDB ÈáåÈù¢ÂØπÂ∫î‰∏ÄÊ£µ B+ Ê†ë„ÄÇ</p><p>ÂÅáËÆæÔºåÊàë‰ª¨Êúâ‰∏Ä‰∏™‰∏ªÈîÆÂàó‰∏∫ ID ÁöÑË°®ÔºåË°®‰∏≠ÊúâÂ≠óÊÆµ kÔºåÂπ∂‰∏îÂú® k ‰∏äÊúâÁ¥¢Âºï„ÄÇ</p><p>Ëøô‰∏™Ë°®ÁöÑÂª∫Ë°®ËØ≠Âè•ÊòØÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; create table T(
        id int primary key, 
        k int not null, 
        name varchar(16),
        index (k))engine=InnoDB;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ë°®‰∏≠ R1~R5 ÁöÑ (ID,k) ÂÄºÂàÜÂà´‰∏∫ (100,1)„ÄÅ(200,2)„ÄÅ(300,3)„ÄÅ(500,5) Âíå (600,6)Ôºå‰∏§Ê£µÊ†ëÁöÑÁ§∫‰æãÁ§∫ÊÑèÂõæÂ¶Ç‰∏ã„ÄÇ</p><img src="https://images.zzq8.cn/img/202212101040832.png" style="zoom:50%;"><!----><p>‰ªéÂõæ‰∏≠‰∏çÈöæÁúãÂá∫ÔºåÊ†πÊçÆÂè∂Â≠êËäÇÁÇπÁöÑÂÜÖÂÆπÔºåÁ¥¢ÂºïÁ±ªÂûãÂàÜ‰∏∫‰∏ªÈîÆÁ¥¢ÂºïÂíåÈùû‰∏ªÈîÆÁ¥¢Âºï„ÄÇ</p><p>‰∏ªÈîÆÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ≠òÁöÑÊòØÊï¥Ë°åÊï∞ÊçÆ„ÄÇÂú® InnoDB ÈáåÔºå‰∏ªÈîÆÁ¥¢Âºï‰πüË¢´Áß∞‰∏∫ËÅöÁ∞áÁ¥¢ÂºïÔºàclustered indexÔºâ„ÄÇ</p><p>Èùû‰∏ªÈîÆÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂÜÖÂÆπÊòØ‰∏ªÈîÆÁöÑÂÄº„ÄÇÂú® InnoDB ÈáåÔºåÈùû‰∏ªÈîÆÁ¥¢Âºï‰πüË¢´Áß∞‰∏∫‰∫åÁ∫ßÁ¥¢ÂºïÔºàsecondary indexÔºâ„ÄÇ</p><p>Ê†πÊçÆ‰∏äÈù¢ÁöÑÁ¥¢ÂºïÁªìÊûÑËØ¥ÊòéÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏™ÈóÆÈ¢òÔºö<strong>Âü∫‰∫é‰∏ªÈîÆÁ¥¢ÂºïÂíåÊôÆÈÄöÁ¥¢ÂºïÁöÑÊü•ËØ¢Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü</strong></p><ul><li>Â¶ÇÊûúËØ≠Âè•ÊòØ select * from T where ID=500ÔºåÂç≥‰∏ªÈîÆÊü•ËØ¢ÊñπÂºèÔºåÂàôÂè™ÈúÄË¶ÅÊêúÁ¥¢ ID ËøôÊ£µ B+ Ê†ëÔºõ</li><li>Â¶ÇÊûúËØ≠Âè•ÊòØ select * from T where k=5ÔºåÂç≥ÊôÆÈÄöÁ¥¢ÂºïÊü•ËØ¢ÊñπÂºèÔºåÂàôÈúÄË¶ÅÂÖàÊêúÁ¥¢ k Á¥¢ÂºïÊ†ëÔºåÂæóÂà∞ ID ÁöÑÂÄº‰∏∫ 500ÔºåÂÜçÂà∞ ID Á¥¢ÂºïÊ†ëÊêúÁ¥¢‰∏ÄÊ¨°„ÄÇËøô‰∏™ËøáÁ®ãÁß∞‰∏∫<code>ÂõûË°®</code>„ÄÇ</li></ul><p>‰πüÂ∞±ÊòØËØ¥ÔºåÂü∫‰∫éÈùû‰∏ªÈîÆÁ¥¢ÂºïÁöÑÊü•ËØ¢ÈúÄË¶ÅÂ§öÊâ´Êèè‰∏ÄÊ£µÁ¥¢ÂºïÊ†ë„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨Âú®Â∫îÁî®‰∏≠Â∫îËØ•Â∞ΩÈáè‰ΩøÁî®‰∏ªÈîÆÊü•ËØ¢„ÄÇ</p><h2 id="_4-Á¥¢ÂºïÁª¥Êä§" tabindex="-1"><a class="header-anchor" href="#_4-Á¥¢ÂºïÁª¥Êä§"><span>4.Á¥¢ÂºïÁª¥Êä§</span></a></h2><p>B+ Ê†ë‰∏∫‰∫ÜÁª¥Êä§Á¥¢ÂºïÊúâÂ∫èÊÄßÔºåÂú®ÊèíÂÖ•Êñ∞ÂÄºÁöÑÊó∂ÂÄôÈúÄË¶ÅÂÅöÂøÖË¶ÅÁöÑÁª¥Êä§„ÄÇ‰ª•‰∏äÈù¢Ëøô‰∏™Âõæ‰∏∫‰æãÔºåÂ¶ÇÊûúÊèíÂÖ•Êñ∞ÁöÑË°å ID ÂÄº‰∏∫ 700ÔºåÂàôÂè™ÈúÄË¶ÅÂú® R5 ÁöÑËÆ∞ÂΩïÂêéÈù¢ÊèíÂÖ•‰∏Ä‰∏™Êñ∞ËÆ∞ÂΩï„ÄÇÂ¶ÇÊûúÊñ∞ÊèíÂÖ•ÁöÑ ID ÂÄº‰∏∫ 400ÔºåÂ∞±Áõ∏ÂØπÈ∫ªÁÉ¶‰∫ÜÔºåÈúÄË¶ÅÈÄªËæë‰∏äÊå™Âä®ÂêéÈù¢ÁöÑÊï∞ÊçÆÔºåÁ©∫Âá∫‰ΩçÁΩÆ„ÄÇ</p><p>ËÄåÊõ¥Á≥üÁöÑÊÉÖÂÜµÊòØÔºåÂ¶ÇÊûú R5 ÊâÄÂú®ÁöÑÊï∞ÊçÆÈ°µÂ∑≤ÁªèÊª°‰∫ÜÔºåÊ†πÊçÆ B+ Ê†ëÁöÑÁÆóÊ≥ïÔºåËøôÊó∂ÂÄôÈúÄË¶ÅÁî≥ËØ∑‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈ°µÔºåÁÑ∂ÂêéÊå™Âä®ÈÉ®ÂàÜÊï∞ÊçÆËøáÂéª„ÄÇËøô‰∏™ËøáÁ®ãÁß∞‰∏∫È°µÂàÜË£Ç„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊÄßËÉΩËá™ÁÑ∂‰ºöÂèóÂΩ±Âìç„ÄÇ</p><p>Èô§‰∫ÜÊÄßËÉΩÂ§ñÔºåÈ°µÂàÜË£ÇÊìç‰ΩúËøòÂΩ±ÂìçÊï∞ÊçÆÈ°µÁöÑÂà©Áî®Áéá„ÄÇÂéüÊú¨ÊîæÂú®‰∏Ä‰∏™È°µÁöÑÊï∞ÊçÆÔºåÁé∞Âú®ÂàÜÂà∞‰∏§‰∏™È°µ‰∏≠ÔºåÊï¥‰ΩìÁ©∫Èó¥Âà©Áî®ÁéáÈôç‰ΩéÂ§ßÁ∫¶ 50%„ÄÇ</p><p>ÂΩìÁÑ∂Êúâ<strong>ÂàÜË£Ç</strong>Â∞±Êúâ<strong>ÂêàÂπ∂</strong>„ÄÇÂΩìÁõ∏ÈÇª‰∏§‰∏™È°µÁî±‰∫éÂà†Èô§‰∫ÜÊï∞ÊçÆÔºåÂà©Áî®ÁéáÂæà‰Ωé‰πãÂêéÔºå‰ºöÂ∞ÜÊï∞ÊçÆÈ°µÂÅöÂêàÂπ∂„ÄÇÂêàÂπ∂ÁöÑËøáÁ®ãÔºåÂèØ‰ª•ËÆ§‰∏∫ÊòØÂàÜË£ÇËøáÁ®ãÁöÑÈÄÜËøáÁ®ã„ÄÇ</p><p>Âü∫‰∫é‰∏äÈù¢ÁöÑÁ¥¢ÂºïÁª¥Êä§ËøáÁ®ãËØ¥ÊòéÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏™Ê°à‰æãÔºö</p><blockquote><p>‰Ω†ÂèØËÉΩÂú®‰∏Ä‰∫õÂª∫Ë°®ËßÑËåÉÈáåÈù¢ËßÅÂà∞ËøáÁ±ª‰ººÁöÑÊèèËø∞ÔºåË¶ÅÊ±ÇÂª∫Ë°®ËØ≠Âè•Èáå‰∏ÄÂÆöË¶ÅÊúâËá™Â¢û‰∏ªÈîÆ„ÄÇÂΩìÁÑ∂‰∫ãÊó†ÁªùÂØπÔºåÊàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ãÂì™‰∫õÂú∫ÊôØ‰∏ãÂ∫îËØ•‰ΩøÁî®Ëá™Â¢û‰∏ªÈîÆÔºåËÄåÂì™‰∫õÂú∫ÊôØ‰∏ã‰∏çÂ∫îËØ•„ÄÇ</p></blockquote><p>Ëá™Â¢û‰∏ªÈîÆÊòØÊåáËá™Â¢ûÂàó‰∏äÂÆö‰πâÁöÑ‰∏ªÈîÆÔºåÂú®Âª∫Ë°®ËØ≠Âè•‰∏≠‰∏ÄËà¨ÊòØËøô‰πàÂÆö‰πâÁöÑÔºö NOT NULL PRIMARY KEY AUTO_INCREMENT„ÄÇ</p><p>ÊèíÂÖ•Êñ∞ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÂèØ‰ª•‰∏çÊåáÂÆö ID ÁöÑÂÄºÔºåÁ≥ªÁªü‰ºöËé∑ÂèñÂΩìÂâç ID ÊúÄÂ§ßÂÄºÂä† 1 ‰Ωú‰∏∫‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁöÑ ID ÂÄº„ÄÇ</p><p><strong>‰πüÂ∞±ÊòØËØ¥ÔºåËá™Â¢û‰∏ªÈîÆÁöÑÊèíÂÖ•Êï∞ÊçÆÊ®°ÂºèÔºåÊ≠£Á¨¶Âêà‰∫ÜÊàë‰ª¨ÂâçÈù¢ÊèêÂà∞ÁöÑÈÄíÂ¢ûÊèíÂÖ•ÁöÑÂú∫ÊôØ„ÄÇÊØèÊ¨°ÊèíÂÖ•‰∏ÄÊù°Êñ∞ËÆ∞ÂΩïÔºåÈÉΩÊòØËøΩÂä†Êìç‰ΩúÔºåÈÉΩ‰∏çÊ∂âÂèäÂà∞Êå™Âä®ÂÖ∂‰ªñËÆ∞ÂΩïÔºå‰πü‰∏ç‰ºöËß¶ÂèëÂè∂Â≠êËäÇÁÇπÁöÑÂàÜË£Ç„ÄÇ</strong></p><p>ËÄåÊúâ‰∏öÂä°ÈÄªËæëÁöÑÂ≠óÊÆµÂÅö‰∏ªÈîÆÔºåÂàôÂæÄÂæÄ‰∏çÂÆπÊòì‰øùËØÅÊúâÂ∫èÊèíÂÖ•ÔºåËøôÊ†∑ÂÜôÊï∞ÊçÆÊàêÊú¨Áõ∏ÂØπËæÉÈ´ò„ÄÇ</p><p>Èô§‰∫ÜËÄÉËôëÊÄßËÉΩÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•‰ªéÂ≠òÂÇ®Á©∫Èó¥ÁöÑËßíÂ∫¶Êù•Áúã„ÄÇÂÅáËÆæ‰Ω†ÁöÑË°®‰∏≠Á°ÆÂÆûÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÂ≠óÊÆµÔºåÊØîÂ¶ÇÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑË∫´‰ªΩËØÅÂè∑ÔºåÈÇ£Â∫îËØ•Áî®Ë∫´‰ªΩËØÅÂè∑ÂÅö‰∏ªÈîÆÔºåËøòÊòØÁî®Ëá™Â¢ûÂ≠óÊÆµÂÅö‰∏ªÈîÆÂë¢Ôºü</p><p>Áî±‰∫éÊØè‰∏™Èùû‰∏ªÈîÆÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπ‰∏äÈÉΩÊòØ‰∏ªÈîÆÁöÑÂÄº„ÄÇÂ¶ÇÊûúÁî®Ë∫´‰ªΩËØÅÂè∑ÂÅö‰∏ªÈîÆÔºåÈÇ£‰πàÊØè‰∏™‰∫åÁ∫ßÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂç†Áî®Á∫¶ 20 ‰∏™Â≠óËäÇÔºåËÄåÂ¶ÇÊûúÁî®Êï¥ÂûãÂÅö‰∏ªÈîÆÔºåÂàôÂè™Ë¶Å 4 ‰∏™Â≠óËäÇÔºåÂ¶ÇÊûúÊòØÈïøÊï¥ÂûãÔºàbigintÔºâÂàôÊòØ 8 ‰∏™Â≠óËäÇ„ÄÇ</p><p><strong>Ë°•ÂÖÖÔºöË∫´‰ªΩËØÅÂè∑Âõ†‰∏∫Êúâ char &#39;x&#39; 17+3=20</strong></p><p><strong>ÊòæÁÑ∂Ôºå‰∏ªÈîÆÈïøÂ∫¶Ë∂äÂ∞èÔºåÊôÆÈÄöÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ∞±Ë∂äÂ∞èÔºåÊôÆÈÄöÁ¥¢ÂºïÂç†Áî®ÁöÑÁ©∫Èó¥‰πüÂ∞±Ë∂äÂ∞è„ÄÇ</strong></p><p><mark>ÊâÄ‰ª•Ôºå‰ªéÊÄßËÉΩÂíåÂ≠òÂÇ®Á©∫Èó¥ÊñπÈù¢ËÄÉÈáèÔºåËá™Â¢û‰∏ªÈîÆÂæÄÂæÄÊòØÊõ¥ÂêàÁêÜÁöÑÈÄâÊã©„ÄÇ</mark></p><p>ÊúâÊ≤°Êúâ‰ªÄ‰πàÂú∫ÊôØÈÄÇÂêàÁî®‰∏öÂä°Â≠óÊÆµÁõ¥Êé•ÂÅö‰∏ªÈîÆÁöÑÂë¢ÔºüËøòÊòØÊúâÁöÑ„ÄÇÊØîÂ¶ÇÔºåÊúâ‰∫õ‰∏öÂä°ÁöÑÂú∫ÊôØÈúÄÊ±ÇÊòØËøôÊ†∑ÁöÑÔºö</p><ol><li>Âè™Êúâ‰∏Ä‰∏™Á¥¢ÂºïÔºõ</li><li>ËØ•Á¥¢ÂºïÂøÖÈ°ªÊòØÂîØ‰∏ÄÁ¥¢Âºï„ÄÇ</li></ol><p>‰Ω†‰∏ÄÂÆöÁúãÂá∫Êù•‰∫ÜÔºåËøôÂ∞±ÊòØÂÖ∏ÂûãÁöÑ KV Âú∫ÊôØ„ÄÇ</p><p>Áî±‰∫éÊ≤°ÊúâÂÖ∂‰ªñÁ¥¢ÂºïÔºåÊâÄ‰ª•‰πüÂ∞±‰∏çÁî®ËÄÉËôëÂÖ∂‰ªñÁ¥¢ÂºïÁöÑÂè∂Â≠êËäÇÁÇπÂ§ßÂ∞èÁöÑÈóÆÈ¢ò„ÄÇ</p><p>ËøôÊó∂ÂÄôÊàë‰ª¨Â∞±Ë¶Å‰ºòÂÖàËÄÉËôë‰∏ä‰∏ÄÊÆµÊèêÂà∞ÁöÑ‚ÄúÂ∞ΩÈáè‰ΩøÁî®‰∏ªÈîÆÊü•ËØ¢‚ÄùÂéüÂàôÔºåÁõ¥Êé•Â∞ÜËøô‰∏™Á¥¢ÂºïËÆæÁΩÆ‰∏∫‰∏ªÈîÆÔºåÂèØ‰ª•ÈÅøÂÖçÊØèÊ¨°Êü•ËØ¢ÈúÄË¶ÅÊêúÁ¥¢‰∏§Ê£µÊ†ë„ÄÇ</p><h2 id="_5-Â∞èÁªì-2" tabindex="-1"><a class="header-anchor" href="#_5-Â∞èÁªì-2"><span>5.Â∞èÁªì</span></a></h2><p>‰ªäÂ§©ÔºåÊàëË∑ü‰Ω†ÂàÜÊûê‰∫ÜÊï∞ÊçÆÂ∫ìÂºïÊìéÂèØÁî®ÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰ªãÁªç‰∫Ü InnoDB ÈááÁî®ÁöÑ B+ Ê†ëÁªìÊûÑÔºå‰ª•Âèä<strong>‰∏∫‰ªÄ‰πà InnoDB Ë¶ÅËøô‰πàÈÄâÊã©„ÄÇB+ Ê†ëËÉΩÂ§üÂæàÂ•ΩÂú∞ÈÖçÂêàÁ£ÅÁõòÁöÑËØªÂÜôÁâπÊÄßÔºåÂáèÂ∞ëÂçïÊ¨°Êü•ËØ¢ÁöÑÁ£ÅÁõòËÆøÈóÆÊ¨°Êï∞„ÄÇ</strong></p><p>Áî±‰∫é InnoDB ÊòØÁ¥¢ÂºïÁªÑÁªáË°®Ôºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊàë‰ºöÂª∫ËÆÆ‰Ω†ÂàõÂª∫‰∏Ä‰∏™Ëá™Â¢û‰∏ªÈîÆÔºåËøôÊ†∑Èùû‰∏ªÈîÆÁ¥¢ÂºïÂç†Áî®ÁöÑÁ©∫Èó¥ÊúÄÂ∞è„ÄÇ‰ΩÜ‰∫ãÊó†ÁªùÂØπÔºåÊàë‰πüË∑ü‰Ω†ËÆ®ËÆ∫‰∫Ü‰ΩøÁî®‰∏öÂä°ÈÄªËæëÂ≠óÊÆµÂÅö‰∏ªÈîÆÁöÑÂ∫îÁî®Âú∫ÊôØ„ÄÇ</p><blockquote><p>QÔºö</p><p>ÊúÄÂêéÔºåÊàëÁªô‰Ω†Áïô‰∏ã‰∏Ä‰∏™ÈóÆÈ¢òÂêß„ÄÇÂØπ‰∫é‰∏äÈù¢‰æãÂ≠ê‰∏≠ÁöÑ InnoDB Ë°® TÔºåÂ¶ÇÊûú‰Ω†Ë¶ÅÈáçÂª∫Á¥¢Âºï kÔºå‰Ω†ÁöÑ‰∏§‰∏™ SQL ËØ≠Âè•ÂèØ‰ª•Ëøô‰πàÂÜôÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>alter table T drop index k;
alter table T add index(k);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Â¶ÇÊûú‰Ω†Ë¶ÅÈáçÂª∫‰∏ªÈîÆÁ¥¢ÂºïÔºå‰πüÂèØ‰ª•Ëøô‰πàÂÜôÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>alter table T drop primary key;
alter table T add primary key(id);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊàëÁöÑÈóÆÈ¢òÊòØÔºåÂØπ‰∫é‰∏äÈù¢Ëøô‰∏§‰∏™ÈáçÂª∫Á¥¢ÂºïÁöÑ‰ΩúÊ≥ïÔºåËØ¥Âá∫‰Ω†ÁöÑÁêÜËß£„ÄÇÂ¶ÇÊûúÊúâ‰∏çÂêàÈÄÇÁöÑÔºå‰∏∫‰ªÄ‰πàÔºåÊõ¥Â•ΩÁöÑÊñπÊ≥ïÊòØ‰ªÄ‰πàÔºü</p><p>AÔºö</p><p>Âú®ËØÑËÆ∫Âå∫ÔºåÊúâÂêåÂ≠¶ÈóÆÂà∞‰∏∫‰ªÄ‰πàË¶ÅÈáçÂª∫Á¥¢Âºï„ÄÇÊàë‰ª¨ÊñáÁ´†ÈáåÈù¢ÊúâÊèêÂà∞ÔºåÁ¥¢ÂºïÂèØËÉΩÂõ†‰∏∫Âà†Èô§ÔºåÊàñËÄÖÈ°µÂàÜË£ÇÁ≠âÂéüÂõ†ÔºåÂØºËá¥Êï∞ÊçÆÈ°µÊúâÁ©∫Ê¥ûÔºåÈáçÂª∫Á¥¢ÂºïÁöÑËøáÁ®ã‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ¥¢ÂºïÔºåÊääÊï∞ÊçÆÊåâÈ°∫Â∫èÊèíÂÖ•ÔºåËøôÊ†∑È°µÈù¢ÁöÑÂà©Áî®ÁéáÊúÄÈ´òÔºå<strong>‰πüÂ∞±ÊòØÁ¥¢ÂºïÊõ¥Á¥ßÂáë„ÄÅÊõ¥ÁúÅÁ©∫Èó¥</strong>„ÄÇ</p><p>ËøôÈÅìÈ¢òÁõÆÔºåÊàëÁªô‰Ω†ÁöÑ‚ÄúÂèÇËÄÉÁ≠îÊ°à‚ÄùÊòØÔºö</p><p>ÈáçÂª∫Á¥¢Âºï k ÁöÑÂÅöÊ≥ïÊòØÂêàÁêÜÁöÑÔºåÂèØ‰ª•ËææÂà∞ÁúÅÁ©∫Èó¥ÁöÑÁõÆÁöÑ„ÄÇ‰ΩÜÊòØÔºåÈáçÂª∫‰∏ªÈîÆÁöÑËøáÁ®ã‰∏çÂêàÁêÜ„ÄÇ‰∏çËÆ∫ÊòØÂà†Èô§‰∏ªÈîÆËøòÊòØÂàõÂª∫‰∏ªÈîÆÔºåÈÉΩ‰ºöÂ∞ÜÊï¥‰∏™Ë°®ÈáçÂª∫„ÄÇÊâÄ‰ª•ËøûÁùÄÊâßË°åËøô‰∏§‰∏™ËØ≠Âè•ÁöÑËØùÔºåÁ¨¨‰∏Ä‰∏™ËØ≠Âè•Â∞±ÁôΩÂÅö‰∫Ü„ÄÇ<strong>Ëøô‰∏§‰∏™ËØ≠Âè•Ôºå‰Ω†ÂèØ‰ª•Áî®Ëøô‰∏™ËØ≠Âè•‰ª£Êõø Ôºö alter table T engine=InnoDB</strong>„ÄÇÂú®‰∏ìÊ†èÁöÑÁ¨¨ 12 ÁØáÊñáÁ´†„Ää‰∏∫‰ªÄ‰πàË°®Êï∞ÊçÆÂà†Êéâ‰∏ÄÂçäÔºåË°®Êñá‰ª∂Â§ßÂ∞è‰∏çÂèòÔºü„Äã‰∏≠ÔºåÊàë‰ºöÂíå‰Ω†ÂàÜÊûêËøôÊù°ËØ≠Âè•ÁöÑÊâßË°åÊµÅÁ®ã„ÄÇ</p></blockquote><h3 id="Ë°•ÂÖÖ-int-4-„ÄÅint-8-„ÄÅint-11-ÂàÜÂà´Âç†Áî®Âá†‰∏™Â≠óËäÇ" tabindex="-1"><a class="header-anchor" href="#Ë°•ÂÖÖ-int-4-„ÄÅint-8-„ÄÅint-11-ÂàÜÂà´Âç†Áî®Âá†‰∏™Â≠óËäÇ"><span><mark>Ë°•ÂÖÖÔºö<a href="https://blog.csdn.net/qq_33378853/article/details/106723332" target="_blank" rel="noopener noreferrer">intÔºà4Ôºâ„ÄÅintÔºà8Ôºâ„ÄÅintÔºà11Ôºâ ÂàÜÂà´Âç†Áî®Âá†‰∏™Â≠óËäÇ Ôºü<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></mark></span></a></h3><p>‰ªñ‰ª¨ÈÉΩÊòØ 4 ‰∏™Â≠óËäÇ„ÄÇ</p><p>Êàë‰ª¨‰ª• int(11) ‰∏∫‰æãÊù•ËØ¥Ôºå11 ‰ª£Ë°®ËØ•Êï∞ÊçÆÁ±ªÂûãÊåáÂÆöÁöÑÊòæÁ§∫ÂÆΩÂ∫¶ÔºåÊåáÂÆöËÉΩÂ§üÊòæÁ§∫ÁöÑÊï∞ÂÄº‰∏≠Êï∞Â≠óÁöÑ‰∏™Êï∞„ÄÇ ËØ•Â£∞ÊòéÊåáÊòéÔºåÂú® id Â≠óÊÆµ‰∏≠ÁöÑÊï∞ÊçÆ‰∏ÄËà¨Âè™ÊòæÁ§∫ 11 ‰ΩçÊï∞Â≠óÁöÑÂÆΩÂ∫¶„ÄÇ</p><p><strong>ÊòæÁ§∫ÂÆΩÂ∫¶</strong>Âè™Áî®‰∫éÊòæÁ§∫ÔºåÂπ∂‰∏çËÉΩÈôêÂà∂<strong>ÂèñÂÄºËåÉÂõ¥ÂíåÂç†Áî®Á©∫Èó¥</strong>ÔºåÂ¶ÇÔºöint(3) ‰ºöÂç†Áî® 4 ‰∏™Â≠óËäÇÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂπ∂‰∏îÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÄº‰πü‰∏ç‰ºöÊòØ 999ÔºåËÄåÊòØ int Êï¥ÂûãÊâÄÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂÄº„ÄÇ</p><h1 id="_05‰∏®Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢Âºï-‰∏ã" tabindex="-1"><a class="header-anchor" href="#_05‰∏®Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢Âºï-‰∏ã"><span>05‰∏®Ê∑±ÂÖ•ÊµÖÂá∫Á¥¢ÂºïÔºà‰∏ãÔºâ</span></a></h1><h2 id="_1-ÂâçË®Ä-3" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä-3"><span>1.ÂâçË®Ä</span></a></h2><p>Âú®‰∏ä‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÊàëÂíå‰Ω†‰ªãÁªç‰∫Ü InnoDB Á¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑÊ®°ÂûãÔºå‰ªäÂ§©Êàë‰ª¨ÂÜçÁªßÁª≠ËÅäËÅäË∑ü MySQL Á¥¢ÂºïÊúâÂÖ≥ÁöÑÊ¶ÇÂøµ„ÄÇ</p><p>Âú®ÂºÄÂßãËøôÁØáÊñáÁ´†‰πãÂâçÔºåÊàë‰ª¨ÂÖàÊù•Áúã‰∏Ä‰∏ãËøô‰∏™ÈóÆÈ¢òÔºö</p><p>Âú®‰∏ãÈù¢Ëøô‰∏™Ë°® T ‰∏≠ÔºåÂ¶ÇÊûúÊàëÊâßË°å select * from T where k between 3 and 5ÔºåÈúÄË¶ÅÊâßË°åÂá†Ê¨°Ê†ëÁöÑÊêúÁ¥¢Êìç‰ΩúÔºå‰ºöÊâ´ÊèèÂ§öÂ∞ëË°åÔºü</p><p>‰∏ãÈù¢ÊòØËøô‰∏™Ë°®ÁöÑÂàùÂßãÂåñËØ≠Âè•„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; create table T (
        ID int primary key,
        k int NOT NULL DEFAULT 0, 
        s varchar(16) NOT NULL DEFAULT &#39;&#39;,
        index k(k))
        engine=InnoDB;
 
insert into T values(100,1, &#39;aa&#39;),(200,2,&#39;bb&#39;),(300,3,&#39;cc&#39;),(500,5,&#39;ee&#39;),(600,6,&#39;ff&#39;),(700,7,&#39;gg&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://images.zzq8.cn/img/202212121140730.png" style="zoom:50%;"><!----><p>Áé∞Âú®ÔºåÊàë‰ª¨‰∏ÄËµ∑Êù•ÁúãÁúãËøôÊù° SQL Êü•ËØ¢ËØ≠Âè•ÁöÑÊâßË°åÊµÅÁ®ãÔºö</p><ol><li>Âú® k Á¥¢ÂºïÊ†ë‰∏äÊâæÂà∞ k=3 ÁöÑËÆ∞ÂΩïÔºåÂèñÂæó ID = 300Ôºõ</li><li>ÂÜçÂà∞ ID Á¥¢ÂºïÊ†ëÊü•Âà∞ ID=300 ÂØπÂ∫îÁöÑ R3Ôºõ</li><li>Âú® k Á¥¢ÂºïÊ†ëÂèñ‰∏ã‰∏Ä‰∏™ÂÄº k=5ÔºåÂèñÂæó ID=500Ôºõ</li><li>ÂÜçÂõûÂà∞ ID Á¥¢ÂºïÊ†ëÊü•Âà∞ ID=500 ÂØπÂ∫îÁöÑ R4Ôºõ</li><li>Âú® k Á¥¢ÂºïÊ†ëÂèñ‰∏ã‰∏Ä‰∏™ÂÄº k=6Ôºå‰∏çÊª°Ë∂≥Êù°‰ª∂ÔºåÂæ™ÁéØÁªìÊùü„ÄÇ</li></ol><p>Âú®Ëøô‰∏™ËøáÁ®ã‰∏≠Ôºå<strong>ÂõûÂà∞‰∏ªÈîÆÁ¥¢ÂºïÊ†ëÊêúÁ¥¢ÁöÑËøáÁ®ãÔºåÊàë‰ª¨Áß∞‰∏∫ÂõûË°®</strong>„ÄÇÂèØ‰ª•ÁúãÂà∞ÔºåËøô‰∏™Êü•ËØ¢ËøáÁ®ãËØª‰∫Ü k Á¥¢ÂºïÊ†ëÁöÑ 3 Êù°ËÆ∞ÂΩïÔºàÊ≠•È™§ 1„ÄÅ3 Âíå 5ÔºâÔºåÂõûË°®‰∫Ü‰∏§Ê¨°ÔºàÊ≠•È™§ 2 Âíå 4Ôºâ„ÄÇ</p><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁî±‰∫éÊü•ËØ¢ÁªìÊûúÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÂè™Âú®‰∏ªÈîÆÁ¥¢Âºï‰∏äÊúâÔºåÊâÄ‰ª•‰∏çÂæó‰∏çÂõûË°®„ÄÇÈÇ£‰πàÔºåÊúâÊ≤°ÊúâÂèØËÉΩÁªèËøáÁ¥¢Âºï‰ºòÂåñÔºåÈÅøÂÖçÂõûË°®ËøáÁ®ãÂë¢Ôºü</p><h2 id="_2-Ë¶ÜÁõñÁ¥¢Âºï" tabindex="-1"><a class="header-anchor" href="#_2-Ë¶ÜÁõñÁ¥¢Âºï"><span>2.Ë¶ÜÁõñÁ¥¢Âºï</span></a></h2><p>Â¶ÇÊûúÊâßË°åÁöÑËØ≠Âè•ÊòØ select ID from T where k between 3 and 5ÔºåËøôÊó∂Âè™ÈúÄË¶ÅÊü• ID ÁöÑÂÄºÔºåËÄå ID ÁöÑÂÄºÂ∑≤ÁªèÂú® k Á¥¢ÂºïÊ†ë‰∏ä‰∫ÜÔºåÂõ†Ê≠§ÂèØ‰ª•Áõ¥Êé•Êèê‰æõÊü•ËØ¢ÁªìÊûúÔºå‰∏çÈúÄË¶ÅÂõûË°®„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂú®Ëøô‰∏™Êü•ËØ¢ÈáåÈù¢ÔºåÁ¥¢Âºï k Â∑≤Áªè‚ÄúË¶ÜÁõñ‰∫Ü‚ÄùÊàë‰ª¨ÁöÑÊü•ËØ¢ÈúÄÊ±ÇÔºåÊàë‰ª¨Áß∞‰∏∫Ë¶ÜÁõñÁ¥¢Âºï„ÄÇ</p><p><strong>Áî±‰∫éË¶ÜÁõñÁ¥¢ÂºïÂèØ‰ª•ÂáèÂ∞ëÊ†ëÁöÑÊêúÁ¥¢Ê¨°Êï∞ÔºåÊòæËëóÊèêÂçáÊü•ËØ¢ÊÄßËÉΩÔºåÊâÄ‰ª•‰ΩøÁî®Ë¶ÜÁõñÁ¥¢ÂºïÊòØ‰∏Ä‰∏™Â∏∏Áî®ÁöÑÊÄßËÉΩ‰ºòÂåñÊâãÊÆµ„ÄÇ</strong></p><p>ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂú®ÂºïÊìéÂÜÖÈÉ®‰ΩøÁî®Ë¶ÜÁõñÁ¥¢ÂºïÂú®Á¥¢Âºï k ‰∏äÂÖ∂ÂÆûËØª‰∫Ü‰∏â‰∏™ËÆ∞ÂΩïÔºåR3~R5ÔºàÂØπÂ∫îÁöÑÁ¥¢Âºï k ‰∏äÁöÑËÆ∞ÂΩïÈ°πÔºâÔºå‰ΩÜÊòØÂØπ‰∫é MySQL ÁöÑ Server Â±ÇÊù•ËØ¥ÔºåÂÆÉÂ∞±ÊòØÊâæÂºïÊìéÊãøÂà∞‰∫Ü‰∏§Êù°ËÆ∞ÂΩïÔºåÂõ†Ê≠§ MySQL ËÆ§‰∏∫Êâ´ÊèèË°åÊï∞ÊòØ 2„ÄÇ</p><blockquote><p>Â§áÊ≥®ÔºöÂÖ≥‰∫éÂ¶Ç‰ΩïÊü•ÁúãÊâ´ÊèèË°åÊï∞ÁöÑÈóÆÈ¢òÔºåÊàëÂ∞Ü‰ºöÂú®Á¨¨ 16 ÊñáÁ´†„ÄäÂ¶Ç‰ΩïÊ≠£Á°ÆÂú∞ÊòæÁ§∫ÈöèÊú∫Ê∂àÊÅØÔºü„Äã‰∏≠ÔºåÂíå‰Ω†ËØ¶ÁªÜËÆ®ËÆ∫„ÄÇ</p></blockquote><p>Âü∫‰∫é‰∏äÈù¢Ë¶ÜÁõñÁ¥¢ÂºïÁöÑËØ¥ÊòéÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏™ÈóÆÈ¢òÔºö<strong>Âú®‰∏Ä‰∏™Â∏ÇÊ∞ë‰ø°ÊÅØË°®‰∏äÔºåÊòØÂê¶ÊúâÂøÖË¶ÅÂ∞ÜË∫´‰ªΩËØÅÂè∑ÂíåÂêçÂ≠óÂª∫Á´ãËÅîÂêàÁ¥¢ÂºïÔºü</strong></p><p>ÂÅáËÆæËøô‰∏™Â∏ÇÊ∞ëË°®ÁöÑÂÆö‰πâÊòØËøôÊ†∑ÁöÑÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>CREATE TABLE `tuser` (
  `id` int(11) NOT NULL,
  `id_card` varchar(32) DEFAULT NULL,
  `name` varchar(32) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `ismale` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_card` (`id_card`),
  KEY `name_age` (`name`,`age`)
) ENGINE=InnoDB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Êàë‰ª¨Áü•ÈÅìÔºåË∫´‰ªΩËØÅÂè∑ÊòØÂ∏ÇÊ∞ëÁöÑÂîØ‰∏ÄÊ†áËØÜ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúÊúâÊ†πÊçÆË∫´‰ªΩËØÅÂè∑Êü•ËØ¢Â∏ÇÊ∞ë‰ø°ÊÅØÁöÑÈúÄÊ±ÇÔºåÊàë‰ª¨Âè™Ë¶ÅÂú®Ë∫´‰ªΩËØÅÂè∑Â≠óÊÆµ‰∏äÂª∫Á´ãÁ¥¢ÂºïÂ∞±Â§ü‰∫Ü„ÄÇËÄåÂÜçÂª∫Á´ã‰∏Ä‰∏™ÔºàË∫´‰ªΩËØÅÂè∑„ÄÅÂßìÂêçÔºâÁöÑËÅîÂêàÁ¥¢ÂºïÔºåÊòØ‰∏çÊòØÊµ™Ë¥πÁ©∫Èó¥Ôºü</p><p>Â¶ÇÊûúÁé∞Âú®Êúâ‰∏Ä‰∏™È´òÈ¢ëËØ∑Ê±ÇÔºåË¶ÅÊ†πÊçÆÂ∏ÇÊ∞ëÁöÑË∫´‰ªΩËØÅÂè∑Êü•ËØ¢‰ªñÁöÑÂßìÂêçÔºåËøô‰∏™ËÅîÂêàÁ¥¢ÂºïÂ∞±ÊúâÊÑè‰πâ‰∫Ü„ÄÇÂÆÉÂèØ‰ª•Âú®Ëøô‰∏™È´òÈ¢ëËØ∑Ê±Ç‰∏äÁî®Âà∞Ë¶ÜÁõñÁ¥¢ÂºïÔºå‰∏çÂÜçÈúÄË¶ÅÂõûË°®Êü•Êï¥Ë°åËÆ∞ÂΩïÔºåÂáèÂ∞ëËØ≠Âè•ÁöÑÊâßË°åÊó∂Èó¥„ÄÇ</p><p>ÂΩìÁÑ∂ÔºåÁ¥¢ÂºïÂ≠óÊÆµÁöÑÁª¥Êä§ÊÄªÊòØÊúâ‰ª£‰ª∑ÁöÑ„ÄÇÂõ†Ê≠§Ôºå<strong>Âú®Âª∫Á´ãÂÜó‰ΩôÁ¥¢ÂºïÊù•ÊîØÊåÅË¶ÜÁõñÁ¥¢Âºï</strong>Êó∂Â∞±ÈúÄË¶ÅÊùÉË°°ËÄÉËôë‰∫Ü„ÄÇËøôÊ≠£ÊòØ‰∏öÂä° DBAÔºåÊàñËÄÖÁß∞‰∏∫‰∏öÂä°Êï∞ÊçÆÊû∂ÊûÑÂ∏àÁöÑÂ∑•‰Ωú„ÄÇ</p><h2 id="_3-ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô" tabindex="-1"><a class="header-anchor" href="#_3-ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô"><span>3.ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô</span></a></h2><blockquote><p><strong>È°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÊúÄÂ∑¶‰ºòÂÖàÔºåÂú®ÂàõÂª∫Â§öÂàóÁ¥¢ÂºïÊó∂ÔºåË¶ÅÊ†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇÔºåwhereÂ≠êÂè•‰∏≠‰ΩøÁî®ÊúÄÈ¢ëÁπÅÁöÑ‰∏ÄÂàóÊîæÂú®ÊúÄÂ∑¶Ëæπ„ÄÇ</strong> ËÅîÂêàÁ¥¢ÂºïÔºöÊ†πÊçÆÂàõÂª∫ËÅîÂêàÁ¥¢ÂºïÁöÑÈ°∫Â∫èÔºå‰ª•ÊúÄÂ∑¶ÂéüÂàôËøõË°åwhereÊ£ÄÁ¥¢ÔºåÊØîÂ¶ÇÔºàageÔºånameÔºâ‰ª•age=1 Êàñ age= 1 and name=‚ÄòÂº†‰∏â‚ÄôÂèØ‰ª•‰ΩøÁî®Á¥¢ÂºïÔºåÂçï‰ª•name=‚ÄòÂº†‰∏â‚Äô ‰∏ç‰ºö‰ΩøÁî®Á¥¢ÂºïÔºåËÄÉËôëÂà∞Â≠òÂÇ®Á©∫Èó¥ÁöÑÈóÆÈ¢òÔºåËøòËØ∑Ê†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇÔºåÂ∞ÜÊü•ÊâæÈ¢ëÁπÅÁöÑÊï∞ÊçÆËøõË°åÈù†Â∑¶ÂàõÂª∫Á¥¢Âºï„ÄÇ</p><p>ÈóÆÈ¢òÔºöwhere age,name ‰ΩøÁî®Á¥¢ÂºïÂêóÔºü<a href="https://developer.aliyun.com/ask/281197" target="_blank" rel="noopener noreferrer">‰ΩøÁî®ÔºÅ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> mysqlÊü•ËØ¢‰ºòÂåñÂô®‰ºöÂà§Êñ≠Á∫†Ê≠£ËøôÊù°sqlËØ≠Âè•ËØ•‰ª•‰ªÄ‰πàÊ†∑ÁöÑÈ°∫Â∫èÊâßË°åÊïàÁéáÊúÄÈ´òÔºåÊúÄÂêéÊâçÁîüÊàêÁúüÊ≠£ÁöÑÊâßË°åËÆ°Âàí</p></blockquote><p>Ë°•ÂÖÖÔºöÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôÔºöÈ°æÂêçÊÄù‰πâÊòØÊúÄÂ∑¶‰ºòÂÖàÔºå‰ª•ÊúÄÂ∑¶ËæπÁöÑ‰∏∫Ëµ∑ÁÇπ‰ªª‰ΩïËøûÁª≠ÁöÑÁ¥¢ÂºïÈÉΩËÉΩÂåπÈÖç‰∏ä„ÄÇ</p><p>Ôºà1ÔºâÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™Â≠óÊÆµÊòØËåÉÂõ¥Êü•ËØ¢ÈúÄË¶ÅÂçïÁã¨Âª∫‰∏Ä‰∏™Á¥¢ÂºïÔºõ</p><p>Ôºà2ÔºâÂú®ÂàõÂª∫Â§öÂàóÁ¥¢ÂºïÊó∂ÔºåË¶ÅÊ†πÊçÆ‰∏öÂä°ÈúÄÊ±ÇÔºåwhereÂ≠êÂè•‰∏≠‰ΩøÁî®ÊúÄÈ¢ëÁπÅÁöÑ‰∏ÄÂàóÊîæÂú®ÊúÄÂ∑¶ËæπÔºõ</p><p><strong>ÂΩìÂàõÂª∫index(a,b,c)Â§çÂêàÁ¥¢ÂºïÊó∂ÔºåÊÉ≥Ë¶ÅÁ¥¢ÂºïÁîüÊïàÁöÑËØùÔºåÂè™ËÉΩ‰ΩøÁî® aÂíåab„ÄÅacÂíåabc‰∏âÁßçÁªÑÂêàÔºÅ</strong>ÔºàÂÖ∂‰∏≠ ac Âè™Áî®Âà∞aÔºâ</p><p>ÂÆû‰æãÔºö‰ª•‰∏ãÊòØÂ∏∏ËßÅÁöÑÂá†‰∏™Êü•ËØ¢Ôºö</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>mysql<span class="token operator">&gt;</span><span class="token constant">SELECT</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">b</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">c</span><span class="token template-punctuation string">`</span></span> <span class="token constant">FROM</span> <span class="token constant">A</span> <span class="token constant">WHERE</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a</span><span class="token template-punctuation string">`</span></span><span class="token operator">=</span><span class="token string">&#39;a1&#39;</span> <span class="token punctuation">;</span> <span class="token comment">//Á¥¢ÂºïÁîüÊïà</span>
mysql<span class="token operator">&gt;</span><span class="token constant">SELECT</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">b</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">c</span><span class="token template-punctuation string">`</span></span> <span class="token constant">FROM</span> <span class="token constant">A</span> <span class="token constant">WHERE</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">b</span><span class="token template-punctuation string">`</span></span><span class="token operator">=</span><span class="token string">&#39;b2&#39;</span> <span class="token constant">AND</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">c</span><span class="token template-punctuation string">`</span></span><span class="token operator">=</span><span class="token string">&#39;c2&#39;</span><span class="token punctuation">;</span> <span class="token comment">//Á¥¢ÂºïÂ§±Êïà</span>
mysql<span class="token operator">&gt;</span><span class="token constant">SELECT</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">b</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">c</span><span class="token template-punctuation string">`</span></span> <span class="token constant">FROM</span> <span class="token constant">A</span> <span class="token constant">WHERE</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a</span><span class="token template-punctuation string">`</span></span><span class="token operator">=</span><span class="token string">&#39;a3&#39;</span> <span class="token constant">AND</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">c</span><span class="token template-punctuation string">`</span></span><span class="token operator">=</span><span class="token string">&#39;c3&#39;</span><span class="token punctuation">;</span> <span class="token comment">//Á¥¢ÂºïÁîüÊïàÔºåÂÆûÈôÖ‰∏äÂè™‰ΩøÁî®‰∫ÜÁ¥¢Âºïa</span>
<span class="token operator">++</span><span class="token operator">++</span><span class="token operator">+</span> where a<span class="token operator">=</span><span class="token number">3</span> and b<span class="token operator">&gt;</span><span class="token number">4</span> and c<span class="token operator">=</span><span class="token number">5</span>  <span class="token comment">//Âè™Áî®Âà∞‰∫Üa„ÄÅb Âõ†‰∏∫c‰∏çËÉΩÂú®ËåÉÂõ¥‰πãÂêé</span>

<span class="token operator">--</span><span class="token operator">-</span> Âá†‰∏™‰∏çÊîØÊåÅÁ¥¢ÂºïÁöÑÁâπÂà´ÁöÑÁÇπ
<span class="token number">1</span>Ôºâwhere a<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token number">1</span>‰ºö‰ΩøÁî®Âà∞Á¥¢ÂºïÂêó
	ÂØπ‰∫éÊù°‰ª∂ a<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token function">ÔºåÊï∞ÊçÆÂ∫ì‰ºòÂåñÂô®ÂèØËÉΩ‰∏ç‰ºöÈÄâÊã©‰ΩøÁî®Â§çÂêàÁ¥¢Âºï</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span>„ÄÇËøôÊòØÂõ†‰∏∫Âú®‰∏çÁ≠â‰∫éÊù°‰ª∂‰∏ãÔºåÊü•ËØ¢ÈúÄË¶ÅËøîÂõû‰∏çÁ≠â‰∫éÊåáÂÆöÂÄºÁöÑÊâÄÊúâËÆ∞ÂΩïÔºåËÄåÂ§çÂêàÁ¥¢	ÂºïÊòØÊåâÁÖßÁ¥¢ÂºïÁöÑÈ°∫Â∫èÊù•Â≠òÂÇ®Êï∞ÊçÆÁöÑ„ÄÇÂõ†Ê≠§Ôºå‰ºòÂåñÂô®ÂèØËÉΩ‰ºöËÆ§‰∏∫ÂÖ®Ë°®Êâ´ÊèèÔºàTable ScanÔºâÊØî‰ΩøÁî®Â§çÂêàÁ¥¢ÂºïÊõ¥È´òÊïà„ÄÇ
<span class="token number">2</span>Ôºâwhere a is <span class="token keyword">null</span> and b is not <span class="token keyword">null</span>    
	isnullÊîØÊåÅÁ¥¢Âºï‰ΩÜÊòØisnotnull‰∏çÊîØÊåÅ
<span class="token number">3</span>Ôºâwhere <span class="token function">abs</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">3</span>
	ÂáΩÊï∞‰∏çÊîØÊåÅ


<span class="token constant">XD</span><span class="token operator">:</span> <span class="token function">ËÅîÂêàÁ¥¢ÂºïÁªô</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>Ê∑ªÂä†ÔºåÂ¶ÇÊûúwhere a<span class="token punctuation">,</span>c<span class="token punctuation">,</span>b Á¥¢Âºï‰ºöÁîüÊïàÂêóÔºüÔºàÁîüÊïàÔºå‰ºòÂåñÂô®‰ºö‰ºòÂåñÔºâ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ËØ¶ÁªÜÁÇπÁöÑTableÔºöÂÅáËÆæindex(a,b,c)</p><table><thead><tr><th>WhereËØ≠Âè•</th><th>Á¥†ÂºïÊòØÂê¶Ë¢´‰ΩøÁî®</th></tr></thead><tbody><tr><td>where a = 3</td><td>Y,‰ΩøÁî®Âà∞a</td></tr><tr><td>where a = 3 and b = 5</td><td>Y,‰ΩøÁî®Âà∞aÔºåb</td></tr><tr><td>where a = 3 and b = 5 and c = 4</td><td>Y,‰ΩøÁî®Âà∞a,b,c</td></tr><tr><td>where b = 3 ÊàñËÄÖ where b = 3 and c = 4 ÊàñËÄÖ where c = 4</td><td>N</td></tr><tr><td>where a = 3 and c = 5</td><td>‰ΩøÁî®Âà∞aÔºå ‰ΩÜÊòØc‰∏çÂèØ‰ª•Ôºåb‰∏≠Èó¥Êñ≠‰∫Ü</td></tr><tr><td>where a = 3 and b &gt; 4 and c = 5</td><td>‰ΩøÁî®Âà∞aÂíåbÔºå c‰∏çËÉΩÁî®Âú®ËåÉÂõ¥‰πãÂêéÔºåbÊñ≠‰∫Ü</td></tr><tr><td>where a is null and b is not null</td><td>is null ÊîØÊåÅÁ¥¢Âºï ‰ΩÜÊòØis not null ‰∏çÊîØÊåÅ,ÊâÄ‰ª• a ÂèØ‰ª•‰ΩøÁî®Á¥¢Âºï,‰ΩÜÊòØ b‰∏ç‰∏ÄÂÆöËÉΩÁî®‰∏äÁ¥¢ÂºïÔºà8.0Ôºâ</td></tr><tr><td>where a &lt;&gt; 3</td><td>‰∏çËÉΩ‰ΩøÁî®Á¥¢Âºï</td></tr><tr><td>where abs(a) =3</td><td>‰∏çËÉΩ‰ΩøÁî® Á¥¢Âºï</td></tr><tr><td>where a = 3 and b like ‚Äòkk%‚Äô and c = 4</td><td>Y,‰ΩøÁî®Âà∞a,b,c</td></tr><tr><td>where a = 3 and b like ‚Äò%kk‚Äô and c = 4</td><td>Y,Âè™Áî®Âà∞a</td></tr><tr><td>where a = 3 and b like ‚Äò%kk%‚Äô and c = 4</td><td>Y,Âè™Áî®Âà∞a</td></tr><tr><td>where a = 3 and b like ‚Äòk%kk%‚Äô and c = 4</td><td>Y,‰ΩøÁî®Âà∞a,b,c</td></tr></tbody></table><p>Ë°•ÂÖÖÔºö</p><ul><li><strong>Êó†ËøáÊª§‰∏çÁ¥¢Âºï</strong><ul><li>ËØ≠Âè•Ê≤°Êúâwhere Âè™Êúâ order by‰∏ç‰ºöÁî®Á¥¢ÂºïexplainÁöÑtype‰∏∫allÔºåÊâÄ‰ª•Ë¶ÅÂä†‰∏äwhereÊâç‰ºöËµ∞Á¥¢Âºï</li></ul></li><li>order byÈùûÊúÄÂ∑¶ filesortÔºà‰πüÈúÄÂíåwhereÁöÑ‰∏ÄÊ†∑ÈÅµÂæ™ÊúÄÂ∑¶ÂåπÈÖçÂéüÂàôÔºâ <ul><li>Âú®MySQLÁöÑ<code>EXPLAIN</code>ËØ≠Âè•‰∏≠ÔºåÂΩìÊü•ËØ¢ÊâßË°å‰ΩøÁî®‰∫Ü<code>Using filesort</code>Êó∂ÔºåË°®Á§∫MySQLÈúÄË¶ÅËøõË°åÊéíÂ∫èÊìç‰ΩúÔºå‰ΩÜÊó†Ê≥ï‰ΩøÁî®Á¥¢ÂºïÊù•ÂÆåÊàêÊéíÂ∫èÔºåËÄåÊòØÈúÄË¶ÅÈÄöËøá‰∏¥Êó∂Êñá‰ª∂ËøõË°åÊéíÂ∫è</li></ul></li></ul><p>ÁúãÂà∞ËøôÈáå‰Ω†‰∏ÄÂÆöÊúâ‰∏Ä‰∏™ÁñëÈóÆÔºåÂ¶ÇÊûú‰∏∫ÊØè‰∏ÄÁßçÊü•ËØ¢ÈÉΩËÆæËÆ°‰∏Ä‰∏™Á¥¢ÂºïÔºåÁ¥¢ÂºïÊòØ‰∏çÊòØÂ§™Â§ö‰∫Ü„ÄÇÂ¶ÇÊûúÊàëÁé∞Âú®Ë¶ÅÊåâÁÖßÂ∏ÇÊ∞ëÁöÑË∫´‰ªΩËØÅÂè∑ÂéªÊü•‰ªñÁöÑÂÆ∂Â∫≠Âú∞ÂùÄÂë¢ÔºüËôΩÁÑ∂Ëøô‰∏™Êü•ËØ¢ÈúÄÊ±ÇÂú®‰∏öÂä°‰∏≠Âá∫Áé∞ÁöÑÊ¶ÇÁéá‰∏çÈ´òÔºå‰ΩÜÊÄª‰∏çËÉΩËÆ©ÂÆÉËµ∞ÂÖ®Ë°®Êâ´ÊèèÂêßÔºüÂèçËøáÊù•ËØ¥ÔºåÂçïÁã¨‰∏∫‰∏Ä‰∏™‰∏çÈ¢ëÁπÅÁöÑËØ∑Ê±ÇÂàõÂª∫‰∏Ä‰∏™ÔºàË∫´‰ªΩËØÅÂè∑ÔºåÂú∞ÂùÄÔºâÁöÑÁ¥¢ÂºïÂèàÊÑüËßâÊúâÁÇπÊµ™Ë¥π„ÄÇÂ∫îËØ•ÊÄé‰πàÂÅöÂë¢Ôºü</p><p>ËøôÈáåÔºåÊàëÂÖàÂíå‰Ω†ËØ¥ÁªìËÆ∫Âêß„ÄÇ<strong>B+ Ê†ëËøôÁßçÁ¥¢ÂºïÁªìÊûÑÔºåÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÁöÑ‚ÄúÊúÄÂ∑¶ÂâçÁºÄ‚ÄùÔºåÊù•ÂÆö‰ΩçËÆ∞ÂΩï„ÄÇ</strong></p><p>‰∏∫‰∫ÜÁõ¥ËßÇÂú∞ËØ¥ÊòéËøô‰∏™Ê¶ÇÂøµÔºåÊàë‰ª¨Áî®ÔºànameÔºåageÔºâËøô‰∏™ËÅîÂêàÁ¥¢ÂºïÊù•ÂàÜÊûê„ÄÇ</p><img src="https://images.zzq8.cn/img/202212121140664.jpeg" style="zoom:50%;"><!----><p>ÂèØ‰ª•ÁúãÂà∞Ôºå<mark>Á¥¢ÂºïÈ°πÊòØÊåâÁÖßÁ¥¢ÂºïÂÆö‰πâÈáåÈù¢Âá∫Áé∞ÁöÑÂ≠óÊÆµÈ°∫Â∫èÊéíÂ∫èÁöÑ</mark>ÔºàÂØπÂ∫îËøôÊúüÁöÑÈóÆÈ¢òÔºâ„ÄÇ</p><p>ÂΩì‰Ω†ÁöÑÈÄªËæëÈúÄÊ±ÇÊòØÊü•Âà∞ÊâÄÊúâÂêçÂ≠óÊòØ‚ÄúÂº†‰∏â‚ÄùÁöÑ‰∫∫Êó∂ÔºåÂèØ‰ª•Âø´ÈÄüÂÆö‰ΩçÂà∞ ID4ÔºåÁÑ∂ÂêéÂêëÂêéÈÅçÂéÜÂæóÂà∞ÊâÄÊúâÈúÄË¶ÅÁöÑÁªìÊûú„ÄÇ</p><p><strong>Â¶ÇÊûú‰Ω†Ë¶ÅÊü•ÁöÑÊòØÊâÄÊúâÂêçÂ≠óÁ¨¨‰∏Ä‰∏™Â≠óÊòØ‚ÄúÂº†‚ÄùÁöÑ‰∫∫Ôºå‰Ω†ÁöÑ SQL ËØ≠Âè•ÁöÑÊù°‰ª∂ÊòØ&quot;where name like ‚ÄòÂº† %‚Äô&quot;„ÄÇËøôÊó∂Ôºå‰Ω†‰πüËÉΩÂ§üÁî®‰∏äËøô‰∏™Á¥¢ÂºïÔºåÊü•ÊâæÂà∞Á¨¨‰∏Ä‰∏™Á¨¶ÂêàÊù°‰ª∂ÁöÑËÆ∞ÂΩïÊòØ ID3ÔºåÁÑ∂ÂêéÂêëÂêéÈÅçÂéÜÔºåÁõ¥Âà∞‰∏çÊª°Ë∂≥Êù°‰ª∂‰∏∫Ê≠¢„ÄÇ</strong></p><p>ÂèØ‰ª•ÁúãÂà∞Ôºå‰∏çÂè™ÊòØÁ¥¢ÂºïÁöÑÂÖ®ÈÉ®ÂÆö‰πâÔºåÂè™Ë¶ÅÊª°Ë∂≥ÊúÄÂ∑¶ÂâçÁºÄÔºåÂ∞±ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïÊù•Âä†ÈÄüÊ£ÄÁ¥¢„ÄÇËøô‰∏™ÊúÄÂ∑¶ÂâçÁºÄÂèØ‰ª•ÊòØËÅîÂêàÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ N ‰∏™Â≠óÊÆµÔºå‰πüÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤Á¥¢ÂºïÁöÑÊúÄÂ∑¶ M ‰∏™Â≠óÁ¨¶„ÄÇ</p><p>Âü∫‰∫é‰∏äÈù¢ÂØπÊúÄÂ∑¶ÂâçÁºÄÁ¥¢ÂºïÁöÑËØ¥ÊòéÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏™ÈóÆÈ¢òÔºö<strong>Âú®Âª∫Á´ãËÅîÂêàÁ¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂ¶Ç‰ΩïÂÆâÊéíÁ¥¢ÂºïÂÜÖÁöÑÂ≠óÊÆµÈ°∫Â∫è„ÄÇ</strong></p><p>ËøôÈáåÊàë‰ª¨ÁöÑËØÑ‰º∞Ê†áÂáÜÊòØÔºåÁ¥¢ÂºïÁöÑÂ§çÁî®ËÉΩÂäõ„ÄÇÂõ†‰∏∫ÂèØ‰ª•ÊîØÊåÅÊúÄÂ∑¶ÂâçÁºÄÔºåÊâÄ‰ª•ÂΩìÂ∑≤ÁªèÊúâ‰∫Ü (a,b) Ëøô‰∏™ËÅîÂêàÁ¥¢ÂºïÂêéÔºå‰∏ÄËà¨Â∞±‰∏çÈúÄË¶ÅÂçïÁã¨Âú® a ‰∏äÂª∫Á´ãÁ¥¢Âºï‰∫Ü„ÄÇÂõ†Ê≠§Ôºå<strong>Á¨¨‰∏ÄÂéüÂàôÊòØÔºåÂ¶ÇÊûúÈÄöËøáË∞ÉÊï¥È°∫Â∫èÔºåÂèØ‰ª•Â∞ëÁª¥Êä§‰∏Ä‰∏™Á¥¢ÂºïÔºåÈÇ£‰πàËøô‰∏™È°∫Â∫èÂæÄÂæÄÂ∞±ÊòØÈúÄË¶Å‰ºòÂÖàËÄÉËôëÈááÁî®ÁöÑ„ÄÇ</strong></p><p>ÊâÄ‰ª•Áé∞Âú®‰Ω†Áü•ÈÅì‰∫ÜÔºåËøôÊÆµÂºÄÂ§¥ÁöÑÈóÆÈ¢òÈáåÔºåÊàë‰ª¨Ë¶Å‰∏∫È´òÈ¢ëËØ∑Ê±ÇÂàõÂª∫ (Ë∫´‰ªΩËØÅÂè∑ÔºåÂßìÂêçÔºâËøô‰∏™ËÅîÂêàÁ¥¢ÂºïÔºåÂπ∂Áî®Ëøô‰∏™Á¥¢ÂºïÊîØÊåÅ‚ÄúÊ†πÊçÆË∫´‰ªΩËØÅÂè∑Êü•ËØ¢Âú∞ÂùÄ‚ÄùÁöÑÈúÄÊ±Ç„ÄÇ</p><p>ÈÇ£‰πàÔºåÂ¶ÇÊûúÊó¢ÊúâËÅîÂêàÊü•ËØ¢ÔºåÂèàÊúâÂü∫‰∫é a„ÄÅb ÂêÑËá™ÁöÑÊü•ËØ¢Âë¢ÔºüÊü•ËØ¢Êù°‰ª∂ÈáåÈù¢Âè™Êúâ b ÁöÑËØ≠Âè•ÔºåÊòØÊó†Ê≥ï‰ΩøÁî® (a,b) Ëøô‰∏™ËÅîÂêàÁ¥¢ÂºïÁöÑÔºåËøôÊó∂ÂÄô‰Ω†‰∏çÂæó‰∏çÁª¥Êä§Âè¶Â§ñ‰∏Ä‰∏™Á¥¢ÂºïÔºå‰πüÂ∞±ÊòØËØ¥‰Ω†ÈúÄË¶ÅÂêåÊó∂Áª¥Êä§ (a,b)„ÄÅ(b) Ëøô‰∏§‰∏™Á¥¢Âºï„ÄÇ</p><p>ËøôÊó∂ÂÄôÔºåÊàë‰ª¨Ë¶Å<strong>ËÄÉËôëÁöÑÂéüÂàôÂ∞±ÊòØÁ©∫Èó¥</strong>‰∫Ü„ÄÇÊØîÂ¶Ç‰∏äÈù¢Ëøô‰∏™Â∏ÇÊ∞ëË°®ÁöÑÊÉÖÂÜµÔºåname Â≠óÊÆµÊòØÊØî age Â≠óÊÆµÂ§ßÁöÑ ÔºåÈÇ£ÊàëÂ∞±Âª∫ËÆÆ‰Ω†ÂàõÂª∫‰∏Ä‰∏™Ôºàname,age) ÁöÑËÅîÂêàÁ¥¢ÂºïÂíå‰∏Ä‰∏™ (age) ÁöÑÂçïÂ≠óÊÆµÁ¥¢Âºï„ÄÇ</p><h2 id="_4-Á¥¢Âºï‰∏ãÊé®" tabindex="-1"><a class="header-anchor" href="#_4-Á¥¢Âºï‰∏ãÊé®"><span>4.Á¥¢Âºï‰∏ãÊé®</span></a></h2><p>‰∏ä‰∏ÄÊÆµÊàë‰ª¨ËØ¥Âà∞Êª°Ë∂≥ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôÁöÑÊó∂ÂÄôÔºåÊúÄÂ∑¶ÂâçÁºÄÂèØ‰ª•Áî®‰∫éÂú®Á¥¢Âºï‰∏≠ÂÆö‰ΩçËÆ∞ÂΩï„ÄÇËøôÊó∂Ôºå‰Ω†ÂèØËÉΩË¶ÅÈóÆÔºåÈÇ£‰∫õ‰∏çÁ¨¶ÂêàÊúÄÂ∑¶ÂâçÁºÄÁöÑÈÉ®ÂàÜÔºå‰ºöÊÄé‰πàÊ†∑Âë¢Ôºü</p><p>Êàë‰ª¨ËøòÊòØ‰ª•Â∏ÇÊ∞ëË°®ÁöÑËÅîÂêàÁ¥¢ÂºïÔºàname, ageÔºâ‰∏∫‰æã„ÄÇÂ¶ÇÊûúÁé∞Âú®Êúâ‰∏Ä‰∏™ÈúÄÊ±ÇÔºöÊ£ÄÁ¥¢Âá∫Ë°®‰∏≠‚ÄúÂêçÂ≠óÁ¨¨‰∏Ä‰∏™Â≠óÊòØÂº†ÔºåËÄå‰∏îÂπ¥ÈæÑÊòØ 10 Â≤ÅÁöÑÊâÄÊúâÁî∑Â≠©‚Äù„ÄÇÈÇ£‰πàÔºåSQL ËØ≠Âè•ÊòØËøô‰πàÂÜôÁöÑÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; select * from tuser where name like &#39;Âº† %&#39; and age=10 and ismale=1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>‰Ω†Â∑≤ÁªèÁü•ÈÅì‰∫ÜÂâçÁºÄÁ¥¢ÂºïËßÑÂàôÔºåÊâÄ‰ª•Ëøô‰∏™ËØ≠Âè•Âú®ÊêúÁ¥¢Á¥¢ÂºïÊ†ëÁöÑÊó∂ÂÄôÔºåÂè™ËÉΩÁî® ‚ÄúÂº†‚ÄùÔºåÊâæÂà∞Á¨¨‰∏Ä‰∏™Êª°Ë∂≥Êù°‰ª∂ÁöÑËÆ∞ÂΩï ID3„ÄÇÂΩìÁÑ∂ÔºåËøôËøò‰∏çÈîôÔºåÊÄªÊØîÂÖ®Ë°®Êâ´ÊèèË¶ÅÂ•Ω„ÄÇ</p><p>ÁÑ∂ÂêéÂë¢Ôºü</p><p>ÂΩìÁÑ∂ÊòØÂà§Êñ≠ÂÖ∂‰ªñÊù°‰ª∂ÊòØÂê¶Êª°Ë∂≥„ÄÇ</p><p>Âú® MySQL 5.6 ‰πãÂâçÔºåÂè™ËÉΩ‰ªé ID3 ÂºÄÂßã‰∏Ä‰∏™‰∏™ÂõûË°®„ÄÇÂà∞‰∏ªÈîÆÁ¥¢Âºï‰∏äÊâæÂá∫Êï∞ÊçÆË°åÔºåÂÜçÂØπÊØîÂ≠óÊÆµÂÄº„ÄÇ</p><p>ËÄå MySQL 5.6 ÂºïÂÖ•ÁöÑÁ¥¢Âºï‰∏ãÊé®‰ºòÂåñÔºàindex condition pushdown)Ôºå ÂèØ‰ª•Âú®Á¥¢ÂºïÈÅçÂéÜËøáÁ®ã‰∏≠ÔºåÂØπÁ¥¢Âºï‰∏≠ÂåÖÂê´ÁöÑÂ≠óÊÆµÂÖàÂÅöÂà§Êñ≠ÔºåÁõ¥Êé•ËøáÊª§Êéâ‰∏çÊª°Ë∂≥Êù°‰ª∂ÁöÑËÆ∞ÂΩïÔºåÂáèÂ∞ëÂõûË°®Ê¨°Êï∞„ÄÇ</p><p>Âõæ 3 ÂíåÂõæ 4ÔºåÊòØËøô‰∏§‰∏™ËøáÁ®ãÁöÑÊâßË°åÊµÅÁ®ãÂõæ„ÄÇ</p><img src="https://images.zzq8.cn/img/202212121145257.jpeg" style="zoom:50%;"><!----><img src="https://images.zzq8.cn/img/202212121145015.jpeg" style="zoom:50%;"><!----><p>Âú®Âõæ 3 Âíå 4 Ëøô‰∏§‰∏™ÂõæÈáåÈù¢ÔºåÊØè‰∏Ä‰∏™ËôöÁ∫øÁÆ≠Â§¥Ë°®Á§∫ÂõûË°®‰∏ÄÊ¨°„ÄÇ</p><p>Âõæ 3 ‰∏≠ÔºåÂú® (name,age) Á¥¢ÂºïÈáåÈù¢ÊàëÁâπÊÑèÂéªÊéâ‰∫Ü age ÁöÑÂÄºÔºåËøô‰∏™ËøáÁ®ã InnoDB Âπ∂‰∏ç‰ºöÂéªÁúã age ÁöÑÂÄºÔºåÂè™ÊòØÊåâÈ°∫Â∫èÊää‚Äúname Á¨¨‰∏Ä‰∏™Â≠óÊòØ‚ÄôÂº†‚Äô‚ÄùÁöÑËÆ∞ÂΩï‰∏ÄÊù°Êù°ÂèñÂá∫Êù•ÂõûË°®„ÄÇÂõ†Ê≠§ÔºåÈúÄË¶ÅÂõûË°® 4 Ê¨°„ÄÇ</p><p>Âõæ 4 Ë∑üÂõæ 3 ÁöÑÂå∫Âà´ÊòØÔºåInnoDB Âú® (name,age) Á¥¢ÂºïÂÜÖÈÉ®Â∞±Âà§Êñ≠‰∫Ü age ÊòØÂê¶Á≠â‰∫é 10ÔºåÂØπ‰∫é‰∏çÁ≠â‰∫é 10 ÁöÑËÆ∞ÂΩïÔºåÁõ¥Êé•Âà§Êñ≠Âπ∂Ë∑≥Ëøá„ÄÇÂú®Êàë‰ª¨ÁöÑËøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂè™ÈúÄË¶ÅÂØπ ID4„ÄÅID5 Ëøô‰∏§Êù°ËÆ∞ÂΩïÂõûË°®ÂèñÊï∞ÊçÆÂà§Êñ≠ÔºåÂ∞±Âè™ÈúÄË¶ÅÂõûË°® 2 Ê¨°„ÄÇ</p><h2 id="_5-Â∞èÁªì-3" tabindex="-1"><a class="header-anchor" href="#_5-Â∞èÁªì-3"><span>5.Â∞èÁªì</span></a></h2><p>‰ªäÂ§©ËøôÁØáÊñáÁ´†ÔºåÊàëÂíå‰Ω†ÁªßÁª≠ËÆ®ËÆ∫‰∫ÜÊï∞ÊçÆÂ∫ìÁ¥¢ÂºïÁöÑÊ¶ÇÂøµÔºåÂåÖÊã¨‰∫ÜË¶ÜÁõñÁ¥¢Âºï„ÄÅÂâçÁºÄÁ¥¢Âºï„ÄÅÁ¥¢Âºï‰∏ãÊé®„ÄÇ‰Ω†ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®Êª°Ë∂≥ËØ≠Âè•ÈúÄÊ±ÇÁöÑÊÉÖÂÜµ‰∏ãÔºå Â∞ΩÈáèÂ∞ëÂú∞ËÆøÈóÆËµÑÊ∫êÊòØÊï∞ÊçÆÂ∫ìËÆæËÆ°ÁöÑÈáçË¶ÅÂéüÂàô‰πã‰∏Ä„ÄÇÊàë‰ª¨Âú®‰ΩøÁî®Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºåÂ∞§ÂÖ∂ÊòØÂú®ËÆæËÆ°Ë°®ÁªìÊûÑÊó∂Ôºå‰πüË¶Å‰ª•ÂáèÂ∞ëËµÑÊ∫êÊ∂àËÄó‰Ωú‰∏∫ÁõÆÊ†á„ÄÇ</p><blockquote><p>QuestionÔºö</p><p>ÂÆûÈôÖ‰∏ä‰∏ªÈîÆÁ¥¢Âºï‰πüÊòØÂèØ‰ª•‰ΩøÁî®Â§ö‰∏™Â≠óÊÆµÁöÑ„ÄÇDBA Â∞èÂêïÂú®ÂÖ•ËÅåÊñ∞ÂÖ¨Âè∏ÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèëÁé∞Ëá™Â∑±Êé•ÊâãÁª¥Êä§ÁöÑÂ∫ìÈáåÈù¢ÔºåÊúâËøô‰πà‰∏Ä‰∏™Ë°®ÔºåË°®ÁªìÊûÑÂÆö‰πâÁ±ª‰ººËøôÊ†∑ÁöÑÔºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>CREATE TABLE `geek` (
  `a` int(11) NOT NULL,
  `b` int(11) NOT NULL,
  `c` int(11) NOT NULL,
  `d` int(11) NOT NULL,
  PRIMARY KEY (`a`,`b`),
  KEY `c` (`c`),
  KEY `ca` (`c`,`a`),
  KEY `cb` (`c`,`b`)
) ENGINE=InnoDB;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ÂÖ¨Âè∏ÁöÑÂêå‰∫ãÂëäËØâ‰ªñËØ¥ÔºåÁî±‰∫éÂéÜÂè≤ÂéüÂõ†ÔºåËøô‰∏™Ë°®ÈúÄË¶Å a„ÄÅb ÂÅöËÅîÂêà‰∏ªÈîÆÔºåËøô‰∏™Â∞èÂêïÁêÜËß£‰∫Ü„ÄÇ</p><p>‰ΩÜÊòØÔºåÂ≠¶ËøáÊú¨Á´†ÂÜÖÂÆπÁöÑÂ∞èÂêïÂèàÁ∫≥Èó∑‰∫ÜÔºåÊó¢ÁÑ∂‰∏ªÈîÆÂåÖÂê´‰∫Ü a„ÄÅb Ëøô‰∏§‰∏™Â≠óÊÆµÔºåÈÇ£ÊÑèÂë≥ÁùÄÂçïÁã¨Âú®Â≠óÊÆµ c ‰∏äÂàõÂª∫‰∏Ä‰∏™Á¥¢ÂºïÔºåÂ∞±Â∑≤ÁªèÂåÖÂê´‰∫Ü‰∏â‰∏™Â≠óÊÆµ‰∫ÜÂëÄÔºå‰∏∫‰ªÄ‰πàË¶ÅÂàõÂª∫‚Äúca‚Äù‚Äúcb‚ÄùËøô‰∏§‰∏™Á¥¢ÂºïÔºü</p><p>Âêå‰∫ãÂëäËØâ‰ªñÔºåÊòØÂõ†‰∏∫‰ªñ‰ª¨ÁöÑ‰∏öÂä°ÈáåÈù¢ÊúâËøôÊ†∑ÁöÑ‰∏§ÁßçËØ≠Âè•Ôºö</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>select * from geek where c=N order by a limit 1;
select * from geek where c=N order by b limit 1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ÊàëÁªô‰Ω†ÁöÑÈóÆÈ¢òÊòØÔºåËøô‰ΩçÂêå‰∫ãÁöÑËß£ÈáäÂØπÂêóÔºå‰∏∫‰∫ÜËøô‰∏§‰∏™Êü•ËØ¢Ê®°ÂºèÔºåËøô‰∏§‰∏™Á¥¢ÂºïÊòØÂê¶ÈÉΩÊòØÂøÖÈ°ªÁöÑÔºü‰∏∫‰ªÄ‰πàÂë¢Ôºü</p><p>Answer: <mark>Êú™ÁêÜËß£</mark> ÂàÜÂºÄÂ£∞ÊòéÁöÑ‰∏§‰∏™ key Âú® where Âêé‰∏ÄËµ∑Áî®‰∏§‰∏™ key ÈÉΩ‰ºöËµ∞ÂêóÔºü</p><p>‰∏äÊúüÁöÑÈóÆÈ¢òÊòØÂÖ≥‰∫éÂØπËÅîÂêà‰∏ªÈîÆÁ¥¢ÂºïÂíå InnoDB Á¥¢ÂºïÁªÑÁªáË°®ÁöÑÁêÜËß£„ÄÇ</p><p>ÊàëÁõ¥Êé•Ë¥¥ @ËÄÅÊù®ÂêåÂøó ÁöÑÂõûÂ§çÁï•‰Ωú‰øÆÊîπÂ¶Ç‰∏ãÔºàÊàë‰øÆÊîπÁöÑÈÉ®ÂàÜÁî®Ê©ôËâ≤Ê†áÂá∫ÔºâÔºö</p><p>Ë°®ËÆ∞ÂΩï ‚Äìa--|‚Äìb--|‚Äìc--|‚Äìd-- 1 2 3 d 1 3 2 d 1 4 3 d 2 1 3 d 2 2 2 d 2 3 4 d ‰∏ªÈîÆ aÔºåb ÁöÑËÅöÁ∞áÁ¥¢ÂºïÁªÑÁªáÈ°∫Â∫èÁõ∏ÂΩì‰∫é order by a,b Ôºå‰πüÂ∞±ÊòØÂÖàÊåâ a ÊéíÂ∫èÔºåÂÜçÊåâ b ÊéíÂ∫èÔºåc Êó†Â∫è„ÄÇ</p><p>Á¥¢Âºï ca ÁöÑÁªÑÁªáÊòØÂÖàÊåâ c ÊéíÂ∫èÔºåÂÜçÊåâ a ÊéíÂ∫èÔºåÂêåÊó∂ËÆ∞ÂΩï‰∏ªÈîÆ ‚Äìc--|‚Äìa--|‚Äì‰∏ªÈîÆÈÉ®ÂàÜb-- ÔºàÊ≥®ÊÑèÔºåËøôÈáå‰∏çÊòØ abÔºåËÄåÊòØÂè™Êúâ bÔºâ 2 1 3 2 2 2 3 1 2 3 1 4 3 2 1 4 2 3 Ëøô‰∏™Ë∑üÁ¥¢Âºï c ÁöÑÊï∞ÊçÆÊòØ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑ„ÄÇ</p><p>Á¥¢Âºï cb ÁöÑÁªÑÁªáÊòØÂÖàÊåâ c ÊéíÂ∫èÔºåÂú®Êåâ b ÊéíÂ∫èÔºåÂêåÊó∂ËÆ∞ÂΩï‰∏ªÈîÆ ‚Äìc--|‚Äìb--|‚Äì‰∏ªÈîÆÈÉ®ÂàÜa-- ÔºàÂêå‰∏äÔºâ 2 2 2 2 3 1 3 1 2 3 2 1 3 4 1 4 3 2</p><p>ÊâÄ‰ª•ÔºåÁªìËÆ∫ÊòØ ca ÂèØ‰ª•ÂéªÊéâÔºåcb ÈúÄË¶Å‰øùÁïô„ÄÇ</p></blockquote><h1 id="_06‰∏®ÂÖ®Â±ÄÈîÅÂíåË°®ÈîÅ-ÁªôË°®Âä†‰∏™Â≠óÊÆµÊÄé‰πàÊúâËøô‰πàÂ§öÈòªÁ¢ç" tabindex="-1"><a class="header-anchor" href="#_06‰∏®ÂÖ®Â±ÄÈîÅÂíåË°®ÈîÅ-ÁªôË°®Âä†‰∏™Â≠óÊÆµÊÄé‰πàÊúâËøô‰πàÂ§öÈòªÁ¢ç"><span>06‰∏®ÂÖ®Â±ÄÈîÅÂíåË°®ÈîÅÔºöÁªôË°®Âä†‰∏™Â≠óÊÆµÊÄé‰πàÊúâËøô‰πàÂ§öÈòªÁ¢çÔºüüò¶</span></a></h1><blockquote><p>Ëøô‰∏ÄÁ´†Ê≤°ÊÄé‰πàÊáÇ FTWRL„ÄÅMDL</p></blockquote><h2 id="_1-ÂâçË®Ä-4" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä-4"><span>1.ÂâçË®Ä</span></a></h2><p>‰ªäÂ§©ÊàëË¶ÅË∑ü‰Ω†ËÅäËÅä MySQL ÁöÑÈîÅ„ÄÇÊï∞ÊçÆÂ∫ìÈîÅËÆæËÆ°ÁöÑÂàùË°∑ÊòØÂ§ÑÁêÜÂπ∂ÂèëÈóÆÈ¢ò„ÄÇ‰Ωú‰∏∫Â§öÁî®Êà∑ÂÖ±‰∫´ÁöÑËµÑÊ∫êÔºåÂΩìÂá∫Áé∞Âπ∂ÂèëËÆøÈóÆÁöÑÊó∂ÂÄôÔºåÊï∞ÊçÆÂ∫ìÈúÄË¶ÅÂêàÁêÜÂú∞ÊéßÂà∂ËµÑÊ∫êÁöÑËÆøÈóÆËßÑÂàô„ÄÇËÄåÈîÅÂ∞±ÊòØÁî®Êù•ÂÆûÁé∞Ëøô‰∫õËÆøÈóÆËßÑÂàôÁöÑÈáçË¶ÅÊï∞ÊçÆÁªìÊûÑ„ÄÇ</p><p><strong>Ê†πÊçÆÂä†ÈîÅÁöÑËåÉÂõ¥ÔºåMySQL ÈáåÈù¢ÁöÑÈîÅÂ§ßËá¥ÂèØ‰ª•ÂàÜÊàêÂÖ®Â±ÄÈîÅ„ÄÅË°®Á∫ßÈîÅÂíåË°åÈîÅ‰∏âÁ±ª</strong>„ÄÇ‰ªäÂ§©ËøôÁØáÊñáÁ´†ÔºåÊàë‰ºöÂíå‰Ω†ÂàÜ‰∫´ÂÖ®Â±ÄÈîÅÂíåË°®Á∫ßÈîÅ„ÄÇËÄåÂÖ≥‰∫éË°åÈîÅÁöÑÂÜÖÂÆπÔºåÊàë‰ºöÁïôÁùÄÂú®‰∏ã‰∏ÄÁØáÊñáÁ´†‰∏≠ÂÜçÂíå‰Ω†ËØ¶ÁªÜ‰ªãÁªç„ÄÇ</p><p>ËøôÈáåÈúÄË¶ÅËØ¥ÊòéÁöÑÊòØÔºåÈîÅÁöÑËÆæËÆ°ÊØîËæÉÂ§çÊùÇÔºåËøô‰∏§ÁØáÊñáÁ´†‰∏ç‰ºöÊ∂âÂèäÈîÅÁöÑÂÖ∑‰ΩìÂÆûÁé∞ÁªÜËäÇÔºå‰∏ªË¶Å‰ªãÁªçÁöÑÊòØÁ¢∞Âà∞ÈîÅÊó∂ÁöÑÁé∞Ë±°ÂíåÂÖ∂ËÉåÂêéÁöÑÂéüÁêÜ„ÄÇ</p><h2 id="_2-ÂÖ®Â±ÄÈîÅ" tabindex="-1"><a class="header-anchor" href="#_2-ÂÖ®Â±ÄÈîÅ"><span>2.ÂÖ®Â±ÄÈîÅ</span></a></h2><p>È°æÂêçÊÄù‰πâÔºåÂÖ®Â±ÄÈîÅÂ∞±ÊòØÂØπÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æãÂä†ÈîÅ„ÄÇMySQL Êèê‰æõ‰∫Ü‰∏Ä‰∏™Âä†ÂÖ®Â±ÄËØªÈîÅÁöÑÊñπÊ≥ïÔºåÂëΩ‰ª§ÊòØ Flush tables with read lock (FTWRL)„ÄÇÂΩì‰Ω†ÈúÄË¶ÅËÆ©Êï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÂëΩ‰ª§Ôºå‰πãÂêéÂÖ∂‰ªñÁ∫øÁ®ãÁöÑ‰ª•‰∏ãËØ≠Âè•‰ºöË¢´ÈòªÂ°ûÔºöÊï∞ÊçÆÊõ¥Êñ∞ËØ≠Âè•ÔºàÊï∞ÊçÆÁöÑÂ¢ûÂà†ÊîπÔºâ„ÄÅÊï∞ÊçÆÂÆö‰πâËØ≠Âè•ÔºàÂåÖÊã¨Âª∫Ë°®„ÄÅ‰øÆÊîπË°®ÁªìÊûÑÁ≠âÔºâÂíåÊõ¥Êñ∞Á±ª‰∫ãÂä°ÁöÑÊèê‰∫§ËØ≠Âè•„ÄÇ</p><p>**ÂÖ®Â±ÄÈîÅÁöÑÂÖ∏Âûã‰ΩøÁî®Âú∫ÊôØÊòØÔºåÂÅöÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩ„ÄÇ**‰πüÂ∞±ÊòØÊääÊï¥Â∫ìÊØè‰∏™Ë°®ÈÉΩ select Âá∫Êù•Â≠òÊàêÊñáÊú¨„ÄÇ</p><p>‰ª•ÂâçÊúâ‰∏ÄÁßçÂÅöÊ≥ïÔºåÊòØÈÄöËøá FTWRL Á°Æ‰øù‰∏ç‰ºöÊúâÂÖ∂‰ªñÁ∫øÁ®ãÂØπÊï∞ÊçÆÂ∫ìÂÅöÊõ¥Êñ∞ÔºåÁÑ∂ÂêéÂØπÊï¥‰∏™Â∫ìÂÅöÂ§á‰ªΩ„ÄÇÊ≥®ÊÑèÔºåÂú®Â§á‰ªΩËøáÁ®ã‰∏≠Êï¥‰∏™Â∫ìÂÆåÂÖ®Â§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅ„ÄÇ</p><p>‰ΩÜÊòØËÆ©Êï¥Â∫ìÈÉΩÂè™ËØªÔºåÂê¨‰∏äÂéªÂ∞±ÂæàÂç±Èô©Ôºö</p><ul><li>Â¶ÇÊûú‰Ω†Âú®‰∏ªÂ∫ì‰∏äÂ§á‰ªΩÔºåÈÇ£‰πàÂú®Â§á‰ªΩÊúüÈó¥ÈÉΩ‰∏çËÉΩÊâßË°åÊõ¥Êñ∞Ôºå‰∏öÂä°Âü∫Êú¨‰∏äÂ∞±ÂæóÂÅúÊëÜÔºõ</li><li>Â¶ÇÊûú‰Ω†Âú®‰ªéÂ∫ì‰∏äÂ§á‰ªΩÔºåÈÇ£‰πàÂ§á‰ªΩÊúüÈó¥‰ªéÂ∫ì‰∏çËÉΩÊâßË°å‰∏ªÂ∫ìÂêåÊ≠•ËøáÊù•ÁöÑ binlogÔºå‰ºöÂØºËá¥‰∏ª‰ªéÂª∂Ëøü„ÄÇ</li></ul><p>ÁúãÊù•Âä†ÂÖ®Â±ÄÈîÅ‰∏çÂ§™Â•Ω„ÄÇ‰ΩÜÊòØÁªÜÊÉ≥‰∏Ä‰∏ãÔºåÂ§á‰ªΩ‰∏∫‰ªÄ‰πàË¶ÅÂä†ÈîÅÂë¢ÔºüÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ã‰∏çÂä†ÈîÅ‰ºöÊúâ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ</p><p>ÂÅáËÆæ‰Ω†Áé∞Âú®Ë¶ÅÁª¥Êä§‚ÄúÊûÅÂÆ¢Êó∂Èó¥‚ÄùÁöÑË¥≠‰π∞Á≥ªÁªüÔºåÂÖ≥Ê≥®ÁöÑÊòØÁî®Êà∑Ë¥¶Êà∑‰ΩôÈ¢ùË°®ÂíåÁî®Êà∑ËØæÁ®ãË°®„ÄÇ</p><p>Áé∞Âú®ÂèëËµ∑‰∏Ä‰∏™ÈÄªËæëÂ§á‰ªΩ„ÄÇÂÅáËÆæÂ§á‰ªΩÊúüÈó¥ÔºåÊúâ‰∏Ä‰∏™Áî®Êà∑Ôºå‰ªñË¥≠‰π∞‰∫Ü‰∏ÄÈó®ËØæÁ®ãÔºå‰∏öÂä°ÈÄªËæëÈáåÂ∞±Ë¶ÅÊâ£Êéâ‰ªñÁöÑ‰ΩôÈ¢ùÔºåÁÑ∂ÂêéÂæÄÂ∑≤Ë¥≠ËØæÁ®ãÈáåÈù¢Âä†‰∏ä‰∏ÄÈó®ËØæ„ÄÇ</p><p>Â¶ÇÊûúÊó∂Èó¥È°∫Â∫è‰∏äÊòØÂÖàÂ§á‰ªΩË¥¶Êà∑‰ΩôÈ¢ùË°® (u_account)ÔºåÁÑ∂ÂêéÁî®Êà∑Ë¥≠‰π∞ÔºåÁÑ∂ÂêéÂ§á‰ªΩÁî®Êà∑ËØæÁ®ãË°® (u_course)Ôºå‰ºöÊÄé‰πàÊ†∑Âë¢Ôºü‰Ω†ÂèØ‰ª•Áúã‰∏Ä‰∏ãËøô‰∏™ÂõæÔºö</p><figure><img src="https://images.zzq8.cn/img/202212121837867.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!----><p>ÂèØ‰ª•ÁúãÂà∞ÔºåËøô‰∏™Â§á‰ªΩÁªìÊûúÈáåÔºåÁî®Êà∑ A ÁöÑÊï∞ÊçÆÁä∂ÊÄÅÊòØ‚ÄúË¥¶Êà∑‰ΩôÈ¢ùÊ≤°Êâ£Ôºå‰ΩÜÊòØÁî®Êà∑ËØæÁ®ãË°®ÈáåÈù¢Â∑≤ÁªèÂ§ö‰∫Ü‰∏ÄÈó®ËØæ‚Äù„ÄÇÂ¶ÇÊûúÂêéÈù¢Áî®Ëøô‰∏™Â§á‰ªΩÊù•ÊÅ¢Â§çÊï∞ÊçÆÁöÑËØùÔºåÁî®Êà∑ A Â∞±ÂèëÁé∞ÔºåËá™Â∑±Ëµö‰∫Ü„ÄÇ</p><p>‰Ωú‰∏∫Áî®Êà∑ÂèØÂà´ËßâÂæóËøôÊ†∑ÂèØÁúüÂ•ΩÂïäÔºå‰Ω†ÂèØ‰ª•ËØïÊÉ≥‰∏Ä‰∏ãÔºöÂ¶ÇÊûúÂ§á‰ªΩË°®ÁöÑÈ°∫Â∫èÂèçËøáÊù•ÔºåÂÖàÂ§á‰ªΩÁî®Êà∑ËØæÁ®ãË°®ÂÜçÂ§á‰ªΩË¥¶Êà∑‰ΩôÈ¢ùË°®ÔºåÂèàÂèØËÉΩ‰ºöÂá∫Áé∞‰ªÄ‰πàÁªìÊûúÔºü</p><p>‰πüÂ∞±ÊòØËØ¥Ôºå‰∏çÂä†ÈîÅÁöÑËØùÔºåÂ§á‰ªΩÁ≥ªÁªüÂ§á‰ªΩÁöÑÂæóÂà∞ÁöÑÂ∫ì‰∏çÊòØ‰∏Ä‰∏™ÈÄªËæëÊó∂Èó¥ÁÇπÔºåËøô‰∏™ËßÜÂõæÊòØÈÄªËæë‰∏ç‰∏ÄËá¥ÁöÑ„ÄÇ</p><p>ËØ¥Âà∞ËßÜÂõæ‰Ω†ËÇØÂÆöÊÉ≥Ëµ∑Êù•‰∫ÜÔºåÊàë‰ª¨Âú®ÂâçÈù¢ËÆ≤‰∫ãÂä°ÈöîÁ¶ªÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÆûÊòØÊúâ‰∏Ä‰∏™ÊñπÊ≥ïËÉΩÂ§üÊãøÂà∞‰∏ÄËá¥ÊÄßËßÜÂõæÁöÑÔºåÂØπÂêßÔºü</p><p>ÊòØÁöÑÔºåÂ∞±ÊòØÂú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÂºÄÂêØ‰∏Ä‰∏™‰∫ãÂä°„ÄÇ</p><blockquote><p>Â§áÊ≥®ÔºöÂ¶ÇÊûú‰Ω†ÂØπ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÁöÑÊ¶ÇÂøµ‰∏çÊòØÂæàÊ∏ÖÊô∞ÁöÑËØùÔºåÂèØ‰ª•ÂÜçÂõûÈ°æ‰∏Ä‰∏ãÁ¨¨ 3 ÁØáÊñáÁ´†<a href="#03%E4%B8%A8%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E6%94%B9%E4%BA%86%E6%88%91%E8%BF%98%E7%9C%8B%E4%B8%8D%E8%A7%81%EF%BC%9F">„Ää‰∫ãÂä°ÈöîÁ¶ªÔºö‰∏∫‰ªÄ‰πà‰Ω†Êîπ‰∫ÜÊàëËøòÁúã‰∏çËßÅÔºü„Äã</a>‰∏≠ÁöÑÁõ∏ÂÖ≥ÂÜÖÂÆπ„ÄÇ</p></blockquote><p>ÂÆòÊñπËá™Â∏¶ÁöÑÈÄªËæëÂ§á‰ªΩÂ∑•ÂÖ∑ÊòØ mysqldump„ÄÇÂΩì mysqldump ‰ΩøÁî®ÂèÇÊï∞‚Äìsingle-transaction ÁöÑÊó∂ÂÄôÔºåÂØºÊï∞ÊçÆ‰πãÂâçÂ∞±‰ºöÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåÊù•Á°Æ‰øùÊãøÂà∞‰∏ÄËá¥ÊÄßËßÜÂõæ„ÄÇËÄåÁî±‰∫é MVCC ÁöÑÊîØÊåÅÔºåËøô‰∏™ËøáÁ®ã‰∏≠Êï∞ÊçÆÊòØÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑ„ÄÇ</p><p>‰Ω†‰∏ÄÂÆöÂú®ÁñëÊÉëÔºåÊúâ‰∫ÜËøô‰∏™ÂäüËÉΩÔºå‰∏∫‰ªÄ‰πàËøòÈúÄË¶Å FTWRL Âë¢Ôºü**‰∏ÄËá¥ÊÄßËØªÊòØÂ•ΩÔºå‰ΩÜÂâçÊèêÊòØÂºïÊìéË¶ÅÊîØÊåÅËøô‰∏™ÈöîÁ¶ªÁ∫ßÂà´„ÄÇ**ÊØîÂ¶ÇÔºåÂØπ‰∫é MyISAM ËøôÁßç‰∏çÊîØÊåÅ‰∫ãÂä°ÁöÑÂºïÊìéÔºåÂ¶ÇÊûúÂ§á‰ªΩËøáÁ®ã‰∏≠ÊúâÊõ¥Êñ∞ÔºåÊÄªÊòØÂè™ËÉΩÂèñÂà∞ÊúÄÊñ∞ÁöÑÊï∞ÊçÆÔºåÈÇ£‰πàÂ∞±Á†¥Âùè‰∫ÜÂ§á‰ªΩÁöÑ‰∏ÄËá¥ÊÄß„ÄÇËøôÊó∂ÔºåÊàë‰ª¨Â∞±ÈúÄË¶Å‰ΩøÁî® FTWRL ÂëΩ‰ª§‰∫Ü„ÄÇ</p><p>ÊâÄ‰ª•Ôºå**single-transaction ÊñπÊ≥ïÂè™ÈÄÇÁî®‰∫éÊâÄÊúâÁöÑË°®‰ΩøÁî®‰∫ãÂä°ÂºïÊìéÁöÑÂ∫ì„ÄÇ**Â¶ÇÊûúÊúâÁöÑË°®‰ΩøÁî®‰∫Ü‰∏çÊîØÊåÅ‰∫ãÂä°ÁöÑÂºïÊìéÔºåÈÇ£‰πàÂ§á‰ªΩÂ∞±Âè™ËÉΩÈÄöËøá FTWRL ÊñπÊ≥ï„ÄÇËøôÂæÄÂæÄÊòØ DBA Ë¶ÅÊ±Ç‰∏öÂä°ÂºÄÂèë‰∫∫Âëò‰ΩøÁî® InnoDB Êõø‰ª£ MyISAM ÁöÑÂéüÂõ†‰πã‰∏Ä„ÄÇ</p><p>‰Ω†‰πüËÆ∏‰ºöÈóÆÔºå<strong>Êó¢ÁÑ∂Ë¶ÅÂÖ®Â∫ìÂè™ËØªÔºå‰∏∫‰ªÄ‰πà‰∏ç‰ΩøÁî® set global readonly=true ÁöÑÊñπÂºèÂë¢</strong>ÔºüÁ°ÆÂÆû readonly ÊñπÂºè‰πüÂèØ‰ª•ËÆ©ÂÖ®Â∫ìËøõÂÖ•Âè™ËØªÁä∂ÊÄÅÔºå‰ΩÜÊàëËøòÊòØ‰ºöÂª∫ËÆÆ‰Ω†Áî® FTWRL ÊñπÂºèÔºå‰∏ªË¶ÅÊúâ‰∏§‰∏™ÂéüÂõ†Ôºö</p><ul><li>‰∏ÄÊòØÔºåÂú®Êúâ‰∫õÁ≥ªÁªü‰∏≠Ôºåreadonly ÁöÑÂÄº‰ºöË¢´Áî®Êù•ÂÅöÂÖ∂‰ªñÈÄªËæëÔºåÊØîÂ¶ÇÁî®Êù•Âà§Êñ≠‰∏Ä‰∏™Â∫ìÊòØ‰∏ªÂ∫ìËøòÊòØÂ§áÂ∫ì„ÄÇÂõ†Ê≠§Ôºå‰øÆÊîπ global ÂèòÈáèÁöÑÊñπÂºèÂΩ±ÂìçÈù¢Êõ¥Â§ßÔºåÊàë‰∏çÂª∫ËÆÆ‰Ω†‰ΩøÁî®„ÄÇ</li><li>‰∫åÊòØÔºåÂú®ÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂‰∏äÊúâÂ∑ÆÂºÇ„ÄÇÂ¶ÇÊûúÊâßË°å FTWRL ÂëΩ‰ª§‰πãÂêéÁî±‰∫éÂÆ¢Êà∑Á´ØÂèëÁîüÂºÇÂ∏∏Êñ≠ÂºÄÔºåÈÇ£‰πà MySQL ‰ºöËá™Âä®ÈáäÊîæËøô‰∏™ÂÖ®Â±ÄÈîÅÔºåÊï¥‰∏™Â∫ìÂõûÂà∞ÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑÁä∂ÊÄÅ„ÄÇËÄåÂ∞ÜÊï¥‰∏™Â∫ìËÆæÁΩÆ‰∏∫ readonly ‰πãÂêéÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÂèëÁîüÂºÇÂ∏∏ÔºåÂàôÊï∞ÊçÆÂ∫ìÂ∞±‰ºö‰∏ÄÁõ¥‰øùÊåÅ readonly Áä∂ÊÄÅÔºåËøôÊ†∑‰ºöÂØºËá¥Êï¥‰∏™Â∫ìÈïøÊó∂Èó¥Â§Ñ‰∫é‰∏çÂèØÂÜôÁä∂ÊÄÅÔºåÈ£éÈô©ËæÉÈ´ò„ÄÇ</li></ul><p>‰∏öÂä°ÁöÑÊõ¥Êñ∞‰∏çÂè™ÊòØÂ¢ûÂà†ÊîπÊï∞ÊçÆÔºàDML)ÔºåËøòÊúâÂèØËÉΩÊòØÂä†Â≠óÊÆµÁ≠â‰øÆÊîπË°®ÁªìÊûÑÁöÑÊìç‰ΩúÔºàDDLÔºâ„ÄÇ‰∏çËÆ∫ÊòØÂì™ÁßçÊñπÊ≥ïÔºå‰∏Ä‰∏™Â∫ìË¢´ÂÖ®Â±ÄÈîÅ‰∏ä‰ª•ÂêéÔºå‰Ω†Ë¶ÅÂØπÈáåÈù¢‰ªª‰Ωï‰∏Ä‰∏™Ë°®ÂÅöÂä†Â≠óÊÆµÊìç‰ΩúÔºåÈÉΩÊòØ‰ºöË¢´ÈîÅ‰ΩèÁöÑ„ÄÇ</p><p>‰ΩÜÊòØÔºåÂç≥‰ΩøÊ≤°ÊúâË¢´ÂÖ®Â±ÄÈîÅ‰ΩèÔºåÂä†Â≠óÊÆµ‰πü‰∏çÊòØÂ∞±ËÉΩ‰∏ÄÂ∏ÜÈ£éÈ°∫ÁöÑÔºåÂõ†‰∏∫‰Ω†Ëøò‰ºöÁ¢∞Âà∞Êé•‰∏ãÊù•Êàë‰ª¨Ë¶Å‰ªãÁªçÁöÑË°®Á∫ßÈîÅ„ÄÇ</p><h2 id="_3-Ë°®Á∫ßÈîÅ" tabindex="-1"><a class="header-anchor" href="#_3-Ë°®Á∫ßÈîÅ"><span>3.Ë°®Á∫ßÈîÅ</span></a></h2><p>MySQL ÈáåÈù¢Ë°®Á∫ßÂà´ÁöÑÈîÅÊúâ‰∏§ÁßçÔºö‰∏ÄÁßçÊòØË°®ÈîÅÔºå‰∏ÄÁßçÊòØÂÖÉÊï∞ÊçÆÈîÅÔºàmeta data lockÔºåMDL)„ÄÇ</p><p>**Ë°®ÈîÅÁöÑËØ≠Ê≥ïÊòØ lock tables ‚Ä¶ read/write„ÄÇ**‰∏é FTWRL Á±ª‰ººÔºåÂèØ‰ª•Áî® unlock tables ‰∏ªÂä®ÈáäÊîæÈîÅÔºå‰πüÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÊñ≠ÂºÄÁöÑÊó∂ÂÄôËá™Âä®ÈáäÊîæ„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÔºålock tables ËØ≠Ê≥ïÈô§‰∫Ü‰ºöÈôêÂà∂Âà´ÁöÑÁ∫øÁ®ãÁöÑËØªÂÜôÂ§ñÔºå‰πüÈôêÂÆö‰∫ÜÊú¨Á∫øÁ®ãÊé•‰∏ãÊù•ÁöÑÊìç‰ΩúÂØπË±°„ÄÇ</p><p>‰∏æ‰∏™‰æãÂ≠ê, Â¶ÇÊûúÂú®Êüê‰∏™Á∫øÁ®ã A ‰∏≠ÊâßË°å lock tables t1 read, t2 write; Ëøô‰∏™ËØ≠Âè•ÔºåÂàôÂÖ∂‰ªñÁ∫øÁ®ãÂÜô t1„ÄÅËØªÂÜô t2 ÁöÑËØ≠Âè•ÈÉΩ‰ºöË¢´ÈòªÂ°û„ÄÇÂêåÊó∂ÔºåÁ∫øÁ®ã A Âú®ÊâßË°å unlock tables ‰πãÂâçÔºå‰πüÂè™ËÉΩÊâßË°åËØª t1„ÄÅËØªÂÜô t2 ÁöÑÊìç‰Ωú„ÄÇËøûÂÜô t1 ÈÉΩ‰∏çÂÖÅËÆ∏ÔºåËá™ÁÑ∂‰πü‰∏çËÉΩËÆøÈóÆÂÖ∂‰ªñË°®„ÄÇ</p><p>Âú®ËøòÊ≤°ÊúâÂá∫Áé∞Êõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÈîÅÁöÑÊó∂ÂÄôÔºåË°®ÈîÅÊòØÊúÄÂ∏∏Áî®ÁöÑÂ§ÑÁêÜÂπ∂ÂèëÁöÑÊñπÂºè„ÄÇËÄåÂØπ‰∫é InnoDB ËøôÁßçÊîØÊåÅË°åÈîÅÁöÑÂºïÊìéÔºå‰∏ÄËà¨‰∏ç‰ΩøÁî® lock tables ÂëΩ‰ª§Êù•ÊéßÂà∂Âπ∂ÂèëÔºåÊØïÁ´üÈîÅ‰ΩèÊï¥‰∏™Ë°®ÁöÑÂΩ±ÂìçÈù¢ËøòÊòØÂ§™Â§ß„ÄÇ</p><p>**Âè¶‰∏ÄÁ±ªË°®Á∫ßÁöÑÈîÅÊòØ MDLÔºàmetadata lock)„ÄÇ**MDL ‰∏çÈúÄË¶ÅÊòæÂºè‰ΩøÁî®ÔºåÂú®ËÆøÈóÆ‰∏Ä‰∏™Ë°®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëá™Âä®Âä†‰∏ä„ÄÇMDL ÁöÑ‰ΩúÁî®ÊòØÔºå‰øùËØÅËØªÂÜôÁöÑÊ≠£Á°ÆÊÄß„ÄÇ‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°‰∏Ä‰∏ãÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êü•ËØ¢Ê≠£Âú®ÈÅçÂéÜ‰∏Ä‰∏™Ë°®‰∏≠ÁöÑÊï∞ÊçÆÔºåËÄåÊâßË°åÊúüÈó¥Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂØπËøô‰∏™Ë°®ÁªìÊûÑÂÅöÂèòÊõ¥ÔºåÂà†‰∫Ü‰∏ÄÂàóÔºåÈÇ£‰πàÊü•ËØ¢Á∫øÁ®ãÊãøÂà∞ÁöÑÁªìÊûúË∑üË°®ÁªìÊûÑÂØπ‰∏ç‰∏äÔºåËÇØÂÆöÊòØ‰∏çË°åÁöÑ„ÄÇ</p><p>Âõ†Ê≠§ÔºåÂú® MySQL 5.5 ÁâàÊú¨‰∏≠ÂºïÂÖ•‰∫Ü MDLÔºåÂΩìÂØπ‰∏Ä‰∏™Ë°®ÂÅöÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä† MDL ËØªÈîÅÔºõÂΩìË¶ÅÂØπË°®ÂÅöÁªìÊûÑÂèòÊõ¥Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä† MDL ÂÜôÈîÅ„ÄÇ</p><ul><li>ËØªÈîÅ‰πãÈó¥‰∏ç‰∫íÊñ•ÔºåÂõ†Ê≠§‰Ω†ÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂØπ‰∏ÄÂº†Ë°®Â¢ûÂà†ÊîπÊü•„ÄÇ</li><li>ËØªÂÜôÈîÅ‰πãÈó¥„ÄÅÂÜôÈîÅ‰πãÈó¥ÊòØ‰∫íÊñ•ÁöÑÔºåÁî®Êù•‰øùËØÅÂèòÊõ¥Ë°®ÁªìÊûÑÊìç‰ΩúÁöÑÂÆâÂÖ®ÊÄß„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÊúâ‰∏§‰∏™Á∫øÁ®ãË¶ÅÂêåÊó∂Áªô‰∏Ä‰∏™Ë°®Âä†Â≠óÊÆµÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Ë¶ÅÁ≠âÂè¶‰∏Ä‰∏™ÊâßË°åÂÆåÊâçËÉΩÂºÄÂßãÊâßË°å„ÄÇ</li></ul><p>ËôΩÁÑ∂ MDL ÈîÅÊòØÁ≥ªÁªüÈªòËÆ§‰ºöÂä†ÁöÑÔºå‰ΩÜÂç¥ÊòØ‰Ω†‰∏çËÉΩÂøΩÁï•ÁöÑ‰∏Ä‰∏™Êú∫Âà∂„ÄÇÊØîÂ¶Ç‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÔºåÊàëÁªèÂ∏∏ÁúãÂà∞Êúâ‰∫∫ÊéâÂà∞Ëøô‰∏™ÂùëÈáåÔºöÁªô‰∏Ä‰∏™Â∞èË°®Âä†‰∏™Â≠óÊÆµÔºåÂØºËá¥Êï¥‰∏™Â∫ìÊåÇ‰∫Ü„ÄÇ</p><p>‰Ω†ËÇØÂÆöÁü•ÈÅìÔºåÁªô‰∏Ä‰∏™Ë°®Âä†Â≠óÊÆµÔºåÊàñËÄÖ‰øÆÊîπÂ≠óÊÆµÔºåÊàñËÄÖÂä†Á¥¢ÂºïÔºåÈúÄË¶ÅÊâ´ÊèèÂÖ®Ë°®ÁöÑÊï∞ÊçÆ„ÄÇÂú®ÂØπÂ§ßË°®Êìç‰ΩúÁöÑÊó∂ÂÄôÔºå‰Ω†ËÇØÂÆö‰ºöÁâπÂà´Â∞èÂøÉÔºå‰ª•ÂÖçÂØπÁ∫ø‰∏äÊúçÂä°ÈÄ†ÊàêÂΩ±Âìç„ÄÇËÄåÂÆûÈôÖ‰∏äÔºåÂç≥‰ΩøÊòØÂ∞èË°®ÔºåÊìç‰Ωú‰∏çÊÖé‰πü‰ºöÂá∫ÈóÆÈ¢ò„ÄÇÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ã‰∏ãÈù¢ÁöÑÊìç‰ΩúÂ∫èÂàóÔºåÂÅáËÆæË°® t ÊòØ‰∏Ä‰∏™Â∞èË°®„ÄÇ</p><blockquote><p>Â§áÊ≥®ÔºöËøôÈáåÁöÑÂÆûÈ™åÁéØÂ¢ÉÊòØ MySQL 5.6„ÄÇ</p></blockquote><figure><img src="https://images.zzq8.cn/img/202212131454238.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Êàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ session A ÂÖàÂêØÂä®ÔºåËøôÊó∂ÂÄô‰ºöÂØπË°® t Âä†‰∏Ä‰∏™ MDL ËØªÈîÅ„ÄÇÁî±‰∫é session B ÈúÄË¶ÅÁöÑ‰πüÊòØ MDL ËØªÈîÅÔºåÂõ†Ê≠§ÂèØ‰ª•Ê≠£Â∏∏ÊâßË°å„ÄÇ</p><p>‰πãÂêé session C ‰ºöË¢´ blockedÔºåÊòØÂõ†‰∏∫ session A ÁöÑ MDL ËØªÈîÅËøòÊ≤°ÊúâÈáäÊîæÔºåËÄå session C ÈúÄË¶Å MDL ÂÜôÈîÅÔºåÂõ†Ê≠§Âè™ËÉΩË¢´ÈòªÂ°û„ÄÇ</p><p>Â¶ÇÊûúÂè™Êúâ session C Ëá™Â∑±Ë¢´ÈòªÂ°ûËøòÊ≤°‰ªÄ‰πàÂÖ≥Á≥ªÔºå‰ΩÜÊòØ‰πãÂêéÊâÄÊúâË¶ÅÂú®Ë°® t ‰∏äÊñ∞Áî≥ËØ∑ MDL ËØªÈîÅÁöÑËØ∑Ê±Ç‰πü‰ºöË¢´ session C ÈòªÂ°û„ÄÇÂâçÈù¢Êàë‰ª¨ËØ¥‰∫ÜÔºåÊâÄÊúâÂØπË°®ÁöÑÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÈÉΩÈúÄË¶ÅÂÖàÁî≥ËØ∑ MDL ËØªÈîÅÔºåÂ∞±ÈÉΩË¢´ÈîÅ‰ΩèÔºåÁ≠â‰∫éËøô‰∏™Ë°®Áé∞Âú®ÂÆåÂÖ®‰∏çÂèØËØªÂÜô‰∫Ü„ÄÇ</p><p>Â¶ÇÊûúÊüê‰∏™Ë°®‰∏äÁöÑÊü•ËØ¢ËØ≠Âè•È¢ëÁπÅÔºåËÄå‰∏îÂÆ¢Êà∑Á´ØÊúâÈáçËØïÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØËØ¥Ë∂ÖÊó∂Âêé‰ºöÂÜçËµ∑‰∏Ä‰∏™Êñ∞ session ÂÜçËØ∑Ê±ÇÁöÑËØùÔºåËøô‰∏™Â∫ìÁöÑÁ∫øÁ®ãÂæàÂø´Â∞±‰ºöÁàÜÊª°„ÄÇ</p><p>‰Ω†Áé∞Âú®Â∫îËØ•Áü•ÈÅì‰∫ÜÔºå‰∫ãÂä°‰∏≠ÁöÑ MDL ÈîÅÔºåÂú®ËØ≠Âè•ÊâßË°åÂºÄÂßãÊó∂Áî≥ËØ∑Ôºå‰ΩÜÊòØËØ≠Âè•ÁªìÊùüÂêéÂπ∂‰∏ç‰ºöÈ©¨‰∏äÈáäÊîæÔºåËÄå‰ºöÁ≠âÂà∞Êï¥‰∏™‰∫ãÂä°Êèê‰∫§ÂêéÂÜçÈáäÊîæ„ÄÇ</p><p>Âü∫‰∫é‰∏äÈù¢ÁöÑÂàÜÊûêÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏™ÈóÆÈ¢òÔºå<strong>Â¶Ç‰ΩïÂÆâÂÖ®Âú∞ÁªôÂ∞èË°®Âä†Â≠óÊÆµÔºü</strong></p><p>È¶ñÂÖàÊàë‰ª¨Ë¶ÅËß£ÂÜ≥Èïø‰∫ãÂä°Ôºå‰∫ãÂä°‰∏çÊèê‰∫§ÔºåÂ∞±‰ºö‰∏ÄÁõ¥Âç†ÁùÄ MDL ÈîÅ„ÄÇÂú® MySQL ÁöÑ information_schema Â∫ìÁöÑ innodb_trx Ë°®‰∏≠Ôºå‰Ω†ÂèØ‰ª•Êü•Âà∞ÂΩìÂâçÊâßË°å‰∏≠ÁöÑ‰∫ãÂä°„ÄÇÂ¶ÇÊûú‰Ω†Ë¶ÅÂÅö DDL ÂèòÊõ¥ÁöÑË°®ÂàöÂ•ΩÊúâÈïø‰∫ãÂä°Âú®ÊâßË°åÔºåË¶ÅËÄÉËôëÂÖàÊöÇÂÅú DDLÔºåÊàñËÄÖ kill ÊéâËøô‰∏™Èïø‰∫ãÂä°„ÄÇ</p><p>‰ΩÜËÄÉËôë‰∏Ä‰∏ãËøô‰∏™Âú∫ÊôØ„ÄÇÂ¶ÇÊûú‰Ω†Ë¶ÅÂèòÊõ¥ÁöÑË°®ÊòØ‰∏Ä‰∏™ÁÉ≠ÁÇπË°®ÔºåËôΩÁÑ∂Êï∞ÊçÆÈáè‰∏çÂ§ßÔºå‰ΩÜÊòØ‰∏äÈù¢ÁöÑËØ∑Ê±ÇÂæàÈ¢ëÁπÅÔºåËÄå‰Ω†‰∏çÂæó‰∏çÂä†‰∏™Â≠óÊÆµÔºå‰Ω†ËØ•ÊÄé‰πàÂÅöÂë¢Ôºü</p><p>ËøôÊó∂ÂÄô kill ÂèØËÉΩÊú™ÂøÖÁÆ°Áî®ÔºåÂõ†‰∏∫Êñ∞ÁöÑËØ∑Ê±ÇÈ©¨‰∏äÂ∞±Êù•‰∫Ü„ÄÇÊØîËæÉÁêÜÊÉ≥ÁöÑÊú∫Âà∂ÊòØÔºåÂú® alter table ËØ≠Âè•ÈáåÈù¢ËÆæÂÆöÁ≠âÂæÖÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®Ëøô‰∏™ÊåáÂÆöÁöÑÁ≠âÂæÖÊó∂Èó¥ÈáåÈù¢ËÉΩÂ§üÊãøÂà∞ MDL ÂÜôÈîÅÊúÄÂ•ΩÔºåÊãø‰∏çÂà∞‰πü‰∏çË¶ÅÈòªÂ°ûÂêéÈù¢ÁöÑ‰∏öÂä°ËØ≠Âè•ÔºåÂÖàÊîæÂºÉ„ÄÇ‰πãÂêéÂºÄÂèë‰∫∫ÂëòÊàñËÄÖ DBA ÂÜçÈÄöËøáÈáçËØïÂëΩ‰ª§ÈáçÂ§çËøô‰∏™ËøáÁ®ã„ÄÇ</p><p>MariaDB Â∑≤ÁªèÂêàÂπ∂‰∫Ü AliSQL ÁöÑËøô‰∏™ÂäüËÉΩÔºåÊâÄ‰ª•Ëøô‰∏§‰∏™ÂºÄÊ∫êÂàÜÊîØÁõÆÂâçÈÉΩÊîØÊåÅ DDL NOWAIT/WAIT n Ëøô‰∏™ËØ≠Ê≥ï„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>ALTER TABLE tbl_name NOWAIT add column ...
ALTER TABLE tbl_name WAIT N add column ... 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-Â∞èÁªì" tabindex="-1"><a class="header-anchor" href="#_4-Â∞èÁªì"><span>4.Â∞èÁªì</span></a></h2><p>‰ªäÂ§©ÔºåÊàëË∑ü‰Ω†‰ªãÁªç‰∫Ü MySQL ÁöÑÂÖ®Â±ÄÈîÅÂíåË°®Á∫ßÈîÅ„ÄÇ</p><p>ÂÖ®Â±ÄÈîÅ‰∏ªË¶ÅÁî®Âú®ÈÄªËæëÂ§á‰ªΩËøáÁ®ã‰∏≠„ÄÇÂØπ‰∫éÂÖ®ÈÉ®ÊòØ InnoDB ÂºïÊìéÁöÑÂ∫ìÔºåÊàëÂª∫ËÆÆ‰Ω†ÈÄâÊã©‰ΩøÁî®‚Äìsingle-transaction ÂèÇÊï∞ÔºåÂØπÂ∫îÁî®‰ºöÊõ¥ÂèãÂ•Ω„ÄÇ</p><p>Ë°®ÈîÅ‰∏ÄËà¨ÊòØÂú®Êï∞ÊçÆÂ∫ìÂºïÊìé‰∏çÊîØÊåÅË°åÈîÅÁöÑÊó∂ÂÄôÊâç‰ºöË¢´Áî®Âà∞ÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†ÂèëÁé∞‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÈáåÊúâ lock tables ËøôÊ†∑ÁöÑËØ≠Âè•Ôºå‰Ω†ÈúÄË¶ÅËøΩÊü•‰∏Ä‰∏ãÔºåÊØîËæÉÂèØËÉΩÁöÑÊÉÖÂÜµÊòØÔºö</p><ul><li>Ë¶Å‰πàÊòØ‰Ω†ÁöÑÁ≥ªÁªüÁé∞Âú®ËøòÂú®Áî® MyISAM ËøôÁ±ª‰∏çÊîØÊåÅ‰∫ãÂä°ÁöÑÂºïÊìéÔºåÈÇ£Ë¶ÅÂÆâÊéíÂçáÁ∫ßÊç¢ÂºïÊìéÔºõ</li><li>Ë¶Å‰πàÊòØ‰Ω†ÁöÑÂºïÊìéÂçáÁ∫ß‰∫ÜÔºå‰ΩÜÊòØ‰ª£Á†ÅËøòÊ≤°ÂçáÁ∫ß„ÄÇÊàëËßÅËøáËøôÊ†∑ÁöÑÊÉÖÂÜµÔºåÊúÄÂêé‰∏öÂä°ÂºÄÂèëÂ∞±ÊòØÊää lock tables Âíå unlock tables ÊîπÊàê begin Âíå commitÔºåÈóÆÈ¢òÂ∞±Ëß£ÂÜ≥‰∫Ü„ÄÇ</li></ul><p>MDL ‰ºöÁõ¥Âà∞‰∫ãÂä°Êèê‰∫§ÊâçÈáäÊîæÔºåÂú®ÂÅöË°®ÁªìÊûÑÂèòÊõ¥ÁöÑÊó∂ÂÄôÔºå‰Ω†‰∏ÄÂÆöË¶ÅÂ∞èÂøÉ‰∏çË¶ÅÂØºËá¥ÈîÅ‰ΩèÁ∫ø‰∏äÊü•ËØ¢ÂíåÊõ¥Êñ∞„ÄÇ</p><blockquote><p>Answer:</p><p>ÊúÄÂêéÔºåÊàëÁªô‰Ω†Áïô‰∏Ä‰∏™ÈóÆÈ¢òÂêß„ÄÇÂ§á‰ªΩ‰∏ÄËà¨ÈÉΩ‰ºöÂú®Â§áÂ∫ì‰∏äÊâßË°åÔºå‰Ω†Âú®Áî®‚Äìsingle-transaction ÊñπÊ≥ïÂÅöÈÄªËæëÂ§á‰ªΩÁöÑËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûú‰∏ªÂ∫ì‰∏äÁöÑ‰∏Ä‰∏™Â∞èË°®ÂÅö‰∫Ü‰∏Ä‰∏™ DDLÔºåÊØîÂ¶ÇÁªô‰∏Ä‰∏™Ë°®‰∏äÂä†‰∫Ü‰∏ÄÂàó„ÄÇËøôÊó∂ÂÄôÔºå‰ªéÂ§áÂ∫ì‰∏ä‰ºöÁúãÂà∞‰ªÄ‰πàÁé∞Ë±°Âë¢Ôºü</p><p>Qeustion:</p><p>ÂÅáËÆæËøô‰∏™ DDL ÊòØÈíàÂØπË°® t1 ÁöÑÔºå ËøôÈáåÊàëÊääÂ§á‰ªΩËøáÁ®ã‰∏≠Âá†‰∏™ÂÖ≥ÈîÆÁöÑËØ≠Âè•ÂàóÂá∫Êù•Ôºö</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>Q1:SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
Q2:START TRANSACTION  WITH CONSISTENT SNAPSHOTÔºõ
/* other tables */
Q3:SAVEPOINT sp;
/* Êó∂Âàª 1 */
Q4:show create table `t1`;
/* Êó∂Âàª 2 */
Q5:SELECT * FROM `t1`;
/* Êó∂Âàª 3 */
Q6:ROLLBACK TO SAVEPOINT sp;
/* Êó∂Âàª 4 */
/* other tables */
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Âú®Â§á‰ªΩÂºÄÂßãÁöÑÊó∂ÂÄôÔºå‰∏∫‰∫ÜÁ°Æ‰øù RRÔºàÂèØÈáçÂ§çËØªÔºâÈöîÁ¶ªÁ∫ßÂà´ÔºåÂÜçËÆæÁΩÆ‰∏ÄÊ¨° RR ÈöîÁ¶ªÁ∫ßÂà´ (Q1);</p><p>ÂêØÂä®‰∫ãÂä°ÔºåËøôÈáåÁî® WITH CONSISTENT SNAPSHOT Á°Æ‰øùËøô‰∏™ËØ≠Âè•ÊâßË°åÂÆåÂ∞±ÂèØ‰ª•ÂæóÂà∞‰∏Ä‰∏™‰∏ÄËá¥ÊÄßËßÜÂõæÔºàQ2)Ôºõ</p><p>ËÆæÁΩÆ‰∏Ä‰∏™‰øùÂ≠òÁÇπÔºåËøô‰∏™ÂæàÈáçË¶ÅÔºàQ3ÔºâÔºõ</p><p>show create ÊòØ‰∏∫‰∫ÜÊãøÂà∞Ë°®ÁªìÊûÑ (Q4)ÔºåÁÑ∂ÂêéÊ≠£ÂºèÂØºÊï∞ÊçÆ ÔºàQ5ÔºâÔºåÂõûÊªöÂà∞ SAVEPOINT spÔºåÂú®ËøôÈáåÁöÑ‰ΩúÁî®ÊòØÈáäÊîæ t1 ÁöÑ MDL ÈîÅ ÔºàQ6Ôºâ„ÄÇÂΩìÁÑ∂ËøôÈÉ®ÂàÜÂ±û‰∫é‚ÄúË∂ÖÁ∫≤‚ÄùÔºå‰∏äÊñáÊ≠£ÊñáÈáåÈù¢ÈÉΩÊ≤°ÊèêÂà∞„ÄÇ</p><p>DDL ‰ªé‰∏ªÂ∫ì‰º†ËøáÊù•ÁöÑÊó∂Èó¥ÊåâÁÖßÊïàÊûú‰∏çÂêåÔºåÊàëÊâì‰∫ÜÂõõ‰∏™Êó∂Âàª„ÄÇÈ¢òÁõÆËÆæÂÆö‰∏∫Â∞èË°®ÔºåÊàë‰ª¨ÂÅáÂÆöÂà∞ËææÂêéÔºåÂ¶ÇÊûúÂºÄÂßãÊâßË°åÔºåÂàôÂæàÂø´ËÉΩÂ§üÊâßË°åÂÆåÊàê„ÄÇ</p><p>ÂèÇËÄÉÁ≠îÊ°àÂ¶Ç‰∏ãÔºö</p><ol><li>Â¶ÇÊûúÂú® Q4 ËØ≠Âè•ÊâßË°å‰πãÂâçÂà∞ËææÔºåÁé∞Ë±°ÔºöÊ≤°ÊúâÂΩ±ÂìçÔºåÂ§á‰ªΩÊãøÂà∞ÁöÑÊòØ DDL ÂêéÁöÑË°®ÁªìÊûÑ„ÄÇ</li><li>Â¶ÇÊûúÂú®‚ÄúÊó∂Âàª 2‚ÄùÂà∞ËææÔºåÂàôË°®ÁªìÊûÑË¢´ÊîπËøáÔºåQ5 ÊâßË°åÁöÑÊó∂ÂÄôÔºåÊä• Table definition has changed, please retry transactionÔºåÁé∞Ë±°Ôºömysqldump ÁªàÊ≠¢Ôºõ</li><li>Â¶ÇÊûúÂú®‚ÄúÊó∂Âàª 2‚ÄùÂíå‚ÄúÊó∂Âàª 3‚Äù‰πãÈó¥Âà∞ËææÔºåmysqldump Âç†ÁùÄ t1 ÁöÑ MDL ËØªÈîÅÔºåbinlog Ë¢´ÈòªÂ°ûÔºåÁé∞Ë±°Ôºö‰∏ª‰ªéÂª∂ËøüÔºåÁõ¥Âà∞ Q6 ÊâßË°åÂÆåÊàê„ÄÇ</li><li>‰ªé‚ÄúÊó∂Âàª 4‚ÄùÂºÄÂßãÔºåmysqldump ÈáäÊîæ‰∫Ü MDL ËØªÈîÅÔºåÁé∞Ë±°ÔºöÊ≤°ÊúâÂΩ±ÂìçÔºåÂ§á‰ªΩÊãøÂà∞ÁöÑÊòØ DDL ÂâçÁöÑË°®ÁªìÊûÑ„ÄÇ</li></ol></blockquote><h1 id="_07‰∏®Ë°åÈîÅÂäüËøá-ÊÄé‰πàÂáèÂ∞ëË°åÈîÅÂØπÊÄßËÉΩÁöÑÂΩ±Âìç" tabindex="-1"><a class="header-anchor" href="#_07‰∏®Ë°åÈîÅÂäüËøá-ÊÄé‰πàÂáèÂ∞ëË°åÈîÅÂØπÊÄßËÉΩÁöÑÂΩ±Âìç"><span>07‰∏®Ë°åÈîÅÂäüËøáÔºöÊÄé‰πàÂáèÂ∞ëË°åÈîÅÂØπÊÄßËÉΩÁöÑÂΩ±ÂìçÔºüüòÉ</span></a></h1><blockquote><p>ÈáçË¶ÅÔºö<a href="#3.%E6%AD%BB%E9%94%81%E5%92%8C%E6%AD%BB%E9%94%81%E6%A3%80%E6%B5%8B">Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã</a></p></blockquote><h2 id="_1-ÂâçË®Ä-5" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä-5"><span>1.ÂâçË®Ä</span></a></h2><p>Âú®‰∏ä‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÊàëË∑ü‰Ω†‰ªãÁªç‰∫Ü MySQL ÁöÑÂÖ®Â±ÄÈîÅÂíåË°®Á∫ßÈîÅÔºå‰ªäÂ§©Êàë‰ª¨Â∞±Êù•ËÆ≤ËÆ≤ MySQL ÁöÑË°åÈîÅ„ÄÇ</p><p>MySQL ÁöÑË°åÈîÅÊòØÂú®ÂºïÊìéÂ±ÇÁî±ÂêÑ‰∏™ÂºïÊìéËá™Â∑±ÂÆûÁé∞ÁöÑ„ÄÇ‰ΩÜÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÂºïÊìéÈÉΩÊîØÊåÅË°åÈîÅÔºåÊØîÂ¶Ç MyISAM ÂºïÊìéÂ∞±‰∏çÊîØÊåÅË°åÈîÅ„ÄÇ‰∏çÊîØÊåÅË°åÈîÅÊÑèÂë≥ÁùÄÂπ∂ÂèëÊéßÂà∂Âè™ËÉΩ‰ΩøÁî®Ë°®ÈîÅÔºåÂØπ‰∫éËøôÁßçÂºïÊìéÁöÑË°®ÔºåÂêå‰∏ÄÂº†Ë°®‰∏ä‰ªª‰ΩïÊó∂ÂàªÂè™ËÉΩÊúâ‰∏Ä‰∏™Êõ¥Êñ∞Âú®ÊâßË°åÔºåËøôÂ∞±‰ºöÂΩ±ÂìçÂà∞‰∏öÂä°Âπ∂ÂèëÂ∫¶„ÄÇInnoDB ÊòØÊîØÊåÅË°åÈîÅÁöÑÔºåËøô‰πüÊòØ MyISAM Ë¢´ InnoDB Êõø‰ª£ÁöÑÈáçË¶ÅÂéüÂõ†‰πã‰∏Ä„ÄÇ</p><p>Êàë‰ª¨‰ªäÂ§©Â∞±‰∏ªË¶ÅÊù•ËÅäËÅä InnoDB ÁöÑË°åÈîÅÔºå‰ª•ÂèäÂ¶Ç‰ΩïÈÄöËøáÂáèÂ∞ëÈîÅÂÜ≤Á™ÅÊù•ÊèêÂçá‰∏öÂä°Âπ∂ÂèëÂ∫¶„ÄÇ</p><p>È°æÂêçÊÄù‰πâÔºåË°åÈîÅÂ∞±ÊòØÈíàÂØπÊï∞ÊçÆË°®‰∏≠Ë°åËÆ∞ÂΩïÁöÑÈîÅ„ÄÇËøôÂæàÂ•ΩÁêÜËß£ÔºåÊØîÂ¶Ç‰∫ãÂä° A Êõ¥Êñ∞‰∫Ü‰∏ÄË°åÔºåËÄåËøôÊó∂ÂÄô‰∫ãÂä° B ‰πüË¶ÅÊõ¥Êñ∞Âêå‰∏ÄË°åÔºåÂàôÂøÖÈ°ªÁ≠â‰∫ãÂä° A ÁöÑÊìç‰ΩúÂÆåÊàêÂêéÊâçËÉΩËøõË°åÊõ¥Êñ∞„ÄÇ</p><p>ÂΩìÁÑ∂ÔºåÊï∞ÊçÆÂ∫ì‰∏≠ËøòÊúâ‰∏Ä‰∫õÊ≤°ÈÇ£‰πà‰∏ÄÁõÆ‰∫ÜÁÑ∂ÁöÑÊ¶ÇÂøµÂíåËÆæËÆ°ÔºåËøô‰∫õÊ¶ÇÂøµÂ¶ÇÊûúÁêÜËß£Âíå‰ΩøÁî®‰∏çÂΩìÔºåÂÆπÊòìÂØºËá¥Á®ãÂ∫èÂá∫Áé∞ÈùûÈ¢ÑÊúüË°å‰∏∫ÔºåÊØîÂ¶Ç‰∏§Èò∂ÊÆµÈîÅ„ÄÇ</p><h2 id="_2-‰ªé‰∏§Èò∂ÊÆµÈîÅËØ¥Ëµ∑" tabindex="-1"><a class="header-anchor" href="#_2-‰ªé‰∏§Èò∂ÊÆµÈîÅËØ¥Ëµ∑"><span>2.‰ªé‰∏§Èò∂ÊÆµÈîÅËØ¥Ëµ∑</span></a></h2><blockquote><p>ÈúÄË¶ÅÈîÅÂ§ö‰∏™Ë°åÔºåÂ∞±ÊääÊúÄÂèØËÉΩÈÄ†ÊàêÈîÅÂÜ≤Á™ÅÊîæÂêéÈù¢„ÄÇËøôÊ†∑ÊâßË°åÂÆåÂ∞±Á´ãÈ©¨ commit ‰∫Ü</p></blockquote><p>ÊàëÂÖàÁªô‰Ω†‰∏æ‰∏™‰æãÂ≠ê„ÄÇÂú®‰∏ãÈù¢ÁöÑÊìç‰ΩúÂ∫èÂàó‰∏≠Ôºå‰∫ãÂä° B ÁöÑ update ËØ≠Âè•ÊâßË°åÊó∂‰ºöÊòØ‰ªÄ‰πàÁé∞Ë±°Âë¢ÔºüÂÅáËÆæÂ≠óÊÆµ id ÊòØË°® t ÁöÑ‰∏ªÈîÆ„ÄÇ<img src="https://images.zzq8.cn/img/202212131523685.jpeg" alt="" loading="lazy">Ëøô‰∏™ÈóÆÈ¢òÁöÑÁªìËÆ∫ÂèñÂÜ≥‰∫é‰∫ãÂä° A Âú®ÊâßË°åÂÆå‰∏§Êù° update ËØ≠Âè•ÂêéÔºåÊåÅÊúâÂì™‰∫õÈîÅÔºå‰ª•ÂèäÂú®‰ªÄ‰πàÊó∂ÂÄôÈáäÊîæ„ÄÇ‰Ω†ÂèØ‰ª•È™åËØÅ‰∏Ä‰∏ãÔºöÂÆûÈôÖ‰∏ä‰∫ãÂä° B ÁöÑ update ËØ≠Âè•‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞‰∫ãÂä° A ÊâßË°å commit ‰πãÂêéÔºå‰∫ãÂä° B ÊâçËÉΩÁªßÁª≠ÊâßË°å„ÄÇ</p><p>Áü•ÈÅì‰∫ÜËøô‰∏™Á≠îÊ°àÔºå‰Ω†‰∏ÄÂÆöÁü•ÈÅì‰∫Ü‰∫ãÂä° A ÊåÅÊúâÁöÑ‰∏§‰∏™ËÆ∞ÂΩïÁöÑË°åÈîÅÔºåÈÉΩÊòØÂú® commit ÁöÑÊó∂ÂÄôÊâçÈáäÊîæÁöÑ„ÄÇ</p><p>‰πüÂ∞±ÊòØËØ¥Ôºå<strong>Âú® InnoDB ‰∫ãÂä°‰∏≠ÔºåË°åÈîÅÊòØÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÂä†‰∏äÁöÑÔºå‰ΩÜÂπ∂‰∏çÊòØ‰∏çÈúÄË¶Å‰∫ÜÂ∞±Á´ãÂàªÈáäÊîæÔºåËÄåÊòØË¶ÅÁ≠âÂà∞‰∫ãÂä°ÁªìÊùüÊó∂ÊâçÈáäÊîæ„ÄÇËøô‰∏™Â∞±ÊòØ‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆ„ÄÇ</strong></p><p>Áü•ÈÅì‰∫ÜËøô‰∏™ËÆæÂÆöÔºåÂØπÊàë‰ª¨‰ΩøÁî®‰∫ãÂä°Êúâ‰ªÄ‰πàÂ∏ÆÂä©Âë¢ÔºüÈÇ£Â∞±ÊòØÔºå==Â¶ÇÊûú‰Ω†ÁöÑ‰∫ãÂä°‰∏≠ÈúÄË¶ÅÈîÅÂ§ö‰∏™Ë°åÔºåË¶ÅÊääÊúÄÂèØËÉΩÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÅÊúÄÂèØËÉΩÂΩ±ÂìçÂπ∂ÂèëÂ∫¶ÁöÑÈîÅÂ∞ΩÈáèÂæÄÂêéÊîæ„ÄÇ==ÊàëÁªô‰Ω†‰∏æ‰∏™‰æãÂ≠ê„ÄÇ</p><p>ÂÅáËÆæ‰Ω†Ë¥üË¥£ÂÆûÁé∞‰∏Ä‰∏™ÁîµÂΩ±Á•®Âú®Á∫ø‰∫§Êòì‰∏öÂä°ÔºåÈ°æÂÆ¢ A Ë¶ÅÂú®ÂΩ±Èô¢ B Ë¥≠‰π∞ÁîµÂΩ±Á•®„ÄÇÊàë‰ª¨ÁÆÄÂåñ‰∏ÄÁÇπÔºåËøô‰∏™‰∏öÂä°ÈúÄË¶ÅÊ∂âÂèäÂà∞‰ª•‰∏ãÊìç‰ΩúÔºö</p><ol><li>‰ªéÈ°æÂÆ¢ A Ë¥¶Êà∑‰ΩôÈ¢ù‰∏≠Êâ£Èô§ÁîµÂΩ±Á•®‰ª∑Ôºõ</li><li>ÁªôÂΩ±Èô¢ B ÁöÑË¥¶Êà∑‰ΩôÈ¢ùÂ¢ûÂä†ËøôÂº†ÁîµÂΩ±Á•®‰ª∑Ôºõ</li><li>ËÆ∞ÂΩï‰∏ÄÊù°‰∫§ÊòìÊó•Âøó„ÄÇ</li></ol><p>‰πüÂ∞±ÊòØËØ¥ÔºåË¶ÅÂÆåÊàêËøô‰∏™‰∫§ÊòìÔºåÊàë‰ª¨ÈúÄË¶Å update ‰∏§Êù°ËÆ∞ÂΩïÔºåÂπ∂ insert ‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇÂΩìÁÑ∂Ôºå‰∏∫‰∫Ü‰øùËØÅ‰∫§ÊòìÁöÑÂéüÂ≠êÊÄßÔºåÊàë‰ª¨Ë¶ÅÊääËøô‰∏â‰∏™Êìç‰ΩúÊîæÂú®‰∏Ä‰∏™‰∫ãÂä°‰∏≠„ÄÇÈÇ£‰πàÔºå‰Ω†‰ºöÊÄéÊ†∑ÂÆâÊéíËøô‰∏â‰∏™ËØ≠Âè•Âú®‰∫ãÂä°‰∏≠ÁöÑÈ°∫Â∫èÂë¢Ôºü</p><p>ËØïÊÉ≥Â¶ÇÊûúÂêåÊó∂ÊúâÂè¶Â§ñ‰∏Ä‰∏™È°æÂÆ¢ C Ë¶ÅÂú®ÂΩ±Èô¢ B ‰π∞Á•®ÔºåÈÇ£‰πàËøô‰∏§‰∏™‰∫ãÂä°ÂÜ≤Á™ÅÁöÑÈÉ®ÂàÜÂ∞±ÊòØËØ≠Âè• 2 ‰∫Ü„ÄÇÂõ†‰∏∫ÂÆÉ‰ª¨Ë¶ÅÊõ¥Êñ∞Âêå‰∏Ä‰∏™ÂΩ±Èô¢Ë¥¶Êà∑ÁöÑ‰ΩôÈ¢ùÔºåÈúÄË¶Å‰øÆÊîπÂêå‰∏ÄË°åÊï∞ÊçÆ„ÄÇ</p><p>Ê†πÊçÆ‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆÔºå‰∏çËÆ∫‰Ω†ÊÄéÊ†∑ÂÆâÊéíËØ≠Âè•È°∫Â∫èÔºåÊâÄÊúâÁöÑÊìç‰ΩúÈúÄË¶ÅÁöÑË°åÈîÅÈÉΩÊòØÂú®‰∫ãÂä°Êèê‰∫§ÁöÑÊó∂ÂÄôÊâçÈáäÊîæÁöÑ„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰Ω†ÊääËØ≠Âè• 2 ÂÆâÊéíÂú®ÊúÄÂêéÔºåÊØîÂ¶ÇÊåâÁÖß 3„ÄÅ1„ÄÅ2 ËøôÊ†∑ÁöÑÈ°∫Â∫èÔºåÈÇ£‰πàÂΩ±Èô¢Ë¥¶Êà∑‰ΩôÈ¢ùËøô‰∏ÄË°åÁöÑÈîÅÊó∂Èó¥Â∞±ÊúÄÂ∞ë„ÄÇËøôÂ∞±ÊúÄÂ§ßÁ®ãÂ∫¶Âú∞ÂáèÂ∞ë‰∫Ü‰∫ãÂä°‰πãÈó¥ÁöÑÈîÅÁ≠âÂæÖÔºåÊèêÂçá‰∫ÜÂπ∂ÂèëÂ∫¶„ÄÇ</p><p>Â•Ω‰∫ÜÔºåÁé∞Âú®Áî±‰∫é‰Ω†ÁöÑÊ≠£Á°ÆËÆæËÆ°ÔºåÂΩ±Èô¢‰ΩôÈ¢ùËøô‰∏ÄË°åÁöÑË°åÈîÅÂú®‰∏Ä‰∏™‰∫ãÂä°‰∏≠‰∏ç‰ºöÂÅúÁïôÂæàÈïøÊó∂Èó¥„ÄÇ‰ΩÜÊòØÔºåËøôÂπ∂Ê≤°ÊúâÂÆåÂÖ®Ëß£ÂÜ≥‰Ω†ÁöÑÂõ∞Êâ∞„ÄÇ</p><p>Â¶ÇÊûúËøô‰∏™ÂΩ±Èô¢ÂÅöÊ¥ªÂä®ÔºåÂèØ‰ª•‰Ωé‰ª∑È¢ÑÂîÆ‰∏ÄÂπ¥ÂÜÖÊâÄÊúâÁöÑÁîµÂΩ±Á•®ÔºåËÄå‰∏îËøô‰∏™Ê¥ªÂä®Âè™ÂÅö‰∏ÄÂ§©„ÄÇ‰∫éÊòØÂú®Ê¥ªÂä®Êó∂Èó¥ÂºÄÂßãÁöÑÊó∂ÂÄôÔºå‰Ω†ÁöÑ MySQL Â∞±ÊåÇ‰∫Ü„ÄÇ‰Ω†Áôª‰∏äÊúçÂä°Âô®‰∏ÄÁúãÔºåCPU Ê∂àËÄóÊé•Ëøë 100%Ôºå‰ΩÜÊï¥‰∏™Êï∞ÊçÆÂ∫ìÊØèÁßíÂ∞±ÊâßË°å‰∏çÂà∞ 100 ‰∏™‰∫ãÂä°„ÄÇËøôÊòØ‰ªÄ‰πàÂéüÂõ†Âë¢Ôºü</p><p>ËøôÈáåÔºåÊàëÂ∞±Ë¶ÅËØ¥Âà∞Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã‰∫Ü„ÄÇ</p><h2 id="_3-Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã" tabindex="-1"><a class="header-anchor" href="#_3-Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã"><span>3.Ê≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµã</span></a></h2><blockquote><p>Ëá™Â∑±ÁêÜËß£ÔºöÈÅøÂÖçÊ≠ªÈîÅÁöÑÊñπÊ°à</p><p>Êï∞ÊçÆÂ∫ìÂ±ÇÈù¢Ôºö</p><p>1ÔºâÈ¶ñÂÖàÊï∞ÊçÆÂ∫ìÊúâ‰∏§‰∏™ÂèòÈáèÈªòËÆ§ÂºÄÂêØÊù•ÈÅøÂÖç‰∫ÜÔºå‰ΩÜÊòØÂõ†‰∏∫Ê≠ªÈîÅÊ£ÄÊµãÊòØÈªòËÆ§ÂºÄÂêØÁöÑÊúâÈ¢ùÂ§ñË¥üÊãÖ,ÊâÄ‰ª•Êàë‰ª¨Ë¶ÅÂÅöÁöÑÊòØ ÊéßÂà∂Âπ∂Âèë</p><p>2Ôºâ‰ªéÊï∞ÊçÆÂ∫ìËÆæËÆ°‰∏ä‰ºòÂåñÔºå‰Ω†ÂèØ‰ª•ËÄÉËôëÈÄöËøáÂ∞Ü‰∏ÄË°åÊîπÊàêÈÄªËæë‰∏äÁöÑÂ§öË°åÊù•ÂáèÂ∞ëÈîÅÂÜ≤Á™Å„ÄÇËøòÊòØ‰ª•ÂΩ±Èô¢Ë¥¶Êà∑‰∏∫‰æãÔºåÂèØ‰ª•ËÄÉËôëÊîæÂú®Â§öÊù°ËÆ∞ÂΩï‰∏äÔºåÊØîÂ¶Ç 10 ‰∏™ËÆ∞ÂΩïÔºåÂΩ±Èô¢ÁöÑË¥¶Êà∑ÊÄªÈ¢ùÁ≠â‰∫éËøô 10 ‰∏™ËÆ∞ÂΩïÁöÑÂÄºÁöÑÊÄªÂíå„ÄÇ</p><p>JavaÂ±ÇÈù¢Ôºö</p><p>3ÔºâÂú®ÂºÄÂèëÊó∂‰∏ÄËà¨ÈÉΩÊòØÊåâÁÖßÈ°∫Â∫èÂä†ÈîÅÊù•ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇÊØîÂ¶ÇÈÉΩÊòØÊåâÁÖßÂÖàÊãøt1,ÂÜçÊãøt2ÔºàÈÅøÂÖç‰∏ãÂõæÔºâ</p><ul><li>Âç≥Âä†ÈîÅÈ°∫Â∫èÔºöË¶ÅÊ±ÇÁ∫øÁ®ãÂú®Âä†ÈîÅÊó∂ÔºåÂøÖÈ°ªÊåâÁÖßÁõ∏ÂêåÁöÑÈ°∫Â∫èÊù•Âä†ÈîÅ„ÄÇËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂá∫Áé∞‰∫íÁõ∏Á≠âÂæÖÂØπÊñπÈáäÊîæÈîÅÁöÑÊÉÖÂÜµ„ÄÇ</li><li>Âú∫ÊôØÔºöWMS ‰∏æ‰æã A Thread(Â∫ìÂ≠ò„ÄÅË¥ßÊû∂) B(Ë¥ßÊû∂„ÄÅÂ∫ìÂ≠ò) Ê≠ªÈîÅÈÄöÂ∏∏‰∏é‰∫ãÂä°ÂíåÂπ∂ÂèëÊìç‰ΩúÊúâÂÖ≥</li></ul></blockquote><p>ÂΩìÂπ∂ÂèëÁ≥ªÁªü‰∏≠‰∏çÂêåÁ∫øÁ®ãÂá∫Áé∞Âæ™ÁéØËµÑÊ∫ê‰æùËµñÔºåÊ∂âÂèäÁöÑÁ∫øÁ®ãÈÉΩÂú®Á≠âÂæÖÂà´ÁöÑÁ∫øÁ®ãÈáäÊîæËµÑÊ∫êÊó∂ÔºåÂ∞±‰ºöÂØºËá¥ËøôÂá†‰∏™Á∫øÁ®ãÈÉΩËøõÂÖ•Êó†ÈôêÁ≠âÂæÖÁöÑÁä∂ÊÄÅÔºåÁß∞‰∏∫Ê≠ªÈîÅ„ÄÇËøôÈáåÊàëÁî®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°åÈîÅ‰∏æ‰∏™‰æãÂ≠ê„ÄÇ</p><p><img src="https://images.zzq8.cn/img/202212131532800.jpeg" alt="" loading="lazy">ËøôÊó∂ÂÄôÔºå‰∫ãÂä° A Âú®Á≠âÂæÖ‰∫ãÂä° B ÈáäÊîæ id=2 ÁöÑË°åÈîÅÔºåËÄå‰∫ãÂä° B Âú®Á≠âÂæÖ‰∫ãÂä° A ÈáäÊîæ id=1 ÁöÑË°åÈîÅ„ÄÇ ‰∫ãÂä° A Âíå‰∫ãÂä° B Âú®‰∫íÁõ∏Á≠âÂæÖÂØπÊñπÁöÑËµÑÊ∫êÈáäÊîæÔºåÂ∞±ÊòØËøõÂÖ•‰∫ÜÊ≠ªÈîÅÁä∂ÊÄÅ„ÄÇÂΩìÂá∫Áé∞Ê≠ªÈîÅ‰ª•ÂêéÔºåÊúâ‰∏§ÁßçÁ≠ñÁï•ÔºöÔºàXDÔºö‰∏§ËÄÖÂèØÂêåÊó∂Â≠òÂú®Ôºå‰∏çÊòØ‰∫åÈÄâ‰∏Ä)</p><ul><li>‰∏ÄÁßçÁ≠ñÁï•ÊòØÔºåÁõ¥Êé•ËøõÂÖ•Á≠âÂæÖÔºåÁõ¥Âà∞Ë∂ÖÊó∂„ÄÇËøô‰∏™Ë∂ÖÊó∂Êó∂Èó¥ÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ innodb_lock_wait_timeout Êù•ËÆæÁΩÆ„ÄÇÔºàÈªòËÆ§ÂÄºÊòØ<code>50</code>ÁßíÔºâ</li><li>Âè¶‰∏ÄÁßçÁ≠ñÁï•ÊòØÔºåÂèëËµ∑Ê≠ªÈîÅÊ£ÄÊµãÔºåÂèëÁé∞Ê≠ªÈîÅÂêéÔºå‰∏ªÂä®ÂõûÊªöÊ≠ªÈîÅÈìæÊù°‰∏≠ÁöÑÊüê‰∏Ä‰∏™‰∫ãÂä°ÔºåËÆ©ÂÖ∂‰ªñ‰∫ãÂä°Âæó‰ª•ÁªßÁª≠ÊâßË°å„ÄÇÂ∞ÜÂèÇÊï∞ innodb_deadlock_detect ËÆæÁΩÆ‰∏∫ onÔºåË°®Á§∫ÂºÄÂêØËøô‰∏™ÈÄªËæë„ÄÇÔºàÈªòËÆ§ÂÄºÊòØ<code>ON</code>Ôºâ</li></ul><p>Âú® InnoDB ‰∏≠Ôºåinnodb_lock_wait_timeout ÁöÑÈªòËÆ§ÂÄºÊòØ 50sÔºåÊÑèÂë≥ÁùÄÂ¶ÇÊûúÈááÁî®Á¨¨‰∏Ä‰∏™Á≠ñÁï•ÔºåÂΩìÂá∫Áé∞Ê≠ªÈîÅ‰ª•ÂêéÔºåÁ¨¨‰∏Ä‰∏™Ë¢´ÈîÅ‰ΩèÁöÑÁ∫øÁ®ãË¶ÅËøá 50s Êâç‰ºöË∂ÖÊó∂ÈÄÄÂá∫ÔºåÁÑ∂ÂêéÂÖ∂‰ªñÁ∫øÁ®ãÊâçÊúâÂèØËÉΩÁªßÁª≠ÊâßË°å„ÄÇÂØπ‰∫éÂú®Á∫øÊúçÂä°Êù•ËØ¥ÔºåËøô‰∏™Á≠âÂæÖÊó∂Èó¥ÂæÄÂæÄÊòØÊó†Ê≥ïÊé•ÂèóÁöÑ„ÄÇ</p><p><code>show variables like &#39;innodb_lock_wait_timeout&#39; #50s</code></p><p>‰ΩÜÊòØÔºåÊàë‰ª¨Âèà‰∏çÂèØËÉΩÁõ¥Êé•ÊääËøô‰∏™Êó∂Èó¥ËÆæÁΩÆÊàê‰∏Ä‰∏™ÂæàÂ∞èÁöÑÂÄºÔºåÊØîÂ¶Ç 1s„ÄÇËøôÊ†∑ÂΩìÂá∫Áé∞Ê≠ªÈîÅÁöÑÊó∂ÂÄôÔºåÁ°ÆÂÆûÂæàÂø´Â∞±ÂèØ‰ª•Ëß£ÂºÄÔºå‰ΩÜÂ¶ÇÊûú‰∏çÊòØÊ≠ªÈîÅÔºåËÄåÊòØÁÆÄÂçïÁöÑÈîÅÁ≠âÂæÖÂë¢ÔºüÊâÄ‰ª•ÔºåË∂ÖÊó∂Êó∂Èó¥ËÆæÁΩÆÂ§™Áü≠ÁöÑËØùÔºå‰ºöÂá∫Áé∞ÂæàÂ§öËØØ‰º§„ÄÇ</p><p>ÊâÄ‰ª•ÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊàë‰ª¨ËøòÊòØË¶ÅÈááÁî®Á¨¨‰∫åÁßçÁ≠ñÁï•ÔºåÂç≥Ôºö‰∏ªÂä®Ê≠ªÈîÅÊ£ÄÊµãÔºåËÄå‰∏î innodb_deadlock_detect ÁöÑÈªòËÆ§ÂÄºÊú¨Ë∫´Â∞±ÊòØ on„ÄÇ‰∏ªÂä®Ê≠ªÈîÅÊ£ÄÊµãÂú®ÂèëÁîüÊ≠ªÈîÅÁöÑÊó∂ÂÄôÔºåÊòØËÉΩÂ§üÂø´ÈÄüÂèëÁé∞Âπ∂ËøõË°åÂ§ÑÁêÜÁöÑÔºå‰ΩÜÊòØÂÆÉ‰πüÊòØÊúâÈ¢ùÂ§ñË¥üÊãÖÁöÑ„ÄÇ</p><p><code>show variables like &#39;innodb_deadlock_detect&#39; #on Â¶ÇÊûú‰ªñË¶ÅÂä†ÈîÅËÆøÈóÆÁöÑË°å‰∏äÊúâÈîÅÔºå‰ªñÊâçË¶ÅÊ£ÄÊµã</code></p><p>‰Ω†ÂèØ‰ª•ÊÉ≥Ë±°‰∏Ä‰∏ãËøô‰∏™ËøáÁ®ãÔºöÊØèÂΩì‰∏Ä‰∏™‰∫ãÂä°Ë¢´ÈîÅÁöÑÊó∂ÂÄôÔºåÂ∞±Ë¶ÅÁúãÁúãÂÆÉÊâÄ‰æùËµñÁöÑÁ∫øÁ®ãÊúâÊ≤°ÊúâË¢´Âà´‰∫∫ÈîÅ‰ΩèÔºåÂ¶ÇÊ≠§Âæ™ÁéØÔºåÊúÄÂêéÂà§Êñ≠ÊòØÂê¶Âá∫Áé∞‰∫ÜÂæ™ÁéØÁ≠âÂæÖÔºå‰πüÂ∞±ÊòØÊ≠ªÈîÅ„ÄÇ</p><p>ÈÇ£Â¶ÇÊûúÊòØÊàë‰ª¨‰∏äÈù¢ËØ¥Âà∞ÁöÑÊâÄÊúâ‰∫ãÂä°ÈÉΩË¶ÅÊõ¥Êñ∞Âêå‰∏ÄË°åÁöÑÂú∫ÊôØÂë¢Ôºü</p><p>ÊØè‰∏™Êñ∞Êù•ÁöÑË¢´Â†µ‰ΩèÁöÑÁ∫øÁ®ãÔºåÈÉΩË¶ÅÂà§Êñ≠‰ºö‰∏ç‰ºöÁî±‰∫éËá™Â∑±ÁöÑÂä†ÂÖ•ÂØºËá¥‰∫ÜÊ≠ªÈîÅÔºåËøôÊòØ‰∏Ä‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(n) ÁöÑÊìç‰Ωú„ÄÇÂÅáËÆæÊúâ 1000 ‰∏™Âπ∂ÂèëÁ∫øÁ®ãË¶ÅÂêåÊó∂Êõ¥Êñ∞Âêå‰∏ÄË°åÔºåÈÇ£‰πàÊ≠ªÈîÅÊ£ÄÊµãÊìç‰ΩúÂ∞±ÊòØ 100 ‰∏áËøô‰∏™ÈáèÁ∫ßÁöÑ„ÄÇËôΩÁÑ∂ÊúÄÁªàÊ£ÄÊµãÁöÑÁªìÊûúÊòØÊ≤°ÊúâÊ≠ªÈîÅÔºå‰ΩÜÊòØËøôÊúüÈó¥Ë¶ÅÊ∂àËÄóÂ§ßÈáèÁöÑ CPU ËµÑÊ∫ê„ÄÇÂõ†Ê≠§Ôºå‰Ω†Â∞±‰ºöÁúãÂà∞ CPU Âà©Áî®ÁéáÂæàÈ´òÔºå‰ΩÜÊòØÊØèÁßíÂç¥ÊâßË°å‰∏ç‰∫ÜÂá†‰∏™‰∫ãÂä°„ÄÇ</p><p>Ê†πÊçÆ‰∏äÈù¢ÁöÑÂàÜÊûêÔºåÊàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏ãÔºå**ÊÄé‰πàËß£ÂÜ≥Áî±ËøôÁßçÁÉ≠ÁÇπË°åÊõ¥Êñ∞ÂØºËá¥ÁöÑÊÄßËÉΩÈóÆÈ¢òÂë¢Ôºü**ÈóÆÈ¢òÁöÑÁóáÁªìÂú®‰∫éÔºåÊ≠ªÈîÅÊ£ÄÊµãË¶ÅËÄóË¥πÂ§ßÈáèÁöÑ CPU ËµÑÊ∫ê„ÄÇ</p><p>**‰∏ÄÁßçÂ§¥ÁóõÂåªÂ§¥ÁöÑÊñπÊ≥ïÔºåÂ∞±ÊòØÂ¶ÇÊûú‰Ω†ËÉΩÁ°Æ‰øùËøô‰∏™‰∏öÂä°‰∏ÄÂÆö‰∏ç‰ºöÂá∫Áé∞Ê≠ªÈîÅÔºåÂèØ‰ª•‰∏¥Êó∂ÊääÊ≠ªÈîÅÊ£ÄÊµãÂÖ≥Êéâ„ÄÇ**‰ΩÜÊòØËøôÁßçÊìç‰ΩúÊú¨Ë∫´Â∏¶Êúâ‰∏ÄÂÆöÁöÑÈ£éÈô©ÔºåÂõ†‰∏∫‰∏öÂä°ËÆæËÆ°ÁöÑÊó∂ÂÄô‰∏ÄËà¨‰∏ç‰ºöÊääÊ≠ªÈîÅÂΩìÂÅö‰∏Ä‰∏™‰∏•ÈáçÈîôËØØÔºåÊØïÁ´üÂá∫Áé∞Ê≠ªÈîÅ‰∫ÜÔºåÂ∞±ÂõûÊªöÔºåÁÑ∂ÂêéÈÄöËøá‰∏öÂä°ÈáçËØï‰∏ÄËà¨Â∞±Ê≤°ÈóÆÈ¢ò‰∫ÜÔºåËøôÊòØ‰∏öÂä°Êó†ÊçüÁöÑ„ÄÇËÄåÂÖ≥ÊéâÊ≠ªÈîÅÊ£ÄÊµãÊÑèÂë≥ÁùÄÂèØËÉΩ‰ºöÂá∫Áé∞Â§ßÈáèÁöÑË∂ÖÊó∂ÔºåËøôÊòØ‰∏öÂä°ÊúâÊçüÁöÑ„ÄÇ</p><p>**Âè¶‰∏Ä‰∏™ÊÄùË∑ØÊòØÊéßÂà∂Âπ∂ÂèëÂ∫¶„ÄÇ**Ê†πÊçÆ‰∏äÈù¢ÁöÑÂàÜÊûêÔºå‰Ω†‰ºöÂèëÁé∞Â¶ÇÊûúÂπ∂ÂèëËÉΩÂ§üÊéßÂà∂‰ΩèÔºåÊØîÂ¶ÇÂêå‰∏ÄË°åÂêåÊó∂ÊúÄÂ§öÂè™Êúâ 10 ‰∏™Á∫øÁ®ãÂú®Êõ¥Êñ∞ÔºåÈÇ£‰πàÊ≠ªÈîÅÊ£ÄÊµãÁöÑÊàêÊú¨Âæà‰ΩéÔºåÂ∞±‰∏ç‰ºöÂá∫Áé∞Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ‰∏Ä‰∏™Áõ¥Êé•ÁöÑÊÉ≥Ê≥ïÂ∞±ÊòØÔºåÂú®ÂÆ¢Êà∑Á´ØÂÅöÂπ∂ÂèëÊéßÂà∂„ÄÇ‰ΩÜÊòØÔºå‰Ω†‰ºöÂæàÂø´ÂèëÁé∞Ëøô‰∏™ÊñπÊ≥ï‰∏çÂ§™ÂèØË°åÔºåÂõ†‰∏∫ÂÆ¢Êà∑Á´ØÂæàÂ§ö„ÄÇÊàëËßÅËøá‰∏Ä‰∏™Â∫îÁî®ÔºåÊúâ 600 ‰∏™ÂÆ¢Êà∑Á´ØÔºåËøôÊ†∑Âç≥‰ΩøÊØè‰∏™ÂÆ¢Êà∑Á´ØÊéßÂà∂Âà∞Âè™Êúâ 5 ‰∏™Âπ∂ÂèëÁ∫øÁ®ãÔºåÊ±áÊÄªÂà∞Êï∞ÊçÆÂ∫ìÊúçÂä°Á´Ø‰ª•ÂêéÔºåÂ≥∞ÂÄºÂπ∂ÂèëÊï∞‰πüÂèØËÉΩË¶ÅËææÂà∞ 3000„ÄÇ</p><p>Âõ†Ê≠§ÔºåËøô‰∏™Âπ∂ÂèëÊéßÂà∂Ë¶ÅÂÅöÂú®Êï∞ÊçÆÂ∫ìÊúçÂä°Á´Ø„ÄÇÂ¶ÇÊûú‰Ω†Êúâ‰∏≠Èó¥‰ª∂ÔºåÂèØ‰ª•ËÄÉËôëÂú®‰∏≠Èó¥‰ª∂ÂÆûÁé∞ÔºõÂ¶ÇÊûú‰Ω†ÁöÑÂõ¢ÈòüÊúâËÉΩ‰øÆÊîπ MySQL Ê∫êÁ†ÅÁöÑ‰∫∫Ôºå‰πüÂèØ‰ª•ÂÅöÂú® MySQL ÈáåÈù¢„ÄÇÂü∫Êú¨ÊÄùË∑ØÂ∞±ÊòØÔºåÂØπ‰∫éÁõ∏ÂêåË°åÁöÑÊõ¥Êñ∞ÔºåÂú®ËøõÂÖ•ÂºïÊìé‰πãÂâçÊéíÈòü„ÄÇËøôÊ†∑Âú® InnoDB ÂÜÖÈÉ®Â∞±‰∏ç‰ºöÊúâÂ§ßÈáèÁöÑÊ≠ªÈîÅÊ£ÄÊµãÂ∑•‰Ωú‰∫Ü„ÄÇ</p><p>ÂèØËÉΩ‰Ω†‰ºöÈóÆÔºå<strong>Â¶ÇÊûúÂõ¢ÈòüÈáåÊöÇÊó∂Ê≤°ÊúâÊï∞ÊçÆÂ∫ìÊñπÈù¢ÁöÑ‰∏ìÂÆ∂Ôºå‰∏çËÉΩÂÆûÁé∞ËøôÊ†∑ÁöÑÊñπÊ°àÔºåËÉΩ‰∏çËÉΩ‰ªéËÆæËÆ°‰∏ä‰ºòÂåñËøô‰∏™ÈóÆÈ¢òÂë¢Ôºü</strong></p><p>‰Ω†ÂèØ‰ª•ËÄÉËôëÈÄöËøáÂ∞Ü‰∏ÄË°åÊîπÊàêÈÄªËæë‰∏äÁöÑÂ§öË°åÊù•ÂáèÂ∞ëÈîÅÂÜ≤Á™Å„ÄÇËøòÊòØ‰ª•ÂΩ±Èô¢Ë¥¶Êà∑‰∏∫‰æãÔºåÂèØ‰ª•ËÄÉËôëÊîæÂú®Â§öÊù°ËÆ∞ÂΩï‰∏äÔºåÊØîÂ¶Ç 10 ‰∏™ËÆ∞ÂΩïÔºåÂΩ±Èô¢ÁöÑË¥¶Êà∑ÊÄªÈ¢ùÁ≠â‰∫éËøô 10 ‰∏™ËÆ∞ÂΩïÁöÑÂÄºÁöÑÊÄªÂíå„ÄÇËøôÊ†∑ÊØèÊ¨°Ë¶ÅÁªôÂΩ±Èô¢Ë¥¶Êà∑Âä†ÈáëÈ¢ùÁöÑÊó∂ÂÄôÔºåÈöèÊú∫ÈÄâÂÖ∂‰∏≠‰∏ÄÊù°ËÆ∞ÂΩïÊù•Âä†„ÄÇËøôÊ†∑ÊØèÊ¨°ÂÜ≤Á™ÅÊ¶ÇÁéáÂèòÊàêÂéüÊù•ÁöÑ 1/10ÔºåÂèØ‰ª•ÂáèÂ∞ëÈîÅÁ≠âÂæÖ‰∏™Êï∞Ôºå‰πüÂ∞±ÂáèÂ∞ë‰∫ÜÊ≠ªÈîÅÊ£ÄÊµãÁöÑ CPU Ê∂àËÄó„ÄÇ</p><p>Ëøô‰∏™ÊñπÊ°àÁúã‰∏äÂéªÊòØÊó†ÊçüÁöÑÔºå‰ΩÜÂÖ∂ÂÆûËøôÁ±ªÊñπÊ°àÈúÄË¶ÅÊ†πÊçÆ‰∏öÂä°ÈÄªËæëÂÅöËØ¶ÁªÜËÆæËÆ°„ÄÇÂ¶ÇÊûúË¥¶Êà∑‰ΩôÈ¢ùÂèØËÉΩ‰ºöÂáèÂ∞ëÔºåÊØîÂ¶ÇÈÄÄÁ•®ÈÄªËæëÔºåÈÇ£‰πàËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅËÄÉËôëÂΩì‰∏ÄÈÉ®ÂàÜË°åËÆ∞ÂΩïÂèòÊàê 0 ÁöÑÊó∂ÂÄôÔºå‰ª£Á†ÅË¶ÅÊúâÁâπÊÆäÂ§ÑÁêÜ„ÄÇ</p><h2 id="_4-Â∞èÁªì-1" tabindex="-1"><a class="header-anchor" href="#_4-Â∞èÁªì-1"><span>4.Â∞èÁªì</span></a></h2><p>‰ªäÂ§©ÔºåÊàëÂíå‰Ω†‰ªãÁªç‰∫Ü MySQL ÁöÑË°åÈîÅÔºåÊ∂âÂèä‰∫Ü‰∏§Èò∂ÊÆµÈîÅÂçèËÆÆ„ÄÅÊ≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµãËøô‰∏§Â§ßÈÉ®ÂàÜÂÜÖÂÆπ„ÄÇ</p><p>ÂÖ∂‰∏≠ÔºåÊàë‰ª•‰∏§Èò∂ÊÆµÂçèËÆÆ‰∏∫Ëµ∑ÁÇπÔºåÂíå‰Ω†‰∏ÄËµ∑ËÆ®ËÆ∫‰∫ÜÂú®ÂºÄÂèëÁöÑÊó∂ÂÄôÂ¶Ç‰ΩïÂÆâÊéíÊ≠£Á°ÆÁöÑ‰∫ãÂä°ËØ≠Âè•„ÄÇËøôÈáåÁöÑÂéüÂàô / ÊàëÁªô‰Ω†ÁöÑÂª∫ËÆÆÊòØÔºöÂ¶ÇÊûú‰Ω†ÁöÑ‰∫ãÂä°‰∏≠ÈúÄË¶ÅÈîÅÂ§ö‰∏™Ë°åÔºåË¶ÅÊääÊúÄÂèØËÉΩÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÅÊúÄÂèØËÉΩÂΩ±ÂìçÂπ∂ÂèëÂ∫¶ÁöÑÈîÅÁöÑÁî≥ËØ∑Êó∂Êú∫Â∞ΩÈáèÂæÄÂêéÊîæ„ÄÇ</p><p>‰ΩÜÊòØÔºåË∞ÉÊï¥ËØ≠Âè•È°∫Â∫èÂπ∂‰∏çËÉΩÂÆåÂÖ®ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇÊâÄ‰ª•Êàë‰ª¨ÂºïÂÖ•‰∫ÜÊ≠ªÈîÅÂíåÊ≠ªÈîÅÊ£ÄÊµãÁöÑÊ¶ÇÂøµÔºå‰ª•ÂèäÊèê‰æõ‰∫Ü‰∏â‰∏™ÊñπÊ°àÔºåÊù•ÂáèÂ∞ëÊ≠ªÈîÅÂØπÊï∞ÊçÆÂ∫ìÁöÑÂΩ±Âìç„ÄÇÂáèÂ∞ëÊ≠ªÈîÅÁöÑ‰∏ªË¶ÅÊñπÂêëÔºåÂ∞±ÊòØÊéßÂà∂ËÆøÈóÆÁõ∏ÂêåËµÑÊ∫êÁöÑÂπ∂Âèë‰∫ãÂä°Èáè„ÄÇ</p><blockquote><p>Question:</p><p>Â¶ÇÊûú‰Ω†Ë¶ÅÂà†Èô§‰∏Ä‰∏™Ë°®ÈáåÈù¢ÁöÑÂâç 10000 Ë°åÊï∞ÊçÆÔºåÊúâ‰ª•‰∏ã‰∏âÁßçÊñπÊ≥ïÂèØ‰ª•ÂÅöÂà∞Ôºö</p><ul><li>Á¨¨‰∏ÄÁßçÔºåÁõ¥Êé•ÊâßË°å delete from T limit 10000;</li><li>Á¨¨‰∫åÁßçÔºåÂú®‰∏Ä‰∏™ËøûÊé•‰∏≠Âæ™ÁéØÊâßË°å 20 Ê¨° delete from T limit 500;</li><li>Á¨¨‰∏âÁßçÔºåÂú® 20 ‰∏™ËøûÊé•‰∏≠ÂêåÊó∂ÊâßË°å delete from T limit 500„ÄÇ</li></ul><p>‰Ω†‰ºöÈÄâÊã©Âì™‰∏ÄÁßçÊñπÊ≥ïÂë¢Ôºü‰∏∫‰ªÄ‰πàÂë¢Ôºü</p><p>Answer:</p><p>ÊàëÂú®‰∏ä‰∏ÄÁØáÊñáÁ´†ÊúÄÂêéÔºåÁïôÁªô‰Ω†ÁöÑÈóÆÈ¢òÊòØÔºöÊÄé‰πàÂà†Èô§Ë°®ÁöÑÂâç 10000 Ë°å„ÄÇÊØîËæÉÂ§öÁöÑÁïôË®ÄÈÉΩÈÄâÊã©‰∫ÜÁ¨¨‰∫åÁßçÊñπÂºèÔºåÂç≥ÔºöÂú®‰∏Ä‰∏™ËøûÊé•‰∏≠Âæ™ÁéØÊâßË°å 20 Ê¨° delete from T limit 500„ÄÇ</p><p>Á°ÆÂÆûÊòØËøôÊ†∑ÁöÑÔºåÁ¨¨‰∫åÁßçÊñπÂºèÊòØÁõ∏ÂØπËæÉÂ•ΩÁöÑ„ÄÇ</p><p>Á¨¨‰∏ÄÁßçÊñπÂºèÔºàÂç≥ÔºöÁõ¥Êé•ÊâßË°å delete from T limit 10000ÔºâÈáåÈù¢ÔºåÂçï‰∏™ËØ≠Âè•Âç†Áî®Êó∂Èó¥ÈïøÔºåÈîÅÁöÑÊó∂Èó¥‰πüÊØîËæÉÈïøÔºõËÄå‰∏îÂ§ß‰∫ãÂä°Ëøò‰ºöÂØºËá¥‰∏ª‰ªéÂª∂Ëøü„ÄÇ</p><p>Á¨¨‰∏âÁßçÊñπÂºèÔºàÂç≥ÔºöÂú® 20 ‰∏™ËøûÊé•‰∏≠ÂêåÊó∂ÊâßË°å delete from T limit 500ÔºâÔºå‰ºö‰∫∫‰∏∫ÈÄ†ÊàêÈîÅÂÜ≤Á™Å„ÄÇ</p></blockquote><p><mark>Âú®ÂºÄÂèëÊó∂‰∏ÄËà¨ÈÉΩÊòØÊåâÁÖßÈ°∫Â∫èÂä†ÈîÅÊù•ÈÅøÂÖçÊ≠ªÈîÅ„ÄÇÊØîÂ¶ÇÈÉΩÊòØÊåâÁÖßÂÖàÊãøt1,ÂÜçÊãøt2.</mark></p><p>‰ΩúËÄÖÂõûÂ§ç: ÊòØ‰∏™Â•ΩÁöÑÂÆûË∑µÁªèÈ™åüëçüèø</p><blockquote><p>ÂΩìÊ∂âÂèäÂ§ö‰∏™ËµÑÊ∫êÁöÑÂπ∂ÂèëËÆøÈóÆÊó∂ÔºåÊàëÂ∞ÜÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•ËØ¥ÊòéÊåâÈ°∫Â∫èÂä†ÈîÅÂ¶Ç‰ΩïÈÅøÂÖçÊ≠ªÈîÅ„ÄÇ</p><p>ÂÅáËÆæÊúâ‰∏§‰∏™ËµÑÊ∫ê A Âíå BÔºå‰ª•Âèä‰∏§‰∏™Á∫øÁ®ã T1 Âíå T2„ÄÇËøô‰∏§‰∏™Á∫øÁ®ãÂàÜÂà´ÈúÄË¶ÅÂêåÊó∂ËÆøÈóÆËµÑÊ∫ê A ÂíåËµÑÊ∫ê B„ÄÇ</p><p>Â¶ÇÊûúÊ≤°ÊúâÊåâÁÖßÈ°∫Â∫èÂä†ÈîÅÁöÑÊú∫Âà∂ÔºåÁ∫øÁ®ã T1 Âíå T2 ÂèØËÉΩ‰ºö‰ª•‰∏çÂêåÁöÑÈ°∫Â∫èËé∑ÂèñËµÑÊ∫êÁöÑÈîÅÔºåÂØºËá¥Ê≠ªÈîÅÁöÑÂèëÁîü„ÄÇ</p><p>Á§∫‰æã1Ôºö‰∏çÊåâÈ°∫Â∫èÂä†ÈîÅÁöÑÊÉÖÂÜµ</p><ul><li>T1ÔºöËé∑Âèñ A ÁöÑÈîÅ</li><li>T2ÔºöËé∑Âèñ B ÁöÑÈîÅ</li><li>T1ÔºöÁ≠âÂæÖ B ÁöÑÈîÅ</li><li>T2ÔºöÁ≠âÂæÖ A ÁöÑÈîÅ</li></ul><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåT1 ÂÖàËé∑Âèñ‰∫ÜËµÑÊ∫ê A ÁöÑÈîÅÔºåËÄå T2 ÂÖàËé∑Âèñ‰∫ÜËµÑÊ∫ê B ÁöÑÈîÅ„ÄÇÊé•‰∏ãÊù•ÔºåT1 Á≠âÂæÖËµÑÊ∫ê B ÁöÑÈîÅÔºåËÄå T2 Á≠âÂæÖËµÑÊ∫ê A ÁöÑÈîÅ„ÄÇÁî±‰∫é‰∏§‰∏™Á∫øÁ®ãÈÉΩÂú®Á≠âÂæÖÂØπÊñπÊâÄÊåÅÊúâÁöÑËµÑÊ∫êÔºåÂΩ¢Êàê‰∫ÜÊ≠ªÈîÅ„ÄÇ</p><p>Áé∞Âú®ÔºåËÆ©Êàë‰ª¨ÁúãÁúãÊåâÈ°∫Â∫èÂä†ÈîÅÁöÑÊÉÖÂÜµ„ÄÇ</p><p>Á§∫‰æã2ÔºöÊåâÈ°∫Â∫èÂä†ÈîÅÁöÑÊÉÖÂÜµ</p><ul><li>T1ÔºöËé∑Âèñ A ÁöÑÈîÅ</li><li>T1ÔºöËé∑Âèñ B ÁöÑÈîÅ</li><li>T2ÔºöËé∑Âèñ A ÁöÑÈîÅ</li><li>T2ÔºöËé∑Âèñ B ÁöÑÈîÅ</li></ul><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊó†ËÆ∫ÊòØ T1 ËøòÊòØ T2 ÈÉΩÊåâÁÖßÁõ∏ÂêåÁöÑÈ°∫Â∫èËé∑ÂèñÈîÅÔºåÂç≥ÂÖàËé∑Âèñ A ÁöÑÈîÅÔºåÁÑ∂ÂêéËé∑Âèñ B ÁöÑÈîÅ„ÄÇËøôÊ†∑ÔºåÂç≥‰Ωø‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂Á´û‰∫âËµÑÊ∫êÔºåÂÆÉ‰ª¨‰ªçÁÑ∂‰ºöÊåâÁÖßÁõ∏ÂêåÁöÑÈ°∫Â∫èËé∑ÂèñÈîÅÔºåÈÅøÂÖç‰∫ÜÂæ™ÁéØ‰æùËµñÂíåÊ≠ªÈîÅÁöÑÂèëÁîü„ÄÇ</p><p>ÈÄöËøá‰∏äËø∞Á§∫‰æãÔºåÂèØ‰ª•ÁúãÂá∫ÊåâÈ°∫Â∫èÂä†ÈîÅÂèØ‰ª•ÈÅøÂÖç‰∏çÊ≠£Á°ÆÁöÑËµÑÊ∫êÁ´û‰∫âÂíåÂæ™ÁéØ‰æùËµñÔºå‰ªéËÄåÂáèÂ∞ëÊ≠ªÈîÅÁöÑÈ£éÈô©„ÄÇÁÑ∂ËÄåÔºåÂÆûÈôÖÂú∫ÊôØÂèØËÉΩÊõ¥Âä†Â§çÊùÇÔºåÈúÄË¶ÅÊ†πÊçÆÂÖ∑‰ΩìÊÉÖÂÜµËÆæËÆ°ÂíåÈÄâÊã©ÂêàÈÄÇÁöÑÂä†ÈîÅÁ≠ñÁï•ÔºåÂπ∂ÁªºÂêàËÄÉËôëÂÖ∂‰ªñÊ≠ªÈîÅÈ¢ÑÈò≤ÂíåÂ§ÑÁêÜÊú∫Âà∂Êù•Á°Æ‰øùÁ≥ªÁªüÁöÑÁ®≥ÂÆöÊÄß„ÄÇ</p></blockquote><h1 id="_08‰∏®‰∫ãÂä°Âà∞Â∫ïÊòØÈöîÁ¶ªÁöÑËøòÊòØ‰∏çÈöîÁ¶ªÁöÑ" tabindex="-1"><a class="header-anchor" href="#_08‰∏®‰∫ãÂä°Âà∞Â∫ïÊòØÈöîÁ¶ªÁöÑËøòÊòØ‰∏çÈöîÁ¶ªÁöÑ"><span>08‰∏®‰∫ãÂä°Âà∞Â∫ïÊòØÈöîÁ¶ªÁöÑËøòÊòØ‰∏çÈöîÁ¶ªÁöÑÔºü</span></a></h1><h2 id="_1-ÂâçË®Ä-6" tabindex="-1"><a class="header-anchor" href="#_1-ÂâçË®Ä-6"><span>1.ÂâçË®Ä</span></a></h2><p>ÊàëÂú®Á¨¨ 3 ÁØáÊñáÁ´†Âíå‰Ω†ËÆ≤‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ÁöÑÊó∂ÂÄôÊèêÂà∞ËøáÔºåÂ¶ÇÊûúÊòØÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´Ôºå‰∫ãÂä° T ÂêØÂä®ÁöÑÊó∂ÂÄô‰ºöÂàõÂª∫‰∏Ä‰∏™ËßÜÂõæ read-viewÔºå‰πãÂêé‰∫ãÂä° T ÊâßË°åÊúüÈó¥ÔºåÂç≥‰ΩøÊúâÂÖ∂‰ªñ‰∫ãÂä°‰øÆÊîπ‰∫ÜÊï∞ÊçÆÔºå‰∫ãÂä° T ÁúãÂà∞ÁöÑ‰ªçÁÑ∂Ë∑üÂú®ÂêØÂä®Êó∂ÁúãÂà∞ÁöÑ‰∏ÄÊ†∑„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‰∏Ä‰∏™Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÊâßË°åÁöÑ‰∫ãÂä°ÔºåÂ•ΩÂÉè‰∏é‰∏ñÊó†‰∫âÔºå‰∏çÂèóÂ§ñÁïåÂΩ±Âìç„ÄÇ</p><p>‰ΩÜÊòØÔºåÊàëÂú®‰∏ä‰∏ÄÁØáÊñáÁ´†‰∏≠ÔºåÂíå‰Ω†ÂàÜ‰∫´Ë°åÈîÅÁöÑÊó∂ÂÄôÂèàÊèêÂà∞Ôºå‰∏Ä‰∏™‰∫ãÂä°Ë¶ÅÊõ¥Êñ∞‰∏ÄË°åÔºåÂ¶ÇÊûúÂàöÂ•ΩÊúâÂè¶Â§ñ‰∏Ä‰∏™‰∫ãÂä°Êã•ÊúâËøô‰∏ÄË°åÁöÑË°åÈîÅÔºåÂÆÉÂèà‰∏çËÉΩËøô‰πàË∂ÖÁÑ∂‰∫ÜÔºå‰ºöË¢´ÈîÅ‰ΩèÔºåËøõÂÖ•Á≠âÂæÖÁä∂ÊÄÅ„ÄÇÈóÆÈ¢òÊòØÔºåÊó¢ÁÑ∂ËøõÂÖ•‰∫ÜÁ≠âÂæÖÁä∂ÊÄÅÔºåÈÇ£‰πàÁ≠âÂà∞Ëøô‰∏™‰∫ãÂä°Ëá™Â∑±Ëé∑ÂèñÂà∞Ë°åÈîÅË¶ÅÊõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÆÉËØªÂà∞ÁöÑÂÄºÂèàÊòØ‰ªÄ‰πàÂë¢Ôºü</p><p>ÊàëÁªô‰Ω†‰∏æ‰∏Ä‰∏™‰æãÂ≠êÂêß„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Âè™Êúâ‰∏§Ë°åÁöÑË°®ÁöÑÂàùÂßãÂåñËØ≠Âè•„ÄÇ</p><div class="language-mysql line-numbers-mode" data-ext="mysql" data-title="mysql"><pre class="language-mysql"><code>mysql&gt; CREATE TABLE `t` (
  `id` int(11) NOT NULL,
  `k` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB;
insert into t(id, k) values(1,1),(2,2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://images.zzq8.cn/img/202212141738821.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!----><p>ËøôÈáåÔºåÊàë‰ª¨ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØ‰∫ãÂä°ÁöÑÂêØÂä®Êó∂Êú∫„ÄÇ</p><p><strong>begin/start transaction ÂëΩ‰ª§Âπ∂‰∏çÊòØ‰∏Ä‰∏™‰∫ãÂä°ÁöÑËµ∑ÁÇπÔºåÂú®ÊâßË°åÂà∞ÂÆÉ‰ª¨‰πãÂêéÁöÑÁ¨¨‰∏Ä‰∏™Êìç‰Ωú InnoDB Ë°®ÁöÑËØ≠Âè•</strong>Ôºå‰∫ãÂä°ÊâçÁúüÊ≠£ÂêØÂä®„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÅÈ©¨‰∏äÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåÂèØ‰ª•‰ΩøÁî® start transaction with consistent snapshot Ëøô‰∏™ÂëΩ‰ª§„ÄÇ</p><blockquote><p>Á¨¨‰∏ÄÁßçÂêØÂä®ÊñπÂºèÔºå‰∏ÄËá¥ÊÄßËßÜÂõæÊòØÂú®Á¨¨ÊâßË°åÁ¨¨‰∏Ä‰∏™Âø´ÁÖßËØªËØ≠Âè•Êó∂ÂàõÂª∫ÁöÑÔºõ Á¨¨‰∫åÁßçÂêØÂä®ÊñπÂºèÔºå‰∏ÄËá¥ÊÄßËßÜÂõæÊòØÂú®ÊâßË°å start transaction with consistent snapshot Êó∂ÂàõÂª∫ÁöÑ„ÄÇ</p></blockquote><p>ËøòÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂú®Êï¥‰∏™‰∏ìÊ†èÈáåÈù¢ÔºåÊàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠Â¶ÇÊûúÊ≤°ÊúâÁâπÂà´ËØ¥ÊòéÔºåÈÉΩÊòØÈªòËÆ§ autocommit=1„ÄÇ</p><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰∫ãÂä° C Ê≤°ÊúâÊòæÂºèÂú∞‰ΩøÁî® begin/commitÔºåË°®Á§∫Ëøô‰∏™ update ËØ≠Âè•Êú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™‰∫ãÂä°ÔºåËØ≠Âè•ÂÆåÊàêÁöÑÊó∂ÂÄô‰ºöËá™Âä®Êèê‰∫§„ÄÇ‰∫ãÂä° B Âú®Êõ¥Êñ∞‰∫ÜË°å‰πãÂêéÊü•ËØ¢ ; ‰∫ãÂä° A Âú®‰∏Ä‰∏™Âè™ËØª‰∫ãÂä°‰∏≠Êü•ËØ¢ÔºåÂπ∂‰∏îÊó∂Èó¥È°∫Â∫è‰∏äÊòØÂú®‰∫ãÂä° B ÁöÑÊü•ËØ¢‰πãÂêé„ÄÇ</p><p>ËøôÊó∂ÔºåÂ¶ÇÊûúÊàëÂëäËØâ‰Ω†‰∫ãÂä° B Êü•Âà∞ÁöÑ k ÁöÑÂÄºÊòØ 3ÔºåËÄå‰∫ãÂä° A Êü•Âà∞ÁöÑ k ÁöÑÂÄºÊòØ 1Ôºå‰Ω†ÊòØ‰∏çÊòØÊÑüËßâÊúâÁÇπÊôïÂë¢Ôºü</p><p>ÊâÄ‰ª•Ôºå‰ªäÂ§©ËøôÁØáÊñáÁ´†ÔºåÊàëÂÖ∂ÂÆûÂ∞±ÊòØÊÉ≥Âíå‰Ω†ËØ¥ÊòéÁôΩËøô‰∏™ÈóÆÈ¢òÔºåÂ∏åÊúõÂÄüÁî±ÊääËøô‰∏™ÁñëÊÉëËß£ÂºÄÁöÑËøáÁ®ãÔºåËÉΩÂ§üÂ∏ÆÂä©‰Ω†ÂØπ InnoDB ÁöÑ‰∫ãÂä°ÂíåÈîÅÊúâÊõ¥Ëøõ‰∏ÄÊ≠•ÁöÑÁêÜËß£„ÄÇ</p><p>Âú® MySQL ÈáåÔºåÊúâ‰∏§‰∏™‚ÄúËßÜÂõæ‚ÄùÁöÑÊ¶ÇÂøµÔºö</p><ul><li>‰∏Ä‰∏™ÊòØ view„ÄÇÂÆÉÊòØ‰∏Ä‰∏™Áî®Êü•ËØ¢ËØ≠Âè•ÂÆö‰πâÁöÑËôöÊãüË°®ÔºåÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÊâßË°åÊü•ËØ¢ËØ≠Âè•Âπ∂ÁîüÊàêÁªìÊûú„ÄÇÂàõÂª∫ËßÜÂõæÁöÑËØ≠Ê≥ïÊòØ create view ‚Ä¶ ÔºåËÄåÂÆÉÁöÑÊü•ËØ¢ÊñπÊ≥ï‰∏éË°®‰∏ÄÊ†∑„ÄÇ</li><li>Âè¶‰∏Ä‰∏™ÊòØ InnoDB Âú®ÂÆûÁé∞ MVCC Êó∂Áî®Âà∞ÁöÑ‰∏ÄËá¥ÊÄßËØªËßÜÂõæÔºåÂç≥ consistent read viewÔºåÁî®‰∫éÊîØÊåÅ RCÔºàRead CommittedÔºåËØªÊèê‰∫§ÔºâÂíå RRÔºàRepeatable ReadÔºåÂèØÈáçÂ§çËØªÔºâÈöîÁ¶ªÁ∫ßÂà´ÁöÑÂÆûÁé∞„ÄÇ</li></ul><p>ÂÆÉÊ≤°ÊúâÁâ©ÁêÜÁªìÊûÑÔºå‰ΩúÁî®ÊòØ‰∫ãÂä°ÊâßË°åÊúüÈó¥Áî®Êù•ÂÆö‰πâ‚ÄúÊàëËÉΩÁúãÂà∞‰ªÄ‰πàÊï∞ÊçÆ‚Äù„ÄÇ</p><p>Âú®Á¨¨ 3 ÁØáÊñáÁ´†<a href="#03%E4%B8%A8%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E6%94%B9%E4%BA%86%E6%88%91%E8%BF%98%E7%9C%8B%E4%B8%8D%E8%A7%81%EF%BC%9F">„Ää‰∫ãÂä°ÈöîÁ¶ªÔºö‰∏∫‰ªÄ‰πà‰Ω†Êîπ‰∫ÜÊàëËøòÁúã‰∏çËßÅÔºü„Äã</a>‰∏≠ÔºåÊàëË∑ü‰Ω†Ëß£ÈáäËøá‰∏ÄÈÅç MVCC ÁöÑÂÆûÁé∞ÈÄªËæë„ÄÇ‰ªäÂ§©‰∏∫‰∫ÜËØ¥ÊòéÊü•ËØ¢ÂíåÊõ¥Êñ∞ÁöÑÂå∫Âà´ÔºåÊàëÊç¢‰∏Ä‰∏™ÊñπÂºèÊù•ËØ¥ÊòéÔºåÊää read view ÊãÜÂºÄ„ÄÇ‰Ω†ÂèØ‰ª•ÁªìÂêàËøô‰∏§ÁØáÊñáÁ´†ÁöÑËØ¥ÊòéÊù•Êõ¥Ê∑±‰∏ÄÊ≠•Âú∞ÁêÜËß£ MVCC„ÄÇ</p><h2 id="_2-Âø´ÁÖß-Âú®-mvcc-ÈáåÊòØÊÄé‰πàÂ∑•‰ΩúÁöÑ" tabindex="-1"><a class="header-anchor" href="#_2-Âø´ÁÖß-Âú®-mvcc-ÈáåÊòØÊÄé‰πàÂ∑•‰ΩúÁöÑ"><span>2.‚ÄúÂø´ÁÖß‚ÄùÂú® MVCC ÈáåÊòØÊÄé‰πàÂ∑•‰ΩúÁöÑÔºü</span></a></h2><blockquote><p>ÊàëÁöÑÁêÜËß£Ôºörow trx_id + undo log ÊâÄ‰ª•Ëøô‰∏™‰∫ãÂä°ÁöÑÂø´ÁÖßÔºåÂ∞±ÊòØ‚ÄúÈùôÊÄÅ‚ÄùÁöÑ‰∫Ü Â∞±ËÉΩÁßíÁ∫ß</p><p>ÊòØÁöÑÔºåMySQL‰ΩøÁî®MVCCÔºàÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºâÊù•ÂÆûÁé∞‰∫ãÂä°ÁöÑÁâàÊú¨ÊéßÂà∂ÔºåÂêåÊó∂‰ΩøÁî®UndoLogÊù•ÊîØÊåÅ‰∫ãÂä°ÁöÑÂõûÊªö„ÄÇ</p></blockquote><p>Âú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÔºå‰∫ãÂä°Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôÂ∞±‚ÄúÊãç‰∫Ü‰∏™Âø´ÁÖß‚Äù„ÄÇÊ≥®ÊÑèÔºåËøô‰∏™Âø´ÁÖßÊòØÂü∫‰∫éÊï¥Â∫ìÁöÑ„ÄÇ</p><p>ËøôÊó∂Ôºå‰Ω†‰ºöËØ¥ËøôÁúã‰∏äÂéª‰∏çÂ§™Áé∞ÂÆûÂïä„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Â∫ìÊúâ 100GÔºåÈÇ£‰πàÊàëÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåMySQL Â∞±Ë¶ÅÊã∑Ë¥ù 100G ÁöÑÊï∞ÊçÆÂá∫Êù•ÔºåËøô‰∏™ËøáÁ®ãÂæóÂ§öÊÖ¢Âïä„ÄÇÂèØÊòØÔºåÊàëÂπ≥Êó∂ÁöÑ‰∫ãÂä°ÊâßË°åËµ∑Êù•ÂæàÂø´Âïä„ÄÇ</p><p>ÂÆûÈôÖ‰∏äÔºåÊàë‰ª¨Âπ∂‰∏çÈúÄË¶ÅÊã∑Ë¥ùÂá∫Ëøô 100G ÁöÑÊï∞ÊçÆ„ÄÇÊàë‰ª¨ÂÖàÊù•ÁúãÁúãËøô‰∏™Âø´ÁÖßÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ„ÄÇ</p><p>InnoDB ÈáåÈù¢ÊØè‰∏™‰∫ãÂä°Êúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ‰∫ãÂä° IDÔºåÂè´‰Ωú transaction id„ÄÇÂÆÉÊòØÂú®‰∫ãÂä°ÂºÄÂßãÁöÑÊó∂ÂÄôÂêë InnoDB ÁöÑ‰∫ãÂä°Á≥ªÁªüÁî≥ËØ∑ÁöÑÔºåÊòØÊåâÁî≥ËØ∑È°∫Â∫è‰∏•Ê†ºÈÄíÂ¢ûÁöÑ„ÄÇ</p><p>ËÄåÊØèË°åÊï∞ÊçÆ‰πüÈÉΩÊòØÊúâÂ§ö‰∏™ÁâàÊú¨ÁöÑ„ÄÇÊØèÊ¨°‰∫ãÂä°Êõ¥Êñ∞Êï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨ÔºåÂπ∂‰∏îÊää transaction id ËµãÂÄºÁªôËøô‰∏™Êï∞ÊçÆÁâàÊú¨ÁöÑ‰∫ãÂä° IDÔºåËÆ∞‰∏∫ row trx_id„ÄÇÂêåÊó∂ÔºåÊóßÁöÑÊï∞ÊçÆÁâàÊú¨Ë¶Å‰øùÁïôÔºåÂπ∂‰∏îÂú®Êñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨‰∏≠ÔºåËÉΩÂ§üÊúâ‰ø°ÊÅØÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ÂÆÉ„ÄÇ</p><p>‰πüÂ∞±ÊòØËØ¥ÔºåÊï∞ÊçÆË°®‰∏≠ÁöÑ‰∏ÄË°åËÆ∞ÂΩïÔºåÂÖ∂ÂÆûÂèØËÉΩÊúâÂ§ö‰∏™ÁâàÊú¨ (row)ÔºåÊØè‰∏™ÁâàÊú¨ÊúâËá™Â∑±ÁöÑ row trx_id„ÄÇ</p><p>Â¶ÇÂõæ 2 ÊâÄÁ§∫ÔºåÂ∞±ÊòØ‰∏Ä‰∏™ËÆ∞ÂΩïË¢´Â§ö‰∏™‰∫ãÂä°ËøûÁª≠Êõ¥Êñ∞ÂêéÁöÑÁä∂ÊÄÅ„ÄÇ</p><img src="https://images.zzq8.cn/img/202302131727261.png" alt="image-20230213172729310" style="zoom:50%;"><!----><p>Âõæ‰∏≠ËôöÁ∫øÊ°ÜÈáåÊòØÂêå‰∏ÄË°åÊï∞ÊçÆÁöÑ 4 ‰∏™ÁâàÊú¨ÔºåÂΩìÂâçÊúÄÊñ∞ÁâàÊú¨ÊòØ V4Ôºåk ÁöÑÂÄºÊòØ 22ÔºåÂÆÉÊòØË¢´ transaction id ‰∏∫ 25 ÁöÑ‰∫ãÂä°Êõ¥Êñ∞ÁöÑÔºåÂõ†Ê≠§ÂÆÉÁöÑ row trx_id ‰πüÊòØ 25„ÄÇ</p><p>‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºåÂâçÈù¢ÁöÑÊñáÁ´†‰∏çÊòØËØ¥ÔºåËØ≠Âè•Êõ¥Êñ∞‰ºöÁîüÊàê undo logÔºàÂõûÊªöÊó•ÂøóÔºâÂêóÔºüÈÇ£‰πàÔºå<strong>undo log Âú®Âì™Âë¢Ôºü</strong></p><p>ÂÆûÈôÖ‰∏äÔºåÂõæ 2 ‰∏≠ÁöÑ‰∏â‰∏™ËôöÁ∫øÁÆ≠Â§¥ÔºåÂ∞±ÊòØ undo logÔºõËÄå V1„ÄÅV2„ÄÅV3 Âπ∂‰∏çÊòØÁâ©ÁêÜ‰∏äÁúüÂÆûÂ≠òÂú®ÁöÑÔºåËÄåÊòØÊØèÊ¨°ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊ†πÊçÆÂΩìÂâçÁâàÊú¨Âíå undo log ËÆ°ÁÆóÂá∫Êù•ÁöÑ„ÄÇÊØîÂ¶ÇÔºåÈúÄË¶Å V2 ÁöÑÊó∂ÂÄôÔºåÂ∞±ÊòØÈÄöËøá V4 ‰æùÊ¨°ÊâßË°å U3„ÄÅU2 ÁÆóÂá∫Êù•„ÄÇ</p><p>ÊòéÁôΩ‰∫ÜÂ§öÁâàÊú¨Âíå row trx_id ÁöÑÊ¶ÇÂøµÂêéÔºåÊàë‰ª¨ÂÜçÊù•ÊÉ≥‰∏Ä‰∏ãÔºåInnoDB ÊòØÊÄé‰πàÂÆö‰πâÈÇ£‰∏™‚Äú100G‚ÄùÁöÑÂø´ÁÖßÁöÑ„ÄÇ</p><p>ÊåâÁÖßÂèØÈáçÂ§çËØªÁöÑÂÆö‰πâÔºå‰∏Ä‰∏™‰∫ãÂä°ÂêØÂä®ÁöÑÊó∂ÂÄôÔºåËÉΩÂ§üÁúãÂà∞ÊâÄÊúâÂ∑≤ÁªèÊèê‰∫§ÁöÑ‰∫ãÂä°ÁªìÊûú„ÄÇ‰ΩÜÊòØ‰πãÂêéÔºåËøô‰∏™‰∫ãÂä°ÊâßË°åÊúüÈó¥ÔºåÂÖ∂‰ªñ‰∫ãÂä°ÁöÑÊõ¥Êñ∞ÂØπÂÆÉ‰∏çÂèØËßÅ„ÄÇ</p><p>Âõ†Ê≠§Ôºå‰∏Ä‰∏™‰∫ãÂä°Âè™ÈúÄË¶ÅÂú®ÂêØÂä®ÁöÑÊó∂ÂÄôÂ£∞ÊòéËØ¥Ôºå‚Äú‰ª•ÊàëÂêØÂä®ÁöÑÊó∂Âàª‰∏∫ÂáÜÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êï∞ÊçÆÁâàÊú¨ÊòØÂú®ÊàëÂêØÂä®‰πãÂâçÁîüÊàêÁöÑÔºåÂ∞±ËÆ§ÔºõÂ¶ÇÊûúÊòØÊàëÂêØÂä®‰ª•ÂêéÊâçÁîüÊàêÁöÑÔºåÊàëÂ∞±‰∏çËÆ§ÔºåÊàëÂøÖÈ°ªË¶ÅÊâæÂà∞ÂÆÉÁöÑ‰∏ä‰∏Ä‰∏™ÁâàÊú¨‚Äù„ÄÇ</p><p>ÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‚Äú‰∏ä‰∏Ä‰∏™ÁâàÊú¨‚Äù‰πü‰∏çÂèØËßÅÔºåÈÇ£Â∞±ÂæóÁªßÁª≠ÂæÄÂâçÊâæ„ÄÇËøòÊúâÔºåÂ¶ÇÊûúÊòØËøô‰∏™‰∫ãÂä°Ëá™Â∑±Êõ¥Êñ∞ÁöÑÊï∞ÊçÆÔºåÂÆÉËá™Â∑±ËøòÊòØË¶ÅËÆ§ÁöÑ„ÄÇ</p><p>Âú®ÂÆûÁé∞‰∏äÔºå InnoDB ‰∏∫ÊØè‰∏™‰∫ãÂä°ÊûÑÈÄ†‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®Êù•‰øùÂ≠òËøô‰∏™‰∫ãÂä°ÂêØÂä®Áû¨Èó¥ÔºåÂΩìÂâçÊ≠£Âú®‚ÄúÊ¥ªË∑É‚ÄùÁöÑÊâÄÊúâ‰∫ãÂä° ID„ÄÇ‚ÄúÊ¥ªË∑É‚ÄùÊåáÁöÑÂ∞±ÊòØÔºåÂêØÂä®‰∫Ü‰ΩÜËøòÊ≤°Êèê‰∫§„ÄÇ</p><p>Êï∞ÁªÑÈáåÈù¢‰∫ãÂä° ID ÁöÑÊúÄÂ∞èÂÄºËÆ∞‰∏∫‰ΩéÊ∞¥‰ΩçÔºåÂΩìÂâçÁ≥ªÁªüÈáåÈù¢Â∑≤ÁªèÂàõÂª∫ËøáÁöÑ‰∫ãÂä° ID ÁöÑÊúÄÂ§ßÂÄºÂä† 1 ËÆ∞‰∏∫È´òÊ∞¥‰Ωç„ÄÇ</p><p>Ëøô‰∏™ËßÜÂõæÊï∞ÁªÑÂíåÈ´òÊ∞¥‰ΩçÔºåÂ∞±ÁªÑÊàê‰∫ÜÂΩìÂâç‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄßËßÜÂõæÔºàread-viewÔºâ„ÄÇ</p><p>ËÄåÊï∞ÊçÆÁâàÊú¨ÁöÑÂèØËßÅÊÄßËßÑÂàôÔºåÂ∞±ÊòØÂü∫‰∫éÊï∞ÊçÆÁöÑ row trx_id ÂíåËøô‰∏™‰∏ÄËá¥ÊÄßËßÜÂõæÁöÑÂØπÊØîÁªìÊûúÂæóÂà∞ÁöÑ„ÄÇ</p><p>Ëøô‰∏™ËßÜÂõæÊï∞ÁªÑÊääÊâÄÊúâÁöÑ row trx_id ÂàÜÊàê‰∫ÜÂá†Áßç‰∏çÂêåÁöÑÊÉÖÂÜµ„ÄÇ</p><img src="https://images.zzq8.cn/img/202302131728617.png" alt="image-20230213172858315" style="zoom:50%;"><!----><p>ËøôÊ†∑ÔºåÂØπ‰∫éÂΩìÂâç‰∫ãÂä°ÁöÑÂêØÂä®Áû¨Èó¥Êù•ËØ¥Ôºå‰∏Ä‰∏™Êï∞ÊçÆÁâàÊú¨ÁöÑ row trx_idÔºåÊúâ‰ª•‰∏ãÂá†ÁßçÂèØËÉΩÔºö</p><ol><li>Â¶ÇÊûúËêΩÂú®ÁªøËâ≤ÈÉ®ÂàÜÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÂ∑≤Êèê‰∫§ÁöÑ‰∫ãÂä°ÊàñËÄÖÊòØÂΩìÂâç‰∫ãÂä°Ëá™Â∑±ÁîüÊàêÁöÑÔºåËøô‰∏™Êï∞ÊçÆÊòØÂèØËßÅÁöÑÔºõ</li><li>Â¶ÇÊûúËêΩÂú®Á∫¢Ëâ≤ÈÉ®ÂàÜÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÁî±Â∞ÜÊù•ÂêØÂä®ÁöÑ‰∫ãÂä°ÁîüÊàêÁöÑÔºåÊòØËÇØÂÆö‰∏çÂèØËßÅÁöÑÔºõ</li><li>Â¶ÇÊûúËêΩÂú®ÈªÑËâ≤ÈÉ®ÂàÜÔºåÈÇ£Â∞±ÂåÖÊã¨‰∏§ÁßçÊÉÖÂÜµ a. Ëã• row trx_id Âú®Êï∞ÁªÑ‰∏≠ÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÁî±ËøòÊ≤°Êèê‰∫§ÁöÑ‰∫ãÂä°ÁîüÊàêÁöÑÔºå‰∏çÂèØËßÅÔºõ b. Ëã• row trx_id ‰∏çÂú®Êï∞ÁªÑ‰∏≠ÔºåË°®Á§∫Ëøô‰∏™ÁâàÊú¨ÊòØÂ∑≤ÁªèÊèê‰∫§‰∫ÜÁöÑ‰∫ãÂä°ÁîüÊàêÁöÑÔºåÂèØËßÅ„ÄÇ</li></ol><p>ÊØîÂ¶ÇÔºåÂØπ‰∫éÂõæ 2 ‰∏≠ÁöÑÊï∞ÊçÆÊù•ËØ¥ÔºåÂ¶ÇÊûúÊúâ‰∏Ä‰∏™‰∫ãÂä°ÔºåÂÆÉÁöÑ‰ΩéÊ∞¥‰ΩçÊòØ 18ÔºåÈÇ£‰πàÂΩìÂÆÉËÆøÈóÆËøô‰∏ÄË°åÊï∞ÊçÆÊó∂ÔºåÂ∞±‰ºö‰ªé V4 ÈÄöËøá U3 ËÆ°ÁÆóÂá∫ V3ÔºåÊâÄ‰ª•Âú®ÂÆÉÁúãÊù•ÔºåËøô‰∏ÄË°åÁöÑÂÄºÊòØ 11„ÄÇ</p><p>‰Ω†ÁúãÔºåÊúâ‰∫ÜËøô‰∏™Â£∞ÊòéÂêéÔºåÁ≥ªÁªüÈáåÈù¢ÈöèÂêéÂèëÁîüÁöÑÊõ¥Êñ∞ÔºåÊòØ‰∏çÊòØÂ∞±Ë∑üËøô‰∏™‰∫ãÂä°ÁúãÂà∞ÁöÑÂÜÖÂÆπÊó†ÂÖ≥‰∫ÜÂë¢ÔºüÂõ†‰∏∫‰πãÂêéÁöÑÊõ¥Êñ∞ÔºåÁîüÊàêÁöÑÁâàÊú¨‰∏ÄÂÆöÂ±û‰∫é‰∏äÈù¢ÁöÑ 2 ÊàñËÄÖ 3(a) ÁöÑÊÉÖÂÜµÔºåËÄåÂØπÂÆÉÊù•ËØ¥ÔºåËøô‰∫õÊñ∞ÁöÑÊï∞ÊçÆÁâàÊú¨ÊòØ‰∏çÂ≠òÂú®ÁöÑÔºåÊâÄ‰ª•Ëøô‰∏™‰∫ãÂä°ÁöÑÂø´ÁÖßÔºåÂ∞±ÊòØ‚ÄúÈùôÊÄÅ‚ÄùÁöÑ‰∫Ü„ÄÇ</p><p>ÊâÄ‰ª•‰Ω†Áé∞Âú®Áü•ÈÅì‰∫ÜÔºå<strong>InnoDB Âà©Áî®‰∫Ü‚ÄúÊâÄÊúâÊï∞ÊçÆÈÉΩÊúâÂ§ö‰∏™ÁâàÊú¨‚ÄùÁöÑËøô‰∏™ÁâπÊÄßÔºåÂÆûÁé∞‰∫Ü‚ÄúÁßíÁ∫ßÂàõÂª∫Âø´ÁÖß‚ÄùÁöÑËÉΩÂäõ„ÄÇ</strong></p></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a href="https://github.com/zzq8/zzq8/edit/main/src/studynotes/SQL/MySQLÂÆûÊàò45ËÆ≤.md" rel="noopener noreferrer" target="_blank" aria-label="Âú® GitHub ‰∏äÁºñËæëÊ≠§È°µ" class="nav-link vp-meta-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Âú® GitHub ‰∏äÁºñËæëÊ≠§È°µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">‰∏äÊ¨°ÁºñËæë‰∫é: </span><!----></div><div class="contributors"><span class="vp-meta-label">Ë¥°ÁåÆËÄÖ: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1024zzq@gmail.com">Fighting</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link nav-link next" href="/studynotes/SQL/Mysql%E7%B4%A2%E5%BC%95_%E5%81%9A%E9%A2%98%E6%80%BB%E7%BB%93.html" aria-label="MySQLÁ¥¢Âºï"><div class="hint">‰∏ã‰∏ÄÈ°µ<span class="arrow end"></span></div><div class="link">MySQLÁ¥¢Âºï<!----></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BCyHbxhX.js" defer></script>
  </body>
</html>
