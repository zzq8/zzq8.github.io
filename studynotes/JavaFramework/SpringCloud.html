<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.36" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://doc.zzq8.cn/studynotes/JavaFramework/SpringCloud.html"><meta property="og:site_name" content="Zz"><meta property="og:title" content="SpringCloud"><meta property="og:description" content="SpringCloud å°šç¡…è°·å‘¨é˜³è€å¸ˆ 2022/5/23 è¯¦ç»†ç¬”è®°çœ‹è„‘å›¾ å’Œ åˆ«äººçš„ç¬”è®° å’Œ åˆ«äººçš„ä»£ç ï¼Œè¿™é‡Œåªè®°å½•äºè‡ªå·±è€Œè¨€æ˜¯é‡ç‚¹çš„å†…å®¹ æ ‡é¢˜ æ–°æ—§äº¤æ›¿å­¦ä¹  14ç§ç»„ä»¶æŠ€æœ¯çš„å­¦ä¹ ï¼Œ30å¤šä¸ªModelã€‚éœ€è¦å¤šåŠ¨æ‰‹ï¼ä¸è¦ä¸€å¬å°±ä¼šä¸€åŠ¨æ‰‹å°±åºŸã€‚ çŸ¥è¡Œåˆä¸€ ä¸è¦è¢«å„ç§é«˜å¤§ä¸Šçš„è¯æ±‡å”¬ä½äº†ï¼Œéƒ½æ˜¯ä¸Šå±‚ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¸œè¥¿ï¼ŒåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆç®—æ³•ï¼Œè·Ÿç€è§†é¢‘æ•™ç¨‹å­¦ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¥½..."><meta property="og:type" content="article"><meta property="og:image" content="https://images.zzq8.cn/img/202205231606492.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-05-18T10:21:56.000Z"><meta property="article:modified_time" content="2024-05-18T10:21:56.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"SpringCloud","image":["https://images.zzq8.cn/img/202205231606492.png","https://images.zzq8.cn/img/202205231615718.png","https://images.zzq8.cn/img/202205231623078.png","https://images.zzq8.cn/img/202205231700591.png","https://images.zzq8.cn/img/202205231726500.png","https://images.zzq8.cn/img/202205232107484.png","https://images.zzq8.cn/img/202205252040293.png","https://images.zzq8.cn/img/202205252046930.png","https://images.zzq8.cn/img/202205271623284.png","https://images.zzq8.cn/img/202309071730848.png","https://images.zzq8.cn/img/202205301552992.png","https://images.zzq8.cn/img/202205301552994.png","https://images.zzq8.cn/img/202205301552734.png","https://images.zzq8.cn/img/202206291359675.png","https://images.zzq8.cn/img/202206301448361.png","https://images.zzq8.cn/img/202207011430795.png","https://images.zzq8.cn/img/202207011514318.png","https://images.zzq8.cn/img/202207011655575.png","https://images.zzq8.cn/img/202207202219473.png","https://images.zzq8.cn/img/202207062139577.png","https://images.zzq8.cn/img/202301061541889.png","https://images.zzq8.cn/img/202207070955519.png","https://images.zzq8.cn/img/202208051732942.png","https://images.zzq8.cn/img/202207071007185.png","https://images.zzq8.cn/img/202207071008218.png","https://images.zzq8.cn/img/202207071436995.png","https://images.zzq8.cn/img/202207081440609.png","https://images.zzq8.cn/img/202207081513288.png","https://user-images.githubusercontent.com/68344696/145942191-7a2d469f-94c8-4cd2-8c7e-46ad75683636.png"],"dateModified":"2024-05-18T10:21:56.000Z","author":[]}</script><title>SpringCloud | Zz</title><meta name="description" content="SpringCloud å°šç¡…è°·å‘¨é˜³è€å¸ˆ 2022/5/23 è¯¦ç»†ç¬”è®°çœ‹è„‘å›¾ å’Œ åˆ«äººçš„ç¬”è®° å’Œ åˆ«äººçš„ä»£ç ï¼Œè¿™é‡Œåªè®°å½•äºè‡ªå·±è€Œè¨€æ˜¯é‡ç‚¹çš„å†…å®¹ æ ‡é¢˜ æ–°æ—§äº¤æ›¿å­¦ä¹  14ç§ç»„ä»¶æŠ€æœ¯çš„å­¦ä¹ ï¼Œ30å¤šä¸ªModelã€‚éœ€è¦å¤šåŠ¨æ‰‹ï¼ä¸è¦ä¸€å¬å°±ä¼šä¸€åŠ¨æ‰‹å°±åºŸã€‚ çŸ¥è¡Œåˆä¸€ ä¸è¦è¢«å„ç§é«˜å¤§ä¸Šçš„è¯æ±‡å”¬ä½äº†ï¼Œéƒ½æ˜¯ä¸Šå±‚ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¸œè¥¿ï¼ŒåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆç®—æ³•ï¼Œè·Ÿç€è§†é¢‘æ•™ç¨‹å­¦ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¥½...">
    <link rel="preload" href="/assets/style-DdgbutwI.css" as="style"><link rel="stylesheet" href="/assets/style-DdgbutwI.css">
    <link rel="modulepreload" href="/assets/app-CwCP-kut.js"><link rel="modulepreload" href="/assets/SpringCloud.html-BQ983xXD.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-C9qacF2V.js" as="script"><link rel="prefetch" href="/assets/2023å¹´æ€»ç»“.html-B5SLYAQ7.js" as="script"><link rel="prefetch" href="/assets/æ‰¾å·¥ä½œæœ‰æ„Ÿ.html-DdLYFCPu.js" as="script"><link rel="prefetch" href="/assets/index.html-3fm-Ctro.js" as="script"><link rel="prefetch" href="/assets/disable.html-BS9FpioT.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-cg2gz5M4.js" as="script"><link rel="prefetch" href="/assets/layout.html-DLBQ_-qZ.js" as="script"><link rel="prefetch" href="/assets/markdown.html-B1xWXKf5.js" as="script"><link rel="prefetch" href="/assets/page.html-CaX-Twr0.js" as="script"><link rel="prefetch" href="/assets/TODO.html-EqNL-td9.js" as="script"><link rel="prefetch" href="/assets/Tradingview.html-CHAZqhSY.js" as="script"><link rel="prefetch" href="/assets/HttpRequest.html-CxHAzq2E.js" as="script"><link rel="prefetch" href="/assets/JWT.html-BrKrCVvE.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-C71dBHzO.js" as="script"><link rel="prefetch" href="/assets/è®¡ç½‘é—®é¢˜ï¼ˆå¾…è§£å†³ï¼‰.html-Dq1pI3Cx.js" as="script"><link rel="prefetch" href="/assets/DistributedLock.html-BMe1vKQ4.js" as="script"><link rel="prefetch" href="/assets/Advanced.html-3bRweB6M.js" as="script"><link rel="prefetch" href="/assets/Basic.html-UVZxJiu-.js" as="script"><link rel="prefetch" href="/assets/ElasticSearch.html-dmaUVCWG.js" as="script"><link rel="prefetch" href="/assets/JUC.html-AG-Dq0v-.js" as="script"><link rel="prefetch" href="/assets/JVM.html-C1hrt4wu.js" as="script"><link rel="prefetch" href="/assets/MyBatis.html-gCxlj49K.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-D-4PJRj4.js" as="script"><link rel="prefetch" href="/assets/SpringIntegration.html-Bs4CIFNG.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-BVUUorpM.js" as="script"><link rel="prefetch" href="/assets/Java æ ¸å¿ƒæŠ€æœ¯é¢è¯•ç²¾è®².html-TIj1ssOK.js" as="script"><link rel="prefetch" href="/assets/JavaSE.html-_TVKSX8L.js" as="script"><link rel="prefetch" href="/assets/KnowledgePlanet-JavaGuide.html-BgUIPc5v.js" as="script"><link rel="prefetch" href="/assets/Lambda.html-DhOZYY2l.js" as="script"><link rel="prefetch" href="/assets/Steam.html-CYx5xmPb.js" as="script"><link rel="prefetch" href="/assets/å°šç¡…è°·ç»å…¸Javaé¢è¯•é¢˜ç¬¬ä¸€å­£.html-BKS7HCsO.js" as="script"><link rel="prefetch" href="/assets/LinuxRef.html-5mkiyn-M.js" as="script"><link rel="prefetch" href="/assets/Linuxç¯å¢ƒéƒ¨ç½²(JREã€MySQLã€Nginx).html-aEYs3vzn.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-1vE4eTU9.js" as="script"><link rel="prefetch" href="/assets/Redis.html-q8yIdlRB.js" as="script"><link rel="prefetch" href="/assets/RedisAdvanced.html-DbMecbz9.js" as="script"><link rel="prefetch" href="/assets/RuoYi.html-DXAvxP0A.js" as="script"><link rel="prefetch" href="/assets/MySQLå®æˆ˜45è®².html-Cv0dCCIi.js" as="script"><link rel="prefetch" href="/assets/Mysqlç´¢å¼•_åšé¢˜æ€»ç»“.html-DoexyA8F.js" as="script"><link rel="prefetch" href="/assets/5am-Project.html-BZPTo9Fa.js" as="script"><link rel="prefetch" href="/assets/Clash.html-B19dVEAv.js" as="script"><link rel="prefetch" href="/assets/Git_SVN.html-49vN2nH0.js" as="script"><link rel="prefetch" href="/assets/GitHub Actions.html-CESNoP71.js" as="script"><link rel="prefetch" href="/assets/MacOS.html-Bo7niyKQ.js" as="script"><link rel="prefetch" href="/assets/Maven.html-T4_Qg3B1.js" as="script"><link rel="prefetch" href="/assets/Regexr.html-DaVb-9gC.js" as="script"><link rel="prefetch" href="/assets/StudyList.html-C5erNrLx.js" as="script"><link rel="prefetch" href="/assets/VuePress Theme Hope.html-ufXP66Wm.js" as="script"><link rel="prefetch" href="/assets/WTG (WindowsToGo).html-BS6uBsX8.js" as="script"><link rel="prefetch" href="/assets/Windows_Software.html-CE8Q_9tN.js" as="script"><link rel="prefetch" href="/assets/idea_windows å¿«æ·é”®åŠä½¿ç”¨æŠ€å·§.html-CtXzikNN.js" as="script"><link rel="prefetch" href="/assets/Books.html-y_19CGTY.js" as="script"><link rel="prefetch" href="/assets/FirstYear.html-CIThCaJK.js" as="script"><link rel="prefetch" href="/assets/upupor.html-BbKhFU4k.js" as="script"><link rel="prefetch" href="/assets/å¿«æ’ï¼ˆåˆ†æ²»æ€æƒ³ï¼‰.html-D9NjoBBW.js" as="script"><link rel="prefetch" href="/assets/è®¡ç»„åŸ.html-Bm5HemLV.js" as="script"><link rel="prefetch" href="/assets/å°šä¸Šä¼˜é€‰_Abandon.html-CQUTFrSP.js" as="script"><link rel="prefetch" href="/assets/2020 ç¨‹åºå‘˜æ‰¾å·¥ä½œæŒ‡å—.html-B6MEpEMF.js" as="script"><link rel="prefetch" href="/assets/ç¨‹åºå‘˜å¦‚ä½•é«˜æ•ˆå­¦ä¹ ï¼ˆä»¥ Java ä¸ºä¾‹ï¼‰.html-Cy1pUKRz.js" as="script"><link rel="prefetch" href="/assets/Chromeä¹¦ç­¾è¢«åŠ«æŒ.html-M8P6VVlL.js" as="script"><link rel="prefetch" href="/assets/Kali ç ´è§£ WIFI.html-CtK09xdR.js" as="script"><link rel="prefetch" href="/assets/ShareListæŒ‚è½½é˜¿é‡Œäº‘ç›˜.html-BBCU_Hlw.js" as="script"><link rel="prefetch" href="/assets/Windows To Go Uç›˜.html-CpMSlGJV.js" as="script"><link rel="prefetch" href="/assets/docsifyå¿«é€Ÿéƒ¨ç½²ä¼˜ç¾çš„åœ¨çº¿æ–‡æ¡£.html-I-PALuxi.js" as="script"><link rel="prefetch" href="/assets/å¤©å¤©éƒ½åœ¨ç”¨çš„è½¯ç¡¬ä»¶.html-JEJFFdj5.js" as="script"><link rel="prefetch" href="/assets/Spring.html-DV5nvCUA.js" as="script"><link rel="prefetch" href="/assets/404.html-CVEeTlej.js" as="script"><link rel="prefetch" href="/assets/index.html-DBNwL2ql.js" as="script"><link rel="prefetch" href="/assets/index.html-BFNiwMAy.js" as="script"><link rel="prefetch" href="/assets/index.html-CJTaKaOD.js" as="script"><link rel="prefetch" href="/assets/index.html-C_2LVHvh.js" as="script"><link rel="prefetch" href="/assets/index.html-CUPDjGyL.js" as="script"><link rel="prefetch" href="/assets/index.html--mdmy2vT.js" as="script"><link rel="prefetch" href="/assets/index.html-D8gSMjaM.js" as="script"><link rel="prefetch" href="/assets/index.html-CfO-Lwu3.js" as="script"><link rel="prefetch" href="/assets/index.html-fBPLVeEs.js" as="script"><link rel="prefetch" href="/assets/index.html-CvI-LzmV.js" as="script"><link rel="prefetch" href="/assets/index.html-DedLhLeY.js" as="script"><link rel="prefetch" href="/assets/index.html-ClmjMGdH.js" as="script"><link rel="prefetch" href="/assets/index.html-BLJlMjBV.js" as="script"><link rel="prefetch" href="/assets/index.html-Bi0XIp8W.js" as="script"><link rel="prefetch" href="/assets/index.html-DUYe4hRG.js" as="script"><link rel="prefetch" href="/assets/index.html-B7I6K4dH.js" as="script"><link rel="prefetch" href="/assets/index.html-CTgrclXo.js" as="script"><link rel="prefetch" href="/assets/index.html-CCPMRuXt.js" as="script"><link rel="prefetch" href="/assets/index.html-D2pHLJgt.js" as="script"><link rel="prefetch" href="/assets/index.html-Dpl3wQpC.js" as="script"><link rel="prefetch" href="/assets/index.html--09Nc7i9.js" as="script"><link rel="prefetch" href="/assets/index.html-BvCz7gEC.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script"><link rel="prefetch" href="/assets/style-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/docsearch-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/index-Ds2TtRM5.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">Zz</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link active" href="/studynotes/" aria-label="ä»£ç ç¬”è®°"><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>ä»£ç ç¬”è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link nav-link" href="/demo/" aria-label="æµ®ç”Ÿæ‚è®°"><span class="font-icon icon fa-fw fa-sm fas fa-fish-fins" style=""></span>æµ®ç”Ÿæ‚è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="èµ„æºå®åº“"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span>èµ„æºå®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/resources/books/" aria-label="ä¹¦ç±èµ„æº"><span class="font-icon icon fa-fw fa-sm fas fa-book-open" style=""></span>ä¹¦ç±èµ„æº<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/resources/videos/" aria-label="å½±éŸ³èµ„æº"><span class="font-icon icon fa-fw fa-sm fas fa-play" style=""></span>å½±éŸ³èµ„æº<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç½‘ç«™ç›¸å…³"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-id-card" style=""></span>ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/about-the-author/" aria-label="å…³äºä½œè€…"><span class="font-icon icon fa-fw fa-sm fas fa-user" style=""></span>å…³äºä½œè€…<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/timeline/" aria-label="æ›´æ–°å†å²"><span class="font-icon icon fa-fw fa-sm fas fa-history" style=""></span>æ›´æ–°å†å²<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/zzq8/zzq8" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/TODO.html" aria-label="/studynotes/TODO.html"><!---->/studynotes/TODO.html<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">408 Network</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Distributed Lock</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Guli Mall</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Java Framework</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/JavaFramework/MyBatis.html" aria-label="/studynotes/JavaFramework/MyBatis.html"><!---->/studynotes/JavaFramework/MyBatis.html<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/JavaFramework/SpringSecurity.html" aria-label="/studynotes/JavaFramework/SpringSecurity.html"><!---->/studynotes/JavaFramework/SpringSecurity.html<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/JavaFramework/SpringBoot.html" aria-label="@RequestParamï¼Œ@PathParamï¼Œ@PathVariableç­‰æ³¨è§£åŒºåˆ«"><!---->@RequestParamï¼Œ@PathParamï¼Œ@PathVariableç­‰æ³¨è§£åŒºåˆ«<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/studynotes/JavaFramework/SpringCloud.html" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/studynotes/JavaFramework/SpringIntegration.html" aria-label="SpringIntegration"><!---->SpringIntegration<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java SE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JUC</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JVM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">MQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">No SQL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ruo Yi</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SQL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Upupor</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ZOther</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->SpringCloud</h1><div class="page-info"><!----><!----><!----><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 15104 å­—</span><meta property="wordCount" content="15104"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 50 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT50M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœåŠ¡æ³¨å†Œä¸å‘ç°">------æœåŠ¡æ³¨å†Œä¸å‘ç°------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€å‰è¨€">ä¸€ã€å‰è¨€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-ä»‹ç»">1. ä»‹ç»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-å†æ¬¡æ€»ç»“ä»€ä¹ˆæ˜¯å¾®æœåŠ¡">2. å†æ¬¡æ€»ç»“ä»€ä¹ˆæ˜¯å¾®æœåŠ¡</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äºŒã€ç‰ˆæœ¬é€‰æ‹©">äºŒã€ç‰ˆæœ¬é€‰æ‹©</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸‰ã€ç»„ä»¶åœæ›´è¯´æ˜">ä¸‰ã€ç»„ä»¶åœæ›´è¯´æ˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å››ã€ç¼–ç æ„å»º">å››ã€ç¼–ç æ„å»º</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-idea-æ–°å»º-çˆ¶å·¥ç¨‹">1. IDEA æ–°å»º çˆ¶å·¥ç¨‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-rest-å¾®æœåŠ¡å·¥ç¨‹æ„å»º">2. Rest å¾®æœåŠ¡å·¥ç¨‹æ„å»º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å·¥ç¨‹é‡æ„">3. å·¥ç¨‹é‡æ„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº”ã€eureka-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ-Ã—">äº”ã€Eureka æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ Ã—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ¦‚è¿°">æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†">1.1 ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°">1.2 ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-3-eureka-é›†ç¾¤">1.3 Eureka é›†ç¾¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-4-service-provider-é›†ç¾¤">1.4 Service Provider é›†ç¾¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-5-æœåŠ¡å‘ç°-discovery">1.5 æœåŠ¡å‘ç° Discovery</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-6-eurekaè‡ªæˆ‘ä¿æŠ¤ç†è®ºçŸ¥è¯†">1.6 Eurekaè‡ªæˆ‘ä¿æŠ¤ç†è®ºçŸ¥è¯†</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å…­ã€zookeeper-æ›¿ä»£-eureka">å…­ã€Zookeeper æ›¿ä»£ Eureka</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸ƒã€consul-ä»£æ›¿-eureka">ä¸ƒã€Consul ä»£æ›¿ Eureka</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å…«ã€ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹">å…«ã€ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœåŠ¡è°ƒç”¨">------æœåŠ¡è°ƒç”¨------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€ribbonâœ”">ä¸€ã€Ribbonâœ”</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-å‰è¨€">1. å‰è¨€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-ribbonçš„è´Ÿè½½å‡è¡¡å’Œrestè°ƒç”¨">2. Ribbonçš„è´Ÿè½½å‡è¡¡å’ŒRestè°ƒç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-ribbonè´Ÿè½½è§„åˆ™æ›¿æ¢">3. Ribbonè´Ÿè½½è§„åˆ™æ›¿æ¢</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äºŒã€openfeignâœ”">äºŒã€OpenFeignâœ”</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-openfeignæœåŠ¡è°ƒç”¨">1. OpenFeignæœåŠ¡è°ƒç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-openfeignè¶…æ—¶æ§åˆ¶">2. OpenFeignè¶…æ—¶æ§åˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-openfeignæ—¥å¿—å¢å¼º">3. OpenFeignæ—¥å¿—å¢å¼º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-è¡¥å……-gulimall">4.è¡¥å……ï¼šGuliMall</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœåŠ¡é™çº§">------æœåŠ¡é™çº§------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€hystrix-Ã—">ä¸€ã€Hystrix Ã—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-é‡è¦æ¦‚å¿µ">1. é‡è¦æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-æœåŠ¡é™çº§">2. æœåŠ¡é™çº§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-æœåŠ¡ç†”æ–­">3. æœåŠ¡ç†”æ–­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœåŠ¡ç½‘å…³">------æœåŠ¡ç½‘å…³------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€gatewayâœ”">ä¸€ã€Gatewayâœ”</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-å‰è¨€-1">1. å‰è¨€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-é€šè¿‡å¾®æœåŠ¡åå®ç°åŠ¨æ€è·¯ç”±">2. é€šè¿‡å¾®æœåŠ¡åå®ç°åŠ¨æ€è·¯ç”±</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœåŠ¡é…ç½®">------æœåŠ¡é…ç½®------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€config-Ã—">ä¸€ã€Config Ã—</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-configé…ç½®æ€»æ§ä¸­å¿ƒæ­å»º">1. Configé…ç½®æ€»æ§ä¸­å¿ƒæ­å»º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-configå®¢æˆ·ç«¯é…ç½®ä¸æµ‹è¯•">2. Configå®¢æˆ·ç«¯é…ç½®ä¸æµ‹è¯•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-configåŠ¨æ€åˆ·æ–°ä¹‹æ‰‹åŠ¨ç‰ˆ">3. ConfigåŠ¨æ€åˆ·æ–°ä¹‹æ‰‹åŠ¨ç‰ˆ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æœåŠ¡æ€»çº¿">------æœåŠ¡æ€»çº¿------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€bus-Ã—">ä¸€ã€Bus Ã—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#other">------Other------</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€streamâœ”">ä¸€ã€Streamâœ”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äºŒã€sleuthé“¾è·¯ç›‘æ§âœ”">äºŒã€Sleuthé“¾è·¯ç›‘æ§âœ”</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#springcloud-alibaba">++++++SpringCloud alibaba++++++</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸€ã€nacos-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ">ä¸€ã€Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-æ³¨å†Œä¸­å¿ƒ-ä»£æ›¿-eureka">1. æ³¨å†Œä¸­å¿ƒï¼šä»£æ›¿ Eureka</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-é…ç½®ä¸­å¿ƒ-ä»£æ›¿-bus">2. é…ç½®ä¸­å¿ƒï¼šä»£æ›¿ Bus</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®-é‡è¦">3. Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®ï¼ˆé‡è¦ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äºŒã€sentinel-ç†”æ–­ä¸é™æµ">äºŒã€Sentinel ç†”æ–­ä¸é™æµ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-æµæ§">1. æµæ§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-ç†”æ–­-é™çº§">2. ç†”æ–­/é™çº§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-sentinelresourceé…ç½®">3. SentinelResourceé…ç½®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-github-wikiæ–‡æ¡£">4. GitHub wikiæ–‡æ¡£</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¸‰ã€seata-å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡">ä¸‰ã€Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-æ¦‚å¿µ">1.æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-å¿«é€Ÿå¼€å§‹">2.å¿«é€Ÿå¼€å§‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#other-1">Other</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸€ã€spring-bootå¤šæœåŠ¡é¡¹ç›®ä¸æ˜¾ç¤ºserviceçª—å£">ä¸€ã€spring bootå¤šæœåŠ¡é¡¹ç›®ä¸æ˜¾ç¤ºserviceçª—å£</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="springcloud" tabindex="-1"><a class="header-anchor" href="#springcloud"><span>SpringCloud</span></a></h1><blockquote><p>å°šç¡…è°·å‘¨é˜³è€å¸ˆ 2022/5/23 è¯¦ç»†ç¬”è®°çœ‹è„‘å›¾ å’Œ <a href="https://blog.csdn.net/u011863024/article/details/114298270" target="_blank" rel="noopener noreferrer">åˆ«äººçš„ç¬”è®°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://gitee.com/lixiaogou/cloud2020/tree/master/" target="_blank" rel="noopener noreferrer">åˆ«äººçš„ä»£ç <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œè¿™é‡Œåªè®°å½•äºè‡ªå·±è€Œè¨€æ˜¯é‡ç‚¹çš„å†…å®¹</p></blockquote><blockquote><p>æ ‡é¢˜ æ–°æ—§äº¤æ›¿å­¦ä¹ </p><p>14ç§ç»„ä»¶æŠ€æœ¯çš„å­¦ä¹ ï¼Œ30å¤šä¸ªModelã€‚éœ€è¦å¤šåŠ¨æ‰‹ï¼ä¸è¦ä¸€å¬å°±ä¼šä¸€åŠ¨æ‰‹å°±åºŸã€‚ <strong>çŸ¥è¡Œåˆä¸€</strong></p><p>ä¸è¦è¢«å„ç§é«˜å¤§ä¸Šçš„è¯æ±‡å”¬ä½äº†ï¼Œéƒ½æ˜¯ä¸Šå±‚ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¸œè¥¿ï¼ŒåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆç®—æ³•ï¼Œè·Ÿç€è§†é¢‘æ•™ç¨‹å­¦ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ã€‚</p><p>3Wæ³•â€”whatï¼Œwhyï¼Œhowçš„è¿ç”¨</p><p>ä»¥åç¢°åˆ°ä»€ä¹ˆé—®é¢˜å…ˆæŸ¥ å®˜ç½‘æ–‡æ¡£ï¼Œå†å»Google ChartGPT ï¼</p></blockquote><h2 id="æœåŠ¡æ³¨å†Œä¸å‘ç°" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡æ³¨å†Œä¸å‘ç°"><span><mark>------æœåŠ¡æ³¨å†Œä¸å‘ç°------</mark></span></a></h2><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€"><span>ä¸€ã€å‰è¨€</span></a></h2><h3 id="_1-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-ä»‹ç»"><span><a href="https://www.yuque.com/atguigu/springboot/na3pfd#gXHqd" target="_blank" rel="noopener noreferrer">1. ä»‹ç»<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><blockquote><p>SpringCloud -&gt; åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œæ˜¯å¤šç§å¾®æœåŠ¡æ¶æ„è½åœ°æŠ€æœ¯çš„é›†åˆä½“ï¼Œä¿—ç§°å¾®æœåŠ¡å…¨å®¶æ¡¶</p><p>ç›´æ¥çœ‹æå‡ºè€…çš„ Blog ï¼ï¼ï¼ <mark>Click the title acquire</mark></p></blockquote><blockquote><p>åˆ†å¸ƒå¼ (éƒ¨ç½²æ–¹å¼) vs å¾®æœåŠ¡ (æ¶æ„é£æ ¼)</p></blockquote><p>ç”Ÿäº§ç¯å¢ƒä¸‹çš„å¾®æœåŠ¡è‚¯å®šæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„</p><p>ä½†æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„åº”ç”¨ä¸ä¸€å®šæ˜¯å¾®æœåŠ¡æ¶æ„çš„ï¼Œæ¯”å¦‚é›†ç¾¤éƒ¨ç½²ï¼Œå®ƒæ˜¯æŠŠç›¸åŒåº”ç”¨å¤åˆ¶åˆ°ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯é€»è¾‘åŠŸèƒ½ä¸Šè¿˜æ˜¯å•ä½“åº”ç”¨ã€‚</p><blockquote><p>å¾®æœåŠ¡ç†è§£ï¼šå¯ä»¥ç²—é„™çš„ç†è§£ä¸º SpringBoot å¼€å‘çš„ä¸€ä¸ªä¸ªæ¨¡å—å•å…ƒ</p></blockquote><p>æ¶æ„æ¨¡å¼ï¼ŒæŠŠå•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ç›¸äº’åè°ƒã€ç›¸äº’é…åˆã€‚</p><p>æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨å…¶ç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¸æœåŠ¡é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶ç›¸äº’å†™ä½œï¼ˆé€šå¸¸æ˜¯åŸºäºHTTPåè®®çš„RESTful APIï¼‰</p><figure><img src="https://images.zzq8.cn/img/202205231606492.png" alt="image-20220523154541922" tabindex="0" loading="lazy"><figcaption>image-20220523154541922</figcaption></figure><p>å¼ºå°±å¼ºåœ¨å®ƒæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œåƒè‹¹æœç”Ÿæ€ã€‚ ä¸ç„¶æˆ‘æ‰‹æœºè‹¹æœç”µè„‘åä¸ºå¹³æ¿å°ç±³ç›´æ¥åè°ƒçš„è¯å°±ä¼šéº»çƒ¦ã€‚</p><p>æ‚ä¸€çœ¼äº¬ä¸œçš„ï¼š</p><figure><img src="https://images.zzq8.cn/img/202205231615718.png" alt="image-20220523161504577" tabindex="0" loading="lazy"><figcaption>image-20220523161504577</figcaption></figure><p>éœ€è¦å­¦ä¹ ï¼šæ³¨æ„æœ‰ä¸€äº›ä¼šæœ‰å˜æ›´ï¼Œæ–°çš„è€çš„éƒ½å­¦ï¼</p><figure><img src="https://images.zzq8.cn/img/202205231623078.png" alt="image-20220523162302969" tabindex="0" loading="lazy"><figcaption>image-20220523162302969</figcaption></figure><h3 id="_2-å†æ¬¡æ€»ç»“ä»€ä¹ˆæ˜¯å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-å†æ¬¡æ€»ç»“ä»€ä¹ˆæ˜¯å¾®æœåŠ¡"><span><a href="https://www.yuque.com/atguigu/springboot/na3pfd#gXHqd" target="_blank" rel="noopener noreferrer">2. å†æ¬¡æ€»ç»“ä»€ä¹ˆæ˜¯å¾®æœåŠ¡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><blockquote><p>ç›´æ¥çœ‹æå‡ºè€…çš„ Blog ï¼ï¼ï¼ <mark>Click the title acquire</mark></p></blockquote><ul><li>å¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼</li><li>ä¸€ä¸ªåº”ç”¨æ‹†åˆ†ä¸ºä¸€ç»„å°å‹æœåŠ¡</li><li>æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹å†…ï¼Œä¹Ÿå°±æ˜¯å¯ç‹¬ç«‹éƒ¨ç½²å’Œå‡çº§</li><li>æœåŠ¡ä¹‹é—´ä½¿ç”¨è½»é‡çº§HTTPäº¤äº’</li><li>æœåŠ¡å›´ç»•ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†</li><li>å¯ä»¥ç”±å…¨è‡ªåŠ¨éƒ¨ç½²æœºåˆ¶ç‹¬ç«‹éƒ¨ç½²</li><li>å»ä¸­å¿ƒåŒ–ï¼ŒæœåŠ¡è‡ªæ²»ã€‚æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€ã€ä¸åŒçš„å­˜å‚¨æŠ€æœ¯</li></ul><h2 id="äºŒã€ç‰ˆæœ¬é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç‰ˆæœ¬é€‰æ‹©"><span>äºŒã€ç‰ˆæœ¬é€‰æ‹©</span></a></h2><blockquote><p>GAï¼šGeneral Availabilityï¼Œæ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œå®˜æ–¹å¼€å§‹æ¨èå¹¿æ³›ä½¿ç”¨ï¼Œå›½å¤–æœ‰çš„ç”¨GAæ¥è¡¨ç¤ºreleaseç‰ˆæœ¬ã€‚</p><p>RELEASEï¼šæ­£å¼å‘å¸ƒç‰ˆï¼Œå®˜æ–¹æ¨èä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œæœ‰çš„ç”¨GAæ¥è¡¨ç¤ºã€‚æ¯”å¦‚springã€‚</p></blockquote><p>äº†è§£ï¼š</p><p>Spring Cloud é‡‡ç”¨äº†<strong>è‹±å›½ä¼¦æ•¦åœ°é“ç«™</strong>çš„åç§°æ¥å‘½åï¼Œå¹¶ç”±åœ°é“ç«™åç§°å­—æ¯ A-Z ä»¥æ­¤ç±»æ¨çš„å½¢å¼æ¥å‘å¸ƒè¿­ä»£ç‰ˆæœ¬ã€‚</p><p>å…·ä½“ç‰ˆæœ¬é€‰æ‹©å¯ä»¥çœ‹ Spring Cloud å®˜ç½‘ overview ä¸‹é¢æœ‰è¯´æ˜ã€‚Spring Cloud å¯¹åº”çš„ Spring Boot ç‰ˆæœ¬ï¼š</p><figure><img src="https://images.zzq8.cn/img/202205231700591.png" alt="image-20220523170052524" tabindex="0" loading="lazy"><figcaption>image-20220523170052524</figcaption></figure><p>å…·ä½“çœ‹æ›´è¯¦ç»†çš„ä¾èµ– https://start.spring.io/actuator/info</p><h2 id="ä¸‰ã€ç»„ä»¶åœæ›´è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç»„ä»¶åœæ›´è¯´æ˜"><span>ä¸‰ã€<mark>ç»„ä»¶åœæ›´è¯´æ˜</mark></span></a></h2><blockquote><p>æ€»ç»“ï¼šAli çš„ Nacos å¾ˆå‰å®³</p><p>æŠŠå›¾ç‰‡æ”¾å¤§çœ‹ï¼</p></blockquote><figure><img src="https://images.zzq8.cn/img/202205231726500.png" alt="image-20220523172626378" tabindex="0" loading="lazy"><figcaption>image-20220523172626378</figcaption></figure><h2 id="å››ã€ç¼–ç æ„å»º" tabindex="-1"><a class="header-anchor" href="#å››ã€ç¼–ç æ„å»º"><span>å››ã€ç¼–ç æ„å»º</span></a></h2><blockquote><p>çº¦å®š &gt; é…ç½® &gt; ç¼–ç </p></blockquote><p>ideaçš„é…ç½® + çˆ¶å·¥ç¨‹çš„é…ç½®, å…·ä½“çœ‹é¡¹ç›®ä½“ç°</p><h3 id="_1-idea-æ–°å»º-çˆ¶å·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-idea-æ–°å»º-çˆ¶å·¥ç¨‹"><span>1. IDEA æ–°å»º çˆ¶å·¥ç¨‹</span></a></h3><h4 id="_1-1-dependencymanagement-æ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_1-1-dependencymanagement-æ ‡ç­¾"><span>1.1 dependencyManagement æ ‡ç­¾</span></a></h4><blockquote><p>é€šå¸¸ä¼šåœ¨ä¸€ä¸ªç»„ç»‡æˆ–è€…é¡¹ç›®çš„æœ€é¡¶å±‚çš„ <strong>çˆ¶POM</strong> ä¸­çœ‹åˆ°dependencyManagementå…ƒç´ ã€‚</p><p>å­å·¥ç¨‹ä¼šå‘ä¸Šæ‰¾ dependencyManagement ç„¶åç”¨ å…¶ (çˆ¶å·¥ç¨‹) å¼•å…¥çš„ jar åŒ…çš„ç‰ˆæœ¬å·</p><p>æ³¨æ„: çˆ¶å·¥ç¨‹è¿™é‡Œåªæ˜¯èµ·ä¸€ä¸ªå®šä¹‰ä½œç”¨ -&gt; dependencyManagementé‡Œ<strong>åªæ˜¯å£°æ˜ä¾èµ–ï¼Œå¹¶ä¸å®ç°å¼•å…¥</strong>ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾ç¤ºçš„å£°æ˜éœ€è¦ç”¨çš„ä¾èµ–ã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/99643458" target="_blank" rel="noopener noreferrer">å¼ºåŠ›æ¨èçœ‹è¿™ç¯‡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> &lt;dependencyManagement&gt; é’ˆå¯¹çš„æ˜¯å„¿å­æ¨¡å—ï¼ˆçˆ¶å­ï¼‰ï¼Œä¸æ˜¯è‡ªå·±æœ¬èº«çš„æ¨¡å—</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- å­æ¨¡å—ç»§æ‰¿ä¹‹åï¼Œæä¾›ä½œç”¨ï¼š
      é”å®šç‰ˆæœ¬+å­modlueä¸ç”¨å†™groupIdå’Œversion --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysq1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        
      <span class="token comment">&lt;!--spring boot 2.2.2, å­æ¨¡å—æ•´ä¸ª spring boot ç›¸å…³çš„éƒ½æ˜¯2.2.2.RELEASE--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
        
        	çˆ¶
        #############
        	å­
        
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysq1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        
<span class="token comment">&lt;!-- è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼šå¦‚æœæœ‰å¤šä¸ªå­é¡¹ç›®éƒ½å¼•ç”¨åŒä¸€æ ·ä¾èµ–ï¼Œåˆ™å¯ä»¥é¿å…åœ¨æ¯ä¸ªä½¿ç”¨çš„å­é¡¹ç›®é‡Œéƒ½å£°æ˜ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œè¿™æ ·å½“æƒ³å‡çº§æˆ–åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œåªéœ€è¦åœ¨é¡¶å±‚çˆ¶å®¹å™¨é‡Œæ›´æ–°ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªå­é¡¹ç›®çš„ä¿®æ”¹ï¼›å¦å¤–å¦‚æœæŸä¸ªå­é¡¹ç›®éœ€è¦å¦å¤–çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåªéœ€è¦å£°æ˜versionå°±å¯ã€‚--&gt;</span>        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•äº†ä¸€ä¸‹ï¼šå‘ç°å­ Model ç»§æ‰¿äº†çˆ¶çš„æ‰€æœ‰åŒ…æ‹¬ &lt;build&gt; åªè¦æ³¨æ„å†™ artifactId å°±å¥½ !</p><h4 id="_1-2-maven-è·³è¿‡å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_1-2-maven-è·³è¿‡å•å…ƒæµ‹è¯•"><span>1.2 maven è·³è¿‡å•å…ƒæµ‹è¯•</span></a></h4><blockquote><p><mark>èŠ‚çº¦æ—¶é—´</mark></p></blockquote><figure><img src="https://images.zzq8.cn/img/202205232107484.png" alt="image-20220523210748358" tabindex="0" loading="lazy"><figcaption>image-20220523210748358</figcaption></figure><h3 id="_2-rest-å¾®æœåŠ¡å·¥ç¨‹æ„å»º" tabindex="-1"><a class="header-anchor" href="#_2-rest-å¾®æœåŠ¡å·¥ç¨‹æ„å»º"><span>2. Rest å¾®æœåŠ¡å·¥ç¨‹æ„å»º</span></a></h3><blockquote><p>åˆ›å»ºå¾®æœåŠ¡æ¨¡å—å¥—è·¯ï¼š</p></blockquote><ol><li>å»ºModule</li><li>æ”¹POM</li><li>å†™YML</li><li>ä¸»å¯åŠ¨</li><li>ä¸šåŠ¡ç±»</li></ol><p>çƒ­éƒ¨ç½²å…¶å®å°±æ˜¯çƒ­é‡å¯ï¼ŒçœŸæ­£çš„çƒ­éƒ¨ç½²åªéƒ¨ç½²æ”¹åŠ¨çš„ å®˜æ–¹æ–‡æ¡£è¯´äº†éœ€è¦ä»˜è´¹ã€‚æ³¨æ„ï¼šå› ä¸ºå…¶é‡‡ç”¨çš„è™šæ‹Ÿæœºæœºåˆ¶ï¼Œè¯¥é¡¹é‡å¯æ˜¯å¾ˆå¿«çš„</p><h4 id="_2-1-springboot-maven-pluginæ’ä»¶åŸç†åŠä½œç”¨ã€æ‰©å±•ã€‘" tabindex="-1"><a class="header-anchor" href="#_2-1-springboot-maven-pluginæ’ä»¶åŸç†åŠä½œç”¨ã€æ‰©å±•ã€‘"><span>2.1 Springboot maven pluginæ’ä»¶åŸç†åŠä½œç”¨ã€æ‰©å±•ã€‘</span></a></h4><p><mark>å¯èƒ½æˆ‘è¿˜æ˜¯ä¸ç†è§£ spring-boot-maven-pluginæ’ä»¶ä½œç”¨ï¼Œå®ƒçš„ä½œç”¨ä»…ä»…æ˜¯ä¸ºäº†é‡æ–°æ‰“åŒ…ç”Ÿæˆä¸€ä¸ª*.originalæ–‡ä»¶å—</mark></p><p>ä¸€èˆ¬çš„mavené¡¹ç›®çš„æ‰“åŒ…å‘½ä»¤ï¼Œä¸ä¼šæŠŠä¾èµ–çš„jaråŒ…ä¹Ÿæ‰“åŒ…è¿›å»çš„ï¼Œåªæ˜¯ä¼šæ”¾åœ¨jaråŒ…çš„åŒç›®å½•ä¸‹ï¼Œèƒ½å¤Ÿå¼•ç”¨å°±å¯ä»¥äº†ï¼Œä½†æ˜¯spring-boot-maven-pluginæ’ä»¶ï¼Œä¼šå°†ä¾èµ–çš„jaråŒ…å…¨éƒ¨æ‰“åŒ…è¿›å»ã€‚</p><p>https://www.jb51.net/article/197968.htm</p><p>åœ¨æ²¡æœ‰ä½¿ç”¨spring-boot-maven-pluginæ’ä»¶æ—¶ï¼Œæ‰“åŒ…çš„ç›®å½•åªæœ‰ä¸¤ä¸ªï¼ŒMETA-INFå’Œæˆ‘è‡ªå·±çš„é¡¹ç›®ä»£ç çš„ç›®å½•ã€‚</p><p>åªä¼šç”Ÿæˆä¸€ä¸ª .jar æ–‡ä»¶</p><figure><img src="https://images.zzq8.cn/img/202205252040293.png" alt="image-20220525204018181" tabindex="0" loading="lazy"><figcaption>image-20220525204018181</figcaption></figure><p>åœ¨ä½¿ç”¨spring-boot-maven-pluginæ’ä»¶æ—¶ï¼Œæ‰“åŒ…åçš„ç›®å½•åŒ…æ‹¬ä¸‰ä¸ª</p><p>å¤šä¸€ä¸ª *.original æ–‡ä»¶</p><figure><img src="https://images.zzq8.cn/img/202205252046930.png" alt="image-20220525204651902" tabindex="0" loading="lazy"><figcaption>image-20220525204651902</figcaption></figure><ol><li>BOOT-INF</li><li>META-INF</li><li>org.springframework.boot.loaderï¼Œåœ¨libç›®å½•é‡ŒåŒ…å«äº†æˆ‘è‡ªå·±çš„é¡¹ç›®çš„ä»£ç ç›®å½•ï¼›</li></ol><h4 id="_2-2-resttemplate" tabindex="-1"><a class="header-anchor" href="#_2-2-resttemplate"><span>2.2 <mark>restTemplate</mark></span></a></h4><p>åœ¨æ²¡æœ‰è®² Ribbon ä¹‹å‰éƒ½å…ˆç”¨è¿™ä¸ªï¼</p><p>JDBCTemplateã€RedisTemplate</p><p>ä¸¤ä¸ªæœåŠ¡é—´çš„è°ƒç”¨ï¼š</p><ul><li>åŸå§‹çš„ web é˜¶æ®µ -&gt; httpClient</li><li>ç°åœ¨è¿›åŒ–äº†ä»¥å restTemplateï¼Œç›¸å½“äºç»™httpClient åšäº†ä¸€æ¬¡å°è£…ï¼Œå®ç°äº†ä¸¤ä¸ªæœåŠ¡çš„æ¨ªå‘è°ƒç”¨</li></ul><h3 id="_3-å·¥ç¨‹é‡æ„" tabindex="-1"><a class="header-anchor" href="#_3-å·¥ç¨‹é‡æ„"><span>3. å·¥ç¨‹é‡æ„</span></a></h3><p>æ¯ä¸€ä¸ªæ¨¡å—éƒ½æœ‰ä¸€æ ·çš„ åŒ… åŒ…é‡Œçš„ç±»ä¹Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€ƒè™‘é‡æ„æå–å‡ºæ¥ installæˆjaråŒ…ä¾›å¤–é¢ç”¨</p><p>install(å®‰è£…è‡³æœ¬åœ°ä»“åº“)(åœ¨æœ¬åœ°Repositoryä¸­å®‰è£…jar)</p><h2 id="äº”ã€eureka-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ-Ã—" tabindex="-1"><a class="header-anchor" href="#äº”ã€eureka-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ-Ã—"><span>äº”ã€Eureka æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ Ã—</span></a></h2><p>å…¥é—¨ç¯‡å·²è®²å®Œï¼Œå¼€å§‹åŸºç¡€ç¯‡çš„å­¦ä¹ </p><blockquote><p>è€çš„ <strong>EurekaåŒ…å«ä¸¤ä¸ªç»„ä»¶:Eureka Serverå’ŒEureka Client</strong></p><p>è¿™ä¸ªä¸œè¥¿ç›¸å½“äº ç‰©ä¸šå…¬å¸ï¼Œè€Œç»„ä»¶å°±æ˜¯ å…¥é©»ä¼ä¸š</p></blockquote><h3 id="æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°"><span>æ¦‚è¿°</span></a></h3><p>ä¸Šé¢çš„æœåŠ¡é¡¹ç›®å®ä¾‹ä¸­ï¼ŒæœåŠ¡æä¾›æ–¹å¯¹å¤–æä¾›æœåŠ¡ï¼Œéœ€è¦å¯¹å¤–æš´éœ²è‡ªå·±çš„åœ°å€ï¼Œè€ŒæœåŠ¡è°ƒç”¨è€…éœ€è¦è®°å½•æœåŠ¡æä¾›è€…çš„åœ°å€ï¼Œå°†æ¥åœ°å€å‡ºç°å˜åŠ¨æ—¶ï¼Œéœ€è¦åŠæ—¶æ›´æ–°ã€‚</p><p>å½“æœåŠ¡æ•°é‡æ¯”è¾ƒå°‘æ—¶ï¼Œè¿™äº›ä¸ä¼šé€ æˆå›°æ‰°ï¼Œä¸€æ—¦æœåŠ¡æ•°é‡å¢å¤šï¼Œç®¡ç†ä¸Šå°±éå¸¸éº»çƒ¦ã€‚è¿™å°±éœ€è¦æœåŠ¡æ³¨å†Œä¸­å¿ƒæ¥ç»Ÿä¸€ç®¡ç†ã€‚</p><h3 id="_1-1-ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†" tabindex="-1"><a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†"><span>1.1 ä»€ä¹ˆæ˜¯æœåŠ¡æ²»ç†</span></a></h3><p>Spring Cloudå°è£…äº†Netflix å…¬å¸å¼€å‘çš„Eurekaæ¨¡å—æ¥å®ç°æœåŠ¡æ²»ç†</p><p>åœ¨ä¼ ç»Ÿçš„RPCè¿œç¨‹è°ƒç”¨æ¡†æ¶ä¸­ï¼Œç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œç®¡ç†æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æœåŠ¡æ²»ç†ï¼Œç®¡ç†æœåŠ¡äºæœåŠ¡ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œå¯ä»¥å®ç°æœåŠ¡è°ƒç”¨ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰ï¼Œå®ç°æœåŠ¡å‘ç°ä¸æ³¨å†Œã€‚</p><h3 id="_1-2-ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°" tabindex="-1"><a class="header-anchor" href="#_1-2-ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°"><span>1.2 ä»€ä¹ˆæ˜¯æœåŠ¡æ³¨å†Œä¸å‘ç°</span></a></h3><p>Eurekaé‡‡ç”¨äº†CSçš„è®¾è®¡æ¶æ„ï¼ŒEureka Severä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨Eurekaçš„å®¢æˆ·ç«¯è¿æ¥åˆ° Eureka Serverå¹¶ç»´æŒ <strong>å¿ƒè·³è¿æ¥</strong>ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡Eureka Serveræ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p><p>åœ¨æœåŠ¡æ³¨å†Œä¸å‘ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒã€‚å½“æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæŠŠå½“å‰è‡ªå·±æœåŠ¡å™¨çš„ä¿¡æ¯æ¯”å¦‚æœåŠ¡åœ°å€é€šè®¯åœ°å€ç­‰ä»¥åˆ«åæ–¹å¼æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒä¸Šã€‚å¦ä¸€æ–¹(æ¶ˆè´¹è€…æœåŠ¡æä¾›è€…)ï¼Œä»¥è¯¥åˆ«åçš„æ–¹å¼å»æ³¨å†Œä¸­å¿ƒä¸Šè·å–åˆ°å®é™…çš„æœåŠ¡é€šè®¯åœ°å€ï¼Œç„¶åå†å®ç°æœ¬åœ°RPCè°ƒç”¨RPCè¿œç¨‹è°ƒç”¨æ¡†æ¶æ ¸å¿ƒè®¾è®¡æ€æƒ³:åœ¨äºæ³¨å†Œä¸­å¿ƒï¼Œå› ä¸ºä½¿ç”¨æ³¨å†Œä¸­å¿ƒç®¡ç†æ¯ä¸ªæœåŠ¡ä¸æœåŠ¡ä¹‹é—´çš„ä¸€ä¸ªä¾èµ–å…³ç³»(æœåŠ¡æ²»ç†æ¦‚å¿µ)ã€‚åœ¨ä»»ä½•RPCè¿œç¨‹æ¡†æ¶ä¸­ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒå­˜æ”¾æœåŠ¡åœ°å€ç›¸å…³ä¿¡æ¯(æ¥å£åœ°å€)</p><h3 id="_1-3-eureka-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_1-3-eureka-é›†ç¾¤"><span>1.3 Eureka é›†ç¾¤</span></a></h3><p>Eureka Server äº’ç›¸æŒ‡å‘å¯¹æ–¹ ã€æœ‰å‘å›¾ã€‘</p><blockquote><p>é¢˜å¤–è¯ï¼šrpc æ˜¯ä¸€ç§æ€æƒ³ ä¸€ç§æ¦‚å¿µ</p><p>é¢˜å¤–è¯ï¼šå¤šå°æœåŠ¡å™¨ Session æ€ä¹ˆå…±äº«ï¼šRedis</p><p>çœ‹è¿™ä¸ªå›¾ Eureka å’Œ Provider éƒ½æ˜¯å¤šä¸ªé›†ç¾¤ï¼Œä¸ºäº†è¾¾åˆ°é«˜å¯ç”¨</p></blockquote><figure><img src="https://images.zzq8.cn/img/202205271623284.png" alt="image-20220527162304318" tabindex="0" loading="lazy"><figcaption>image-20220527162304318</figcaption></figure><p>è§£å†³åŠæ³•ï¼šæ­å»º Eureka æ³¨å†Œä¸­å¿ƒé›†ç¾¤ï¼Œå®ç°è´Ÿè½½å‡è¡¡ + æ•…éšœå®¹é”™</p><h3 id="_1-4-service-provider-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_1-4-service-provider-é›†ç¾¤"><span>1.4 Service Provider é›†ç¾¤</span></a></h3><blockquote><p>æ³¨æ„ 80 çš„æ¶ˆè´¹è€…ä¸èƒ½æŠŠ Service Provider çš„åŸŸåå†™æ­»ï¼Œè¦å†™æˆæ³¨å†Œè¿› Eureka çš„æœåŠ¡åˆ«å</p><p>è®°å¾—å¸¦ä¸Š http:// è¿™ä¸ªå‰ç¼€</p></blockquote><p>http://localhost:8001 &lt;---æ¢æˆ---&gt; http://CLOUD-PAYMENT-SERVICE</p><blockquote><p>ä½¿ç”¨@LoadBalancedæ³¨è§£èµ‹äºˆRestTemplateè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</p><p>ä¸ç„¶ä¼šæŠ¥é”™</p></blockquote><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@LoadBalanced</span><span class="token comment">//ä½¿ç”¨@LoadBalancedæ³¨è§£èµ‹äºˆRestTemplateè´Ÿè½½å‡è¡¡çš„èƒ½åŠ›</span>
<span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="actuator-å¾®æœåŠ¡ä¿¡æ¯å®Œå–„" tabindex="-1"><a class="header-anchor" href="#actuator-å¾®æœåŠ¡ä¿¡æ¯å®Œå–„"><span>actuator å¾®æœåŠ¡ä¿¡æ¯å®Œå–„</span></a></h5><blockquote><p>ä½¿ç”¨ spring-boot-starter-actuator å¯ä»¥ç”¨äºæ£€æµ‹ç³»ç»Ÿçš„å¥åº·æƒ…å†µã€å½“å‰çš„Beansã€ç³»ç»Ÿçš„ç¼“å­˜ç­‰ï¼Œå…·ä½“å¯æ£€æµ‹çš„å†…å®¹å‚è€ƒä¸‹é¢çš„é“¾æ¥ï¼š https://docs.spring.io/spring-boot/docs/2.6.1/reference/htmlsingle/#actuator.endpoints.exposing</p></blockquote><h3 id="_1-5-æœåŠ¡å‘ç°-discovery" tabindex="-1"><a class="header-anchor" href="#_1-5-æœåŠ¡å‘ç°-discovery"><span>1.5 æœåŠ¡å‘ç° Discovery</span></a></h3><blockquote><p>@EnableDiscoveryClient å¾ˆé‡è¦</p><p>ä»¥å @EnableEurekaClient è¢« zookeeperã€nacos ä»£æ›¿ï¼Œä½†æ˜¯ä¸Šé¢è¿™ä¸ªæ³¨è§£ä¸ä¼š</p></blockquote><p>ç›¸å½“äºç½‘ç«™ä¸Šçš„å…³äºæˆ‘ï¼Œå¯ä»¥çœ‹åˆ°å„ä¸ªæ³¨å†ŒæœåŠ¡çš„ä¿¡æ¯</p><p>å¯¹äºæ³¨å†Œè¿›eurekaé‡Œé¢çš„å¾®æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æ¥è·å¾—è¯¥æœåŠ¡çš„ä¿¡æ¯</p><p>æ³¨æ„æ˜¯è¿™ä¸ªåŒ…ä¸‹é¢çš„ cloud çš„ï¼Œå°±å¦‚æˆ‘ç¬¬äºŒå¥è¯´çš„ï¼Œè¿™ä¸ªæ³¨è§£ä¼šå¸¸ç”¨ï¼Œä¸æ˜¯ Eureka çš„ï¼šimport org.springframework.cloud.client.discovery.DiscoveryClient;</p><h3 id="_1-6-eurekaè‡ªæˆ‘ä¿æŠ¤ç†è®ºçŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#_1-6-eurekaè‡ªæˆ‘ä¿æŠ¤ç†è®ºçŸ¥è¯†"><span>1.6 Eurekaè‡ªæˆ‘ä¿æŠ¤ç†è®ºçŸ¥è¯†</span></a></h3><p>é€šä¿—æ¥è®²ï¼š<strong>ç»æƒ…ç‰ˆ</strong> ï¼Œå°±æ˜¯æ”¹é…ç½® ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤</p><p>åŸå…ˆï¼š</p><p>ä¸€å¥è¯ï¼šæŸæ—¶åˆ»æŸä¸€ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼ŒEurekaä¸ä¼šç«‹åˆ»æ¸…ç†ï¼Œä¾æ—§ä¼šå¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ã€‚</p><p>ä¸ºäº†EurekaClientå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œé˜²æ­¢ä¸EurekaServerç½‘ç»œä¸é€šæƒ…å†µä¸‹ï¼ŒEurekaServerä¸ä¼šç«‹åˆ»å°†EurekaClientæœåŠ¡å‰”é™¤</p><h2 id="å…­ã€zookeeper-æ›¿ä»£-eureka" tabindex="-1"><a class="header-anchor" href="#å…­ã€zookeeper-æ›¿ä»£-eureka"><span>å…­ã€Zookeeper æ›¿ä»£ Eureka</span></a></h2><h4 id="å› ä¸ºéœ€è¦-è™šæ‹Ÿæœº-æš‚æ—¶æç½®-è¿™ä¸€èŠ‚è‡ªå·±è¿˜æ²¡æœ‰å®è·µ" tabindex="-1"><a class="header-anchor" href="#å› ä¸ºéœ€è¦-è™šæ‹Ÿæœº-æš‚æ—¶æç½®-è¿™ä¸€èŠ‚è‡ªå·±è¿˜æ²¡æœ‰å®è·µ"><span>å› ä¸ºéœ€è¦ è™šæ‹Ÿæœº æš‚æ—¶æç½®ï¼Œè¿™ä¸€èŠ‚è‡ªå·±è¿˜æ²¡æœ‰å®è·µï¼ï¼ï¼</span></a></h4><blockquote><p>ç›¸å¯¹ Eureka ä¸åŒæ˜¯è¿™ä¸ªæ˜¯ä¸Šé¢æåˆ°çš„ æ— æƒ…ç‰ˆï¼Œæœ‰å°±æ˜¯æœ‰æ²¡æœ‰å°±æ˜¯æ²¡æœ‰ï¼Œæ˜¯<strong>ä¸´æ—¶èŠ‚ç‚¹</strong> ï¼Œæ²¡æœ‰Eurekaé‚£å«æƒ…è„‰è„‰ã€‚</p><p>éœ€è¦åœ¨ linux ä¸Šæ“ä½œ zookeeper</p></blockquote><blockquote><p>Qï¼š<mark>éœ€è¦æ˜ç™½ä¸ºä»€ä¹ˆå’Œ Eureka ä¸ä¸€æ ·è¿™ä¸ªéœ€è¦ linuxï¼Ÿï¼Ÿï¼Ÿ</mark></p><p>Aï¼š<strong>eurekaè¦å»ºä¸ªspringbootï¼Œè€ŒZKåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å°±å¼€äº†åšæ³¨å†Œä¸­å¿ƒäº†</strong></p></blockquote><h2 id="ä¸ƒã€consul-ä»£æ›¿-eureka" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€consul-ä»£æ›¿-eureka"><span>ä¸ƒã€Consul ä»£æ›¿ Eureka</span></a></h2><p>zookeeperå¯ä»¥ç”¨ï¼Œä½†æ˜¯ç”¨çš„å°‘ã€‚å¦‚æœæ²¡æœ‰ alibaba çš„ Nacosï¼Œé‚£è¿™ä¸ªåŸºæœ¬å°±æ˜¯ Eureka çš„æ¥ç­äºº</p><h2 id="å…«ã€ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹" tabindex="-1"><a class="header-anchor" href="#å…«ã€ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹"><span>å…«ã€ä¸‰ä¸ªæ³¨å†Œä¸­å¿ƒå¼‚åŒç‚¹</span></a></h2><h6 id="cap" tabindex="-1"><a class="header-anchor" href="#cap"><span><mark>CAPï¼š</mark></span></a></h6><blockquote><p>CAP ç†è®ºå’Œ BASE ç†è®ºæ˜¯åˆ†å¸ƒå¼é¢†åŸŸéå¸¸éå¸¸é‡è¦çš„ä¸¤ä¸ªç†è®ºã€‚ä¸å¤¸å¼ åœ°è¯´ï¼Œåªè¦é—®åˆ°åˆ†å¸ƒå¼ç›¸å…³çš„å†…å®¹ï¼Œé¢è¯•å®˜å‡ ä¹æ˜¯å¿…å®šä¼šé—®è¿™ä¸¤ä¸ªåˆ†å¸ƒå¼ç›¸å…³çš„ç†è®ºã€‚</p><p>ä¸è®ºæ˜¯ä½ é¢è¯•ä¹Ÿå¥½ï¼Œå·¥ä½œä¹Ÿç½¢ï¼Œéƒ½éå¸¸æœ‰å¿…è¦å°†è¿™ä¸¤ä¸ªç†è®ºææ‡‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿç”¨è‡ªå·±çš„ç†è§£ç»™åˆ«äººè®²å‡ºæ¥ã€‚</p><p>æˆ‘è¿™é‡Œå°±ä¸å¤šæè¿™ä¸¤ä¸ªç†è®ºäº†ï¼Œä¸äº†è§£çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹æˆ‘å‰æ®µæ—¶é—´å†™è¿‡çš„ä¸€ç¯‡ç›¸å…³çš„æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247495298&amp;idx=1&amp;sn=965be0f54ab44bda818656db1f21a39f&amp;chksm=cea1a149f9d6285f1169413ab7663ca2a9c1a8440a5ae5816566eb66b20e4d86f5db1002f66c&amp;token=657875872&amp;lang=zh_CN#rd" target="_blank" rel="noopener noreferrer">ã€ŠCAP å’Œ BASE ç†è®ºäº†è§£ä¹ˆï¼Ÿå¯ä»¥ç»“åˆå®é™…æ¡ˆä¾‹è¯´ä¸‹ä¸ï¼Ÿã€‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ã€‚</p></blockquote><ul><li><p><code>Cï¼šConsistency (å¼ºä¸€è‡´æ€§)ï¼š</code></p><ul><li>è¯¥ç‰¹æ€§æ˜¯æŒ‡æ‰€æœ‰èŠ‚ç‚¹åœ¨ç›¸åŒæ—¶åˆ»çš„æ•°æ®å®Œå…¨ä¸€è‡´ï¼ˆå¿½ç•¥ç½‘ç»œå»¶è¿Ÿï¼Œç†æƒ³çš„åŒæ—¶åˆ»æ•°æ®ä¸€è‡´æ€§æ— æ³•å®ç°ï¼‰ã€‚ ä¸€è‡´æ€§å¯ä»¥æ ¹æ®ä¸€è‡´çš„ç¨‹åº¦åˆ’åˆ†ä¸ºå¼ºä¸€è‡´æ€§ï¼Œå¼±ä¸€è‡´æ€§ï¼Œæœ€ç»ˆä¸€è‡´æ€§ã€‚</li><li>Myï¼šAå¥½å®ç°ï¼ŒCè¦æ€ä¹ˆå®ç°ä¿æŒåŒæ­¥å‘¢ï¼Ÿ-&gt; ä¸€äº›ä¸€è‡´æ€§ç®—æ³• ä¾‹å¦‚ <a href="http://thesecretlivesofdata.com/raft/" target="_blank" rel="noopener noreferrer">raft ç®—æ³•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€paxos</li></ul></li><li><p><code>Aï¼šAvailability (å¯ç”¨æ€§)ï¼š</code></p><ul><li>è¯¥ç‰¹æ€§æ˜¯æŒ‡ç³»ç»Ÿä¸ºç”¨æˆ·æä¾›çš„æœåŠ¡å¯ä¸€ç›´ä½¿ç”¨ï¼ˆéå®•æœºèŠ‚ç‚¹ï¼‰ï¼Œä¸ä¼šå‡ºç°ç”¨æˆ·æ“ä½œä¸å…è®¸ç­‰ç”¨æˆ·ä½“éªŒä¸å¥½çš„æƒ…å†µã€‚</li><li>Myï¼šè¿™ä¸ªå¥½ç†è§£ï¼Œå…¶å®ƒèŠ‚ç‚¹éƒ½æ˜¯åŒæ­¥å¥½çš„æ•°æ®8 ä½†æœ‰ä¸ªèŠ‚ç‚¹è¿˜æ²¡åŒæ­¥å¥½æ˜¯7 åˆ«äººè®¿é—®äº†å°±è®¿é—®äº†ã€‚è¿™ä¸ªå¥½å®ç°</li><li><code>BASE ç†è®º</code> æ˜¯å¯¹ CAP ç†è®ºçš„å»¶ä¼¸ï¼ˆ<strong>æ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯å¯¹ CAP ä¸­ AP æ–¹æ¡ˆçš„ä¸€ä¸ªè¡¥å……</strong>ï¼‰ï¼Œæ€æƒ³æ˜¯å³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼ˆCAP çš„ä¸€è‡´æ€§å°±æ˜¯å¼ºä¸€è‡´æ€§ï¼‰ï¼Œä½†å¯ä»¥é‡‡ç”¨é€‚å½“çš„é‡‡å–å¼±ä¸€è‡´æ€§ï¼Œå³æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul></li><li><p><code>Pï¼šPartition tolerance ï¼ˆåˆ†åŒºå®¹é”™æ€§)ï¼š</code></p><ul><li>åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°ç½‘ç»œæ•…éšœçš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿå¯¹å¤–æä¾›æ»¡è¶³ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æœåŠ¡ï¼Œé™¤éæ•´ä¸ªç½‘ç»œç¯å¢ƒéƒ½å‘ç”Ÿäº†æ•…éšœã€‚</li></ul></li></ul><p><strong>æˆ‘å¯ä»¥ç†è§£ä¸ºï¼šCAPæ˜¯ä¸€ç§ç†è®ºï¼Œå…·ä½“è½åœ°å®ç°æ˜¯raftç®—æ³•æ˜¯Cç†è®ºçš„è§£å†³æ–¹æ¡ˆï¼ŒBASEæ˜¯Açš„è§£å†³æ–¹æ¡ˆå— Rightï¼</strong></p><blockquote><p><mark>åæ¥è¡¥å……ï¼šæ··æ·†ç‚¹</mark></p><p><strong>ä»€ä¹ˆæ˜¯ç½‘ç»œåˆ†åŒºï¼Ÿ</strong></p><blockquote><p>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªèŠ‚ç‚¹ä¹‹å‰çš„ç½‘ç»œæœ¬æ¥æ˜¯è¿é€šçš„ï¼Œä½†æ˜¯å› ä¸ºæŸäº›æ•…éšœï¼ˆæ¯”å¦‚éƒ¨åˆ†èŠ‚ç‚¹ç½‘ç»œå‡ºäº†é—®é¢˜ï¼‰æŸäº›èŠ‚ç‚¹ä¹‹é—´ä¸è¿é€šäº†ï¼Œæ•´ä¸ªç½‘ç»œå°±åˆ†æˆäº†å‡ å—åŒºåŸŸï¼Œè¿™å°±å«ç½‘ç»œåˆ†åŒºã€‚</p></blockquote><figure><img src="https://images.zzq8.cn/img/202309071730848.png" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><p>Questionï¼šæ—¢ç„¶ç½‘ç»œéƒ½åˆ†åŒºäº†ä¸ºä»€ä¹ˆè¿˜èƒ½ä¿æŒCP</p><p>Anserï¼šå¦‚æœä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶é€‰æ‹©ä¿æŒä¸€è‡´æ€§ï¼ˆCPï¼‰ï¼Œé‚£ä¹ˆåœ¨åˆ†åŒºæœŸé—´ï¼Œç³»ç»Ÿå°†æ‹’ç»å¯¹å¤„äºåˆ†åŒºä¸­çš„èŠ‚ç‚¹çš„è¯»å†™è¯·æ±‚ï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚è¿™æ„å‘³ç€åˆ†åŒºä¸­çš„èŠ‚ç‚¹å°†æ— æ³•æä¾›æœåŠ¡ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•è¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚ç³»ç»Ÿä¼šç­‰å¾…åˆ†åŒºè§£å†³åï¼Œå†ç»§ç»­æä¾›æœåŠ¡ï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><h3 id="ä¸æ˜¯æ‰€è°“çš„-3-é€‰-2" tabindex="-1"><a class="header-anchor" href="#ä¸æ˜¯æ‰€è°“çš„-3-é€‰-2"><span>ä¸æ˜¯æ‰€è°“çš„â€œ3 é€‰ 2â€</span></a></h3><p>åœ¨ç³»ç»Ÿå‘ç”Ÿâ€œåˆ†åŒºâ€çš„æƒ…å†µä¸‹ï¼ŒCAP ç†è®ºåªèƒ½æ»¡è¶³ CP æˆ–è€… APã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å‰ææ˜¯ç³»ç»Ÿå‘ç”Ÿäº†â€œåˆ†åŒºâ€</p><p><mark>å¦‚æœç³»ç»Ÿæ²¡æœ‰å‘ç”Ÿâ€œåˆ†åŒºâ€çš„è¯ï¼ŒèŠ‚ç‚¹é—´çš„ç½‘ç»œè¿æ¥é€šä¿¡æ­£å¸¸çš„è¯ï¼Œä¹Ÿå°±ä¸å­˜åœ¨ P äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŒæ—¶ä¿è¯ C å’Œ A äº†ã€‚</mark></p><p>å› æ­¤ï¼ŒAP æ–¹æ¡ˆåªæ˜¯åœ¨ç³»ç»Ÿå‘ç”Ÿåˆ†åŒºçš„æ—¶å€™æ”¾å¼ƒä¸€è‡´æ€§ï¼Œè€Œä¸æ˜¯æ°¸è¿œæ”¾å¼ƒä¸€è‡´æ€§ã€‚åœ¨åˆ†åŒºæ•…éšœæ¢å¤åï¼Œç³»ç»Ÿåº”è¯¥è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚è¿™ä¸€ç‚¹å…¶å®å°±æ˜¯ BASE ç†è®ºå»¶ä¼¸çš„åœ°æ–¹ã€‚</p></blockquote><p>raftç®—æ³•ï¼šraftæ˜¯ä¸€ç§åè®®</p><ul><li>ä»»ä½•èŠ‚ç‚¹æœ‰3çŠ¶æ€ï¼Œleaderï¼ˆé¢†å¯¼ï¼‰ï¼Œfollowerï¼ˆè·Ÿéšï¼‰ï¼Œcandidateï¼ˆå€™é€‰ï¼‰</li><li>é¢†å¯¼é€‰ä¸¾ï¼šå¿…é¡»é€‰å‡ºä¸€ä¸ªå”¯ä¸€çš„leaderï¼Œä¸ç„¶è¦ä¸€ç›´æŠ•ç¥¨</li><li>æ—¥å¿—å¤åˆ¶ï¼šåœ¨å¿ƒè·³æ—¶é—´çš„æ—¶å€™å‘é€</li></ul><p><mark>BASEï¼š</mark></p><ul><li>åŸºæœ¬å¯ç”¨ï¼ˆ<code>B</code>asically <code>A</code>vailableï¼‰ <ul><li>åŸºæœ¬å¯ç”¨æ˜¯æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼ˆä¾‹å¦‚å“åº”æ—¶é—´ã€åŠŸèƒ½ä¸Šçš„å¯ç”¨æ€§ï¼‰ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸºæœ¬å¯ç”¨ç»ä¸ç­‰ä»·äºç³»ç»Ÿä¸å¯ç”¨ã€‚ <ul><li>å“åº”æ—¶é—´ä¸Šçš„æŸå¤±ï¼šæ­£å¸¸æƒ…å†µä¸‹æœç´¢å¼•æ“éœ€è¦åœ¨ 0.5 ç§’ä¹‹å†…è¿”å›ç»™ç”¨æˆ·ç›¸åº”çš„æŸ¥è¯¢ç»“æœï¼Œä½†ç”±äºå‡ºç°æ•…éšœï¼ˆæ¯”å¦‚ç³»ç»Ÿéƒ¨åˆ†æœºæˆ¿å‘ç”Ÿæ–­ç”µæˆ–æ–­ç½‘æ•…éšœï¼‰ï¼ŒæŸ¥è¯¢ç»“æœçš„å“åº”æ—¶é—´å¢åŠ åˆ°äº† 1~2 ç§’ã€‚</li><li>åŠŸèƒ½ä¸Šçš„æŸå¤±ï¼šè´­ç‰©ç½‘ç«™åœ¨è´­ç‰©é«˜å³°ï¼ˆå¦‚åŒåä¸€ï¼‰æ—¶ï¼Œä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé™çº§é¡µé¢ã€‚</li></ul></li></ul></li><li>è½¯çŠ¶æ€ï¼ˆ<code>S</code>oft Stateï¼‰ <ul><li>è½¯çŠ¶æ€æ˜¯æŒ‡å…è®¸ç³»ç»Ÿå­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œè€Œè¯¥ä¸­é—´çŠ¶æ€ä¸ä¼šå½±å“ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ã€‚åˆ†å¸ƒå¼å­˜å‚¨ä¸­ä¸€èˆ¬ä¸€ä»½æ•°æ®ä¼šæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œå…è®¸ä¸åŒå‰¯æœ¬åŒæ­¥çš„å»¶æ—¶å°±æ˜¯è½¯çŠ¶æ€çš„ä½“ç°ã€‚mysql replication çš„å¼‚æ­¥å¤åˆ¶ä¹Ÿæ˜¯ä¸€ç§ä½“ç°ã€‚</li></ul></li><li>æœ€ç»ˆä¸€è‡´æ€§ï¼ˆ<code>E</code>ventual Consistencyï¼‰ <ul><li>å‡å¦‚Gulimallè®¢å•æœåŠ¡æ‰å…¶å®ƒä¸šåŠ¡éƒ½å›æ»šäº†ï¼Œä½†è®¢å•å´åˆ›å»ºäº†ï¼ˆæœ¬æ¥ä¸è¯¥æœ‰ï¼‰ã€‚åé¢å¯ä»¥åˆ©ç”¨ä¸€äº›æ‰‹æ®µæ ¡éªŒå®ƒä¸è¯¥å­˜åœ¨å¹¶åˆ äº†å®ƒ</li></ul></li></ul><p><a href="../03%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1&amp;%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.pdf">åˆ†å¸ƒå¼äº‹åŠ¡å‡ ç§æ–¹æ¡ˆ</a></p><p>CAPç†è®ºçš„æ ¸å¿ƒæ˜¯ï¼š<strong>ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶å¾ˆå¥½çš„æ»¡è¶³ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªéœ€æ±‚</strong>ã€‚</p><blockquote><p>Q: <strong>ä¸ºä»€ä¹ˆä¸èƒ½åŒæ—¶æ»¡è¶³3ä¸ª</strong></p><p>A: <a href="https://zhuanlan.zhihu.com/p/355972182" target="_blank" rel="noopener noreferrer">+ å¦‚æœä¸æ”¯æŒPï¼Œé‚£ä¹ˆå°±æ— åˆ†å¸ƒå¼æ¦‚å¿µäº†ã€‚ + ç”¨æˆ·å‘èŠ‚ç‚¹1å†™å…¥ä¸€ä¸ªå€¼ï¼ŒèŠ‚ç‚¹2ç”±äºåˆ†åŒºæ— æ³•æ›´æ–°è¯¥å€¼ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¸ä¸€è‡´ã€‚<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>è¿™ä¸€ç‚¹ç®€è€Œè¨€ä¹‹ï¼šç³»ç»Ÿä¸­çš„æŸä¸ªèŠ‚ç‚¹åœ¨è¿›è¡Œå†™æ“ä½œã€‚ä¸ºäº†ä¿è¯ Cï¼Œ å¿…é¡»è¦<strong>ç¦æ­¢å…¶ä»–èŠ‚ç‚¹çš„è¯»å†™æ“ä½œ</strong>ï¼Œè¿™å°±å’Œ A å‘ç”Ÿå†²çªäº†ã€‚</p></blockquote><blockquote><p>Q: <strong>æ²¡æœ‰å‘ç”Ÿç½‘ç»œåˆ†åŒºæ—¶å€™ï¼Œç³»ç»Ÿåº”è¯¥é€‰æ‹©ä»€ä¹ˆç‰¹æ€§ï¼Ÿ</strong> A: + å…¶å®æ­£å¸¸æƒ…å†µä¸‹éƒ½ä¸ä¼šå‘ç”Ÿç½‘ç»œåˆ†åŒºï¼Œé‚£ä¹ˆç³»ç»Ÿè®¾è®¡çš„æ—¶å€™éœ€è¦è€ƒè™‘åˆ°æ»¡è¶³CAç‰¹æ€§ï¼Œåªæœ‰å½“ç³»ç»Ÿå‘ç”Ÿåˆ†åŒºæ—¶å€™ï¼Œæ ¹æ®åœºæ™¯ç‰¹æ€§é€‰æ‹©CPæˆ–è€…AP</p></blockquote><blockquote><p>Q: <strong>å…³äº P çš„ç†è§£</strong></p><p>A: <a href="http://www.mamicode.com/info-detail-1263729.html" target="_blank" rel="noopener noreferrer">ç°å®æƒ…å†µä¸‹æˆ‘ä»¬é¢å¯¹çš„æ˜¯ä¸€ä¸ªä¸å¯é çš„ç½‘ç»œ - &gt; ç½‘ç»œä¸¢åŒ…ã€æœ‰ä¸€å®šæ¦‚ç‡å®•æœºçš„è®¾å¤‡ - &gt; èŠ‚ç‚¹å®•æœºï¼Œè¿™ä¸¤ä¸ªå› ç´ éƒ½ä¼šå¯¼è‡´Partitionï¼Œå› è€Œåˆ†å¸ƒå¼ç³»ç»Ÿå®ç°ä¸­ P æ˜¯ä¸€ä¸ªå¿…é¡»é¡¹ï¼Œè€Œä¸æ˜¯å¯é€‰é¡¹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ˆç°å®ç”Ÿæ´»ä¸­æˆ‘ä»¬æ²¡åŠæ³•ä¿è¯ç½‘ç»œä¸ä¸­æ–­ç½‘çº¿ä¸ä¼šæ–­ï¼Œé™¤éå•å°æœºå™¨CAè‡ªå·±æœ¬åœ°è®¿é—®è‡ªå·±localhostä½†ä¸å¯èƒ½ï¼‰</p><p>é‡åˆ°æŸä¸ªèŠ‚ç‚¹æˆ–ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™ï¼Œé›†ç¾¤ä¸‹ä»ç„¶æœ‰èŠ‚ç‚¹èƒ½å¤ŸæŒç»­æä¾›æœåŠ¡ï¼ˆæœåŠ¡ï¼šæœåŠ¡åªèƒ½åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´å–èˆï¼‰</p></blockquote><p>å› æ­¤ï¼Œæ ¹æ®CAPåŸç†å°†NoSQLæ•°æ®åº“åˆ†æˆäº†æ»¡è¶³CAåŸåˆ™ã€æ»¡è¶³CPåŸåˆ™å’Œæ»¡è¶³APåŸåˆ™ä¸‰å¤§ç±»:</p><figure><img src="https://images.zzq8.cn/img/202205301552992.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>APæ¶æ„ï¼ˆEurekaï¼‰</p><figure><img src="https://images.zzq8.cn/img/202205301552994.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>CPæ¶æ„ï¼ˆZooKeeper/Consulï¼‰</p><figure><img src="https://images.zzq8.cn/img/202205301552734.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="æœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡è°ƒç”¨"><span><mark>------æœåŠ¡è°ƒç”¨------</mark></span></a></h2><h2 id="ä¸€ã€ribbonâœ”" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ribbonâœ”"><span>ä¸€ã€Ribbonâœ”</span></a></h2><h3 id="_1-å‰è¨€" tabindex="-1"><a class="header-anchor" href="#_1-å‰è¨€"><span>1. å‰è¨€</span></a></h3><blockquote><p>Spring Cloud Ribbonæ˜¯åŸºäºNetflix Ribbonå®ç°çš„ä¸€å¥— <strong><mark>å®¢æˆ·ç«¯</mark>è´Ÿè½½å‡è¡¡çš„å·¥å…·</strong>ã€‚</p><p>è´Ÿè½½å‡è¡¡ + RestTemplateè°ƒç”¨</p></blockquote><p>ä¸»è¦åŠŸèƒ½æ˜¯æä¾› <strong>å®¢æˆ·ç«¯çš„è½¯ä»¶è´Ÿè½½å‡è¡¡ç®—æ³•å’ŒæœåŠ¡è°ƒç”¨</strong>ã€‚</p><p>Ribbonç›®å‰ä¹Ÿè¿›å…¥ç»´æŠ¤æ¨¡å¼ã€‚</p><p>Ribbonæœªæ¥å¯èƒ½è¢«Spring Cloud LoadBalaceræ›¿ä»£ã€‚</p><blockquote><p>Ribbonæœ¬åœ°è´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯VS NginxæœåŠ¡ç«¯è´Ÿè½½å‡è¡¡åŒºåˆ«</p></blockquote><p>Nginxæ˜¯æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼Œå®¢æˆ·ç«¯æ‰€æœ‰è¯·æ±‚éƒ½ä¼šäº¤ç»™nginxï¼Œç„¶åç”±nginxå®ç°è½¬å‘è¯·æ±‚ã€‚å³è´Ÿè½½å‡è¡¡æ˜¯ç”±æœåŠ¡ç«¯å®ç°çš„ã€‚ Ribbonæœ¬åœ°è´Ÿè½½å‡è¡¡ï¼Œåœ¨è°ƒç”¨å¾®æœåŠ¡æ¥å£æ—¶å€™ï¼Œä¼šåœ¨æ³¨å†Œä¸­å¿ƒä¸Šè·å–æ³¨å†Œä¿¡æ¯æœåŠ¡åˆ—è¡¨ä¹‹åç¼“å­˜åˆ° JVM æœ¬åœ°ï¼Œä»è€Œåœ¨æœ¬åœ°å®ç°RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æŠ€æœ¯ã€‚</p><h3 id="_2-ribbonçš„è´Ÿè½½å‡è¡¡å’Œrestè°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_2-ribbonçš„è´Ÿè½½å‡è¡¡å’Œrestè°ƒç”¨"><span>2. Ribbonçš„è´Ÿè½½å‡è¡¡å’ŒRestè°ƒç”¨</span></a></h3><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code>spring-cloud-starter-netflix-eureka-server
spring-cloud-starter-netflix-ribbon

å…ˆå‰å·¥ç¨‹é¡¹ç›®æ²¡æœ‰å¼•å…¥spring-cloud-starter-ribbonä¹Ÿå¯ä»¥ä½¿ç”¨ribbonã€‚
è¿™æ˜¯å› ä¸ºspring-cloud-starter-netflix-eureka-clientè‡ªå¸¦äº†spring-cloud-starter-ribbonå¼•ç”¨ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‰é¢æµ‹è¯•çš„æ—¶å€™ï¼Œ8001ã€8002 é»˜è®¤çš„æ˜¯ <strong>è½®è¯¢</strong> è´Ÿè½½è®¿é—®ï¼Œæœ‰ 7 å¤§è´Ÿè½½ç®—æ³•</p><h3 id="_3-ribbonè´Ÿè½½è§„åˆ™æ›¿æ¢" tabindex="-1"><a class="header-anchor" href="#_3-ribbonè´Ÿè½½è§„åˆ™æ›¿æ¢"><span>3. Ribbonè´Ÿè½½è§„åˆ™æ›¿æ¢</span></a></h3><p>1.ä¿®æ”¹cloud-consumer-order80</p><p>2.æ³¨æ„é…ç½®ç»†èŠ‚</p><p>å®˜æ–¹æ–‡æ¡£æ˜ç¡®ç»™å‡ºäº†è­¦å‘Š:</p><p><strong>è¿™ä¸ªè‡ªå®šä¹‰é…ç½®ç±»ä¸èƒ½æ”¾åœ¨@ComponentScanæ‰€æ‰«æçš„å½“å‰åŒ…ä¸‹ä»¥åŠå­åŒ…ä¸‹</strong>ï¼Œ</p><p>å¦åˆ™æˆ‘ä»¬è‡ªå®šä¹‰çš„è¿™ä¸ªé…ç½®ç±»å°±ä¼šè¢«æ‰€æœ‰çš„Ribbonå®¢æˆ·ç«¯æ‰€å…±äº«ï¼Œè¾¾ä¸åˆ°ç‰¹æ®ŠåŒ–å®šåˆ¶çš„ç›®çš„äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ä¸è¦å’Œå¯åŠ¨ç±»ä¸€ä¸ªåŒ…è·¯å¾„</p><p>æˆ‘è¿™é‡Œ</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@RibbonClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;cloud-payment-service&quot;</span><span class="token punctuation">,</span> configuration <span class="token operator">=</span> <span class="token class-name">MySelfRule</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
name æˆ‘æ˜¯å°å†™æ‰ç”Ÿæ•ˆ ï¼ï¼ï¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ‰‹å†™è½®è¯¢ç®—æ³•ï¼Œè‡ªå·±å¢ƒç•Œæ²¡åˆ° å…ˆæ¬ ç€ï¼</strong></p><p>åˆ°æ—¶å€™ä¼°è®¡å¾—è¿˜å€º</p><h2 id="äºŒã€openfeignâœ”" tabindex="-1"><a class="header-anchor" href="#äºŒã€openfeignâœ”"><span>äºŒã€OpenFeignâœ”</span></a></h2><h3 id="_1-openfeignæœåŠ¡è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_1-openfeignæœåŠ¡è°ƒç”¨"><span>1. OpenFeignæœåŠ¡è°ƒç”¨</span></a></h3><blockquote><p><strong>TODOï¼šå°±ç®—é…äº†è¶…æ—¶æ—¶é—´ ç¬¬ä¸€æ¬¡è·‘ä¹Ÿè€æ˜¯è¶…æ—¶ï¼Œåé¢å°±ä¸ä¼šäº†</strong> è¿™æ˜¯ç”±äºåœ¨è°ƒç”¨å…¶ä»–å¾®æœåŠ¡æ¥å£å‰ï¼Œä¼šå»è¯·æ±‚è¯¥å¾®æœåŠ¡çš„ç›¸å…³ä¿¡æ¯(åœ°å€ã€ç«¯å£ç­‰)ï¼Œå¹¶åšä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œç”±äºé»˜è®¤çš„<a href="https://so.csdn.net/so/search?q=%E6%87%92%E5%8A%A0%E8%BD%BD&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">æ‡’åŠ è½½<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ç‰¹æ€§ï¼Œå¯¼è‡´äº†åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œå‡ºç°è¶…æ—¶çš„æƒ…å†µ <strong>è§£å†³ï¼šRibboné…ç½®é¥¥é¥¿åŠ è½½ï¼ˆæœ€ä½³ï¼‰</strong></p><p><strong>æ³¨æ„</strong>: Feign æ˜¯æ•´åˆè¿›äº† Ribbon çš„ï¼Œå¤©ç”Ÿå¸¦ç€ä»– Feignæ˜¯åŸºäºHTTPå®¢æˆ·ç«¯çš„å£°æ˜å¼WebæœåŠ¡å®¢æˆ·ç«¯</p><p>ä»¥å‰æ˜¯: Ribbon+RestTemplate ä¸€å¥—æ¨¡ç‰ˆåŒ–çš„è°ƒç”¨æ–¹æ³•</p><p>ç°åœ¨ç”¨ OpenFeign å®šä¹‰ä¸€ä¸ª @FeignClient(&quot;æœåŠ¡å&quot;) åˆ°æ¥å£å°±è¡Œï¼Œåƒ @Mapper çš„æ„Ÿè§‰ä¸€æ · -&gt; æ¥å£ + æ³¨è§£</p></blockquote><p>ä»¥å‰è¦æä¸€ä¸ªé…ç½®ç±»@LoadBalancedè¿”å›ä¸€ä¸ªRestTemplateçš„Bean ç„¶åControllerå†ç”¨è¿™ä¸ªrestTemplate Bean</p><p>ç°åœ¨ Service æ¥å£å®šä¹‰ä¸€ä¸ª @FeignClient æ³¨è§£ æŒ‡å‘æœåŠ¡æä¾›è€…payment å°±å¯ä»¥ç›´æ¥åœ¨æœ¬80è°ƒç”¨8001çš„ï¼ˆä¹Ÿå°±æ˜¯æŒ‡å‘æœåŠ¡æä¾›è€…çš„ä¸œè¥¿ï¼‰</p><p>æ€»ç»“ï¼šæƒ³è¦è¿œç¨‹è°ƒç”¨åˆ«çš„æœåŠ¡</p><p>1ï¼‰ã€å¼•å…¥open-feign</p><p>2ï¼‰ã€ç¼–å†™ä¸€ä¸ªæ¥å£ï¼Œå‘Šè¯‰ SpringCloud è¿™ä¸ªæ¥å£éœ€è¦è°ƒç”¨è¿œç¨‹æœåŠ¡</p><p>â€‹ 1ã€å£°æ˜æ¥å£çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯è°ƒç”¨å“ªä¸ªè¿œç¨‹æœåŠ¡çš„å“ªä¸ªè¯·æ±‚</p><p>3ï¼‰ã€å¼€å¯è¿œç¨‹è°ƒç”¨åŠŸèƒ½ï¼Œåœ¨ä¸»å¯åŠ¨ç±»åŠ  @EnableFeignClients</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * è¿™æ˜¯ä¸€ä¸ªå£°æ˜å¼çš„è¿œç¨‹è°ƒç”¨
  */</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;gulimall-coupon&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CouponFeignService</span> <span class="token punctuation">{</span>
    <span class="token comment">//ä» gulimall-coupon ä¸­æ‰¾ /coupon/coupon/member/list è¿™ä¸ªæ–¹æ³•</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/coupon/coupon/member/list&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">memberCoupons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä¸»å¯åŠ¨ç±»</span>
<span class="token annotation punctuation">@EnableFeignClients</span><span class="token punctuation">(</span><span class="token string">&quot;com.zzq.gulimall.member.feign&quot;</span><span class="token punctuation">)</span>


<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>è‡ªå·±è¿™è¾¹çš„ <span class="token class-name">Model</span> ä¸šåŠ¡è°ƒç”¨å¤„ç†
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">CouponFeignService</span> couponFeignService<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * DIY
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/coupons&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token class-name">RPCTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">MemberEntity</span> memberEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemberEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memberEntity<span class="token punctuation">.</span><span class="token function">setNickname</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// Here</span>
        <span class="token class-name">R</span> r <span class="token operator">=</span> couponFeignService<span class="token punctuation">.</span><span class="token function">memberCoupons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;member&quot;</span><span class="token punctuation">,</span>memberEntity<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;coupons&quot;</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;coupons&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-openfeignè¶…æ—¶æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#_2-openfeignè¶…æ—¶æ§åˆ¶"><span>2. OpenFeignè¶…æ—¶æ§åˆ¶</span></a></h3><blockquote><p><strong>OpenFeigné»˜è®¤ç­‰å¾…1ç§’é’Ÿï¼Œè¶…è¿‡åæŠ¥é”™</strong></p><p>å®¢æˆ·ç«¯åªç­‰1ç§’é’Ÿï¼ŒæœåŠ¡ç«¯è¶…è¿‡äº†1ç§’é’Ÿ</p></blockquote><p>åœºæ™¯ï¼šæ•…æ„æŠŠæœåŠ¡çš„æä¾›è€… 8001 ç«¯ä¸šåŠ¡è®¾æˆè€—è´¹3ç§’é’Ÿï¼Œè¯æ˜ä¸Šé¢é—®é¢˜ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å°±ä¼šæŠ¥é”™ï¼</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketTimeoutException</span><span class="token operator">:</span> <span class="token class-name">Read</span> timed out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>YMLæ–‡ä»¶é‡Œéœ€è¦å¼€å¯OpenFeignå®¢æˆ·ç«¯è¶…æ—¶æ§åˆ¶</strong></p><p>æ³¨æ„ï¼šç›´æ¥ç”¨å°±è¡Œ,è¿™åªæ˜¯<mark>ideaä¸ç»™æç¤º</mark>,ä¸å½±å“æ•ˆæœ</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment">#è®¾ç½®feignå®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´(OpenFeigné»˜è®¤æ”¯æŒribbon)(å•ä½ï¼šæ¯«ç§’)</span>
<span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
  <span class="token comment">#æŒ‡çš„æ˜¯å»ºç«‹è¿æ¥æ‰€ç”¨çš„æ—¶é—´ï¼Œé€‚ç”¨äºç½‘ç»œçŠ¶å†µæ­£å¸¸çš„æƒ…å†µä¸‹,ä¸¤ç«¯è¿æ¥æ‰€ç”¨çš„æ—¶é—´</span>
  <span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token number">60000</span>
  <span class="token comment">#æŒ‡çš„æ˜¯å»ºç«‹è¿æ¥åä»æœåŠ¡å™¨è¯»å–åˆ°å¯ç”¨èµ„æºæ‰€ç”¨çš„æ—¶é—´</span>
  <span class="token key atrule">ConnectTimeout</span><span class="token punctuation">:</span> <span class="token number">60000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-openfeignæ—¥å¿—å¢å¼º" tabindex="-1"><a class="header-anchor" href="#_3-openfeignæ—¥å¿—å¢å¼º"><span>3. OpenFeignæ—¥å¿—å¢å¼º</span></a></h3><ol><li>config ä¸­æ³¨å†Œä¸€ä¸ª Beanï¼ˆLogger.Levelï¼‰</li><li>yaml ä¸­é…ç½®feignæ—¥å¿—ä»¥ä»€ä¹ˆçº§åˆ«ç›‘æ§å“ªä¸ªæ¥å£</li></ol><h3 id="_4-è¡¥å……-gulimall" tabindex="-1"><a class="header-anchor" href="#_4-è¡¥å……-gulimall"><span>4.è¡¥å……ï¼šGuliMall</span></a></h3><h4 id="_4-1-æºç " tabindex="-1"><a class="header-anchor" href="#_4-1-æºç "><span>4.1.æºç </span></a></h4><ol><li><p>æ„é€ è¯·æ±‚æ•°æ®ï¼Œå°†å¯¹è±¡è½¬ä¸ºjsonï¼› RequestTemplate template = buildTemplateFromArgs,createï¼ˆargvï¼‰ï¼›</p></li><li><p>å‘é€è¯·æ±‚è¿›è¡Œæ‰§è¡Œï¼ˆæ‰§è¡ŒæˆåŠŸä¼šè§£ç å“åº”æ•°æ®ï¼‰ï¼š executeAndDecodeï¼ˆtemplateï¼‰ï¼›</p></li><li><p>æ‰§è¡Œè¯·æ±‚ä¼šæœ‰é‡è¯•æœºåˆ¶</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">executeAndDecode</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RetryableException</span> var8<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    xxx
	retryer<span class="token punctuation">.</span><span class="token function">continueOrPropagate</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
	<span class="token keyword">continue</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="_4-2-é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-2-é—®é¢˜"><span>4.2.é—®é¢˜</span></a></h4><p>Feignè¿œç¨‹è°ƒç”¨ä¸¢å¤±è¯·æ±‚å¤´ï¼šè®¢å•æ¨¡å—çš„ Feign æºç ä¼šè‡ªåŠ¨åˆ› Request å¯¼è‡´ä¸¢å¤± Cookieã€‚è€Œåº•å±‚è‡ªåˆ›çš„æ—¶å€™ç”¨åˆ°æ‹¦æˆªå™¨å¢å¼ºï¼ˆå³DIY ä¸ªæ‹¦æˆªå™¨æŠŠåŸRequset Cookieæ”¾æ–°Requestï¼‰ è§£å†³é‡ç‚¹ï¼šSpringç±» <code>RequestContextHolder</code></p><p>è¡¥å……æˆ‘çš„é—®é¢˜ï¼š</p><blockquote><p>openfeignä¼šæœ‰ä¸¢å¤±è¯·æ±‚å¤´çš„æƒ…å†µæ˜¯å› ä¸ºå®ƒæ˜¯åŸºäºhttpè¯·æ±‚ï¼Œè€Œhttpè¯·æ±‚åˆæ˜¯æ— çŠ¶æ€åè®®çš„åŸå› å—</p></blockquote><p>OpenFeignæ˜¯ä¸€ä¸ªåŸºäºHTTPåè®®çš„Java HTTPå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–HTTP APIçš„è°ƒç”¨ã€‚å®ƒä¸ä¼šå¯¼è‡´ä¸¢å¤±è¯·æ±‚å¤´çš„æƒ…å†µï¼Œå› ä¸ºHTTPè¯·æ±‚å¤´æ˜¯åœ¨æ¯ä¸ªè¯·æ±‚ä¸­æ˜ç¡®å‘é€çš„ï¼Œæ— è®ºæ˜¯ä½¿ç”¨OpenFeignè¿˜æ˜¯å…¶ä»–HTTPå®¢æˆ·ç«¯åº“ã€‚</p><p><strong>HTTPåè®®æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„</strong>ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¿ç•™ä»»ä½•å…³äºå®¢æˆ·ç«¯çš„çŠ¶æ€ä¿¡æ¯ã€‚ä½†æ˜¯ï¼ŒHTTPåè®®å…è®¸åœ¨è¯·æ±‚å¤´ä¸­å‘é€çŠ¶æ€ä¿¡æ¯ï¼Œä»¥ä¾¿æœåŠ¡å™¨å¯ä»¥äº†è§£å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚è¿™äº›çŠ¶æ€ä¿¡æ¯å¯ä»¥åŒ…æ‹¬è®¤è¯ä»¤ç‰Œã€ä¼šè¯IDã€è¯·æ±‚å‚æ•°ç­‰ã€‚</p><p>OpenFeignå¯ä»¥é€šè¿‡è®¾ç½®è¯·æ±‚å¤´æ¥å‘é€è¿™äº›çŠ¶æ€ä¿¡æ¯ï¼Œä»¥ä¾¿æœåŠ¡å™¨å¯ä»¥äº†è§£å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚å¦‚æœè¯·æ±‚å¤´åœ¨OpenFeignä¸­ä¸¢å¤±ï¼Œå¯èƒ½æ˜¯ç”±äºOpenFeigné…ç½®ä¸æ­£ç¡®æˆ–ç”±äºç½‘ç»œé—®é¢˜å¯¼è‡´çš„ã€‚ä½†è¿™å¹¶ä¸æ˜¯HTTPåè®®æœ¬èº«çš„é™åˆ¶ï¼Œè€Œæ˜¯å®¢æˆ·ç«¯çš„å®ç°é—®é¢˜ã€‚</p><h2 id="æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡é™çº§"><span><mark>------æœåŠ¡é™çº§------</mark></span></a></h2><h2 id="ä¸€ã€hystrix-Ã—" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€hystrix-Ã—"><span>ä¸€ã€Hystrix Ã—</span></a></h2><blockquote><p>è±ªçŒªå“¥å‡ºé“å³å·…å³°ï¼Œåé¢é‚£äº›éƒ½æœ‰æŠ„å®ƒçš„å€Ÿé‰´å®ƒçš„ç†å¿µã€‚å®˜ç½‘æ¨èç”¨ resilience4j ä½†è¿™é‡Œæ˜¯ä¸­å›½ï¼Œè¨€å¤–ä¹‹æ„å°±æ˜¯æ²¡æœ‰ç”¨è¿™ä¸ªï¼Œéƒ½ä¼šå‘Alibabaé æ‹¢ï¼</p><p>å­¦ä¹ ç†å¿µè®¾è®¡å’Œæ€æƒ³ï¼ŒAlibaba sentinelåé¢éƒ½æ˜¯ä¸€äº›ç»†èŠ‚å’Œé…ç½®ï¼ˆå¤©ä¸‹æ–‡ç« ä¸€å †æŠ„ï¼‰</p></blockquote><p><strong>æœåŠ¡é›ªå´©</strong></p><p>å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´è°ƒç”¨çš„æ—¶å€™ï¼Œå‡è®¾å¾®æœåŠ¡Aè°ƒç”¨å¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cï¼Œå¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cåˆè°ƒç”¨å…¶å®ƒçš„å¾®æœåŠ¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ã€‚<strong>å¦‚æœæ‰‡å‡ºçš„é“¾è·¯ä¸ŠæŸä¸ªå¾®æœåŠ¡çš„è°ƒç”¨å“åº”æ—¶é—´è¿‡é•¿æˆ–è€…ä¸å¯ç”¨ï¼Œå¯¹å¾®æœåŠ¡Açš„è°ƒç”¨å°±ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿèµ„æºï¼Œè¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒï¼Œæ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€.</strong></p><p><strong>Hystrixæ˜¯ä»€ä¹ˆ</strong></p><p>ç±»ä¼¼ç†”æ–­ä¿é™©ä¸</p><h3 id="_1-é‡è¦æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1-é‡è¦æ¦‚å¿µ"><span>1. é‡è¦æ¦‚å¿µ</span></a></h3><ul><li><p>æœåŠ¡é™çº§</p><ul><li>ä¾‹å¦‚æ‰“10086äººå·¥ï¼Œåå¸­å¿™ç»§ç»­ç­‰å¾…è¯·æŒ‰1æ— éœ€ç­‰å¾…è¯·æŒ‚æœº</li><li>åœ¨è¿ç»´æœŸé—´ï¼Œå½“ç³»ç»Ÿå¤„äºé«˜å³°æœŸï¼Œç³»ç»Ÿèµ„æºç´§å¼ ï¼Œæˆ‘ä»¬å¯ä»¥<strong>è®©éæ ¸å¿ƒä¸šåŠ¡é™çº§è¿è¡Œã€‚é™çº§ï¼šæŸäº›æœåŠ¡ä¸å¤„ç†ï¼Œæˆ–è€…ç®€å•å¤„ç†</strong>ã€æŠ›å¼‚å¸¸ã€è¿”å›NULLã€è°ƒç”¨ Mock æ•°æ®ã€è°ƒç”¨ Fallback å¤„ç†é€»è¾‘ã€‘ã€‚</li></ul></li><li><p>æœåŠ¡ç†”æ–­</p><ul><li>ä¿é™©ä¸ï¼Œä¸Šé¢æœåŠ¡é™çº§å¯æ²¡åœ</li><li>è®¾ç½®æœåŠ¡çš„è¶…æ—¶ï¼Œå½“è¢«è°ƒç”¨çš„æœåŠ¡ç»å¸¸å¤±è´¥åˆ°è¾¾æŸä¸ªé˜ˆå€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¯<strong>æ–­è·¯ä¿æŠ¤æœºåˆ¶</strong>ï¼Œåæ¥çš„è¯·æ±‚ä¸å†å»è°ƒç”¨è¿™ä¸ªæœåŠ¡ã€‚æœ¬åœ°ç›´æ¥è¿”å›é»˜è®¤çš„æ•°æ®</li></ul></li><li><p>æœåŠ¡é™æµ</p><ul><li>ç§’æ€é«˜å¹¶å‘ï¼Œè®©å¤§å®¶æ’é˜Ÿ</li></ul></li></ul><p><strong>å“ªäº›æƒ…å†µä¼šå‡ºå‘é™çº§</strong></p><ul><li>ç¨‹åºè¿è¡Œå¯¼å¸¸</li><li>è¶…æ—¶</li><li>æœåŠ¡ç†”æ–­è§¦å‘æœåŠ¡é™çº§</li><li>çº¿ç¨‹æ± /ä¿¡å·é‡æ‰“æ»¡ä¹Ÿä¼šå¯¼è‡´æœåŠ¡é™çº§</li></ul><p>æ³¨æ„ï¼šSpringBoot é»˜è®¤ç»§æ‰¿çš„æ˜¯ Tomcat ï¼Œtomcatçš„é»˜è®¤çš„å·¥ä½œçº¿ç¨‹æ•°</p><h3 id="_2-æœåŠ¡é™çº§" tabindex="-1"><a class="header-anchor" href="#_2-æœåŠ¡é™çº§"><span>2. æœåŠ¡é™çº§</span></a></h3><p>å…ˆ 8001 å…ˆä»è‡ªèº«æ‰¾é—®é¢˜ <strong>åˆ†ä¸¤æ­¥èµ°:</strong></p><ol><li>@Service ä¸­å¯¹æ–¹æ³•é…ç½® @HystrixCommand é‡Œé¢çš„å‚æ•° fallbackMethod æŒ‡å®šå…œåº•çš„æ–¹æ³•</li><li>ä¸»å¯åŠ¨ç±»æ¿€æ´» æ·»åŠ æ–°æ³¨è§£@EnableCircuitBreaker</li></ol><p>80 å¯ä»¥æ ¹æ® 8001 çš„ä¸€æ ·çš„ä¾è‘«èŠ¦ç”»ç“¢</p><h4 id="_2-1-è§£å†³ä»£ç è†¨èƒ€é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-1-è§£å†³ä»£ç è†¨èƒ€é—®é¢˜"><span>2.1 è§£å†³ä»£ç è†¨èƒ€é—®é¢˜</span></a></h4><p>ç›®å‰é—®é¢˜1 æ¯ä¸ªä¸šåŠ¡æ–¹æ³•å¯¹åº”ä¸€ä¸ªå…œåº•çš„æ–¹æ³•ï¼Œä»£ç è†¨èƒ€</p><p>è§£å†³æ–¹æ³•ï¼šæä¸ª Global çš„æ–¹æ³•ï¼Œé»˜è®¤éƒ½ç”¨è¿™ä¸ª</p><p>1:1æ¯ä¸ªæ–¹æ³•é…ç½®ä¸€ä¸ªæœåŠ¡é™çº§æ–¹æ³•ï¼ŒæŠ€æœ¯ä¸Šå¯ä»¥ï¼Œä½†æ˜¯ä¸èªæ˜</p><p>1:Né™¤äº†ä¸ªåˆ«é‡è¦æ ¸å¿ƒä¸šåŠ¡æœ‰ä¸“å±ï¼Œå…¶å®ƒæ™®é€šçš„å¯ä»¥é€šè¿‡@DefaultProperties(defaultFallback = â€œâ€)ç»Ÿä¸€è·³è½¬åˆ°ç»Ÿä¸€å¤„ç†ç»“æœé¡µé¢</p><p>é€šç”¨çš„å’Œç‹¬äº«çš„å„è‡ªåˆ†å¼€ï¼Œé¿å…äº†ä»£ç è†¨èƒ€ï¼Œåˆç†å‡å°‘äº†ä»£ç é‡</p><h4 id="_2-2-hystrixä¹‹é€šé…æœåŠ¡é™çº§feignfallback" tabindex="-1"><a class="header-anchor" href="#_2-2-hystrixä¹‹é€šé…æœåŠ¡é™çº§feignfallback"><span>2.2 Hystrixä¹‹é€šé…æœåŠ¡é™çº§FeignFallback</span></a></h4><p>é—®é¢˜ï¼šæœåŠ¡æä¾›è€… 8001 å®•æœºã€<strong>æœåŠ¡é™çº§ï¼Œå®¢æˆ·ç«¯å»è°ƒç”¨æœåŠ¡ç«¯ï¼Œç¢°ä¸ŠæœåŠ¡ç«¯å®•æœºæˆ–å…³é—­</strong>ã€‘</p><p>è§£å†³ï¼š80 å®ç°æœåŠ¡é™çº§ @FeignClient fallbackå±æ€§ + æä¾›ä¸€ä¸ª Service çš„å®ç°ç±»ã€æœ¬æ¬¡æ¡ˆä¾‹æœåŠ¡é™çº§å¤„ç†æ˜¯åœ¨å®¢æˆ·ç«¯80å®ç°å®Œæˆçš„ï¼Œä¸æœåŠ¡ç«¯8001æ²¡æœ‰å…³ç³»ï¼Œåªéœ€è¦ä¸º<a href="https://so.csdn.net/so/search?q=Feign&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">Feign<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å®¢æˆ·ç«¯å®šä¹‰çš„æ¥å£æ·»åŠ ä¸€ä¸ªæœåŠ¡é™çº§å¤„ç†çš„å®ç°ç±»å³å¯å®ç°è§£è€¦ã€‘</p><h3 id="_3-æœåŠ¡ç†”æ–­" tabindex="-1"><a class="header-anchor" href="#_3-æœåŠ¡ç†”æ–­"><span>3. æœåŠ¡ç†”æ–­</span></a></h3><blockquote><p>ä¸€å®šè¦åŒºåˆ† æœåŠ¡é™çº§ vs æœåŠ¡ç†”æ–­</p></blockquote><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentCircuitBreaker_fallback&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.enabled&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// æ˜¯å¦å¼€å¯æ–­è·¯å™¨</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.requestVolumeThreshold&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// è¯·æ±‚æ¬¡æ•°</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.sleepWindowInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æ—¶é—´çª—å£æœŸ</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.errorThresholdPercentage&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// å¤±è´¥ç‡è¾¾åˆ°å¤šå°‘åè·³é—¸</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡ç†”æ–­çš„å®ç°æ•ˆæœï¼šæœåŠ¡é™çº§åå…œåº•æ–¹æ³•æ‰§è¡Œäº†å¾ˆå¤šæ¬¡å æ¯”è¯·æ±‚è¶…è¿‡é»˜è®¤10ç§’å†…è¶…è¿‡50%çš„è¯·æ±‚å¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™å°±ç®—è¯·æ±‚æ­£ç¡®çš„ä¹Ÿä¼šåˆ°å…œåº•çš„é”™è¯¯æ–¹æ³•ä¸Šå³å¼€å¯æ–­è·¯å™¨ï¼ˆè¿‡ä¸€ä¸‹ä¼šæ¢å¤ï¼‰</p><h5 id="æ–­è·¯å™¨å¼€å¯æˆ–è€…å…³é—­çš„æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ–­è·¯å™¨å¼€å¯æˆ–è€…å…³é—­çš„æ¡ä»¶"><span>æ–­è·¯å™¨å¼€å¯æˆ–è€…å…³é—­çš„æ¡ä»¶</span></a></h5><p>åˆ°è¾¾ä»¥ä¸‹é˜€å€¼ï¼Œæ–­è·¯å™¨å°†ä¼šå¼€å¯ï¼š</p><p>å½“æ»¡è¶³ä¸€å®šçš„é˜€å€¼çš„æ—¶å€™ï¼ˆé»˜è®¤10ç§’å†…è¶…è¿‡20ä¸ªè¯·æ±‚æ¬¡æ•°) å½“å¤±è´¥ç‡è¾¾åˆ°ä¸€å®šçš„æ—¶å€™ï¼ˆé»˜è®¤10ç§’å†…è¶…è¿‡50%çš„è¯·æ±‚å¤±è´¥) å½“å¼€å¯çš„æ—¶å€™ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¸ä¼šè¿›è¡Œè½¬å‘</p><p>ä¸€æ®µæ—¶é—´ä¹‹åï¼ˆé»˜è®¤æ˜¯5ç§’)ï¼Œè¿™ä¸ªæ—¶å€™æ–­è·¯å™¨æ˜¯åŠå¼€çŠ¶æ€ï¼Œä¼šè®©å…¶ä¸­ä¸€ä¸ªè¯·æ±‚è¿›è¡Œè½¬å‘ã€‚å¦‚æœæˆåŠŸï¼Œæ–­è·¯å™¨ä¼šå…³é—­ï¼Œè‹¥å¤±è´¥ï¼Œç»§ç»­å¼€å¯ã€‚</p><p><a href="https://hutool.cn/" target="_blank" rel="noopener noreferrer">Hutoolå›½äº§å·¥å…·ç±»<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å¥½åƒè›®ç»™åŠ›</p><p>For Example:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">//ç”Ÿæˆçš„UUIDæ˜¯å¸¦-çš„å­—ç¬¦ä¸²ï¼Œç±»ä¼¼äºï¼ša5c8a5e8-df2b-4706-bea4-08d0939410e3</span>
<span class="token class-name">String</span> uuid <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç”Ÿæˆçš„æ˜¯ä¸å¸¦-çš„å­—ç¬¦ä¸²ï¼Œç±»ä¼¼äºï¼šb17f24ff026d40949c85a24f4f375d42</span>
<span class="token class-name">String</span> simpleUUID <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">simpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-æœåŠ¡é™æµ" tabindex="-1"><a class="header-anchor" href="#_4-æœåŠ¡é™æµ"><span><strong>4. æœåŠ¡é™æµ</strong></span></a></h4><p>åé¢é«˜çº§ç¯‡è®²è§£alibabaçš„Sentinelè¯´æ˜</p><p>Alibaba sentinel</p><h4 id="_5-hystrixå›¾å½¢åŒ–dashboardæ­å»º" tabindex="-1"><a class="header-anchor" href="#_5-hystrixå›¾å½¢åŒ–dashboardæ­å»º"><span>5. Hystrixå›¾å½¢åŒ–Dashboardæ­å»º</span></a></h4><p>éœ€è¦è‡ªå·±æ­å»ºä¸€ä¸ªç›‘æ§å¹³å° å³ æ–°å»ºä¸€ä¸ª Model é¡¹ç›® å’Œ Eureka ä¸€æ ·ï¼Œä½† Zookeeper å°±ä¸ç”¨ ï¼</p><p>è¿™é‡Œå…¶å®åé¢çš„ Sentinel ä¹Ÿä¸ç”¨å†æ­åŒZookeeper</p><p>çœ‹æ—¥å¿—ä¸æ–¹ä¾¿ï¼Œè¶Šæ¥è¶Šåå‘ä»ªè¡¨ç›˜ï¼ˆå›¾å½¢åŒ–çš„ç›‘æ§ï¼Œæ•°æ®æŠ¥è¡¨çš„å±•ç°ï¼‰</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix-dashboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æœåŠ¡ç½‘å…³" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç½‘å…³"><span><mark>------æœåŠ¡ç½‘å…³------</mark></span></a></h2><p>æŠ€æœ¯é€‰å‹ï¼šä¸€èˆ¬ä¸ä¼šç”¨ zuul äº†ï¼Œéƒ½ç”¨ Gateway</p><h2 id="ä¸€ã€gatewayâœ”" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€gatewayâœ”"><span>ä¸€ã€Gatewayâœ”</span></a></h2><h3 id="_1-å‰è¨€-1" tabindex="-1"><a class="header-anchor" href="#_1-å‰è¨€-1"><span>1. å‰è¨€</span></a></h3><blockquote><p>zuul æ˜¯ Netflix å…¬å¸å‡ºçš„ï¼ŒSpring å…¬å¸ç­‰ä¸åŠäº†å°±è‡ªå·±å‡ºäº† Gatewayï¼ŒGatewayæ˜¯åŸ zuul1.xç‰ˆçš„æ›¿ä»£</p><p><strong>Cloud å…¨å®¶æ¡¶ä¸­æœ‰ä¸ªå¾ˆé‡è¦çš„ç»„ä»¶å°±æ˜¯ç½‘å…³ï¼</strong></p><p>Nginxé’ˆå¯¹ç”¨æˆ·å’Œå‰ç«¯ï¼Œgatewayé’ˆå¯¹å‰ç«¯å’Œåå°æœåŠ¡</p></blockquote><p>ä¼ ç»Ÿçš„Webæ¡†æ¶ï¼Œæ¯”å¦‚è¯´: Struts2ï¼ŒSpringMVCç­‰éƒ½æ˜¯åŸºäºServlet APlä¸Servletå®¹å™¨åŸºç¡€ä¹‹ä¸Šè¿è¡Œçš„ã€‚</p><p>ä½†æ˜¯åœ¨Servlet3.1ä¹‹åæœ‰äº†å¼‚æ­¥éé˜»å¡çš„æ”¯æŒã€‚è€Œ<strong>WebFluxæ˜¯ä¸€ä¸ªå…¸å‹éé˜»å¡å¼‚æ­¥çš„æ¡†æ¶</strong></p><p><strong>å¾®æœåŠ¡æ¶æ„ä¸­ç½‘å…³çš„ä½ç½®</strong></p><blockquote><p>åœºæ™¯ï¼š1å·æœºå™¨çš„7000ç«¯å£æŒ‚æ‰äº†ï¼Œæˆ‘ä¸å¯èƒ½æ‰‹åŠ¨çš„å»ä»£ç æ”¹æˆèƒ½ç”¨çš„2å·æœºå™¨çš„7000ç«¯å£å§</p><p>ç¬¬ä¸€ä¸ªéœ€æ±‚ï¼š10å‡ å°åŠå…¶ä¸€èµ·ä¸Šçº¿ï¼Œç»è¿‡ç½‘å…³åŠ¨æ€çš„è·¯ç”±åˆ°èƒ½ç”¨çš„å„ä¸ªæœåŠ¡ï¼Œä¹Ÿèƒ½ä»æ³¨å†Œä¸­å¿ƒä¸­å®æ—¶åœ°æ„ŸçŸ¥æŸä¸ªæœåŠ¡ä¸Šçº¿è¿˜æ˜¯ä¸‹çº¿ã€‚</p><p>ç¬¬äºŒä¸ªéœ€æ±‚ï¼šç½‘å…³è¿™ä¸€å±‚å¯ä»¥æƒé™æ ¡éªŒï¼Œé™æµæ§åˆ¶</p></blockquote><figure><img src="https://images.zzq8.cn/img/202206291359675.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</strong></p><ol><li>Route(è·¯ç”±) - è·¯ç”±æ˜¯æ„å»ºç½‘å…³çš„åŸºæœ¬æ¨¡å—,å®ƒç”±ID,ç›®æ ‡URI,ä¸€ç³»åˆ—çš„æ–­è¨€å’Œè¿‡æ»¤å™¨ç»„æˆ,å¦‚æ–­è¨€ä¸ºtrueåˆ™åŒ¹é…è¯¥è·¯ç”±ï¼›</li><li>Predicate(æ–­è¨€) - å‚è€ƒçš„æ˜¯Java8çš„java.util.function.Predicateï¼Œå¼€å‘äººå‘˜å¯ä»¥åŒ¹é…<mark>HTTPè¯·æ±‚ä¸­çš„æ‰€æœ‰å†…å®¹</mark>(ä¾‹å¦‚è¯·æ±‚å¤´æˆ–è¯·æ±‚å‚æ•°),å¦‚æœè¯·æ±‚ä¸æ–­è¨€ç›¸åŒ¹é…åˆ™è¿›è¡Œè·¯ç”±ï¼›</li><li>Filter(è¿‡æ»¤) - æŒ‡çš„æ˜¯Springæ¡†æ¶ä¸­GatewayFilterçš„å®ä¾‹,ä½¿ç”¨è¿‡æ»¤å™¨,å¯ä»¥åœ¨è¯·æ±‚è¢«è·¯ç”±å‰æˆ–è€…ä¹‹åå¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ã€‚</li></ol><p>ä¸€å¥è¯æ€»ç»“ï¼šè¯·æ±‚åˆ°è¾¾ç½‘å…³ï¼Œå…ˆ <strong>Predicate</strong> æ˜¯å¦ç¬¦åˆæŸä¸ªè·¯ç”±è§„åˆ™ï¼Œç¬¦åˆå°± <strong>Route</strong> åˆ°æŒ‡å®šåœ°æ–¹ï¼Œä½†éœ€è¦ç»è¿‡ä¸€ç³»åˆ— <strong>Filter</strong> è¿›è¡Œè¿‡æ»¤</p><p><strong>æˆ‘ä»¬ç›®å‰ä¸æƒ³æš´éœ²8001ç«¯å£ï¼Œå¸Œæœ›åœ¨8001å¤–é¢å¥—ä¸€å±‚9527</strong>ï¼Œè¿™æ ·æœ‰äººæ”»å‡»æœ‰ä¸€å±‚æŒ¡ç€</p><ul><li>æ·»åŠ ç½‘å…³å‰ - http://localhost:8001/payment/get/1</li><li>æ·»åŠ ç½‘å…³å - http://localhost:9527/payment/get/1</li><li>ä¸¤è€…è®¿é—®æˆåŠŸï¼Œè¿”å›ç›¸åŒç»“æœ</li></ul><h3 id="_2-é€šè¿‡å¾®æœåŠ¡åå®ç°åŠ¨æ€è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_2-é€šè¿‡å¾®æœåŠ¡åå®ç°åŠ¨æ€è·¯ç”±"><span>2. é€šè¿‡<a href="https://so.csdn.net/so/search?q=%E5%BE%AE%E6%9C%8D%E5%8A%A1&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">å¾®æœåŠ¡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>åå®ç°åŠ¨æ€è·¯ç”±</span></a></h3><p>é»˜è®¤æƒ…å†µä¸‹Gatewayä¼šæ ¹æ®æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡åˆ—è¡¨ï¼Œä»¥æ³¨å†Œä¸­å¿ƒä¸Šå¾®æœåŠ¡åä¸ºè·¯å¾„åˆ›å»ºåŠ¨æ€è·¯ç”±è¿›è¡Œè½¬å‘ï¼Œä»è€Œå®ç°åŠ¨æ€è·¯ç”±çš„åŠŸèƒ½ã€‚</p><p>1ã€ä¿®æ”¹9527çš„yml</p><blockquote><p>â‘ éœ€è¦æ³¨æ„çš„æ˜¯<mark>uriçš„åè®®ä¸ºlbï¼ˆload-balancingï¼‰</mark>ï¼Œè¡¨ç¤ºå¯ç”¨Gatewayçš„<a href="https://so.csdn.net/so/search?q=%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">è´Ÿè½½å‡è¡¡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>åŠŸèƒ½ã€‚ â‘¡lb://serviceNameæ˜¯spring cloud gatewayåœ¨å¾®æœåŠ¡ä¸­è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºçš„è´Ÿè½½å‡è¡¡uriï¼ˆè´Ÿè½½å‡è¡¡åˆ°æŒ‡å®šæœåŠ¡ï¼‰</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9527</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">locator</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#å¼€å¯ä»æ³¨å†Œä¸­å¿ƒåŠ¨æ€åˆ›å»ºè·¯ç”±çš„åŠŸèƒ½ï¼Œåˆ©ç”¨å¾®æœåŠ¡åè¿›è¡Œè·¯ç”±</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh <span class="token comment">#è·¯ç”±çš„IDï¼Œæ²¡æœ‰å›ºå®šè§„åˆ™ä½†è¦æ±‚å”¯ä¸€ï¼Œå»ºè®®é…åˆæœåŠ¡å</span>
          <span class="token comment">#uri: http://localhost:8001   #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/get/<span class="token important">**</span>   <span class="token comment">#æ–­è¨€,è·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> payment_routh2
          <span class="token comment">#uri: http://localhost:8001   #åŒ¹é…åæä¾›æœåŠ¡çš„è·¯ç”±åœ°å€</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/payment/lb/<span class="token important">**</span>   <span class="token comment">#æ–­è¨€,è·¯å¾„ç›¸åŒ¹é…çš„è¿›è¡Œè·¯ç”±</span>


<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>gateway<span class="token punctuation">-</span>service
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€æµ‹è¯• â‘ å¯åŠ¨ä¸€ä¸ªeureka7001+ä¸¤ä¸ªæœåŠ¡æä¾›è€…8001/8002 â‘¡è®¿é—®http://localhost:9527/payment/lb</p><p>ä¼šå‘ç°8001å’Œ8002äº¤æ›¿å‡ºç°</p><p>**è¦ç»è¿‡ä¸‰å…³æ‰èƒ½è¿‡æ¥ï¼š**è¿™ç« å…¶å®å°±å­¦è¿™ä¸‰ä¸ªçš„é…ç½® ä¸»yaml</p><figure><img src="https://images.zzq8.cn/img/202206301448361.png" alt="image-20220630144816418" tabindex="0" loading="lazy"><figcaption>image-20220630144816418</figcaption></figure><ul><li><strong>è·¯ç”±</strong> Route</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## ä¸¤ç§é…ç½®æ–¹å¼ï¼Œ1ï¼‰javaä»£ç @Configuration å’Œ  2ï¼‰yamlé…ç½®</span>
<span class="token comment">## åœ°å€åˆ† 1ï¼‰é™æ€è·¯ç”± å’Œ 2ï¼‰åŠ¨æ€è·¯ç”±çš„åŠŸèƒ½ï¼ˆä¸å†™æ­»ä¸€ä¸ªåœ°å€ï¼‰</span>

<span class="token comment">## è¸©å‘ï¼Œè®°ä½è·¯ç”±çš„å…ˆåé¡ºåºï¼Œä¸‹é¢è¿™æ ·ï¼Œç¬¬äºŒæ¡å°±ä¸ä¼šæ‰§è¡Œï¼ï¼ï¼éœ€è¦è°ƒæ•´è·¯ç”±é¡ºåº</span>
predicates:
            - <span class="token assign-left variable">Path</span><span class="token operator">=</span>/api/**
<span class="token comment">## åˆ«å¿˜äº† **</span>
predicates:
       - <span class="token assign-left variable">Path</span><span class="token operator">=</span>/api/product/**       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>æ–­è¨€</strong> Predicate</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## è¯¥å‘½ä»¤ç›¸å½“äºå‘getè¯·æ±‚ï¼Œä¸”æ²¡å¸¦cookie</span>
<span class="token function">curl</span> http://localhost:9527/payment/lb

<span class="token comment">## å¸¦cookieçš„</span>
<span class="token function">curl</span> http://localhost:9527/payment/lb <span class="token parameter variable">--cookie</span> <span class="token string">&quot;chocolate=chip&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>è¿‡æ»¤å™¨</strong> Filter</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token comment">## å¯¹äº çš„è¯·æ±‚è·¯å¾„/red/blueï¼Œè¿™ä¼šå°†è·¯å¾„è®¾ç½®ä¸º/blueåœ¨å‘å‡ºä¸‹æ¸¸è¯·æ±‚ä¹‹å‰ã€‚è¯·æ³¨æ„ï¼Œç”±äº YAML è§„èŒƒï¼Œ$åº”å°†å…¶æ›¿æ¢ä¸ºã€‚$\</span>
<span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RewritePath=/red/<span class="token punctuation">?</span>(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span> /$\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
 
<span class="token comment">## æ³¨æ„è¿™ä¸ªä¾‹å­ </span>
         <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//gulimall<span class="token punctuation">-</span>product
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/product/<span class="token important">**</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> RewritePath=/api/<span class="token punctuation">?</span>(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span> /$\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
 <span class="token comment">## å‰ç«¯é¡¹ç›®ï¼Œ/api</span>
<span class="token comment">#### http://localhost:88/api/product/category/list/tree  http://localhost:10000/product/category/list/tree</span>


<span class="token comment">## ä¸€èˆ¬æ˜¯ è‡ªå®šä¹‰å…¨å±€GlobalFilter</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æœåŠ¡é…ç½®" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡é…ç½®"><span><mark>------æœåŠ¡é…ç½®------</mark></span></a></h2><p>ä¸‰å¥—ï¼š</p><ol><li><p>Config + Bus</p></li><li><p>Alibaba Nacos</p></li><li><p>æºç¨‹çš„apolloï¼Œä¸Šæµ·æœ‰åäº›</p></li></ol><h2 id="ä¸€ã€config-Ã—" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€config-Ã—"><span>ä¸€ã€Config Ã—</span></a></h2><blockquote><p>æ¯ä¸€ä¸ªModeléƒ½æœ‰ä¸€ä¸ª yamlï¼Œæ”¹çš„å¤ªç—›è‹¦ã€‚äºæ˜¯æœ‰äº† <strong>æœåŠ¡é…ç½®</strong> æŠ€æœ¯</p></blockquote><p>3344 å°±æ˜¯é…ç½®æ€»æ§ä¸­å¿ƒè¿ Git è·å–å®ƒä¸Šé¢çš„ yaml</p><p>3355 å¯ä»¥é€šè¿‡ 3344 æ‹¿åˆ° Git ä¸Šçš„ yaml</p><figure><img src="https://images.zzq8.cn/img/202207011430795.png" alt="image-20220701143051906" tabindex="0" loading="lazy"><figcaption>image-20220701143051906</figcaption></figure><p><strong>æ€ä¹ˆç©</strong></p><p>SpringCloud Configåˆ†ä¸º<strong>æœåŠ¡ç«¯</strong>å’Œ<strong>å®¢æˆ·ç«¯</strong>ä¸¤éƒ¨åˆ†ã€‚</p><ul><li><p>æœåŠ¡ç«¯ä¹Ÿç§°ä¸ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨ï¼Œç”¨æ¥è¿æ¥é…ç½®æœåŠ¡å™¨å¹¶ä¸ºå®¢æˆ·ç«¯æä¾›è·å–é…ç½®ä¿¡æ¯ï¼ŒåŠ å¯†/è§£å¯†ä¿¡æ¯ç­‰è®¿é—®æ¥å£ã€‚</p></li><li><p>å®¢æˆ·ç«¯åˆ™æ˜¯é€šè¿‡æŒ‡å®šçš„é…ç½®ä¸­å¿ƒæ¥ç®¡ç†åº”ç”¨èµ„æºï¼Œä»¥åŠä¸ä¸šåŠ¡ç›¸å…³çš„é…ç½®å†…å®¹ï¼Œå¹¶åœ¨å¯åŠ¨çš„æ—¶å€™ä»é…ç½®ä¸­å¿ƒè·å–å’ŒåŠ è½½é…ç½®ä¿¡æ¯é…ç½®æœåŠ¡å™¨é»˜è®¤é‡‡ç”¨gitæ¥å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œè¿™æ ·å°±æœ‰åŠ©äºå¯¹ç¯å¢ƒé…ç½®è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡gitå®¢æˆ·ç«¯å·¥å…·æ¥æ–¹ä¾¿çš„ç®¡ç†å’Œè®¿é—®é…ç½®å†…å®¹ã€‚</p></li></ul><h3 id="_1-configé…ç½®æ€»æ§ä¸­å¿ƒæ­å»º" tabindex="-1"><a class="header-anchor" href="#_1-configé…ç½®æ€»æ§ä¸­å¿ƒæ­å»º"><span>1. Configé…ç½®æ€»æ§ä¸­å¿ƒæ­å»º</span></a></h3><p>æœåŠ¡ç«¯ä½œç”¨ï¼šé…ç½®å¥½åèƒ½æ‹¿åˆ°Gitä¸­yamlçš„å†…å®¹</p><h3 id="_2-configå®¢æˆ·ç«¯é…ç½®ä¸æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_2-configå®¢æˆ·ç«¯é…ç½®ä¸æµ‹è¯•"><span>2. Configå®¢æˆ·ç«¯é…ç½®ä¸æµ‹è¯•</span></a></h3><p><strong>bootstrap.ymlã€å·²è¸©å‘ï¼Œæ²¡æœ‰æ”¹åå­—ã€‘</strong></p><p>applicaiton.ymlæ˜¯ç”¨æˆ·çº§çš„èµ„æºé…ç½®é¡¹</p><p>bootstrap.ymlæ˜¯ç³»ç»Ÿçº§çš„ï¼Œä¼˜å…ˆçº§æ›´åŠ é«˜</p><p>Spring Cloudä¼šåˆ›å»ºä¸€ä¸ªBootstrap Contextï¼Œä½œä¸ºSpringåº”ç”¨çš„Application Contextçš„çˆ¶ä¸Šä¸‹æ–‡ã€‚</p><p>åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒBootstrapContextè´Ÿè´£ä»å¤–éƒ¨æºåŠ è½½é…ç½®å±æ€§å¹¶è§£æé…ç½®ã€‚è¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡å…±äº«ä¸€ä¸ªä»å¤–éƒ¨è·å–çš„Environmentã€‚</p><p>Bootstrapå±æ€§æœ‰é«˜ä¼˜å…ˆçº§ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸ä¼šè¢«æœ¬åœ°é…ç½®è¦†ç›–ã€‚Bootstrap contextå’ŒApplication Contextæœ‰ç€ä¸åŒçš„çº¦å®šï¼Œæ‰€ä»¥æ–°å¢äº†ä¸€ä¸ªbootstrap.ymlæ–‡ä»¶ï¼Œä¿è¯Bootstrap Contextå’ŒApplication Contexté…ç½®çš„åˆ†ç¦»ã€‚</p><p>è¦å°†Clientæ¨¡å—ä¸‹çš„application.ymlæ–‡ä»¶æ”¹ä¸ºbootstrap.yml,è¿™æ˜¯å¾ˆå…³é”®çš„ï¼Œå› ä¸ºbootstrap.ymlæ˜¯æ¯”application.ymlå…ˆåŠ è½½çš„ã€‚bootstrap.ymlä¼˜å…ˆçº§é«˜äºapplication.ymlã€‚</p><p>**ä¸¤ä¸ªå›¾æ ‡éƒ½ä¸ä¸€æ ·ï¼š**3355ä¸æ”¹æˆ bootstrap.yaml çš„è¯ @Value(&quot;${config.info}&quot;) ä¼šæŠ¥é”™ï¼</p><p>å› ä¸ºæœ¬åœ° application.yaml æ²¡æœ‰ï¼Œbootstrap.yaml -&gt; é…ç½®ä¸­å¿ƒåœ°å€ -&gt; Git ä¸Šæœ‰ï¼config.info</p><figure><img src="https://images.zzq8.cn/img/202207011514318.png" alt="image-20220701151424183" tabindex="0" loading="lazy"><figcaption>image-20220701151424183</figcaption></figure><h3 id="_3-configåŠ¨æ€åˆ·æ–°ä¹‹æ‰‹åŠ¨ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#_3-configåŠ¨æ€åˆ·æ–°ä¹‹æ‰‹åŠ¨ç‰ˆ"><span>3. ConfigåŠ¨æ€åˆ·æ–°ä¹‹æ‰‹åŠ¨ç‰ˆ</span></a></h3><blockquote><p>é—®é¢˜ï¼šGitee ä¸Šä¿®æ”¹ yamlï¼Œ3344é…ç½®ä¸­å¿ƒåˆ·æ–°æ˜¯ä¿®æ”¹çš„ï¼Œä½†æ˜¯3355å®¢æˆ·ç«¯æ˜¯æ²¡æœ‰ä¿®æ”¹éœ€è¦é‡å¯æ‰ç”Ÿæ•ˆ</p><p>è§£å†³ï¼šä¸‰æ­¥ 1ï¼‰åŠ actuator 2ï¼‰ä¸€ä¸ªæ³¨è§£ 3ï¼‰è¿ç»´å¤šç”¨ä¸€ä¸ªbashå‘½ä»¤</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token string">&quot;http://localhost:3355/actuator/refresh&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æœåŠ¡æ€»çº¿" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡æ€»çº¿"><span><mark>------æœåŠ¡æ€»çº¿------</mark></span></a></h2><h2 id="ä¸€ã€bus-Ã—" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€bus-Ã—"><span>ä¸€ã€Bus Ã—</span></a></h2><blockquote><p><strong>å¯¹ Config çš„ä¸€ä¸ªåŠ å¼ºï¼Œå¯ä»¥å®ç°è‡ªåŠ¨ç‰ˆçš„ä¸€ä¸ªåŠ¨æ€åˆ·æ–°</strong> Config + Bus</p><p>æ³¨æ„ï¼šSpring cloud Busç›®å‰æ”¯æŒRabbitMQå’ŒKafkaã€‚</p></blockquote><p><strong>æ¶ˆæ¯æ€»çº¿</strong>ï¼šå¯ä»¥æƒ³è±¡æˆå¾®ä¿¡è®¢é˜…å·</p><p>ç”±äºæ²¡å­¦ RabbitMQ å°±ç•¥è¿‡è¿™èŠ‚...</p><h2 id="other" tabindex="-1"><a class="header-anchor" href="#other"><span><mark>------Other------</mark></span></a></h2><h2 id="ä¸€ã€streamâœ”" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€streamâœ”"><span>ä¸€ã€Streamâœ”</span></a></h2><blockquote><p>æ³¨æ„ï¼šç›®å‰ä»…æ”¯æŒRabbitMQã€ Kafkaã€‚æƒ³ç”¨RocketMQ å°±åé¢å­¦Alibaba</p></blockquote><p>æœ‰æ²¡æœ‰ä¸€ç§æ–°çš„æŠ€æœ¯è¯ç”Ÿï¼Œè®©æˆ‘ä»¬ä¸å†å…³æ³¨å…·ä½“MQçš„ç»†èŠ‚ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ç§é€‚é…ç»‘å®šçš„æ–¹å¼ï¼Œè‡ªåŠ¨çš„ç»™æˆ‘ä»¬åœ¨å„ç§MQå†…åˆ‡æ¢ã€‚ï¼ˆç±»ä¼¼äºHibernateï¼‰</p><p>Cloud Streamæ˜¯ä»€ä¹ˆï¼Ÿå±è”½åº•å±‚æ¶ˆæ¯ä¸­é—´ä»¶çš„å·®å¼‚ï¼Œé™ä½åˆ‡æ¢æˆæœ¬ï¼Œç»Ÿä¸€æ¶ˆæ¯çš„<strong>ç¼–ç¨‹æ¨¡å‹</strong>ã€‚</p><p>ä¸ªäººæ„Ÿè§‰ï¼šåƒä¸€ä¸ªé€‚é…å™¨ JDBC å±è”½äº†å„ä¸åŒæ•°æ®åº“çš„å·®å¼‚</p><figure><img src="https://images.zzq8.cn/img/202207011655575.png" alt="image-20220701165550123" tabindex="0" loading="lazy"><figcaption>image-20220701165550123</figcaption></figure><p><strong>é€šè¿‡å®šä¹‰ç»‘å®šå™¨Binderä½œä¸ºä¸­é—´å±‚ï¼Œå®ç°äº†åº”ç”¨ç¨‹åºä¸æ¶ˆæ¯ä¸­é—´ä»¶ç»†èŠ‚ä¹‹é—´çš„éš”ç¦»</strong>ã€‚</p><p>ç”±äºæ²¡å­¦MQç•¥ã€‚ã€‚ã€‚</p><h2 id="äºŒã€sleuthé“¾è·¯ç›‘æ§âœ”" tabindex="-1"><a class="header-anchor" href="#äºŒã€sleuthé“¾è·¯ç›‘æ§âœ”"><span>äºŒã€Sleuthé“¾è·¯ç›‘æ§âœ”</span></a></h2><blockquote><p>sleuthç›‘æ§ã€zipkinå±•ç°</p></blockquote><p>å¤§è‡´å°±éœ€è¦ç›‘æ§çš„åŠ pom æ”¹yaml ä¾‹å¦‚æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…(è°ƒç”¨æ–¹)éƒ½è¿™ä¹ˆå¹²</p><p>pom:</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--åŒ…å«äº†sleuth+zipkin--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zipkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>yaml:</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>service

  <span class="token key atrule">zipkin</span><span class="token punctuation">:</span> <span class="token comment">#&lt;-------------------------------------å…³é”® </span>
      <span class="token key atrule">base-url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9411</span>
  <span class="token key atrule">sleuth</span><span class="token punctuation">:</span> <span class="token comment">#&lt;-------------------------------------å…³é”®</span>
    <span class="token key atrule">sampler</span><span class="token punctuation">:</span>
    <span class="token comment">#é‡‡æ ·ç‡å€¼ä»‹äº 0 åˆ° 1 ä¹‹é—´ï¼Œ1 åˆ™è¡¨ç¤ºå…¨éƒ¨é‡‡é›†</span>
    <span class="token key atrule">probability</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åè°ƒç”¨åè¿›å…¥ç›‘æ§ç½‘ç«™å¯ä»¥çœ‹åˆ°å“ªä¸ªæœåŠ¡è°ƒçš„å“ªä¸ªæœåŠ¡ï¼Œè€—æ—¶å¤šå°‘æ¯«ç§’</p><p>æ„Ÿè§‰ç®€å•å°±æ²¡æœ‰å®æ“äº†ï¼</p><h2 id="springcloud-alibaba" tabindex="-1"><a class="header-anchor" href="#springcloud-alibaba"><span><mark>++++++<!---->++++++</mark></span></a></h2><p><strong>ç®€ä»‹ï¼š</strong></p><ul><li><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°SpringCloud alibaba</p><ul><li>Spring Cloud Netflixé¡¹ç›®è¿›å…¥ç»´æŠ¤æ¨¡å¼</li><li>https://spring.io/blog/2018/12/12/spring-cloud-greenwich-rc1-available-now</li></ul></li><li><p>ä»€ä¹ˆæ˜¯ç»´æŠ¤æ¨¡å¼ï¼Ÿ</p><ul><li>å°†æ¨¡å—ç½®äºç»´æŠ¤æ¨¡å¼ï¼Œæ„å‘³ç€Spring Cloudå›¢é˜Ÿå°†ä¸ä¼šå†å‘æ¨¡å—æ·»åŠ æ–°åŠŸèƒ½ã€‚</li></ul></li></ul><p><strong>èƒ½å¹²å˜›ï¼š</strong></p><ul><li>æœåŠ¡é™æµé™çº§ï¼šé»˜è®¤æ”¯æŒ WebServletã€WebFlux, OpenFeignã€RestTemplateã€Spring Cloud Gateway, Zuul, Dubbo å’Œ RocketMQ é™æµé™çº§åŠŸèƒ½çš„æ¥å…¥ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡æ§åˆ¶å°å®æ—¶ä¿®æ”¹é™æµé™çº§è§„åˆ™ï¼Œè¿˜æ”¯æŒæŸ¥çœ‹é™æµé™çº§ Metrics ç›‘æ§ã€‚</li><li>æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼šé€‚é… Spring Cloud æœåŠ¡æ³¨å†Œä¸å‘ç°æ ‡å‡†ï¼Œé»˜è®¤é›†æˆäº† Ribbon çš„æ”¯æŒã€‚</li><li>åˆ†å¸ƒå¼é…ç½®ç®¡ç†ï¼šæ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®ï¼Œé…ç½®æ›´æ”¹æ—¶è‡ªåŠ¨åˆ·æ–°ã€‚</li><li>æ¶ˆæ¯é©±åŠ¨èƒ½åŠ›ï¼šåŸºäº Spring Cloud Stream ä¸ºå¾®æœåŠ¡åº”ç”¨æ„å»ºæ¶ˆæ¯é©±åŠ¨èƒ½åŠ›ã€‚</li><li>åˆ†å¸ƒå¼äº‹åŠ¡ï¼šä½¿ç”¨ @GlobalTransactional æ³¨è§£ï¼Œ é«˜æ•ˆå¹¶ä¸”å¯¹ä¸šåŠ¡é›¶ä¾µå…¥åœ°è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</li><li>é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨ï¼šé˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚æ”¯æŒåœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li><li>åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ï¼šæä¾›ç§’çº§ã€ç²¾å‡†ã€é«˜å¯é ã€é«˜å¯ç”¨çš„å®šæ—¶ï¼ˆåŸºäº Cron è¡¨è¾¾å¼ï¼‰ä»»åŠ¡è°ƒåº¦æœåŠ¡ã€‚åŒæ—¶æä¾›åˆ†å¸ƒå¼çš„ä»»åŠ¡æ‰§è¡Œæ¨¡å‹ï¼Œå¦‚ç½‘æ ¼ä»»åŠ¡ã€‚ç½‘æ ¼ä»»åŠ¡æ”¯æŒæµ·é‡å­ä»»åŠ¡å‡åŒ€åˆ†é…åˆ°æ‰€æœ‰ Workerï¼ˆschedulerx-clientï¼‰ä¸Šæ‰§è¡Œã€‚</li><li>é˜¿é‡Œäº‘çŸ­ä¿¡æœåŠ¡ï¼šè¦†ç›–å…¨çƒçš„çŸ­ä¿¡æœåŠ¡ï¼Œå‹å¥½ã€é«˜æ•ˆã€æ™ºèƒ½çš„äº’è”åŒ–é€šè®¯èƒ½åŠ›ï¼Œå¸®åŠ©ä¼ä¸šè¿…é€Ÿæ­å»ºå®¢æˆ·è§¦è¾¾é€šé“ã€‚</li></ul><p><strong>æ€ä¹ˆç©ï¼š</strong></p><ul><li><strong><a href="https://github.com/alibaba/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šæŠŠæµé‡ä½œä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦ä¿æŠ¤æœåŠ¡çš„ç¨³å®šæ€§</li><li><strong><a href="https://github.com/alibaba/Nacos" target="_blank" rel="noopener noreferrer">Nacos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚</li><li><strong><a href="https://rocketmq.apache.org/" target="_blank" rel="noopener noreferrer">RocketMQ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼ŒåŸºäºé«˜å¯ç”¨åˆ†å¸ƒå¼é›†ç¾¤æŠ€æœ¯ï¼Œæä¾›ä½å»¶æ—¶çš„ã€é«˜å¯é çš„æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…æœåŠ¡ã€‚</li><li><strong><a href="https://github.com/apache/dubbo" target="_blank" rel="noopener noreferrer">Dubbo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šApache Dubboâ„¢ æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ Java RPC æ¡†æ¶ã€‚</li><li><strong><a href="https://github.com/seata/seata" target="_blank" rel="noopener noreferrer">Seata<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>ï¼šé˜¿é‡Œå·´å·´å¼€æºäº§å“ï¼Œä¸€ä¸ªæ˜“äºä½¿ç”¨çš„é«˜æ€§èƒ½å¾®æœåŠ¡åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚</li><li><strong><a href="https://www.aliyun.com/product/oss" target="_blank" rel="noopener noreferrer">Alibaba Cloud OSS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>: é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ˆObject Storage Serviceï¼Œç®€ç§° OSSï¼‰ï¼Œæ˜¯é˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•åº”ç”¨ã€ä»»ä½•æ—¶é—´ã€ä»»ä½•åœ°ç‚¹å­˜å‚¨å’Œè®¿é—®ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li><li><strong><a href="https://help.aliyun.com/document_detail/43136.html" target="_blank" rel="noopener noreferrer">Alibaba Cloud SchedulerX<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>: é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦äº§å“ï¼Œæä¾›ç§’çº§ã€ç²¾å‡†ã€é«˜å¯é ã€é«˜å¯ç”¨çš„å®šæ—¶ï¼ˆåŸºäº Cron è¡¨è¾¾å¼ï¼‰ä»»åŠ¡è°ƒåº¦æœåŠ¡ã€‚</li><li><strong><a href="https://www.aliyun.com/product/sms" target="_blank" rel="noopener noreferrer">Alibaba Cloud SMS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong>: è¦†ç›–å…¨çƒçš„çŸ­ä¿¡æœåŠ¡ï¼Œå‹å¥½ã€é«˜æ•ˆã€æ™ºèƒ½çš„äº’è”åŒ–é€šè®¯èƒ½åŠ›ï¼Œå¸®åŠ©ä¼ä¸šè¿…é€Ÿæ­å»ºå®¢æˆ·è§¦è¾¾é€šé“ã€‚</li></ul><p><strong>Spring Cloud Alibabaå­¦ä¹ èµ„æ–™è·å–ï¼š</strong></p><ul><li><p>å®˜ç½‘</p><ul><li>https://spring.io/projects/spring-cloud-alibaba#overview</li></ul></li><li><p>è‹±æ–‡</p><ul><li><p>https://github.com/alibaba/spring-cloud-alibaba</p></li><li><p>https://spring-cloud-alibaba-group.github.io/github-pages/greenwich/spring-cloud-alibaba.html</p></li></ul></li><li><p>ä¸­æ–‡</p><ul><li>https://github.com/alibaba/spring-cloud-alibaba/blob/master/README-zh.md</li></ul></li></ul><h2 id="ä¸€ã€nacos-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€nacos-æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ"><span>ä¸€ã€Nacos æœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒ</span></a></h2><blockquote><p>Nacos = Eureka + Config + Bus Nacosè‡´åŠ›äºå¸®åŠ©æ‚¨å‘ç°ã€é…ç½®å’Œç®¡ç†å¾®æœåŠ¡ã€‚</p><p>æœåŠ¡æ³¨å†Œä¸­å¿ƒ + æœåŠ¡é…ç½® + æœåŠ¡æ€»çº¿</p></blockquote><p><strong>ä¸ºä»€ä¹ˆå«Nacos</strong></p><ul><li>å‰å››ä¸ªå­—æ¯åˆ†åˆ«ä¸ºNamingå’ŒConfigurationçš„å‰ä¸¤ä¸ªå­—æ¯ï¼Œæœ€åçš„sä¸ºServiceã€‚</li></ul><p><strong>æ€ä¹ˆç”¨</strong></p><p>ä¸ç”¨åƒ Eureka è¿˜è¦æ•´ä¸ªé¡¹ç›®è·‘èµ·æ¥ï¼Œè¿™ä¸ªåƒ zookeeper</p><p>è§£å‹å®‰è£…åŒ…ï¼Œç›´æ¥è¿è¡Œbinç›®å½•ä¸‹çš„startup.cmdï¼Œä½†æ˜¯å®æµ‹ä¼šæŠ¥é”™ã€‚éœ€åœ¨å‘½ä»¤è¡ŒåŠ æ¡ä»¶è·‘è¿™ä¸ªcmd</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>startup.cmd <span class="token parameter variable">-m</span> standalone
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸ºäº†ä¸‹ä¸€ç« èŠ‚æ¼”ç¤ºnacosçš„è´Ÿè½½å‡è¡¡ï¼Œå‚ç…§9001æ–°å»º9002</p><p>è¿™é‡Œ<strong>å–å·§</strong>ä¸æƒ³æ–°å»ºé‡å¤ä½“åŠ›åŠ³åŠ¨ï¼Œå¯ä»¥åˆ©ç”¨IDEAåŠŸèƒ½ï¼Œç›´æ¥æ‹·è´<strong>è™šæ‹Ÿç«¯å£æ˜ å°„</strong></p><figure><img src="https://images.zzq8.cn/img/202207202219473.png" alt="image-20220706152115283" tabindex="0" loading="lazy"><figcaption>image-20220706152115283</figcaption></figure><p>K8SæœåŠ¡å’ŒDNSæœåŠ¡åˆ™é€‚ç”¨äºCPæ¨¡å¼</p><p>Nacos æ˜¯ AP + CP å¯ä»¥åˆ‡æ¢</p><p>åˆ‡æ¢å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT &#39;<span class="token variable">$NACOS_SERVER</span>:8848/nacos/v1/ns/operator/switches?entry<span class="token operator">=</span>serverMode<span class="token operator">&amp;</span><span class="token assign-left variable">value</span><span class="token operator">=</span>CP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šæ–°çš„nacoså·²ç»æ²¡æœ‰æ•´åˆribbonäº†ï¼Œæ‰€ä»¥è¦ä¹ˆåœ¨mavenæ·»åŠ Loadbalancerä»£æ›¿</p><h3 id="_1-æ³¨å†Œä¸­å¿ƒ-ä»£æ›¿-eureka" tabindex="-1"><a class="header-anchor" href="#_1-æ³¨å†Œä¸­å¿ƒ-ä»£æ›¿-eureka"><span>1. æ³¨å†Œä¸­å¿ƒï¼šä»£æ›¿ Eureka</span></a></h3><ul><li>å°±æ˜¯å¯åŠ¨é¡¹ç›®æ¢ä¸‹é…ç½®ï¼Œcmdå¯åŠ¨å®Œåé¡¹ç›®ä¸€èˆ¬å°±æ˜¯ä¸‰æ­¥ï¼š <ol><li>é…ç½® Nacos server-addr çš„åœ°å€</li><li>é…ç½®è‡ªå·±çš„ application nameï¼ˆæ³¨æ„ï¼šæ¯ä¸€ä¸ªåº”ç”¨éƒ½åº”è¯¥æœ‰åå­—ï¼Œè¿™æ ·æ‰èƒ½æ³¨å†Œä¸Šå»ã€‚ï¼‰</li><li><mark>ä¸»å¯åŠ¨ç±»åŠ  @EnableDiscoveryClient</mark> å¼€å¯æœåŠ¡çš„æ³¨å†Œä¸å‘ç°åŠŸèƒ½ï¼ˆå®¹æ˜“å¿˜ï¼‰</li></ol></li></ul><h3 id="_2-é…ç½®ä¸­å¿ƒ-ä»£æ›¿-bus" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®ä¸­å¿ƒ-ä»£æ›¿-bus"><span>2. é…ç½®ä¸­å¿ƒï¼šä»£æ›¿ Bus</span></a></h3><ul><li>Buséœ€è¦åœ¨ Git ä¸Šå»ºé…ç½®ï¼ŒNacosç›´æ¥å¯ä»¥åœ¨ç½‘ç«™ä¸­é…ç½®</li><li>å¸¸è§„æ“ä½œï¼Œä¸€æ ·å»º Model ä¸€ç³»åˆ—</li></ul><h4 id="é…ç½®æ–‡ä»¶è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶è¯¦è§£"><span>é…ç½®æ–‡ä»¶è¯¦è§£</span></a></h4><p>Nacosä¸­çš„dataidï¼ˆå³ç½‘ç«™é…ç½®æ–‡ä»¶çš„åå­—ï¼‰éœ€ç¬¦åˆï¼š</p><figure><img src="https://images.zzq8.cn/img/202207062139577.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>$<span class="token punctuation">{</span>prefix<span class="token punctuation">}</span><span class="token operator">-</span>$<span class="token punctuation">{</span>spring<span class="token operator">-</span>profile<span class="token punctuation">.</span>active<span class="token punctuation">}</span><span class="token punctuation">.</span>$<span class="token punctuation">{</span>file<span class="token operator">-</span>extension<span class="token punctuation">}</span>

å³

$<span class="token punctuation">{</span>spring<span class="token punctuation">.</span>application<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">-</span>$<span class="token punctuation">{</span>spring<span class="token punctuation">.</span>profiles<span class="token punctuation">.</span>active<span class="token punctuation">}</span><span class="token punctuation">.</span>$<span class="token punctuation">{</span>spring<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>config<span class="token punctuation">.</span>file<span class="token operator">-</span>extension<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰é…config é»˜è®¤æ˜¯ gulimall-coupon.properties é¡¹ç›®å.properties</p><p>æµ‹è¯•ï¼šdiscovery config è¦é…ç½®åˆ° bootstrap.yaml æ‰ç”Ÿæ•ˆã€‚å°±æ˜¯ææ”¹ä¸Šé¢è¿™ä¸ª.properties åˆ°applicationä¸ç”Ÿæ•ˆåˆ°bootstrapç”Ÿæ•ˆ <mark>è‡ªæˆ‘å»ºè®®æŠŠ nacos ç›¸å…³çš„é… bootstrap</mark></p><p>å°æŠ€å·§ï¼šåº”ç”¨å¯åŠ¨çš„æ—¶å€™ç¬¬ä¸€è¡Œæ—¥å¿—ä¼šå‘Šè¯‰ä½  Nacos é…ç½®ä¸­å¿ƒçš„æ–‡ä»¶åæ˜¯ä»€ä¹ˆ</p><h4 id="common-yaml" tabindex="-1"><a class="header-anchor" href="#common-yaml"><span>common.yaml</span></a></h4><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡shared-configsé…ç½®å…¬ç”¨çš„çš„é…ç½®ï¼Œæ¯”å¦‚æ³¨å†Œä¸­å¿ƒå¤§å®¶éƒ½ç”¨åŒä¸€ä¸ªï¼Œredisçš„ä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªæœåŠ¡ç”¨åŒä¸€ä¸ªé…ç½®ï¼š</p><p><code>shared-dataids: common.yaml</code></p><p>é†‰äº†ï¼šå†™è¿™ä¸ªData IDä¸€å®šè¦åŠ åç¼€ã€‚æ•´äº†å¾ˆä¹…æ‰å‘ç°è¿™ä¸ªé—®é¢˜</p><figure><img src="https://images.zzq8.cn/img/202301061541889.png" alt="image-20230106154116757" tabindex="0" loading="lazy"><figcaption>image-20230106154116757</figcaption></figure><p>bootstrap.yml å¯ä»¥ç†è§£æˆç³»ç»Ÿçº§åˆ«çš„ä¸€äº›å‚æ•°é…ç½®ï¼Œè¿™äº›å‚æ•°ä¸€èˆ¬æ˜¯ä¸ä¼šå˜åŠ¨çš„ã€‚ application.yml å¯ä»¥ç”¨æ¥å®šä¹‰åº”ç”¨çº§åˆ«çš„ã€‚</p><p><strong>è‡ªå¸¦åŠ¨æ€åˆ·æ–°</strong></p><p>éœ€è¦åœ¨ä½¿ç”¨äº† <code>@Value</code> çš„ <mark>Controller ç±»</mark>ä¸­åŠ  <code>@RefreshScope //æ”¯æŒNacosçš„åŠ¨æ€åˆ·æ–°åŠŸèƒ½ã€‚</code> æ‰èƒ½åŠ¨æ€åˆ·æ–°</p><p>ä¿®æ”¹ä¸‹Nacosä¸­çš„yamlé…ç½®æ–‡ä»¶ï¼Œå†æ¬¡è°ƒç”¨æŸ¥çœ‹é…ç½®çš„æ¥å£ï¼Œå°±ä¼šå‘ç°é…ç½®å·²ç»åˆ·æ–°ã€‚</p><p><strong>ä»…ä»…æ˜¯ä»¥ä¸ŠåŠŸèƒ½è¿˜ä¸è¡Œï¼Œè¿˜æœ‰ Bus æ²¡æœ‰çš„å¥½åŠŸèƒ½ï¼š</strong></p><p>åˆ‡æ¢dev testé…ç½®æ–‡ä»¶ç¯å¢ƒï¼Œåˆ†ç»„..å¾ˆæ–¹ä¾¿ï¼Œçœ‹å›¾ï¼šé…ç½®æ–‡ä»¶--&gt;å‘½åç©ºé—´--&gt;ç»„</p><p>è‡ªæˆ‘å»ºè®®ï¼šNameSpaceï¼ˆå¾®æœåŠ¡ï¼‰ã€Groupï¼ˆå¼€å‘ç¯å¢ƒï¼‰</p><p>æœ€ç»ˆæ–¹æ¡ˆï¼šæ¯ä¸ªå¾®æœåŠ¡åˆ›å»ºè‡ªå·±çš„å‘½åç©ºé—´ï¼Œç„¶åä½¿ç”¨é…ç½®åˆ†ç»„åŒºåˆ†ç¯å¢ƒï¼ˆdev/test/prodï¼‰</p><figure><img src="https://images.zzq8.cn/img/202207070955519.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>é»˜è®¤æƒ…å†µï¼šNamespace=publicï¼ŒGroup=DEFAULT_GROUPï¼Œé»˜è®¤Clusteræ˜¯DEFAULT</p><ul><li><p>Nacosé»˜è®¤çš„Namespaceæ˜¯publicï¼Œ<strong>Namespaceä¸»è¦ç”¨æ¥å®ç°é…ç½®éš”ç¦»</strong>ã€‚</p><ul><li>åŸºäºç¯å¢ƒè¿›è¡Œéš”ç¦»ï¼šæ¯”æ–¹è¯´æˆ‘ä»¬ç°åœ¨æœ‰ä¸‰ä¸ªç¯å¢ƒï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸‰ä¸ªNamespaceï¼Œä¸åŒçš„Namespaceä¹‹é—´æ˜¯éš”ç¦»çš„ã€‚</li><li>åŸºäºå¾®æœåŠ¡è¿›è¡Œéš”ç¦»ï¼šä¹Ÿå¯ä»¥æ¯”å¦‚ç»™ä¸åŒçš„modelåˆ›å»ºå®ƒè‡ªå·±çš„å‘½åç©ºé—´</li><li><strong>å†™æ³•</strong> <code>spring.cloud.nacos.config.namespace=e53d5e82-a1f3-42b9-a1d2-1cbbd8103d69</code></li></ul></li><li><p>Groupé»˜è®¤æ˜¯DEFAULT_GROUPï¼ŒGroupå¯ä»¥æŠŠä¸åŒçš„å¾®æœåŠ¡åˆ’åˆ†åˆ°åŒä¸€ä¸ªåˆ†ç»„é‡Œé¢å»</p><ul><li>ä¾‹å¦‚åŒåä¸€ç”¨è¿™ç»„ï¼Œ618ç”¨å¦å¤–ä¸€ç»„</li><li>ä¹Ÿå¯åŒºåˆ†å¼€å‘ç¯å¢ƒ dev pro</li></ul></li><li><p>Serviceå°±æ˜¯å¾®æœåŠ¡:ä¸€ä¸ªServiceå¯ä»¥åŒ…å«å¤šä¸ªCluster (é›†ç¾¤)ï¼ŒNacosé»˜è®¤Clusteræ˜¯DEFAULTï¼ŒClusteræ˜¯å¯¹æŒ‡å®šå¾®æœåŠ¡çš„ä¸€ä¸ªè™šæ‹Ÿåˆ’åˆ†ã€‚</p><ul><li>æ¯”æ–¹è¯´ä¸ºäº†å®¹ç¾ï¼Œå°†Serviceå¾®æœåŠ¡åˆ†åˆ«éƒ¨ç½²åœ¨äº†æ­å·æœºæˆ¿å’Œå¹¿å·æœºæˆ¿ï¼Œè¿™æ—¶å°±å¯ä»¥ç»™æ­å·æœºæˆ¿çš„Serviceå¾®æœåŠ¡èµ·ä¸€ä¸ªé›†ç¾¤åç§°(HZ) ï¼Œç»™å¹¿å·æœºæˆ¿çš„Serviceå¾®æœåŠ¡èµ·ä¸€ä¸ªé›†ç¾¤åç§°(GZ)ï¼Œè¿˜å¯ä»¥å°½é‡è®©åŒä¸€ä¸ªæœºæˆ¿çš„å¾®æœåŠ¡äº’ç›¸è°ƒç”¨ï¼Œä»¥æå‡æ€§èƒ½ã€‚</li></ul></li><li><p>æœ€åæ˜¯Instanceï¼Œå°±æ˜¯å¾®æœåŠ¡çš„å®ä¾‹ã€‚</p></li></ul><p><strong>åŠ è½½å¤šé…ç½®é›†</strong></p><p>å…¶å®æˆ‘ä»¬çš„å¾®æœåŠ¡åªéœ€ä¿ç•™ä¸€ä¸ª bootstrap.yaml</p><p>æˆ‘ä»¬è¦æŠŠåŸæ¥application.ymlé‡Œçš„å†…å®¹éƒ½åˆ†æ–‡ä»¶æŠ½ç¦»å‡ºå»ã€‚æˆ‘ä»¬åœ¨nacosé‡Œåˆ›å»ºå¥½ åï¼Œåœ¨couponsé‡ŒæŒ‡å®šè¦å¯¼å…¥çš„é…ç½®å³å¯ã€‚</p><figure><img src="https://images.zzq8.cn/img/202208051732942.png" alt="image-20220805173159065" tabindex="0" loading="lazy"><figcaption>image-20220805173159065</figcaption></figure><p>é‡ç‚¹ï¼š <strong>spring.cloud.nacos.config.ext-config[0]</strong></p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code>spring.cloud.nacos.config.namespace=ed042b3b<span class="token punctuation">-</span>b7f3<span class="token punctuation">-</span>4734<span class="token punctuation">-</span>bdcb<span class="token punctuation">-</span>0c516cb357d7  <span class="token comment"># å¯ä»¥é€‰æ‹©å¯¹åº”çš„å‘½åç©ºé—´ ï¼Œå³å†™ä¸Šå¯¹åº”ç¯å¢ƒçš„å‘½åç©ºé—´ID</span>
spring.cloud.nacos.config.group=dev  <span class="token comment"># é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç»„</span>

spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.data<span class="token punctuation">-</span>id=datasource.yml
spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.group=dev
spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.refresh=true

spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.data<span class="token punctuation">-</span>id=mybatis.yml
spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.group=dev
spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.refresh=true

spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>.data<span class="token punctuation">-</span>id=other.yml
spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>.group=dev
spring.cloud.nacos.config.ext<span class="token punctuation">-</span>config<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>.refresh=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®ä»¥ä¸Šè¿™äº›éƒ½æ˜¯å°å„¿ç§‘ï¼Œè‡ªå·±çœ‹çœ‹æ–‡æ¡£å®¹æ˜“çŸ¥é“ã€‚</p><h3 id="_3-nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®-é‡è¦" tabindex="-1"><a class="header-anchor" href="#_3-nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®-é‡è¦"><span>3. Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®ï¼ˆé‡è¦ï¼‰</span></a></h3><blockquote><p>é›†ç¾¤ï¼šè‡³å°‘ä¸‰å°</p><p>æŒä¹…åŒ–</p></blockquote><p><a href="https://nacos.io/zh-cn/docs/cluster-mode-quick-start.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>VIPï¼šä¸æ˜¯ very important personï¼Œè€Œæ˜¯ <strong>virtual</strong> <strong>IP</strong></p><figure><img src="https://images.zzq8.cn/img/202207071007185.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸Šå›¾å®˜ç½‘ç¿»è¯‘ï¼ŒçœŸå®æƒ…å†µ</p><figure><img src="https://images.zzq8.cn/img/202207071008218.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>é»˜è®¤Nacosä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“å®ç°æ•°æ®çš„å­˜å‚¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¯åŠ¨å¤šä¸ªé»˜è®¤é…ç½®ä¸‹çš„NacosèŠ‚ç‚¹ï¼Œæ•°æ®å­˜å‚¨æ˜¯å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<strong>Nacosé‡‡ç”¨äº†é›†ä¸­å¼å­˜å‚¨çš„æ–¹å¼æ¥æ”¯æŒé›†ç¾¤åŒ–éƒ¨ç½²ï¼Œç›®å‰åªæ”¯æŒMySQLçš„å­˜å‚¨</strong>ã€‚</p><p>é€šä¿—çš„è¯´ï¼šé›†ç¾¤æœ‰ä¸‰ä¸ªçš„è¯ï¼Œæ¯ä¸€ä¸ªNacoséƒ½æœ‰è‡ªå·±åµŒå…¥å¼æ•°æ®åº“å°±ä¼šæ•°æ®ä¸ä¸€è‡´ã€‚è€Œéƒ½ç”¨å¤–é¢ä¸€ä¸ªMySQLå°±ä¸ä¼šæœ‰è¿™ç§é—®é¢˜ã€‚</p><p><strong>é»˜è®¤æ•°æ®åº“derbyåˆ‡æ¢åˆ°MySQLå…·ä½“çœ‹å®˜æ–¹æ–‡æ¡£å°±è¡Œã€‚</strong></p><p>Linux é…ç½®</p><figure><img src="https://images.zzq8.cn/img/202207071436995.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="äºŒã€sentinel-ç†”æ–­ä¸é™æµ" tabindex="-1"><a class="header-anchor" href="#äºŒã€sentinel-ç†”æ–­ä¸é™æµ"><span><a href="https://github.com/NiceSeason/gulimall-learning/blob/master/docs/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E%E2%80%94%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E7%BA%A7.md#1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-3" target="_blank" rel="noopener noreferrer">äºŒã€Sentinel ç†”æ–­ä¸é™æµ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h2><blockquote><p>Sentinelæ˜¯é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„æµé‡æ§åˆ¶ç»„ä»¶ï¼Œä¸»è¦ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦æ¥å¸®åŠ©æ‚¨ä¿éšœå¾®æœåŠ¡çš„<mark>ç¨³å®šæ€§</mark>ã€‚</p></blockquote><p>Hystrixä¸Sentinelæ¯”è¾ƒï¼š</p><ul><li><p>Hystrix</p><ol><li>éœ€è¦æˆ‘ä»¬ç¨‹åºå‘˜è‡ªå·±æ‰‹å·¥æ­å»ºç›‘æ§å¹³å°</li><li>æ²¡æœ‰ä¸€å¥—webç•Œé¢å¯ä»¥ç»™æˆ‘ä»¬è¿›è¡Œæ›´åŠ ç»†ç²’åº¦åŒ–å¾—é…ç½®æµæ§ã€é€Ÿç‡æ§åˆ¶ã€æœåŠ¡ç†”æ–­ã€æœåŠ¡é™çº§</li></ol></li><li><p>Sentinel</p><ol><li>å•ç‹¬ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºæ¥ã€‚</li><li>ç›´æ¥ç•Œé¢åŒ–çš„ç»†ç²’åº¦ç»Ÿä¸€é…ç½®ã€‚</li></ol></li></ul><p>çº¦å®š &gt; é…ç½® &gt; ç¼–ç </p><p>éƒ½å¯ä»¥å†™åœ¨ä»£ç é‡Œé¢ï¼Œä½†æ˜¯æˆ‘ä»¬æœ¬æ¬¡è¿˜æ˜¯å¤§è§„æ¨¡çš„å­¦ä¹ ä½¿ç”¨é…ç½®å’Œæ³¨è§£çš„æ–¹å¼ï¼Œå°½é‡å°‘å†™ä»£ç </p><h3 id="_1-æµæ§" tabindex="-1"><a class="header-anchor" href="#_1-æµæ§"><span>1. æµæ§</span></a></h3><blockquote><p>ç›´æ¥webç•Œé¢dashboard å¯ä»¥è®¾ç½®æ¯ç§’åªå‡†è®¿é—®ä¸€æ¬¡ï¼Œå¦åˆ™ Blocked by Sentinel (flow limiting)å¯ä»¥é€šè¿‡<code>WebCallbackManager.setUrlBlockHandler()</code>ä¿®æ”¹è¿™ä¸€å¥</p><p>æµæ§è®¾ç½®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé‡å¯å¤±æ•ˆ</p><p>æ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½å¯¼å…¥actuatorï¼ˆå°±ä¼šæœ‰ç»Ÿè®¡ä¿¡æ¯ï¼‰;å¹¶é…åˆmanagement.endpoints.web.exposure.include=*</p></blockquote><h4 id="_1-1-sentinelæµæ§-å…³è”" tabindex="-1"><a class="header-anchor" href="#_1-1-sentinelæµæ§-å…³è”"><span>1.1 Sentinelæµæ§-å…³è”</span></a></h4><blockquote><p>å°±åƒä¸€ä¸ªå‡ºæ°´å£ä¸€ä¸ªå…¥æ°´å£ï¼Œæˆ‘è¿™è¾¹çš„æ”¯ä»˜æ¥å£æŒ‚äº†ä½ é‚£è¾¹ä¸‹å•çš„è®¢å•æ¥å£å°±ä¸è¦é‚£ä¹ˆçŒ›äº†</p></blockquote><p><strong>ä¸è¦èŠ±ç²¾åŠ›åœ¨è¿™äº›å·¥å…·ä¸Šé¢ï¼Œå¤Ÿç”¨å°±è¡Œäº†ã€‚æŠŠç²¾åŠ›æ”¾åˆ°ä¸»è¦çŸ›ç›¾ä¸Šé¢ï¼Œç”¨ postmanã€jmeter éƒ½å¯ä»¥</strong></p><h4 id="_1-2-sentinelæµæ§-é¢„çƒ­" tabindex="-1"><a class="header-anchor" href="#_1-2-sentinelæµæ§-é¢„çƒ­"><span>1.2 Sentinelæµæ§-é¢„çƒ­</span></a></h4><p>å…·ä½“çœ‹åˆ«äººç¬”è®°</p><p><strong>åº”ç”¨åœºæ™¯</strong></p><p>å¦‚ï¼šç§’æ€ç³»ç»Ÿåœ¨å¼€å¯çš„ç¬é—´ï¼Œä¼šæœ‰å¾ˆå¤šæµé‡ä¸Šæ¥ï¼Œå¾ˆæœ‰å¯èƒ½æŠŠç³»ç»Ÿæ‰“æ­»ï¼Œé¢„çƒ­æ–¹å¼å°±æ˜¯æŠŠä¸ºäº†ä¿æŠ¤ç³»ç»Ÿï¼Œå¯æ…¢æ…¢çš„æŠŠæµé‡æ”¾è¿›æ¥,æ…¢æ…¢çš„æŠŠé˜€å€¼å¢é•¿åˆ°è®¾ç½®çš„é˜€å€¼ã€‚</p><h3 id="_2-ç†”æ–­-é™çº§" tabindex="-1"><a class="header-anchor" href="#_2-ç†”æ–­-é™çº§"><span>2. ç†”æ–­/é™çº§</span></a></h3><p>RTï¼šRound trip å¾€è¿”ã€æ¥å›ï¼ŒRound trip Time å¾€è¿”æ—¶é—´ï¼Œå³å“åº”æ—¶é—´</p><p>å¾€ä¸‹éƒ¨åˆ†ç•¥è¿‡ï¼Œå»ºè®®çœ‹æ–‡æ¡£ã€‚<a href="https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç†”æ–­ï¼šä¿è¯æœåŠ¡ä¸å—çº§è”å½±å“ã€‚ä¾‹å¦‚è¯·æ±‚è°ƒç”¨é“¾è·¯ a-&gt;b-&gt;c cæ˜¯ä¸å¯ç”¨çš„è¿‡3sæ‰æ‰§è¡Œåˆ°ä¸šåŠ¡çš„é”™è¯¯ç‚¹è¿”å›ç»™bä¸å¯ç”¨ï¼Œåé¢çš„æ— æ•°ä¸ªa bä»¥åŠè°ƒç”¨açš„å¤§é‡å †ç§¯ ç†”æ–­çš„è¯ç›´æ¥å¿«é€Ÿå“åº”å¤±è´¥å°±ä¸ä¼šå †ç§¯äº†é•¿æ—¶é—´çš„å¡æ­»</p><p>é™çº§ï¼šäºæµé‡é«˜å³°æœŸï¼Œå¯¹éæ ¸å¿ƒä¸šåŠ¡åœæ­¢æœåŠ¡æˆ–æ‰€æœ‰çš„è°ƒç”¨ç›´æ¥è¿”å›é™çº§æ•°æ® æœåŠ¡é™çº§æŒ‡çš„æ˜¯å½“æœåŠ¡å™¨å‹åŠ›å‰§å¢çš„æƒ…å†µä¸‹,æ ¹æ®å½“å‰ä¸šåŠ¡æƒ…å†µåŠæµé‡å¯¹ä¸€äº›æœåŠ¡å’Œé¡µé¢æœ‰ç­–ç•¥çš„é™çº§,ä»¥æ­¤é‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯æ ¸å¿ƒä»»åŠ¡çš„æ­£å¸¸è¿è¡Œ.é™çº§çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¸¢è½¦ä¿å¸…,ä¼˜å…ˆä¿è¯æ ¸å¿ƒä¸šåŠ¡. å¸¸è§çš„æœåŠ¡é™çº§ç­–ç•¥æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>é™çº§é¡µé¢ï¼šå½“æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªç®€åŒ–çš„é¡µé¢æˆ–è€…é”™è¯¯ä¿¡æ¯ï¼Œä»£æ›¿åŸæœ¬çš„åŠŸèƒ½é¡µé¢ï¼Œå‘ç”¨æˆ·ä¼ è¾¾æœåŠ¡ä¸å¯ç”¨çš„ä¿¡æ¯ã€‚</li><li>å¼‚æ­¥å¤„ç†ï¼šå°†åŸæœ¬åŒæ­¥çš„æœåŠ¡è°ƒç”¨æ”¹ä¸ºå¼‚æ­¥è°ƒç”¨ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…å¼‚æ­¥ä»»åŠ¡æ¥å¤„ç†è¯·æ±‚ï¼Œé¿å…å› æœåŠ¡ä¸å¯ç”¨è€Œé˜»å¡æ•´ä¸ªç³»ç»Ÿã€‚</li></ul><p>ç›¸åŒç‚¹ï¼š</p><ol><li>ä¸ºäº†ä¿è¯é›†ç¾¤å¤§éƒ¨åˆ†æœåŠ¡çš„å¯ç”¨æ€§å’Œå¯é æ€§ï¼Œé˜²æ­¢å´©æºƒï¼Œç‰ºç‰²å°æˆ‘</li><li>ç”¨æˆ·æœ€ç»ˆéƒ½æ˜¯ä½“éªŒåˆ°æŸä¸ªåŠŸèƒ½ä¸å¯ç”¨</li></ol><p>ä¸åŒç‚¹ï¼š</p><ol><li>ç†”æ–­æ˜¯è¢«è°ƒç”¨æ–¹æ•…éšœï¼Œè§¦å‘çš„<strong>ç³»ç»Ÿä¸»åŠ¨è§„åˆ™</strong></li><li>é™çº§æ˜¯åŸºäºå…¨å±€è€ƒè™‘ï¼Œåœæ­¢ä¸€äº›æ­£å¸¸æœåŠ¡ï¼Œé‡Šæ”¾èµ„æº</li></ol><h3 id="_3-sentinelresourceé…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-sentinelresourceé…ç½®"><span>3. SentinelResourceé…ç½®</span></a></h3><p>å…œåº•æ–¹æ³•ï¼Œåˆ†ä¸ºç³»ç»Ÿé»˜è®¤å’Œå®¢æˆ·è‡ªå®šä¹‰ï¼Œä¸¤ç§</p><p>ä¹‹å‰çš„caseï¼Œé™æµå‡ºé—®é¢˜åï¼Œéƒ½æ˜¯ç”¨sentinelç³»ç»Ÿé»˜è®¤çš„æç¤º: Blocked by Sentinel (flow limiting)</p><p>æˆ‘ä»¬èƒ½ä¸èƒ½è‡ªå®šï¼Ÿç±»ä¼¼hystrixï¼ŒæŸä¸ªæ–¹æ³•å‡ºé—®é¢˜äº†ï¼Œå°±æ‰¾å¯¹åº”çš„å…œåº•é™çº§æ–¹æ³•?</p><p>ç»“è®º <strong>ä»HystrixCommandåˆ°@SentinelResource</strong></p><p><strong>Sentinel æ²¡æœ‰å­¦ä¸‹å»ï¼Œæš‚æ—¶è·³è¿‡åæœŸç”¨çš„æ—¶å€™å†æ¥å­¦ï¼</strong></p><h3 id="_4-github-wikiæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#_4-github-wikiæ–‡æ¡£"><span><a href="https://sentinelguard.io/zh-cn/docs/basic-api-resource-rule.html" target="_blank" rel="noopener noreferrer">4. GitHub wikiæ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><blockquote><p>Gulimall è¡¥å……</p></blockquote><p><strong>èµ„æº</strong> æ˜¯ Sentinel ä¸­çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€</p><p>æˆ‘ä»¬è¯´çš„èµ„æºï¼Œå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼ŒæœåŠ¡ï¼ŒæœåŠ¡é‡Œçš„æ–¹æ³•ï¼Œç”šè‡³æ˜¯ä¸€æ®µä»£ç ã€‚ä½¿ç”¨ Sentinel æ¥è¿›è¡Œèµ„æºä¿æŠ¤ï¼Œä¸»è¦åˆ†ä¸ºå‡ ä¸ªæ­¥éª¤:</p><ol><li>å®šä¹‰èµ„æº</li><li>å®šä¹‰è§„åˆ™</li><li>æ£€éªŒè§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ</li></ol><h2 id="ä¸‰ã€seata-å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€seata-å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡"><span><a href="https://seata.io/zh-cn/docs/overview/what-is-seata.html" target="_blank" rel="noopener noreferrer">ä¸‰ã€Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h2><blockquote><p><a href="../gulimall/%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E7%BA%A7#%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1">å¤ä¹ Gulimallçš„æœ¬åœ°äº‹åŠ¡å¯¹ç…§ç€ç¬”è®°æ¥å­¦ä¹ ï¼</a></p><p>çœ‹æ ‡é¢˜çš„å®˜ç½‘é“¾æ¥ï¼ï¼ï¼ä¸­æ–‡çš„é€šä¿—æ˜“æ‡‚ ä¸‹é¢è‡ªå·±ç çš„ä¹Ÿå¯ä»¥çœ‹çœ‹æŠ„è¿‡æ¥çš„å›¾å¸¦ç‚¹è‡ªå·±å¥½ç†è§£çš„é€»è¾‘å»ç†è§£ <code>@GlobalTransactional</code></p><p><a href="../gulimall/03%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1&amp;%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.pdf#%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%87%A0%E7%A7%8D%E6%96%B9%E6%A1%88">2PCï¼ˆSeataæ˜¯è¿™ä¸ªçš„ä¸€ä¸ªå˜å½¢ï¼‰</a> è¿™é‡Œå…·ä½“çœ‹ PDFï¼æ³¨æ„æ–¹æ¡ˆæ˜¯æ–¹æ¡ˆæ¡†æ¶æ˜¯æ¡†æ¶ï¼ˆè½åœ°å®ç°è¿™ä¸ªæ–¹æ¡ˆï¼‰</p></blockquote><h3 id="_1-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1-æ¦‚å¿µ"><span>1.æ¦‚å¿µ</span></a></h3><p>åˆ†å¸ƒå¼æ¶æ„è‚¯å®šæ˜¯å¤šæ•°æ®åº“ã€å¤šæ•°æ®æºï¼ï¼ˆä¹°å®¶åº“ï¼Œå–å®¶åº“ï¼‰ç”šè‡³åœ¨ä¸åŒçš„æœºæˆ¿ã€‚å•ä¸ªå°±æç¬‘äº†</p><p>å•ä½“åº”ç”¨è¢«æ‹†åˆ†æˆå¾®æœåŠ¡åº”ç”¨ï¼ŒåŸæ¥çš„ä¸‰ä¸ªæ¨¡å—è¢«æ‹†åˆ†æˆä¸‰ä¸ªç‹¬ç«‹çš„åº”ç”¨,åˆ†åˆ«ä½¿ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„æ•°æ®æºï¼Œä¸šåŠ¡æ“ä½œéœ€è¦è°ƒç”¨ä¸‰ä¸‰ ä¸ªæœåŠ¡æ¥å®Œæˆã€‚æ­¤æ—¶<strong>æ¯ä¸ªæœåŠ¡å†…éƒ¨çš„æ•°æ®ä¸€è‡´æ€§ç”±æœ¬åœ°äº‹åŠ¡æ¥ä¿è¯ï¼Œ ä½†æ˜¯å…¨å±€çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜æ²¡æ³•ä¿è¯</strong>ã€‚</p><figure><img src="https://images.zzq8.cn/img/202207081440609.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä¸€å¥è¯ï¼š<strong>ä¸€æ¬¡ä¸šåŠ¡æ“ä½œéœ€è¦è·¨å¤šä¸ªæ•°æ®æºæˆ–éœ€è¦è·¨å¤šä¸ªç³»ç»Ÿè¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼Œå°±ä¼šäº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</strong>ã€‚</p><p>**ä¸€å¸¦ä¸‰ï¼š**åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†è¿‡ç¨‹çš„ä¸€ID+ä¸‰ç»„ä»¶æ¨¡å‹</p><ul><li>Transaction ID XID å…¨å±€å”¯ä¸€çš„äº‹åŠ¡ID</li><li>ä¸‰ç»„ä»¶æ¦‚å¿µ <ul><li>TC (Transaction Coordinator) - äº‹åŠ¡åè°ƒè€…ï¼šç»´æŠ¤ å…¨å±€å’Œåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œé©±åŠ¨å…¨å±€äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li><li>TM (Transaction Manager) - äº‹åŠ¡ç®¡ç†å™¨ï¼šå®šä¹‰å…¨å±€äº‹åŠ¡çš„èŒƒå›´ï¼šå¼€å§‹å…¨å±€äº‹åŠ¡ã€æäº¤æˆ–å›æ»šå…¨å±€äº‹åŠ¡ã€‚</li><li>RM (Resource Manager) - èµ„æºç®¡ç†å™¨ï¼šç®¡ç†åˆ†æ”¯äº‹åŠ¡å¤„ç†çš„èµ„æºï¼Œä¸TCäº¤è°ˆä»¥æ³¨å†Œåˆ†æ”¯äº‹åŠ¡å’ŒæŠ¥å‘Šåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œå¹¶é©±åŠ¨åˆ†æ”¯äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li></ul></li></ul><p>å¤„ç†è¿‡ç¨‹ï¼š</p><ol><li>TMå‘TCç”³è¯·å¼€å¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œå…¨å±€äº‹åŠ¡åˆ›å»ºæˆåŠŸå¹¶ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„XIDï¼›</li><li>XIDåœ¨å¾®æœåŠ¡è°ƒç”¨é“¾è·¯çš„ä¸Šä¸‹æ–‡ä¸­ä¼ æ’­ï¼›</li><li>RMå‘TCæ³¨å†Œåˆ†æ”¯äº‹åŠ¡ï¼Œå°†å…¶çº³å…¥XIDå¯¹åº”å…¨å±€äº‹åŠ¡çš„ç®¡è¾–ï¼›</li><li>TMå‘TCå‘èµ·é’ˆå¯¹XIDçš„å…¨å±€æäº¤æˆ–å›æ»šå†³è®®ï¼›</li><li>TCè°ƒåº¦XIDä¸‹ç®¡è¾–çš„å…¨éƒ¨åˆ†æ”¯äº‹åŠ¡å®Œæˆæäº¤æˆ–å›æ»šè¯·æ±‚ã€‚</li></ol><figure><img src="https://images.zzq8.cn/img/202207081513288.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><mark><code>My Understandï¼š</code>çœ‹å›¾è¯´è¯</mark> æˆ‘è¿™é‡Œå¥½ç†è§£</p><blockquote><p>Seata åˆ† TCã€TM å’Œ RM ä¸‰ä¸ªè§’è‰²ï¼ŒTCï¼ˆServer ç«¯ï¼‰ä¸ºå•ç‹¬æœåŠ¡ç«¯éƒ¨ç½²ï¼ŒTM å’Œ RMï¼ˆClient ç«¯ï¼‰ç”±ä¸šåŠ¡ç³»ç»Ÿé›†æˆã€‚</p></blockquote><p>TC åè°ƒTMå…¨å±€äº‹åŠ¡ä¸­çš„å„ä¸ªåˆ†æ”¯äº‹åŠ¡ï¼Œè¿™ä¸ªå…¨å±€è°ƒæ§çš„äººå°±æ˜¯SeataæœåŠ¡å™¨ï¼ˆå®˜ç½‘ä¸‹ä¸‹æ¥è¿è¡Œï¼‰</p><p>TM å…¨å±€äº‹åŠ¡çœ‹æˆè®¢å•æ¨¡å— å…¶å®ƒå°äº‹åŠ¡RMçœ‹æˆfeignè°ƒç”¨çš„</p><blockquote><p>Qï¼šAT æ¨¡å¼ï¼ˆè‡ªåŠ¨ï¼‰ å‡å¦‚ Account å¤±è´¥äº†ï¼Œä½†æ˜¯Stock &amp; OrderæˆåŠŸäº† é‚£ä¹ˆæ€ä¹ˆå›æ»šï¼Ÿï¼Ÿï¼Ÿ</p><p>Aï¼šUNDO_LOG Tableï¼ˆå›æ»šæ—¥å¿—è¡¨ï¼‰ å‡å¦‚æäº¤çš„æ˜¯ +2 é‚£å°± -2 ç»™è¡¥å›æ¥å›å¤ä»¥å‰çš„çŠ¶æ€ã€‚å› ä¸ºå‰é¢äº‹åŠ¡æäº¤äº†æ²¡åŠæ³•å›æ»šäº†ï¼ˆé­”æ”¹æ•°æ®åº“ï¼‰</p></blockquote><figure><img src="https://user-images.githubusercontent.com/68344696/145942191-7a2d469f-94c8-4cd2-8c7e-46ad75683636.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-å¿«é€Ÿå¼€å§‹" tabindex="-1"><a class="header-anchor" href="#_2-å¿«é€Ÿå¼€å§‹"><span><a href="https://seata.io/zh-cn/docs/user/quickstart.html" target="_blank" rel="noopener noreferrer">2.å¿«é€Ÿå¼€å§‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></span></a></h3><blockquote><p>å®˜æ–¹æ–‡æ¡£å¾ˆæ¸…æ¥šäº†ï¼ï¼ï¼Gitä¹Ÿæœ‰å¾ˆå¤šåœºæ™¯ç¤ºä¾‹ã€‚Seataæ”¯æŒå¾ˆå¤šæ¨¡å¼.. <strong>AT æ¨¡å¼ï¼šä¸¤é˜¶æ®µæäº¤<a href="../gulimall/%E5%88%86%E5%B8%83%E5%BC%8F%E9%AB%98%E7%BA%A7">åè®®</a>çš„æ¼”å˜</strong></p></blockquote><p><strong>æœ¬åœ°@Transactional Springçš„æ³¨è§£</strong></p><p><strong>å…¨å±€@GlobalTransactional SpringCloudçš„æ³¨è§£ï¼ˆæ§åˆ¶åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ï¼šä»£è¡¨è¿™ä¸ªè®¢å•æœåŠ¡æ˜¯ä¸€ä¸ªå…¨å±€äº‹åŠ¡ï¼Œåˆ†æ”¯äº‹åŠ¡ç”¨@Transactionalå°±è¡Œäº†</strong></p><p>psï¼šåšé¡¹ç›®è®¢å•è¿™ä¸ªå…¨å±€äº‹åŠ¡éœ€è¦æŠŠè¿™ä¸¤ä¸ªæ³¨è§£éƒ½å†™</p><blockquote><p><a href="../gulimall/03%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1&amp;%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.pdf">è¿™é‡Œå…·ä½“çœ‹ PDFï¼</a>æ³¨æ„æ–¹æ¡ˆæ˜¯æ–¹æ¡ˆæ¡†æ¶æ˜¯æ¡†æ¶ï¼ˆè½åœ°å®ç°è¿™ä¸ªæ–¹æ¡ˆï¼‰ <strong>âœ”æ˜¯é«˜å¹¶å‘ä¼˜å…ˆè€ƒè™‘çš„ï¼Œç”¨MQ</strong> è®¢å•ç”¨å¼‚æ­¥ç¡®ä¿å‹/å•†å“ä¿å­˜å¯2PC</p></blockquote><ul><li><p>2PCï¼ˆSeataæ˜¯è¿™ä¸ªçš„ä¸€ä¸ªå˜å½¢ï¼‰è¿˜æœ‰3PC æ³¨æ„å’ŒMySQLå†™æ—¥å¿—çš„ä¸¤é˜¶æ®µæäº¤åŒºåˆ†ï¼Œæ˜¯ä¸ä¸€æ ·çš„ä¸œè¥¿ã€‚Seata ATæ˜¯ç¬¬ä¸€é˜¶æ®µæäº¤+2ç¬¬äºŒé˜¶æ®µçœ‹è¦ä¸è¦è¡¥å¿-2 åªé€‚åˆä¸€èˆ¬çš„åˆ†å¸ƒå¼äº‹åŠ¡ä¸åˆé€‚é«˜å¹¶å‘</p></li><li><p>æŸ”æ€§äº‹åŠ¡-TCC äº‹åŠ¡è¡¥å¿å‹æ–¹æ¡ˆï¼šç›¸å½“äº3PCçš„æ‰‹åŠ¨ç‰ˆ å•†åŸé¡¹ç›®ç”¨çš„å¾ˆå¤šï¼Œä¹Ÿæœ‰å¾ˆå¤šæ¡†æ¶ç»™ä½ å»ç”¨ã€‚æŠŠæ­£å¸¸çš„ä¸šåŠ¡ä»£ç æŒ‰ç…§æ¡†æ¶è¦æ±‚æ‹†æˆzå’Œä¸‰éƒ¨åˆ†å°±è¡Œ Try+2/add Cancel-2/delete</p></li><li><p>æŸ”æ€§äº‹åŠ¡-æœ€å¤§åŠªåŠ›é€šçŸ¥å‹æ–¹æ¡ˆï¼ˆå¼¹å¹•æœ‰å…¬å¸æ˜¯è¿™ä¸ªï¼‰âœ” æ”¯ä»˜å®å‘Šè¯‰ä½ æœ‰æ²¡æœ‰æ”¯ä»˜æˆåŠŸï¼ŒMQ ä¸€ä¼šå‘ä¸ªæ¶ˆæ¯å‘Šè¯‰ä½ æˆäº† ä¸€ä¼šå‘ä¸ªæ¶ˆæ¯å‘Šè¯‰ä½ æˆäº†</p></li><li><p>æŸ”æ€§äº‹åŠ¡-<strong>å¯é æ¶ˆæ¯</strong>+æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼ˆå¼‚æ­¥ç¡®ä¿å‹ï¼Œè§†é¢‘æ˜¯è¿™ä¸ªï¼‰âœ” ä¹Ÿæ˜¯å€ŸåŠ© MQ æ€»ç»“ä¸€å¥ï¼šå¼‚æ­¥ä¸‹å•ï¼Œæé«˜å¹¶å‘ï¼Œæå‡å“åº”ï¼Œæå‡è´­ç‰©ä½“éªŒã€‚</p></li></ul><h4 id="ä¸¾ä¾‹-at-æ¨¡å¼-è‡ªåŠ¨" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¾‹-at-æ¨¡å¼-è‡ªåŠ¨"><span>ä¸¾ä¾‹ AT æ¨¡å¼ï¼ˆè‡ªåŠ¨ï¼‰ï¼š</span></a></h4><blockquote><p>åªé€‚ç”¨ä¸€èˆ¬çš„åˆ†å¸ƒå¼äº‹åŠ¡æ§åˆ¶ï¼ˆä¾‹å¦‚ä¿å­˜å•†å“ä¼šæœ‰å‡ æ¬¡feignä¼˜æƒ åˆ¸ä¹‹ç±»çš„è¿™é‡Œä¸è¦æ±‚é«˜å¹¶å‘ï¼‰ï¼Œ<strong>ä¸é€‚åˆé«˜å¹¶å‘ã€‚ä¸‹å•å…¶å®ä¸é€‚åˆï¼ˆç”¨MQï¼‰</strong></p></blockquote><ol><li><p>éœ€è¦æ•°æ®åº“åŠ ä¸€ä¸ªå›æ»šè¡¨ï¼ˆå“ªä¸ªå¾®æœåŠ¡éœ€è¦å›æ»šçš„å°±å¾—åŠ ä¸Šï¼‰</p></li><li><p><a href="https://github.com/seata/seata/releases" target="_blank" rel="noopener noreferrer">è§£å‹å¹¶å¯åŠ¨seata-server<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ˆTC äº‹åŠ¡åè°ƒå™¨ï¼‰</p><ol><li><p>å¯¼å…¥ä¾èµ–spring-cloud-starter-alibaba-seata ä¼šè‡ªåŠ¨å¸¦ä¸Š seata-all-0.7.1</p></li><li><p>æ³¨æ„ä¸‹è½½çš„SeataæœåŠ¡å™¨ç‰ˆæœ¬è¦å’Œ seata-all-0.7.1 å¯¹åº”ï¼ï¼</p><ul><li>registry.confï¼šæœåŠ¡æ³¨å†Œ/æ³¨å†Œä¸­å¿ƒé…ç½®/äº‹åŠ¡æ—¥å¿—å­˜å‚¨ä½ç½®ï¼ˆglobal_table&amp;branch_table&amp;lock_tableï¼‰ ä¿®æ”¹ registrytype=nacos æˆ–ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ file.conf é…ç½®</li></ul></li><li><p>æ‰€æœ‰æƒ³è¦ç”¨åˆ°åˆ†å¸ƒå¼äº‹åŠ¡çš„å¾®æœåŠ¡ä½¿ç”¨seataDataSourceProxyä»£ç†è‡ªå·±çš„æ•°æ®æº</p><ul><li>1.4.1ç‰ˆä¸ç”¨é…ç½®æ•°æ®æºï¼Œåœ¨yamlä¸­å¼€å¯è‡ªåŠ¨ä»£ç†æ•°æ®æºï¼Œé»˜è®¤æ˜¯å¼€å¯çš„</li></ul></li><li><p><strong>æ¯ä¸ªå¾®æœåŠ¡,éƒ½å¿…é¡»å¯¼å…¥ registry.conf file.conf é…ç½®æœåŠ¡å</strong></p><ul><li><p>é—®é¢˜ä¸€ï¼š<a href="https://www.cnblogs.com/LinQingYang/p/13723779.html" target="_blank" rel="noopener noreferrer">no available server to connectè§£å†³<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ˆApplicationè¦é…ç½®seataï¼š spring.cloud.alibaba.seata.tx-service-group: <strong>my_test_tx_group</strong>ï¼‰</p></li><li><p><a href="https://juejin.cn/post/7163549166746992676" target="_blank" rel="noopener noreferrer">é—®é¢˜äºŒï¼šåŒä¸€æ— æ³•è¿æ¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>1.4.2ç›´æ¥æ³¨å†Œåˆ°nacosä¸Š ç°åœ¨çš„æ²¡è¿™ä¹ˆéº»çƒ¦äº†å§ å¯èƒ½åªéœ€è¦ä¸€ä¸ªregistry.confäº†</p></li></ul></li><li><p>ç»™åˆ†å¸ƒå¼å¤§äº‹åŠ¡çš„å…¥å£æ ‡æ³¨@GLobalTransactional æ¯ä¸€ä¸ªè¿œç¨‹çš„å°äº‹åŠ¡ç”¨@Transactional</p></li></ol></li></ol><p>â€‹ P290é¿ä¸ªå‘ï¼Œstaea0.7ä¸æ”¯æŒæ‰¹é‡ä¿å­˜ï¼Œæˆ‘æ˜¯éå†æ’å…¥çš„ï¼Œä½“éªŒè¦stataçš„æ•ˆæœå°±å¥½äº†ï¼Œä¸ä½¿ç”¨é«˜ç‰ˆæœ¬çš„stataä¹Ÿå¯ä»¥</p><p><mark>ç‰¹åˆ«æ³¨æ„ï¼šSeata ä¸ºç”¨æˆ·æä¾›äº† ATã€TCCã€SAGA å’Œ XA äº‹åŠ¡æ¨¡å¼</mark></p><blockquote><h4 id="åé¢çœ‹javaguideã€Šé¢è¯•æŒ‡åŒ—ã€‹è¡¥å……" tabindex="-1"><a class="header-anchor" href="#åé¢çœ‹javaguideã€Šé¢è¯•æŒ‡åŒ—ã€‹è¡¥å……"><span>åé¢çœ‹JavaGuideã€Š<a href="https://www.yuque.com/snailclimb/mf2z3k/ng9vmg" target="_blank" rel="noopener noreferrer">é¢è¯•æŒ‡åŒ—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‹è¡¥å……ï¼š</span></a></h4><p>ç®€å•æ€»ç»“ä¸€ä¸‹ 2PC ä¸¤é˜¶æ®µä¸­æ¯”è¾ƒé‡è¦çš„ä¸€äº›ç‚¹ï¼š</p><ol><li>å‡†å¤‡é˜¶æ®µ çš„ä¸»è¦ç›®çš„æ˜¯æµ‹è¯• RM èƒ½å¦æ‰§è¡Œ æœ¬åœ°æ•°æ®åº“äº‹åŠ¡ æ“ä½œï¼ˆ!!!æ³¨æ„ï¼šè¿™ä¸€æ­¥å¹¶ä¸ä¼šæäº¤äº‹åŠ¡ï¼‰ã€‚</li><li>æäº¤é˜¶æ®µ ä¸­ TM ä¼šæ ¹æ® å‡†å¤‡é˜¶æ®µ ä¸­ RM çš„æ¶ˆæ¯æ¥å†³å®šæ˜¯æ‰§è¡Œäº‹åŠ¡æäº¤è¿˜æ˜¯å›æ»šæ“ä½œã€‚</li><li>æäº¤é˜¶æ®µ ä¹‹åä¸€å®šä¼šç»“æŸå½“å‰çš„åˆ†å¸ƒå¼äº‹åŠ¡</li></ol><p>2PC çš„ä¼˜ç‚¹ï¼š</p><ul><li>å®ç°èµ·æ¥éå¸¸ç®€å•ï¼Œå„å¤§ä¸»æµæ•°æ®åº“æ¯”å¦‚ MySQLã€Oracle éƒ½æœ‰è‡ªå·±å®ç°ã€‚</li><li>é’ˆå¯¹çš„æ˜¯æ•°æ®å¼ºä¸€è‡´æ€§ã€‚ä¸è¿‡ï¼Œä»ç„¶å¯èƒ½å­˜åœ¨æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚</li></ul><p>2PC å­˜åœ¨çš„é—®é¢˜ï¼š</p><ul><li>åŒæ­¥é˜»å¡ ï¼šäº‹åŠ¡å‚ä¸è€…ä¼šåœ¨æ­£å¼æäº¤äº‹åŠ¡ä¹‹å‰ä¼šä¸€ç›´å ç”¨ç›¸å…³çš„èµ„æºã€‚æ¯”å¦‚ç”¨æˆ·å°æ˜è½¬è´¦ç»™å°çº¢ï¼Œé‚£å…¶ä»–äº‹åŠ¡ä¹Ÿè¦æ“ä½œç”¨æˆ·å°æ˜æˆ–å°çº¢çš„è¯ï¼Œå°±ä¼šé˜»å¡ã€‚(XDï¼šæ‰€ä»¥è°·ç²’å•†åŸ<strong>é«˜å¹¶å‘</strong>çš„æ¥å£æ²¡ç”¨Seataï¼Œç”¨çš„æ˜¯MQæŸ”æ€§äº‹åŠ¡)</li><li>æ•°æ®ä¸ä¸€è‡´ ï¼šç”±äºç½‘ç»œé—®é¢˜æˆ–è€…TMå®•æœºéƒ½æœ‰å¯èƒ½ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚æ¯”å¦‚åœ¨ç¬¬2é˜¶æ®µï¼ˆæäº¤é˜¶æ®µï¼‰ï¼Œéƒ¨åˆ†ç½‘ç»œå‡ºç°é—®é¢˜å¯¼è‡´éƒ¨åˆ†å‚ä¸è€…æ”¶ä¸åˆ° Commit/Rollback æ¶ˆæ¯çš„è¯ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li><li>å•ç‚¹é—®é¢˜ ï¼šTMåœ¨å…¶ä¸­ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è§’è‰²ï¼Œå¦‚æœTMåœ¨å‡†å¤‡(Prepare)é˜¶æ®µå®Œæˆä¹‹åæŒ‚æ‰çš„è¯ï¼Œäº‹åŠ¡å‚ä¸è€…å°±ä¼šä¸€ç›´å¡åœ¨æäº¤(Commit)é˜¶æ®µã€‚</li></ul></blockquote><h2 id="other-1" tabindex="-1"><a class="header-anchor" href="#other-1"><span>Other</span></a></h2><h3 id="ä¸€ã€spring-bootå¤šæœåŠ¡é¡¹ç›®ä¸æ˜¾ç¤ºserviceçª—å£" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€spring-bootå¤šæœåŠ¡é¡¹ç›®ä¸æ˜¾ç¤ºserviceçª—å£"><span>ä¸€ã€spring bootå¤šæœåŠ¡é¡¹ç›®ä¸æ˜¾ç¤ºserviceçª—å£</span></a></h3><p><strong>æ‰“å¼€è¿™ä¸ªæ–‡ä»¶.idea &gt; workspace.xml ä¸­æœç´¢ RunDashboardï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</strong></p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RunDashboard<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>configurationTypes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SpringBootApplicationConfigurationType<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ruleStates<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RuleState</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ConfigurationTypeDashboardGroupingRule<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RuleState</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RuleState</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>StatusDashboardGroupingRule<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RuleState</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!----><!--]--><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a href="https://github.com/zzq8/zzq8/edit/main/src/studynotes/JavaFramework/SpringCloud.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link vp-meta-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1024zzq@gmail.com">Fighting</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: 1024zzq@gmail.com">MiniPC</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/studynotes/JavaFramework/SpringBoot.html" aria-label="@RequestParamï¼Œ@PathParamï¼Œ@PathVariableç­‰æ³¨è§£åŒºåˆ«"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->@RequestParamï¼Œ@PathParamï¼Œ@PathVariableç­‰æ³¨è§£åŒºåˆ«</div></a><a class="route-link nav-link next" href="/studynotes/JavaFramework/SpringIntegration.html" aria-label="SpringIntegration"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">SpringIntegration<!----></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CwCP-kut.js" defer></script>
  </body>
</html>
