<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="keywords" content="è‡ªæˆ‘æå‡,æ•ˆç‡æå‡,å¼€æºå·¥å…·,å­¦ä¹ ç¬”è®°" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #252232);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"TODO(img) Springå…¨å®¶æ¡¶","image":["https://img-blog.csdnimg.cn/img_convert/b479191fb8035facdcd089735d56d011.png","https://img-blog.csdnimg.cn/img_convert/e0e7b70a664bec8260b7cfe9d1cdaddb.png","https://img-blog.csdnimg.cn/img_convert/905612521d1014eb63d9b95af7d37862.png"],"dateModified":null,"author":[{"@type":"Person","name":"Piglet","url":"https://zzq8.cn"}]}</script><meta property="og:url" content="https://zzq8.cn/coding/05-Framework/TODO(img)SpringFamilyBucket.html"><meta property="og:site_name" content="Piglet"><meta property="og:title" content="TODO(img) Springå…¨å®¶æ¡¶"><meta property="og:description" content="TODO(img) Springå…¨å®¶æ¡¶ TODOï¼šç¬”è®°å¤ªæ¾æ•£äº†ï¼Œæ¯”è¾ƒå°‘ å¯ä»¥ç­›é€‰ æ‹¿è¥å…»éƒ¨åˆ† é‡è¦ï¼šæ²¡çœ‹å®Œä¸€èŠ‚ä¸€å®šå»æå®¢çš„å¯¹åº”è§†é¢‘åº•ä¸‹çš„è¯„è®ºè¿‡ä¸€ä¸‹ æœ‰é—®é¢˜å°±è¦å¸¦ç€é—®é¢˜å»è§£å†³ï¼ 240403 å†å›é¡¾ï¼Œæ…¢å°±æ˜¯å¿«ã€‚ è¦ä¸»åŠ¨å­¦ä¹ è¿™æ ·å­¦ä¹ å†…å®¹çš„ç•™å­˜ç‡æ›´é«˜ 20h -> 2h/Day ===> 10 Day expect April 19th Finished P..."><meta property="og:type" content="article"><meta property="og:image" content="https://img-blog.csdnimg.cn/img_convert/b479191fb8035facdcd089735d56d011.png"><meta property="og:locale" content="zh-CN"><link rel="alternate" type="application/atom+xml" href="https://zzq8.cn/atom.xml" title="Piglet Atom Feed"><link rel="alternate" type="application/json" href="https://zzq8.cn/feed.json" title="Piglet JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://zzq8.cn/rss.xml" title="Piglet RSS Feed"><link rel="icon" href="/favicon.ico"><title>TODO(img) Springå…¨å®¶æ¡¶ | Piglet</title><meta name="description" content="TODO(img) Springå…¨å®¶æ¡¶ TODOï¼šç¬”è®°å¤ªæ¾æ•£äº†ï¼Œæ¯”è¾ƒå°‘ å¯ä»¥ç­›é€‰ æ‹¿è¥å…»éƒ¨åˆ† é‡è¦ï¼šæ²¡çœ‹å®Œä¸€èŠ‚ä¸€å®šå»æå®¢çš„å¯¹åº”è§†é¢‘åº•ä¸‹çš„è¯„è®ºè¿‡ä¸€ä¸‹ æœ‰é—®é¢˜å°±è¦å¸¦ç€é—®é¢˜å»è§£å†³ï¼ 240403 å†å›é¡¾ï¼Œæ…¢å°±æ˜¯å¿«ã€‚ è¦ä¸»åŠ¨å­¦ä¹ è¿™æ ·å­¦ä¹ å†…å®¹çš„ç•™å­˜ç‡æ›´é«˜ 20h -> 2h/Day ===> 10 Day expect April 19th Finished P...">
    <link rel="stylesheet" href="/assets/css/styles.e4c2b238.css">
    <link rel="preload" href="/assets/js/runtime~app.cb768472.js" as="script"><link rel="preload" href="/assets/css/styles.e4c2b238.css" as="style"><link rel="preload" href="/assets/js/7523.4f348652.js" as="script"><link rel="preload" href="/assets/js/app.0b323d97.js" as="script">
    
    <!-- ç»Ÿè®¡ä»£ç åŒºåŸŸ-->
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">Piglet</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog.html" aria-label="æµ®ç”Ÿæ‚è®°"><!--[--><iconify-icon class="vp-icon" icon="fa-solid fa-fish" sizing="height" height="1em"></iconify-icon><!--]-->æµ®ç”Ÿæ‚è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/code/" aria-label="ä»£ç ç¬”è®°"><!--[--><iconify-icon class="vp-icon" icon="fa-solid fa-code" sizing="height" height="1em"></iconify-icon><!--]-->ä»£ç ç¬”è®°<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="èµ„æºå®åº“"><!--[--><iconify-icon class="vp-icon" icon="book" sizing="height" height="1em"></iconify-icon>èµ„æºå®åº“<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/resources/books/" aria-label="ä¹¦ç±èµ„æº"><!--[--><iconify-icon class="vp-icon" icon="book-open" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->ä¹¦ç±èµ„æº<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/resources/videos/" aria-label="å½±éŸ³èµ„æº"><!--[--><iconify-icon class="vp-icon" icon="play" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å½±éŸ³èµ„æº<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/resources/demo/" aria-label="Demo"><!--[--><iconify-icon class="vp-icon" icon="fa-solid fa-handshake" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Demo<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç½‘ç«™ç›¸å…³"><!--[--><iconify-icon class="vp-icon" icon="id-card" sizing="height" height="1em"></iconify-icon>ç½‘ç«™ç›¸å…³<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/intro.html" aria-label="å…³äºä½œè€…"><!--[--><iconify-icon class="vp-icon" icon="user" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å…³äºä½œè€…<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/timeline/" aria-label="æ›´æ–°å†å²"><!--[--><iconify-icon class="vp-icon" icon="history" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->æ›´æ–°å†å²<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://discord.gg/cWAzWeZhFh" target="_blank" rel="noopener noreferrer" aria-label="discord"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" style="width:1.25rem;height:1.25rem;vertical-align:middle"><path d='m534.42,126.58a1.57,1.57 0 0 0 -0.79,-0.73a507.33,507.33 0 0 0 -125.19,-38.81a1.9,1.9 0 0 0 -2.01,0.95a352.96,352.96 0 0 0 -15.58,32.01a468.41,468.41 0 0 0 -140.6,0a323.75,323.75 0 0 0 -15.82,-32.01a1.98,1.98 0 0 0 -2.02,-0.95a505.9,505.9 0 0 0 -125.19,38.81a1.79,1.79 0 0 0 -0.82,0.7c-79.73,119.07 -101.57,235.21 -90.86,349.9a2.11,2.11 0 0 0 0.81,1.44a510.06,510.06 0 0 0 153.56,77.6a1.99,1.99 0 0 0 2.15,-0.71a364.19,364.19 0 0 0 31.42,-51.08a1.95,1.95 0 0 0 -1.07,-2.71a335.92,335.92 0 0 1 -47.98,-22.85a1.98,1.98 0 0 1 -0.19,-3.27c3.22,-2.42 6.44,-4.93 9.53,-7.46a1.9,1.9 0 0 1 1.99,-0.27c100.65,45.94 209.61,45.94 309.07,0a1.89,1.89 0 0 1 2.01,0.24c3.09,2.54 6.31,5.07 9.55,7.49a1.97,1.97 0 0 1 -0.17,3.27a315.25,315.25 0 0 1 -48,22.83a1.97,1.97 0 0 0 -1.05,2.73a409.02,409.02 0 0 0 31.4,51.05a1.95,1.95 0 0 0 2.15,0.73a508.37,508.37 0 0 0 153.81,-77.59a1.97,1.97 0 0 0 0.81,-1.41c12.82,-132.61 -21.48,-247.79 -90.93,-349.9zm-315.91,280.03c-30.3,0 -55.27,-27.81 -55.27,-61.96s24.48,-61.96 55.27,-61.96c31.03,0 55.76,28.05 55.27,61.96c0,34.15 -24.48,61.96 -55.27,61.96zm204.35,0c-30.3,0 -55.27,-27.81 -55.27,-61.96s24.48,-61.96 55.27,-61.96c31.03,0 55.76,28.05 55.27,61.96c0,34.15 -24.23,61.96 -55.27,61.96z' fill="currentColor"/></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div class="docsearch-placeholder"><button type="button" aria-label="æœç´¢æ–‡æ¡£" aria-keyshortcuts="Control+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" class="DocSearch-Search-Icon"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key DocSearch-Button-Key--ctrl">Ctrl</kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><iconify-icon class="vp-icon" icon="fa-solid fa-code" sizing="both" width="1em" height="1em"></iconify-icon><span class="vp-sidebar-title">ä»£ç ç¼–ç¨‹</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">00 Inbox</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">01 CS Foundation</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">02 Language</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">03 Concurrency</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">04 Database</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">05 Framework</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/coding/05-Framework/MyBatis.html" aria-label="MyBatis"><!---->MyBatis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/05-Framework/SpringBoot.html" aria-label="SpringBoot2"><!---->SpringBoot2<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/05-Framework/SpringCloud.html" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/05-Framework/SpringIntegration.html" aria-label="SpringIntegration"><!---->SpringIntegration<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/05-Framework/SpringSecurity.html" aria-label="SpringSecurity"><!---->SpringSecurity<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/coding/05-Framework/TODO(img)SpringFamilyBucket.html" aria-label="TODO(img) Springå…¨å®¶æ¡¶"><!---->TODO(img) Springå…¨å®¶æ¡¶<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">06 Middleware</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">08 Coding Practice</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">09 Projects</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">10 Tooling</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">11 Experience</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">12 AI</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/DirectoryTree.html" aria-label="DirectoryTree"><!---->DirectoryTree<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/Z_AI.html" aria-label="Z_AI"><!--[--><iconify-icon class="vp-icon" icon="fa-solid fa-robot" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Z_AI<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/Z_Prompt.html" aria-label="Z_Prompt"><!---->Z_Prompt<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/Z_BlogList.html" aria-label="Z_Share_List"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:list" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Z_Share_List<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="fa-solid fa-feather-pointed" sizing="both" width="1em" height="1em"></iconify-icon><a class="route-link auto-link vp-sidebar-title no-external-link-icon" href="/blog.html" aria-label="åšå®¢æ–‡ç« "><!---->åšå®¢æ–‡ç« <!----></a><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->TODO(img) Springå…¨å®¶æ¡¶</h1><div class="page-info"><!----><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 4304 å­—</span><meta property="wordCount" content="4304"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 14 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT14M"></span><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="todo-img-springå…¨å®¶æ¡¶" tabindex="-1"><a class="header-anchor" href="#todo-img-springå…¨å®¶æ¡¶"><span>TODO(img) Springå…¨å®¶æ¡¶</span></a></h1><blockquote><p>TODOï¼šç¬”è®°å¤ªæ¾æ•£äº†ï¼Œæ¯”è¾ƒå°‘ å¯ä»¥ç­›é€‰ æ‹¿è¥å…»éƒ¨åˆ†</p><h4 id="é‡è¦-æ²¡çœ‹å®Œä¸€èŠ‚ä¸€å®šå»æå®¢çš„å¯¹åº”è§†é¢‘åº•ä¸‹çš„è¯„è®ºè¿‡ä¸€ä¸‹" tabindex="-1"><a class="header-anchor" href="#é‡è¦-æ²¡çœ‹å®Œä¸€èŠ‚ä¸€å®šå»æå®¢çš„å¯¹åº”è§†é¢‘åº•ä¸‹çš„è¯„è®ºè¿‡ä¸€ä¸‹"><span>é‡è¦ï¼šæ²¡çœ‹å®Œä¸€èŠ‚ä¸€å®šå»<a href="https://time.geekbang.org/course/detail/100023501-80193" target="_blank" rel="noopener noreferrer">æå®¢çš„å¯¹åº”è§†é¢‘</a>åº•ä¸‹çš„è¯„è®ºè¿‡ä¸€ä¸‹</span></a></h4><p>æœ‰é—®é¢˜å°±è¦å¸¦ç€é—®é¢˜å»è§£å†³ï¼ 240403 å†å›é¡¾ï¼Œæ…¢å°±æ˜¯å¿«ã€‚ è¦ä¸»åŠ¨å­¦ä¹ è¿™æ ·å­¦ä¹ å†…å®¹çš„ç•™å­˜ç‡æ›´é«˜</p><p>20h -&gt; 2h/Day ===&gt; 10 Day expect April 19th Finished</p><h4 id="pdf-è¯¾ä»¶å’Œæºä»£ç ä¸‹è½½åœ°å€" tabindex="-1"><a class="header-anchor" href="#pdf-è¯¾ä»¶å’Œæºä»£ç ä¸‹è½½åœ°å€"><span>PDF è¯¾ä»¶å’Œæºä»£ç ä¸‹è½½åœ°å€ï¼š</span></a></h4><p><a href="https://gitee.com/geektime-geekbang/geektime-spring-family" target="_blank" rel="noopener noreferrer">https://gitee.com/geektime-geekbang/geektime-spring-family</a></p><p><a href="https://github.com/digitalsonic/geektime-spring-family" target="_blank" rel="noopener noreferrer">https://github.com/digitalsonic/geektime-spring-family</a></p><p>psï¼š2019å¹´åˆ¶ä½œçš„è¯¾ç¨‹ï¼Œè™½ç„¶ç‰ˆæœ¬å·²ç»è·Ÿä¸ä¸Šç°åœ¨çš„æ­¥å­äº†ï¼Œä½†è¿˜æ˜¯å¸Œæœ›èƒ½ç»™ä½ å¸¦å»ä¸€äº›å¸®åŠ©ã€‚ æ¶æ„å‘å±•ï¼šå•æœº - é›†ç¾¤ - äº‘</p></blockquote><h2 id="çº¿ä¸Šå’–å•¡é¡¹ç›®-springbucks" tabindex="-1"><a class="header-anchor" href="#çº¿ä¸Šå’–å•¡é¡¹ç›®-springbucks"><span>çº¿ä¸Šå’–å•¡é¡¹ç›®-SpringBucks</span></a></h2><p>é‡‘é¢ç›¸å…³ä¸ç”¨æµ®ç‚¹ç±»å‹, è€Œæ˜¯å¼•ç”¨ joda-money jaråŒ… + usertype.core jaræ¥å®ç°æ˜ å°„</p><p>Q: è€å¸ˆï¼Œè¯·é—®é‡‘èé¡¹ç›®ï¼Œä½¿ç”¨æµ®ç‚¹æ•° double ä¼šå‡ºä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p><p>ä½œè€…å›å¤: æ¯”å¦‚ç²¾åº¦ã€è´§å¸è½¬æ¢ã€å•ä½ç­‰ç­‰çš„ï¼Œè¿˜æ˜¯å»ºè®®ç”¨ Money ç±»ï¼Œä¸è¦ç”¨ Double</p><p>BigDecimalåªæ˜¯å¤„ç†ç²¾åº¦è€Œå·²ï¼Œå¯¹äºè´§å¸è€Œè¨€ï¼Œè¿˜æœ‰è´§å¸ç§ç±»ã€è´§å¸å•ä½ã€è´§å¸è½¬æ¢ç­‰å¾ˆå¤šä¸œè¥¿éœ€è¦è€ƒè™‘çš„ã€‚æ¯”å¦‚å…ƒè½¬åˆ†ï¼Œåˆ†è½¬å…ƒè¿™äº›Moneyéƒ½æä¾›äº†æ”¯æŒã€‚</p><p>ä½ æƒ³å•Šï¼Œä¸åŒçš„å¸ç§ä»–ä»¬çš„å•ä½ä¸åŒï¼Œå°æ•°çš„ä½æ•°ä¹Ÿä¸åŒï¼Œä»¥äººæ°‘å¸ä¸ºä¾‹ï¼Œæˆ‘å¯ä»¥ç”¨å…ƒè¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨åˆ†è¡¨ç¤ºï¼Œåè€…æ•°å­—æ˜¯å‰è€…çš„100å€ï¼Œå¦‚æœæˆ‘æ¢ä¸ªå¸ç§å‘¢ï¼Œä¹Ÿè®¸æ˜¯1000å€ï¼Œæ¯”å¦‚ä¼Šæ‹‰å…‹ç¬¬çº³å°”ï¼Œé‡‘é¢è¦å’Œè´§å¸ç»‘å®šåœ¨ä¸€èµ·ã€‚ä½ ä¹Ÿè®¸è¿˜ä¼šç¢°ä¸Šè´§å¸è½¬æ¢ç­‰ç­‰å·¥ä½œï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨ä¸“é—¨çš„APIæ¯”è¾ƒæ–¹ä¾¿ã€‚</p><h2 id="jdbc" tabindex="-1"><a class="header-anchor" href="#jdbc"><span>ï½œJDBC</span></a></h2><h3 id="h2" tabindex="-1"><a class="header-anchor" href="#h2"><span>H2</span></a></h3><blockquote><p>h2 å†…å­˜æ•°æ®åº“ä¸¾ä¾‹ï¼ˆå¯åˆå§‹åŒ–å†…åµŒæ•°æ®åº“ Config/Code ä¸­å¯æŒ‡å®š schema&amp;data SQLæ–‡ä»¶ï¼‰</p></blockquote><h4 id="q-å¦‚ä½•æŸ¥çœ‹-h2-å†…å­˜æ•°æ®åº“çš„å†…å®¹" tabindex="-1"><a class="header-anchor" href="#q-å¦‚ä½•æŸ¥çœ‹-h2-å†…å­˜æ•°æ®åº“çš„å†…å®¹"><span>Q: å¦‚ä½•æŸ¥çœ‹ H2 å†…å­˜æ•°æ®åº“çš„å†…å®¹ï¼Ÿ</span></a></h4><blockquote><p>ä¸€å¼€å§‹è·Ÿç€è§†é¢‘èµ°, åªèƒ½ commandLine å¯åŠ¨ç±» log ä¸€ä¸‹çœ‹, ç°åœ¨èƒ½ Web</p></blockquote><p>ä½ åº”è¯¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿è¡Œ H2 web serverï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ H2 Console æ¥è®¿é—®å†…å­˜æ•°æ®åº“ã€‚åœ¨ Spring åº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯ä»¥åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­å£°æ˜äº†ä¸€ä¸ª web server beanï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> org.h2.tools.Server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">initMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;start&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> destroyMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;stop&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Server</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> h2WebServer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SQLException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createWebServer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;-web&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;-webAllowOthers&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;-webDaemon&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;-webPort&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;8082&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œåœ¨åº”ç”¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://localhost:8082" target="_blank" rel="noopener noreferrer">http://localhost:8082</a> æ¥è®¿é—®æ•°æ®åº“äº†ã€‚</p><p>å‚è€ƒ <a href="https://stackoverflow.com/questions/7309359/view-content-of-h2-or-hsqldb-in-memory-database" target="_blank" rel="noopener noreferrer">View content of H2 or HSQLDB in-memory database</a>ã€‚</p><p>è¡¥å……:</p><ul><li><code>spring.h2.console.enabled=true</code><ul><li>log - <code>jdbc:h2:mem:3e44a043-0e60-4cc1-9491-117ff59842fz</code>(è¿™é‡Œ dbname å¯ä»¥é…ç½®çš„)</li></ul></li><li>Web JDBC URL å¡«ä»¥ä¸‹ Log çš„ &#39;jdbc:h2:mem:testdb&#39; (æäº†å¾ˆä¹…è¿™ä¸ªåœ°æ–¹)</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2024</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">04</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">15</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 16</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">32.481</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  INFO </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">44526</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> --</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> [           main] </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">o</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">h2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">H2ConsoleAutoConfiguration</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    :</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> H2</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> console available at </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;/h2&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Database</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> available at </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;jdbc:h2:mem:testdb&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="æ–¹æ³•ä¸€-æ‰‹å·¥" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•ä¸€-æ‰‹å·¥"><span>æ–¹æ³•ä¸€ï¼šæ‰‹å·¥</span></a></h4><blockquote><p>ä»£ç æ–¹å¼ - æ˜¾å¼çš„é…ç½®ä¸€äº›å‚æ•°</p></blockquote><blockquote><p>DIY 3 ä¸ª Bean, MODE=MySQL</p><p>é‡ç‚¹åªæœ‰ DataSourceï¼Œå…¶ä»–å…¶å®åªæ˜¯è¾…åŠ©</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;classpath:db/schema.sql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Resource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> schemaScripts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;classpath:db/data.sql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Resource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dataScripts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;classpath*:mapper/*.xml&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Resource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[] mappers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ConfigurationCustomizer</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> mybatisConfigurationCustomizer</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> configuration </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setUseGeneratedKeys</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setUseGeneratedKeys</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setCacheEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setLazyLoadingEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setDefaultExecutorType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ExecutorType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">BATCH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setUseColumnLabel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setLogImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">StdOutImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    JdbcDataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ds </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> JdbcDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setURL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sa&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setPassword</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;sa&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ResourceDatabasePopulator</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> initializer </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ResourceDatabasePopulator</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    initializer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setScripts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(schemaScripts, dataScripts);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    DatabasePopulatorUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(initializer, ds);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> org</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">mybatis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SqlSessionFactoryBean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> inmemSessionFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    org</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">mybatis</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">spring</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SqlSessionFactoryBean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sessionFactoryBean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> org</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">mybatis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">spring</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SqlSessionFactoryBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    sessionFactoryBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    sessionFactoryBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setMapperLocations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(mappers);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sessionFactoryBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://img-blog.csdnimg.cn/img_convert/b479191fb8035facdcd089735d56d011.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>Qï¼šå¯åŠ¨æ—¶å€™ DIY æ‰“å° DataSource#toString ä¸ºä»€ä¹ˆèƒ½çœ‹åˆ° DB çš„ URL ä¿¡æ¯</p><p>Aï¼šç”±äº DataSource ds = new JdbcDataSource();</p><p>æ‰€ä»¥ ds.toString() è°ƒç”¨çš„æ˜¯ JdbcDataSource#toString</p><p>å³ return this.getTraceObjectName() + &quot;: url=&quot; + this.url + &quot; user=&quot; + this.userName;<br> å¯ä»¥çœ‹åˆ° url ä¿¡æ¯ï¼ŒåŠå…¶ user ä¿¡æ¯ï¼</p></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">datasource</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=====</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ds0</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jdbc</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">h2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">mem</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">testdb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">MODE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">MySQL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">DB_CLOSE_DELAY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">sa</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">connection</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=====</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">conn3</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">jdbc</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">h2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">mem</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">testdb user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">SA</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦‚æœæ²¡æœ‰é…æ•°æ®æº JdbcDataSourceï¼Œåˆ™é»˜è®¤çš„<br> &quot;dataSource&quot;: {&quot;type&quot;: &quot;com.zaxxer.hikari.HikariDataSource&quot;}<br> å…·ä½“å¯ä»¥é€šè¿‡ actuator æ ¸å®ï¼</li><li>é™¤äº† DataSourceï¼ŒSpringBoot è¿˜å¸®æˆ‘ä»¬é…äº† &quot;transactionTemplate&quot;ã€&quot;jdbcTemplate&quot;</li></ul><p>Totalï¼šSpringBoot å¸®æˆ‘ä»¬é…ç½®äº† DataSourceã€DataSourceTransactionManagerã€JdbcTemplateéƒ½æ˜¯ç”±ä»–ä»¬çš„ xx+AutoConfiguration é…ç½®çš„ï¼Œä¾‹å¦‚ DataSourceAutoConfiguration -&gt; DataSource</p><p>éƒ½æ˜¯æŒ‰éœ€è£…é…çš„ï¼Œç”¨æˆ· DIY çš„ä¼˜å…ˆçº§åœ¨å‰</p><h4 id="æ–¹æ³•äºŒ-è‡ªåŠ¨" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•äºŒ-è‡ªåŠ¨"><span><a href="https://gitee.com/geektime-geekbang/geektime-spring-family/blob/master/Chapter%202/datasource-demo/src/main/resources/data.sql" target="_blank" rel="noopener noreferrer">æ–¹æ³•äºŒ</a>ï¼šè‡ªåŠ¨</span></a></h4><p>é™¤äº†ä¸Šé¢ä»£ç æ–¹å¼é…ç½®å¤–ï¼š</p><p>ç›´æ¥ SpringBoot å…¨ç®¡ç†ï¼Œschema.sql ç­‰ sql æ–‡ä»¶æ”¾ resource æ ¹ç›®å½•</p><h3 id="å¤šæ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#å¤šæ•°æ®æº"><span><a href="https://gitee.com/geektime-geekbang/geektime-spring-family/blob/master/Chapter%202/multi-datasource-demo/src/main/java/geektime/spring/data/multidatasourcedemo/MultiDataSourceDemoApplication.java" target="_blank" rel="noopener noreferrer">å¤šæ•°æ®æº</a></span></a></h3><blockquote><p>Q: ä¸ºä»€ä¹ˆè¦ exclude, ç¬¬5èŠ‚ä¸­æåˆ°ï¼šå¦‚æœè‡ªè¡Œé…ç½®äº†æ•°æ®æºï¼Œé‚£ä¹ˆspringä¸ä¼šå†è‡ªåŠ¨é…ç½®æ•°æ®æºã€‚è¿™è¾¹ä¹Ÿæ˜¯è‡ªè¡Œé…ç½®æ•°æ®æºï¼Œspringåº”è¯¥ä¸ä¼šå†è‡ªåŠ¨é…ç½®æ•°æ®æºã€‚æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦excludeä¸‰ä¸ªè‡ªåŠ¨é…ç½®çš„ç±»ã€‚</p><p>A: ä½œè€…å›å¤: æˆ‘åœ¨å…¶ä»–åŒå­¦çš„ç•™è¨€ä¸­è§£é‡Šè¿‡è¿™ä¸ªé—®é¢˜äº†ï¼Œå¯ä»¥ç¿»ä¸€ä¸‹å“ˆã€‚çš„ç¡®ä¸excludeçš„æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜ç¡®ä¸ä½¿ç”¨çš„ä¸œè¥¿å°±ä»é¡¹ç›®ä¾èµ–ä¸­å»æ‰ï¼Œæ˜¯ä¸ªä¸é”™çš„ä¹ æƒ¯ã€‚</p><p>ç¬¬5èŠ‚æ˜¯åœ¨è®²å¦‚æœè¦é…ç½®å¤šä¸ªæ•°æ®æºè¯¥æ€ä¹ˆåŠï¼ŒSpringBootçš„è‡ªåŠ¨é…ç½®å¤šæ•°éƒ½æ˜¯é’ˆå¯¹åªæœ‰ä¸€ä¸ªDataSourceçš„ï¼Œæ‰€ä»¥æˆ‘åœ¨è¯¾ç¨‹ä¸­æäº†ï¼Œè¦ä¹ˆç»™ä¸»è¦çš„DataSource Beanå¢åŠ @Primaryæ³¨è§£ï¼Œè¦ä¹ˆå°±æŠŠå‡ ä¸ªè‡ªåŠ¨é…ç½®ç±»æ’é™¤æ‰ã€‚</p><blockquote><p>ç•¥æ‡‚ï¼Œæ›´åå‘ a1 Good habit</p></blockquote></blockquote><blockquote><p>â­ï¸ Qï¼š spring boot æ˜¯å¦‚ä½•ä¿è¯ bean çš„ç”Ÿæˆé¡ºåºæ˜¯ï¼šfooDataSourceProperties -&gt; fooDataSource -&gt; fooTxManagerï¼Œå¦åˆ™æœ€å…ˆç”Ÿæˆçš„æ˜¯ fooTxManagerï¼Œå…¶ä¾èµ–çš„ fooTxManager ä»æœªç”Ÿæˆï¼Œè¿™ä¸å°±æŠ¥é”™äº†ä¹ˆï¼Ÿ</p><p>Aï¼šSpringè‡ªå·±ä¼šè®¡ç®—ä¾èµ–å…³ç³»ï¼ŒæŠŠä¾èµ–æœ€åº•å±‚çš„Beanå…ˆåˆ›å»ºå‡ºæ¥</p></blockquote><blockquote><p>â­ï¸ Q: ä¸ºå•¥ç”Ÿæˆ fooDataSource æ—¶ï¼Œæ˜¯æ–¹æ³•å†…ç›´æ¥è°ƒç”¨ fooDataSourceProperties() æ–¹æ³•ï¼Œè€Œéåœ¨æ–¹æ³•å…¥å‚æ³¨å…¥ fooDataSourceProperties å˜é‡ï¼Ÿ</p><p>Aï¼šæ³¨å…¥å’Œè°ƒç”¨æ–¹æ³•çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œæœ‰äº›å°å°çš„é»‘é­”æ³•ï¼ŒSpringå¯¹è¿™é‡Œçš„è°ƒç”¨åšäº†å¤„ç†ã€‚å®˜æ–¹æ–‡æ¡£é‡Œæœ‰è¿™ä¹ˆä¸€å¥è¯ï¼šAll @Configuration classes are subclassed at startup-time with CGLIB. In the subclass, the child method checks the container first for any cached (scoped) beans before it calls the parent method and creates a new instance.<br> Translate: å­æ–¹æ³•åœ¨è°ƒç”¨çˆ¶æ–¹æ³•å¹¶åˆ›å»ºæ–°å®ä¾‹ä¹‹å‰ï¼Œé¦–å…ˆæ£€æŸ¥å®¹å™¨ä¸­æ˜¯å¦æœ‰ä»»ä½•ç¼“å­˜ï¼ˆä½œç”¨åŸŸï¼‰bean</p></blockquote><blockquote><p>Qï¼š å¦‚æœè¦ç”Ÿæˆ fooJdbcTemplate å’Œ barJdbcTemplateï¼Œä»£ç è¦å¦‚ä½•å†™å‘¢ï¼Ÿæˆ‘å‚ç…§äº† fooTxManager ç”Ÿæˆæ–¹å¼ï¼Œå¹¶ä¸”æŒ‰ç…§ä¸Šä¸€èŠ‚è¯¾â€œå¦‚ä½•é…ç½®å•æ•°æ®æºâ€è¯»å–æ•°æ®çš„æ–¹å¼ï¼Œç¨‹åºæŠ¥é”™ï¼š Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table &quot;FOO&quot; not found; SQL statement: SELECT * FROM FOO [42102-200]ã€‚</p><p>A: å› ä¸ºä½ æ’é™¤äº†SpringBootçš„æ•°æ®æºè‡ªåŠ¨é…ç½®ï¼Œæ‰€ä»¥SpringBootä¸ä¼šä¸ºä½ åˆå§‹åŒ–Schemaå’ŒDataï¼Œå› æ­¤å°±æ²¡æœ‰ä½ è¦çš„æ•°æ®è¡¨ã€‚</p><blockquote><p>å…¶å®ä¹Ÿå¯ Code è‡ªå®šä¹‰è¿™ä¸¤ä¸ªçš„è·¯å¾„é…ç½®</p></blockquote></blockquote><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//-------åˆå§‹åŒ–æ•°æ®åº“è„šæœ¬ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * è¿™ä¸ªbeanåªæ˜¯ä¸ºäº†åœ¨å¤šæ•°æ®æºç¯å¢ƒåˆå§‹åŒ–schemaå³data</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSourceInitializer</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fooDataSourceInitializer</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;fooDataSource&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dataSource) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ResourceDatabasePopulator</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> resourceDatabasePopulator </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ResourceDatabasePopulator</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    resourceDatabasePopulator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addScript</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ClassPathResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;foo-schema.sql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    resourceDatabasePopulator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addScript</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ClassPathResource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;foo-data.sql&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    DataSourceInitializer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dataSourceInitializer </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DataSourceInitializer</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dataSourceInitializer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dataSource);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dataSourceInitializer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setDatabasePopulator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(resourceDatabasePopulator);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dataSourceInitializer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Qï¼šæ˜¯ç‰ˆæœ¬è¿˜æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œå»æ‰äº†ç¬¬ä¸‰ä¸ªexcludedçš„JDBCTemplateç±»ï¼Œä¸¤ä¸ªå…¶ä¸­ä¸€ä¸ªbeanåŠ ä¸Š@Primaryæ‰è·‘é€š</p><p>A: JdbcTemplateAutoConfigurationè¦æ±‚åªæœ‰ä¸€ä¸ªDataSource Beanï¼Œæˆ‘ä»¬çš„ä»£ç é‡Œé…ç½®äº†ä¸¤ä¸ªï¼Œè‡ªç„¶è¿è¡Œä¼šæŠ¥é”™ï¼Œåœ¨æŒ‡å®šäº†@Primaryåï¼Œå°±æœ‰äº†ä¸»Beanï¼Œå°±èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚</p></blockquote><blockquote><p>Qï¼šä¸¤ä¸ªæ•°æ®æºéƒ½åŠ è½½è¿›å»äº†ï¼Œæ€ä¹ˆä½¿ç”¨å‘¢ï¼Œæ¯”å¦‚è¯´æ€ä¹ˆä½¿ç”¨ç¬¬ä¸€ä¸ª ï¼Œæ€ä¹ˆä½¿ç”¨ç¬¬äºŒä¸ªï¼Ÿ</p><p>Aï¼šä½œè€…å›å¤: è¿™ä¸ªå°±æ˜¯è¦ä½ è‡ªå·±æ¥å®ç°çš„äº†ï¼Œæœ‰ä¸¤ä¸ªæ•°æ®æºï¼Œå°±ä¼šæœ‰ä¸¤å¥—äº‹åŠ¡çš„é…ç½®ï¼Œä¸¤ä¸ªJdbcTemplateï¼Œä»€ä¹ˆéƒ½æ˜¯ä¸¤ä¸ªï¼Œä½ è‡ªå·±é€‰æ‹©ç”¨å“ªä¸ªã€‚æˆ‘ä»¬åœ¨ç­”ç–‘è¯¾é‡Œé’ˆå¯¹å¤šæ•°æ®æºåšäº†äº›è¯´æ˜ï¼Œä½ å¯ä»¥è·³è¿‡å»çœ‹çœ‹ã€‚</p></blockquote><p>é…ç½®å¤šæ•°æ®æºçš„ä¸¤ç§æ–¹å¼ï¼š</p><p><strong>æ–¹æ³•ä¸€ï¼š</strong></p><ol><li>é…ç½® @Primary ç±»å‹çš„Bean <ol><li>ç¬¬ä¸€ç§æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æ²¡åšDemo</li></ol></li></ol><hr><p>æ–¹<strong>æ³•äºŒï¼š</strong></p><ol><li>Springboot æ³¨è§£ Exclude SpringBoot è‡ªåŠ¨é…ç½®ä»¥ä¸‹ä¸‰ä¸ªç±» <ul><li>DataSourceAutoConfiguration</li><li>DataSourceTransactionManager<!----><ul><li><!----></li></ul></li><li>JdbcTemplate<!----></li></ul></li><li><!---->DataSourceProperties, DataSource, PlatformTransactionManager</li></ol><h3 id="db-è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#db-è¿æ¥æ± "><span>DB è¿æ¥æ± </span></a></h3><p>SpringBoot 1.x æ˜¯ tomcat-jdbc çš„è¿æ¥æ± ï¼ˆå¦‚æƒ³ç”¨2.xçš„éœ€æ’é™¤è¿™ä¸ªï¼‰</p><p>2.x å°±æ˜¯ HikariCP (å¥½å¤„: å®˜æ–¹è‡ªå¸¦, å¿«! )</p><p>ps: Tomcatä¸æ˜¯æœåŠ¡å™¨ä¹ˆï¼Ÿ A: Tomcatä¹Ÿæœ‰æ•°æ®åº“è¿æ¥æ± </p><p>Druid å¥½å¤„</p><ul><li><strong>ç›‘æ§åŠŸèƒ½</strong>, ä»…ä»…å°çš„æ€§èƒ½å¼€é”€</li><li>SQL é˜²æ³¨å…¥</li><li>æ•°æ®åº“å¯†ç åŠ å¯† (yml é…ç½®åŠ å¯†åçš„å°±è¡Œ)</li><li>æ…¢æŸ¥è¯¢æ—¥å¿— <ul><li>å¯ä»¥å¯åŠ¨æ—¶å€™é…ç½® -Ddruid.stat.logSlowSql=true (é»˜è®¤ 3s ä¹Ÿå¯ä»¥è®¾)</li></ul></li></ul><blockquote><h3 id="æ‰©å±•å‚æ•°é…ç½®-todo-notes" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•å‚æ•°é…ç½®-todo-notes"><span>æ‰©å±•å‚æ•°é…ç½® TODO Notes</span></a></h3><p>å¸¸ç”¨: å‘½ä»¤è¡Œå‚æ•°</p><p>é€šè¿‡java -jar app.jar --name=&quot;Spring&quot; --server.port=9090æ–¹å¼æ¥ä¼ é€’å‚æ•°ã€‚</p><p>å‚æ•°ç”¨--xxx=xxxçš„å½¢å¼ä¼ é€’ã€‚</p><p>å…¶å®è¿˜æœ‰ -D</p><p>æ³¨æ„Javaç³»ç»Ÿå±æ€§ä½ç½®java -Dname=&quot;isea533&quot; -jar app.jarï¼Œå¯ä»¥é…ç½®çš„å±æ€§éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¼˜å…ˆçº§ä¸åŒã€‚</p></blockquote><p>ä¸¤ä¸ªç½‘å€: å¾ˆå¥½</p><blockquote><p><a href="https://blog.csdn.net/isea533/article/details/50281151" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/isea533/article/details/50281151</a></p><p><a href="https://blog.51cto.com/u_16213381/7078734" target="_blank" rel="noopener noreferrer">https://blog.51cto.com/u_16213381/7078734</a></p></blockquote><h3 id="äº‹åŠ¡æŠ½è±¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡æŠ½è±¡"><span>äº‹åŠ¡æŠ½è±¡</span></a></h3><p>ç¼–ç¨‹å¼äº‹åŠ¡ vs å£°æ˜å¼äº‹åŠ¡ (AOP)</p><p>Q: å¼€å§‹äº‹åŠ¡å¥½åƒä¸éœ€è¦@EnableTransactionManagementæ³¨è§£ï¼Œè€å¸ˆé‡Œé¢çš„ä»£ç ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹ï¼Œå»æ‰è¿™ä¸ªæ³¨è§£ï¼Œäº‹åŠ¡å›æ»šä¹Ÿæ˜¯ç”Ÿæ•ˆçš„ã€‚</p><p>ä½œè€…å›å¤: ä½ ä¸éœ€è¦æ·»åŠ ï¼Œæ˜¯å› ä¸ºSpring Bootè‡ªåŠ¨é…ç½®é‡ŒåŠ ä¸Šäº†ã€‚å¦‚æœä¸åœ¨Spring Bootçš„å·¥ç¨‹é‡Œï¼Œä½ è¿˜æ˜¯éœ€è¦åŠ çš„ã€‚</p><p>è¡¥å…… SpringBoot ç¬”è®°</p><p>åœ¨@Transactionalæ³¨è§£ä¸­å¦‚æœä¸é…ç½®rollbackForå±æ€§,é‚£ä¹ˆäº‹ç‰©åªä¼šåœ¨é‡åˆ°RuntimeExceptionçš„æ—¶å€™æ‰ä¼šå›æ»š,åŠ ä¸ŠrollbackFor=Exception.class,å¯ä»¥è®©äº‹ç‰©åœ¨é‡åˆ°éè¿è¡Œæ—¶å¼‚å¸¸æ—¶ä¹Ÿå›æ»š</p><p>XD è¿™ä¸€ç‚¹å¯ä»¥çœ‹æºç æ³¨é‡Š! <!----></p><!----><!----><p>æ–¹æ³•äºŒ(TODO RecordNotes): å£°æ˜å¼äº‹åŠ¡é™¤äº†ç”¨ AopContext æ‰å¤–, è¿˜å¯ä»¥ æ³¨å…¥è°ƒç”¨</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    FooService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> fooService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invokeInsertThenRollback</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() throws RollbackException {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//        insertThenRollback();   //è¿™é‡Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//        ((FooService)(AopContext.currentProxy())).insertThenRollback();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        fooService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">insertThenRollback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="actuator" tabindex="-1"><a class="header-anchor" href="#actuator"><span>actuator</span></a></h3><blockquote><p>beans ç”¨çš„å¤šäº›, çœ‹ bean æœ‰æ— åœ¨, ä¾èµ–è°</p></blockquote><p>management.endpoints.web.exposure.include=* //*å¯ä»¥æ¢æˆä»¥ä¸‹å€¼ å¯å¤šä¸ª ,å·éš”å¼€</p><p>health, beans, info env</p><h2 id="o-r-mapping" tabindex="-1"><a class="header-anchor" href="#o-r-mapping"><span>| O/R Mapping</span></a></h2><h3 id="jpa-vs-mybatis" tabindex="-1"><a class="header-anchor" href="#jpa-vs-mybatis"><span>JPA vs MyBatis</span></a></h3><blockquote><p>JPAæ˜¯è§„èŒƒï¼ŒHibernateæ˜¯JPAçš„ä¸€ç§å®ç°ï¼ŒSpring Data JPAå¯ä»¥å¸®åŠ©å¤§å®¶æ›´æ–¹ä¾¿åœ°ä½¿ç”¨JPAï¼Œå®ƒåº•å±‚ç”¨äº†Hibernateã€‚Hibernateæ›¿æˆ‘ä»¬åšäº†ORMçš„å·¥ä½œï¼Œç®€å•çš„åœºæ™¯ä¸­ï¼Œä½ å¹¶ä¸éœ€è¦æ‰‹å†™SQL</p><p>MyBatisæ˜¯å¦ä¸€ç§ORMçš„æ¡†æ¶, <!---->ï¼Œç„¶åå¤§éƒ¨åˆ†å·¥ç¨‹éƒ½ç”¨MyBatisï¼Œé‚£æ¸æ¸è§„èŒƒå°±å˜æˆäº†ç”¨MyBatisã€‚ä½†è¿™å¹¶ä¸æ˜¯è¯´Hibernateä¸å¥½ï¼Œå…¶å®å®ƒä½œä¸ºè€ç‰ŒORMappingæ¡†æ¶ï¼Œè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p></blockquote><p>JDBCæ˜¯å„ç§æ“ä½œçš„åŸºç¡€ï¼Œ</p><blockquote><p>JPAæ˜¯ä¸ªè§„èŒƒï¼Œ</p><p>Hibernateæ˜¯JPAçš„ä¸€ç§å®ç°ï¼Œ</p><p>Spring Data JPAç”¨çš„æ˜¯Hibernateï¼Œ</p><p>MyBatisæ˜¯å¦ä¸€ç§ORMçš„æ¡†æ¶ï¼Œ</p><p>Hibernateä¸ç”¨è‡ªå·±æ‰‹å†™SQLï¼Œä½†å…¶å®å¤æ‚çš„HQLå†™åˆ°æœ€åè·Ÿå†™SQLä¹Ÿæ²¡å•¥å¤§å·®åˆ«äº†ã€‚</p><p>ä¸‰å¹´å‰ç”¨è¿‡JPAï¼Œç®€å•SQLè¿˜è¡Œï¼Œå¤æ‚çš„ç”¨mybatisæ›´çˆ½ï¼Œè¯•è¯•å°±çŸ¥é“å•¦!</p></blockquote><figure><img src="https://img-blog.csdnimg.cn/img_convert/e0e7b70a664bec8260b7cfe9d1cdaddb.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="mybatis" tabindex="-1"><a class="header-anchor" href="#mybatis"><span>MyBatis</span></a></h3><p><strong>è¯¥æ³¨è§£ç”¨äº insert æ—¶å€™, auto_increment å¤„ç†</strong></p><p>@Options(useGeneratedKeys = true)</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">id bigint not </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> auto_increment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Insert</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;insert into t_coffee (name, price, create_time, update_time)&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;values (#{name}, #{price}, now(), now())&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Options</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">useGeneratedKeys</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//è‡ªå¢é•¿ä¸»é”®idï¼Œåœ¨æ’å…¥æ•°æ®åè‡ªåŠ¨è·å–åˆ°è¯¥ä¸»é”®å€¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**ä»¥ä¸‹å¤„ç†æ˜¯é‡‘é¢è½åº“ä¸ä»£ç å±‚é¢çš„ Mapping **</p><p>mybatis.type-handlers-package=geektime.spring.data.mybatisdemo.handler</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">price bigint not </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">------------------------</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * åœ¨ Money ä¸ Long ä¹‹é—´è½¬æ¢çš„ TypeHandlerï¼Œå¤„ç† CNY äººæ°‘å¸</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MoneyTypeHandler</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BaseTypeHandler</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Money</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nosql" tabindex="-1"><a class="header-anchor" href="#nosql"><span>| NoSQL</span></a></h2><h3 id="redis" tabindex="-1"><a class="header-anchor" href="#redis"><span>Redis</span></a></h3><blockquote><p>çº¿ä¸Šç”¨çš„æ¯”è¾ƒå¤šçš„ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼š</p><ul><li>å“¨å…µ</li><li>é›†ç¾¤</li></ul><p>ä¸»è¦ä½œåˆ†å¸ƒå¼ç¼“å­˜ï¼Œä¸èƒ½ A æœºå™¨å–æ—§å€¼ B å–æ–°å€¼</p><p>å†™ä¸€æ¬¡å¯ä»¥è¯»åæ¬¡ 1:10 æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ”¾ç¼“å­˜</p></blockquote><p>å¯åŠ¨ç±» @EnableCaching(proxyTargetClass = true) ï¼Œç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬æ•´ä¸ªç¼“å­˜çš„è¿è¡Œæœºåˆ¶æ˜¯åŸºäº AOP çš„<br> è”æƒ³ï¼šå£°æ˜å¼äº‹åŠ¡ ä¹Ÿæ˜¯ä¸€æ ·åŸºäº AOP</p><blockquote><p>é‡è¦ï¼šå¯¹ Redis çš„æ“ä½œä¸€å®šè¦è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼ˆé‡è¦çš„äº‹æƒ…è®²ä¸‰éçš„é‚£ç§ï¼‰<br> ä½œè€…å›å¤: æˆ‘ä»¬ä¸€èˆ¬çš„ç”¨æ³•æ˜¯æŠŠRediså½“ç¼“å­˜æ¥ç”¨ï¼Œæ—¢ç„¶æ˜¯ç¼“å­˜å°±è¦æœ‰ä¸ªå¤±æ•ˆæ—¶é—´ï¼Œä¸ç„¶ç¼“å­˜çš„å†…å®¹è¶Šæ¥è¶Šå¤šï¼Œå†…å­˜ç›¸å¯¹ç£ç›˜è€Œè¨€è¿˜æ˜¯å¾ˆæ˜‚è´µçš„ã€‚Redisé‡Œçš„æ•°æ®ä¸€æ—¦æ²¡äº†ï¼Œæˆ‘ä»¬è¦æ±‚æœ‰æ‰‹æ®µèƒ½å¤Ÿè¡¥å¿å›æ¥ã€‚å…¶å®ï¼Œæ˜¾ç¤ºæƒ…å†µä¹Ÿå¯èƒ½æ˜¯è¿™æ ·çš„ï¼ŒRedisæ‰›ä¸ä½å‹åŠ›æŒ‚äº†ï¼ŒèƒŒåçš„DBæ›´æ‰›ä¸ä½â€¦â€¦</p></blockquote><h4 id="å“¨å…µ" tabindex="-1"><a class="header-anchor" href="#å“¨å…µ"><span>å“¨å…µ</span></a></h4><blockquote><p>é€šçŸ¥ã€ç›‘æ§ã€æ•…éšœè¿ç§»ã€æœåŠ¡å‘ç°</p><p>Qï¼šæ‰€ä»¥ä»€ä¹ˆæ—¶å€™ç”¨å“¨å…µï¼Œä»€ä¹ˆæ—¶å€™ç”¨é›†ç¾¤å‘¢ï¼Ÿ</p><p>ä½œè€…å›å¤: å¦‚æœå¯ä»¥ï¼Œæˆ‘å»ºè®®éƒ½ç”¨é›†ç¾¤æ¨¡å¼å§</p></blockquote><h4 id="é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#é›†ç¾¤"><span>é›†ç¾¤</span></a></h4><blockquote><p>æ•°æ®è‡ªåŠ¨åˆ†ç‰‡ï¼ˆHash Slotï¼‰</p></blockquote><h4 id="redistemplate-vs-repository" tabindex="-1"><a class="header-anchor" href="#redistemplate-vs-repository"><span>redisTemplate VS Repository</span></a></h4><blockquote><p>Qï¼šèƒ½å¦å†è®²è®²æ—¢ç„¶æœ‰äº†redisTemplate,ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ä½¿ç”¨Redis Repository</p><p>ä½œè€…å›å¤: æ¯”å¦‚ï¼Œä½ æŒ‰IDå­˜äº†ä¸€ä¸ªæ•°æ®åˆ°Redisé‡Œï¼Œä½†åˆå¸Œæœ›èƒ½æŒ‰åˆ«çš„ç»´åº¦æ¥æŸ¥è¯¢æ—¶ï¼Œä¸€ç§æ–¹å¼å°±æ˜¯è‡ªå·±ç»´æŠ¤äºŒçº§ç´¢å¼•ï¼Œè€ŒRedisRepositoryå¯ä»¥å¸®ä½ åšè¿™ä¸ªäºŒçº§ç´¢å¼•ï¼Œè®©ä½ æ ¹æ®è‡ªå·±éœ€è¦æ¥æŸ¥è¯¢ã€‚</p></blockquote><p>Qï¼šè€å¸ˆï¼Œæ•™ç¨‹ä¸­ä»‹ç»äº†Rediså¤šç§è°ƒç”¨æ–¹å¼ï¼ŒRedisTemplateã€RedisRepositoryã€@Cachexxxæ³¨è§£ã€‚èƒ½ä»‹ç»ä¸€ä¸‹è¿™å‡ ç§æ–¹å¼çš„ä½¿ç”¨åœºæ™¯å—ï¼Ÿç¢°åˆ°ä»€ä¹ˆæƒ…å†µåº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ–¹å¼ï¼Ÿ</p><p>ä½œè€…å›å¤: RedisTemplateæ˜¯ä¸‡èƒ½çš„ï¼Œå„ç§æƒ…å†µä¸‹éƒ½èƒ½ç”¨ï¼Œä¸è¿‡æ˜¯æ‰‹å·¥æ“ä½œçš„ï¼›@Cachableç”¨åœ¨æŠŠæŸä¸ªæ–¹æ³•çš„è¿”å›å€¼ç¼“å­˜çš„æƒ…å†µï¼Œå¯ä»¥ä¸ç”¨è‡ªå·±å†™ï¼ŒSpringæ›¿ä½ åšäº†ï¼Œè¿™ä¸ªå°±ä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚Repositoryè¿™ä¸ªå°±æ¯”è¾ƒå°‘ç”¨åˆ°ï¼Œåƒæ“ä½œæ•°æ®åº“çš„Repositoryä¸€æ ·æ¥æ“ä½œRedisï¼Œå¦‚æœä½ é’ˆå¯¹ä¸€äº›æ•°æ®æœ‰äºŒçº§ç´¢å¼•çš„éœ€æ±‚ï¼Œä¸å¦¨çœ‹çœ‹è¿™ä¸ªï¼Œå®ƒæ›¿ä½ åšäº†ä¸»é”®ä»¥å¤–çš„ç´¢å¼•ã€‚</p><h2 id="æ•°æ®è®¿é—®è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#æ•°æ®è®¿é—®è¿›é˜¶"><span>| æ•°æ®è®¿é—®è¿›é˜¶</span></a></h2><h3 id="aop" tabindex="-1"><a class="header-anchor" href="#aop"><span>AOP</span></a></h3><blockquote><p>å®˜ç½‘è›®å¥½çœ‹ï¼Œæ³¨æ„ AOP æ˜¯çœ‹ SpringFramework ä¸æ˜¯ SpringBoot<br><a href="https://docs.spring.io/spring-framework/reference/core/aop/ataspectj.html" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-framework/reference/core/aop/ataspectj.html</a></p></blockquote><p>@AspectJ æŒ‡çš„æ˜¯ä¸€ç§å°†åˆ‡é¢å£°æ˜ä¸ºå¸¦æœ‰æ³¨é‡Šçš„å¸¸è§„ Java ç±»çš„é£æ ¼ã€‚<br> æ‰€ä»¥å¸¦æ³¨è§£çš„ AOP éƒ½æ˜¯ AspectJ support</p><ul><li>@Order æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</li><li>@Aspect è¯´æ˜è¿™æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œæ³¨æ„è¿˜éœ€ @Componet ä¿®é¥°è¿™ä¸ªç±»æˆ Bean</li><li>@Around vs @Pointcutï¼ˆå¯å¤ç”¨ï¼ŒBlog ä½¿ç”¨çš„æ˜¯è¿™ç§ï¼‰</li></ul><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//    @Around(&quot;execution(* geektime.spring.springbucks.repository..*(..))&quot;)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Around</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;repositoryOps()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logPerformance</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> pjp)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* geektime.spring.springbucks.repository..*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> repositoryOps</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ps: execution æœ€å¸¸ä½¿ç”¨åˆ‡å…¥ç‚¹æŒ‡ç¤ºç¬¦ï¼Œè¿˜å¯ä»¥ bean(idOrNameOfBean) ã€‚å…·ä½“çœ‹<a href="https://docs.spring.io/spring-framework/reference/core/aop/ataspectj/pointcuts.html" target="_blank" rel="noopener noreferrer"><!----></a></p><h3 id="stopwatch" tabindex="-1"><a class="header-anchor" href="#stopwatch"><span><!----></span></a></h3><p>Q: ä¸ºä»€ä¹ˆè¦ç”¨Threadlocalæ¥åŒ…è£…stopwatchå‘¢ï¼Ÿ</p><p>ä½œè€…å›å¤: æˆ‘åœ¨æ‰§è¡Œå‰åéœ€è¦ä½¿ç”¨åŒä¸€ä¸ªStopWatchï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸ªåœ°æ–¹æš‚å­˜ä¸€ä¸‹ï¼Œè€Œä¸”æ¯æ¬¡ä¸ºè¯·æ±‚è®¡æ—¶éƒ½éœ€è¦ä¸€ä¸ªä¸åŒçš„StopWatchï¼Œä¸èƒ½å…±ç”¨ä¸€ä¸ªï¼Œæ—¢ç„¶æ˜¯ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œé‚£æ¯”è¾ƒç®€å•çš„æ–¹æ³•å°±æ˜¯æ”¾åœ¨ThreadLocalé‡Œã€‚</p><p>Qï¼šä¸ºä»€ä¹ˆè¦åœ¨postHandleé‡Œstartåˆstopå‘¢</p><p>ä½œè€…å›å¤: ä¸ºäº†åˆ†æ®µè®¡æ—¶ï¼ŒStopWatchå°±è·Ÿç§’è¡¨ä¸€ä¸‹ï¼Œå¯ä»¥è®°å‡ æ®µæ—¶é—´</p><h3 id="p6spy" tabindex="-1"><a class="header-anchor" href="#p6spy"><span>P6Spy</span></a></h3><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¤šçš„æ—¥å¿—ï¼Ÿ<br> åœ¨äº§çº¿ä¸­é‡åˆ°å„ç§é—®é¢˜çš„æ—¶å€™ï¼Œä½ å”¯ä¸€èƒ½å¤Ÿä¾é çš„å°±æ˜¯ä½ çš„æ—¥å¿—ï¼</p><p>ç”Ÿäº§ä¼šå°†æ—¥å¿—åˆ†ç±»ï¼Œæœ‰é’ˆå¯¹æ•°æ®è®¿é—®å±‚ DAL çš„ digest çš„æ—¥å¿—ï¼Œä¸“é—¨å°±æ˜¯æ‹¦æˆª DAOæ–¹æ³•çš„æ‰§è¡Œ</p><p>sql çš„æ‰§è¡Œä¼šæ”¾åœ¨ sql.log</p></blockquote><p>HikariCP æ•°æ®æºæœ¬èº«æ˜¯ä¸æ”¯æŒ log æ‰“å°çš„ï¼Œå¯ä»¥åŠ ä¸€ä¸ª P6Spy æ¥åšä¸€ä¸ª SQL çš„è¾“å‡ºï¼ˆå…·ä½“è¿˜æ˜¯çœ‹æ–‡æ¡£ï¼Œæœ‰ Integrationg p6Spy catalogï¼‰</p><ul><li>å¼•å…¥ jar</li><li>é…ç½® p6spy çš„ driverNameï¼Œurlï¼Œusername&amp;password</li><li>é…ç½® spy.properties æ¯”å¦‚å•è¡Œæ—¥å¿—ã€ç”¨SLF4Jè®°å½•sqlã€å¼€å¯æ…¢æŸ¥è¯¢</li></ul><p>Druid æœ¬èº«å°±æœ‰å†…ç½® SQL è¾“å‡º</p><ul><li>å¯ä»¥ç¦ç”¨æ—¥å¿—è¾“å‡ºï¼Œè‡ªå®šä¹‰ä¸€ä¸ª Filter æ¯”å¦‚å¯¹æ•æ„Ÿä¿¡æ¯çš„ä¸€ä¸ªè„±æ•</li></ul><p>Q: è€å¸ˆï¼Œè¯·é—®ä¸€ä¸‹log4jæ—¥å¿—çš„åŸç†å’Œaopæ—¥å¿—çš„åŸç†çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</p><p>ä½œè€…å›å¤: ä½ è¯´çš„æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œä¸æ˜¯å¾ˆç†è§£ä½ æƒ³é—®çš„ç‚¹ã€‚Log4jå°±æ˜¯ç”¨æ¥æ‰“å°æ—¥å¿—çš„æ¡†æ¶ï¼›AOPæ˜¯ç”¨æ¥åšé¢å‘åˆ‡é¢ç¼–ç¨‹çš„ï¼Œæˆ‘ä»¬åœ¨åˆ‡é¢é‡Œç”¨æ—¥å¿—æ¡†æ¶æ‰“å°äº†æ—¥å¿—ã€‚</p><h2 id="spring-mvc" tabindex="-1"><a class="header-anchor" href="#spring-mvc"><span>| Spring MVC</span></a></h2><blockquote><p>æ ¸å¿ƒï¼šDispatcherServletï¼Œæ˜¯æ‰€æœ‰è¯·æ±‚çš„å…¥å£ã€‚æ ¸å¿ƒç»„æˆéƒ¨åˆ†å¦‚ä¸‹ï¼š</p><ul><li>Controller</li><li>xxxResolver <ul><li>ViewResolver</li><li>HandlerExceptionResolver</li><li>MultipartResolver</li></ul></li><li>HandlerMapping (è¯·æ±‚æ˜ å°„å¤„ç†é€»è¾‘)</li></ul><p>è¿™ä¸ªç« èŠ‚è®²è§£ DispatcherServlet æ˜¯æ€ä¹ˆå¤„ç†ä¸€ä¸ªè¯·æ±‚çš„</p></blockquote><p>@ResponseStatus(HttpStatus.CREATED)</p><ul><li>å¯ä»¥æŒ‡å®š response status çš„çŠ¶æ€ç ï¼Œè¿™é‡Œä¼šæ˜¯ 201</li></ul><h3 id="spring-çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡" tabindex="-1"><a class="header-anchor" href="#spring-çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡"><span>Spring çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡</span></a></h3><p>å…³äºä¸Šä¸‹æ–‡å¸¸ç”¨çš„æ¥å£åŠå…¶å®ç°ï¼šã€Œå…ˆæœ‰ä¸ªå°è±¡ã€</p><ul><li>BeanFactoryï¼ˆä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ï¼‰ <ul><li>DefaltListableBeanFactory</li></ul></li><li>ApplicationContextï¼ˆä½¿ç”¨è¿™ä¸ªï¼‰ <ul><li>ClassPathXmLApplicationContext</li><li>FileSystemXmlApplicationContext</li><li>AnnotationConfigApplicationContext</li></ul></li><li>WebApplicationContext</li></ul><p>æ‰©å±•ï¼šä¼ ç»Ÿçš„Spring MVCå·¥ç¨‹çš„ç¡®æ˜¯æœ‰ä¸¤ä¸ªä¸Šä¸‹æ–‡çš„</p><ul><li>DispatcherServletï¼ˆServlet WebApplicationContext -&gt; Root WebApplicationContextï¼‰</li></ul><h3 id="spring-mvc-è¯·æ±‚å¤„ç†æµç¨‹-å¤§è‡´" tabindex="-1"><a class="header-anchor" href="#spring-mvc-è¯·æ±‚å¤„ç†æµç¨‹-å¤§è‡´"><span>Spring MVC è¯·æ±‚å¤„ç†æµç¨‹ï¼ˆå¤§è‡´ï¼‰</span></a></h3><blockquote><p>Front controller å°±æ˜¯ DispatcherServlet</p><ol><li>org.springframework.web.servlet.DispatcherServlet#doService</li><li>this.doDispatch(request, response); <ol><li>å¤„ç† handle</li></ol></li></ol></blockquote><figure><img src="https://img-blog.csdnimg.cn/img_convert/905612521d1014eb63d9b95af7d37862.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ‰©å±•ï¼šå¤§å®¶å¯èƒ½ä¼šåœ¨ä»£ç å½“ä¸­çœ‹åˆ°åƒ render è¿™æ ·çš„ï¼Œå¤§å®¶å¯èƒ½æŠŠå®ƒç§°ä½œæ˜¯æ¸²æŸ“ï¼ˆä¼šæœ‰äº‰è®®ï¼‰ æ‰€ä»¥åœ¨æ–‡æ¡£å½“ä¸­ç”¨ â€œå‘ˆç°â€ è¿™ä¸ªè¯æ¥ä»£è¡¨æˆ‘ä»¬çš„ render</p><h3 id="å¦‚ä½•å®šä¹‰å¤„ç†æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®šä¹‰å¤„ç†æ–¹æ³•"><span>å¦‚ä½•å®šä¹‰å¤„ç†æ–¹æ³•</span></a></h3><p>çœ‹ Cotoller æ”¯æŒå“ªäº›æ–¹æ³•å‚æ•°ã€è¿”å›å‚æ•°ï¼šï¼ˆæ–‡æ¡£æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼ï¼ï¼ï¼‰</p><p><a href="https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-methods/arguments.html" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-methods/arguments.html</a></p><ul><li>PostMapping() <ul><li>Mapping Requiests (xxxMapping é‡Œçš„å‚æ•°å¯ä»¥é™å®šè¯·æ±‚/å“åº”çš„ context-Type ç±»å‹ã€Œconsumes / produces = MediaType.xxxã€)</li></ul></li></ul><h3 id="" tabindex="-1"><a class="header-anchor" href="#"><span></span></a></h3><h2 id="springboot" tabindex="-1"><a class="header-anchor" href="#springboot"><span>| SpringBoot</span></a></h2><p>Program arguments (CLl arguments to your application. ) æ·»åŠ  --debug</p><p>å°±å¯ä»¥çœ‹åˆ°é‚£äº›ç±»è‡ªåŠ¨é…ç½®ä¸Šäº†ï¼Œå¯ä»¥çœ‹ bean ï¼ï¼ï¼</p><h1 id="todo-ç¬¬ä¹ç« 03" tabindex="-1"><a class="header-anchor" href="#todo-ç¬¬ä¹ç« 03"><span>TODO-ç¬¬ä¹ç« 03</span></a></h1><p>è¿™ä¸ªè§†é¢‘å¹¶ä¸æ˜¯Antç‹¬æœ‰å­¦ä¹ èµ„æ–™ï¼Œæš‚æ—¶å‘Šä¸€æ®µè½ä»¥åå­¦å®Œ</p><p>ä¼˜å…ˆçº§é™ä½ï¼ï¼ï¼Ã§</p></div><!----><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>æ›´æ–°æ—¥å¿—</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2025/12/13 02:37</span></div><div><span class="vp-changelog-menu-icon"></span><span>æŸ¥çœ‹æ‰€æœ‰æ›´æ–°æ—¥å¿—</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>abeef</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">refactor: ç›®å½•é‡æ„</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-12-13T02:37:54.000Z">2025/12/13</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>11700</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">upor.xyz</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-06-28T08:02:45.000Z">2025/6/28</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>c7aa8</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">templete format</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-06-14T17:26:09.000Z">2025/6/14</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>23d7b</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">templete format</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-06-14T17:19:03.000Z">2025/6/14</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>b79c6</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">templete format</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-06-14T17:09:45.000Z">2025/6/14</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>76823</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">part ant learn</span><span class="vp-changelog-date" data-allow-mismatch>äº <time datetime="2025-05-24T15:52:39.000Z">2025/5/24</time></span></li><!--]--></ul></div><!--]--><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/coding/05-Framework/SpringSecurity.html" aria-label="SpringSecurity"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->SpringSecurity</div></a><!----></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">
  ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½ - éå•†ç”¨ - éè¡ç”Ÿ - ä¿æŒç½²å<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh-hans" target="_blank" rel="noopener noreferrer">ï¼ˆåˆ›æ„å…±äº« 4.0 è®¸å¯è¯ï¼‰</a>|
  Copyright Â© 2026-present Piglet</a>
  </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.cb768472.js" defer></script><script src="/assets/js/7523.4f348652.js" defer></script><script src="/assets/js/app.0b323d97.js" defer></script>
    <!-- çœ‹æ¿å¨˜åŒºå— -->
    <!-- <script src="/live2d-widget/autoload.js"></script> -->
    <!-- End çœ‹æ¿å¨˜åŒºå— -->
  </body>
</html>
