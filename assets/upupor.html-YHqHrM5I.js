import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,a as p}from"./app-Bqq4MDVB.js";const t={},e=p(`<h1 id="upuporstudy" tabindex="-1"><a class="header-anchor" href="#upuporstudy"><span>upuporStudy</span></a></h1><p>https://eco.upupor.com/upupor/</p><p>å¯ä»¥çœ‹è¿™ä¸ªç½‘å€ï¼Œè®°å½•ä½œè€…å¯¹è¿™ä¸ªBlogçš„å¾ˆå¤šæ€è·¯ã€‚ã€‚ã€‚ã€‚åŒ…æ‹¬MinIOã€mysqlçš„å¤‡ä»½ï¼Œä»¥åŠæœåŠ¡çš„éƒ¨ç½²ï¼</p><figure><img src="https://eco.upupor.com/assets/upupor-architecture.c16039e8.svg" alt="https://eco.upupor.com/assets/upupor-architecture.c16039e8.svg" tabindex="0" loading="lazy"><figcaption>https://eco.upupor.com/assets/upupor-architecture.c16039e8.svg</figcaption></figure><h1 id="ä¸€ã€å‰ç½®ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰ç½®ç¯å¢ƒ"><span>ä¸€ã€å‰ç½®ç¯å¢ƒ</span></a></h1><blockquote><ol><li>è¿‡å¯åŠ¨æ—¶å€™ log çœ‹è§¦å‘å“ªäº›é…ç½®é¡¹</li><li>ä¸€ä¸ªä¸ªåŠŸèƒ½æ¨¡å—è¿‡</li></ol></blockquote><h2 id="_1-flyway" tabindex="-1"><a class="header-anchor" href="#_1-flyway"><span>1.flyway</span></a></h2><p>ä½œç”¨ï¼šæ•°æ®è¿ç§»</p><p>æ•°æ®åº“ä¼šæ–°äº§ç”Ÿä¸€ä¸ª flyway_schema_history çš„è¡¨</p><ul><li>è¿™ä¸ªè¡¨ä¼šè®°å½•æ¯ä¸€ä¸ª sql è„šæœ¬æ–‡ä»¶çš„æ“ä½œï¼Œä»¥åŠæ˜¯å¦æ‰§è¡ŒæˆåŠŸ</li><li>ä½œç”¨ï¼šupuporä½¿ç”¨äº†flyway,å› æ­¤æ•°æ®åº“SQLæ–‡ä»¶ç»´æŠ¤åœ¨upupor-web/src/main/resources/db/migrationç›®å½•,åªéœ€è¦é…ç½®å¥½DBç„¶åå¯åŠ¨ç¨‹åº,å°±ä¼šåˆ›å»ºç›¸åº”çš„è¡¨ä»¥åŠæ‰§è¡Œç›¸åº”çš„SQL. åç»­å¦‚æœæƒ³æ–°å¢è¡¨æˆ–è€…æ‰§è¡ŒSQLå¯ä»¥ç›´æ¥åœ¨migrationç›®å½•æŒ‰ç…§è§„åˆ™æ–°å»ºmigrationæ–‡ä»¶å³å¯,ç¨‹åºå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œ. Flywayæ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®åº“ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå®ƒç”¨äºç®¡ç†å’Œè·Ÿè¸ªæ•°æ®åº“ç»“æ„çš„å˜åŒ–</li></ul><p>å°æŠ€å·§ï¼šç”¨ IDEA æ“ä½œæ•°æ®åº“æ–°å¢åˆ—ä¼šäº§ç”Ÿè¯­å¥ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å¤åˆ¶è¿™ä¸ªè¯­å¥äº†ï¼</p><p>SQLè„šæœ¬æ–‡ä»¶æœ‰å›ºå®šå‘½åè§„åˆ™</p><ol><li>Vå¼€å¤´</li><li>__ä¸¤ä¸ªä¸‹åˆ’çº¿è¿æ¥æè¿°ä¿¡æ¯</li></ol><h2 id="_2-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_2-ç¯å¢ƒå˜é‡"><span>2.ç¯å¢ƒå˜é‡</span></a></h2><blockquote><p><code>XDï¼šæˆ‘è§‰å¾—è¿™æ˜¯å¼€æºå€¼å¾—å­¦ä¹ çš„ä¸€ä¸ªç‚¹ï¼Œæ‰€æœ‰éšç§éƒ¨åˆ†ç”¨\${} ç„¶åå•ç‹¬æä¸ª application.properties ä¸è¢«ç‰ˆæœ¬æ§åˆ¶å°±è¡Œï¼</code></p><p>è¯¦ç»†æˆ‘è®°å½•åœ¨ SpringBoot ç¬”è®°ä¸­äº†ï¼Œ<strong>æˆ‘è¿™é‡Œç”¨çš„æ˜¯ application.properties(no version) + idea Environment variables</strong> æ­é…ä¸€èµ·ç”¨ï¼Œç›®çš„æ˜¯æµ‹äº†ä¸‹è¿™ä¸¤è€…éƒ½ç”Ÿæ•ˆäº†ï¼ï¼ï¼</p></blockquote><p>é’ˆå¯¹ä¸€æ¬¡ä¼šè¯çš„è¯ linux-exportï¼Œwindows-set</p><p>å¥½åƒå†™åˆ° application.properties é‡Œé¢ä¹Ÿå¯ä»¥ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ç‰ˆæœ¬æ§åˆ¶å°±è¡Œ</p><p>æˆ‘è¿™é‡Œé€‰æ‹©ç”¨ idea è‡ªå¸¦çš„ Environment variables è®¾ç½®</p><h1 id="äºŒã€æ³¨å†Œ-é‚®ä»¶" tabindex="-1"><a class="header-anchor" href="#äºŒã€æ³¨å†Œ-é‚®ä»¶"><span>äºŒã€æ³¨å†Œ-é‚®ä»¶</span></a></h1><h2 id="_1-äº‹ä»¶é©±åŠ¨-eventlistener" tabindex="-1"><a class="header-anchor" href="#_1-äº‹ä»¶é©±åŠ¨-eventlistener"><span>1.äº‹ä»¶é©±åŠ¨-@EventListener</span></a></h2><p>ç¬”è®°ï¼šhttps://www.cnblogs.com/dafengdeai/articles/17073114.html</p><p>è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1Cd4y1q7Vm/?spm_id_from=333.337.search-card.all.click&amp;vd_source=0f3bf62c50d57c4a7d85b89b4d2633e0</p><p>æ›´å¥½çš„è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1Wa4y1477d?p=3&amp;vd_source=0f3bf62c50d57c4a7d85b89b4d2633e0</p><blockquote><p><mark>Springã€SpringBootå¸¸ç”¨æ‰©å±•ç‰¹æ€§ä¹‹äº‹ä»¶é©±åŠ¨</mark> çœ‹ä»£ç demo Spring Boot 2 é¡¹ç›®</p><p>ä¸€èˆ¬æ­é…ä»¥ä¸‹ä¸¤ä¸ªæ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼š <strong>@EventListener @Async</strong></p><ol><li>@0rderæŒ‡å®šæ‰§è¡Œé¡ºåºåœ¨åŒæ­¥çš„æƒ…å†µä¸‹ç”Ÿæ•ˆ çœ‹è§†é¢‘ä¹Ÿå¯ä»¥æ­é…è¿™ä¸ªæ³¨è§£ï¼ŒåŠ ä¸ªæƒé‡ å‡å¦‚å¤šä¸ªListeneræ¶ˆè´¹è°å…ˆ</li><li>@Async å¼‚æ­¥æ‰§è¡Œéœ€è¦ @EnableAsync å¼€å¯å¼‚æ­¥</li></ol></blockquote><blockquote><p>äº‹ä»¶é©±åŠ¨:å³è·Ÿéšå½“å‰æ—¶é—´ç‚¹ä¸Šå‡ºç°çš„äº‹ä»¶,è°ƒåŠ¨å¯ç”¨èµ„æº,æ‰§è¡Œç›¸å…³ä»»åŠ¡,ä½¿ä¸æ–­å‡ºç°çš„é—®é¢˜å¾—ä»¥è§£å†³,é˜²æ­¢äº‹åŠ¡å †ç§¯. å¦‚:æ³¨å†Œè´¦æˆ·æ—¶ä¼šæ”¶åˆ°çŸ­ä¿¡éªŒè¯ç ,ç«è½¦å‘è½¦å‰æ”¶åˆ°æé†’,é¢„å®šé…’åº—åæ”¶åˆ°çŸ­ä¿¡é€šçŸ¥ç­‰.å¦‚:æµå®½å™¨ä¸­ç‚¹å‡»æŒ‰é’®è¯·æ±‚åå°,é¼ æ ‡ç‚¹å‡»å˜åŒ–å†…å®¹,é”®ç›˜è¾“å…¥æ˜¾ç¤ºæ•°æ®,æœåŠ¡æ¥æ”¶è¯·æ±‚ååˆ†å‘è¯·æ±‚ç­‰.åœ¨è§£å†³ä¸Šè¿°é—®é¢˜æ—¶,åº”ç”¨ç¨‹åºæ˜¯ç”±&quot;äº‹ä»¶é©±åŠ¨è¿è¡Œçš„,è¿™ç±»ç¨‹åºåœ¨ç¼–å†™æ—¶å¾€å¾€å¯ä»¥é‡‡ç”¨ç›¸åŒçš„æ¨¡å‹å®ç°,æˆ‘ä»¬å¯ä»¥å°†è¿™ç§ç¼–ç¨‹æ¨¡å‹ç§°ä¸ºäº‹ä»¶é©±åŠ¨æ¨¡å‹. (PS:äº‹ä»¶é©±åŠ¨æ¨¡å‹å…¶å®æ˜¯ä¸€ç§æŠ½è±¡æ¨¡å‹,ç”¨äºå¯¹ç”±å¤–éƒ¨äº‹ä»¶é©±åŠ¨ç³»ç»Ÿä¸šåŠ¡é€»è¾‘è¿™ç±»åº”ç”¨ç¨‹åºè¿›è¡Œå»ºæ¨¡.)</p></blockquote><p>debugèµ°åˆ°ä¸€æ­¥ï¼Œä¸æ‡‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>
<span class="token keyword">private</span> <span class="token class-name">ApplicationEventPublisher</span> eventPublisher<span class="token punctuation">;</span>

<span class="token comment">//UNKNOWN @FunctionalInterfaceè¿™é‡Œçš„ä½œç”¨æ˜¯ä»€ä¹ˆ          @EventListeneræ³¨è§£ï¼ï¼ï¼ï¼ï¼ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span>
eventPublisher<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span>sendEmailEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>åæ¥æ‡‚äº†ï¼Œä¸Šé¢æ˜¯å‘å¸ƒäº‹ä»¶äº†              æœ‰ç›¸å¯¹äºçš„æ–¹æ³•ç›‘å¬æ¶ˆè´¹è¿™ä¸ªäº‹ä»¶ï¼š<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token annotation punctuation">@EventListener</span>
    <span class="token annotation punctuation">@Async</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token class-name">EmailEvent</span> emailEvent<span class="token punctuation">)</span> 
    
<span class="token constant">PS</span>ï¼šæ–¹æ³•å‚æ•°éœ€è¦å’Œå‘å¸ƒ sendEmailEvent ç±»å‹å¯¹åº”ï¼Œ   è¿™æ ·æ‰æ˜¯ä¸€ä¸€å¯¹åº”æ¶ˆè´¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark>é‡ç‚¹å°±æ˜¯è¿™ä¸‰ä¸ªç±»ï¼Œææ¸…å°±è¡Œï¼ï¼ï¼å¯ä»¥çœ‹è‡ªå·±å†™çš„ä»£ç  æ³¨æ„ï¼šApplicationEvent å¯ä»¥ä¸å®ç°æ‰€ä»¥é‡å¿ƒå…¶å®å°±ä¸¤ä¸ªç±»</mark></p><ol><li>Springäº‹ä»¶é©±åŠ¨æœ€åŸºæœ¬çš„ä½¿ç”¨ <code>ApplicationEventPublisher</code>,<code>ApplicationEvent</code>,<code>ApplicationListener</code> ï¼ˆSpringæŠ½è±¡å‡ºäº†è¿™åŸºæœ¬çš„ä¸‰ä¸ªã€‚ äº‹ä»¶ç”Ÿäº§æ–¹ã€äº‹ä»¶ã€äº‹ä»¶æ¶ˆè´¹æ–¹ï¼‰</li><li>ApplicotionEventPublisher å­ç±» <code>ApplicationContext</code> ï¼ˆåœ¨å¯åŠ¨ç±»ä¸­è¿™ä¸ªå¸¸ç”¨ä¸€äº›applicationContext.publishEvent(new ApplicationEvent(this){})ï¼‰</li><li>äº‹ä»¶æºã€ç›‘å¬å™¨éœ€è¦è¢«springç®¡ç†</li><li>ç›‘å¬å™¨éœ€è¦å®ç°ApplicationListener&lt;ApplicotionEvent&gt; xd: å¯æ³¨è§£ï¼</li><li><strong>å¯ä½“ç°äº‹ä»¶æºå’Œç›‘å¬å™¨ä¹‹é—´çš„æ¾è€¦åˆä»…ä¾èµ–springã€ApplicationEvent</strong>ï¼ˆå‘å¸ƒã€ç›‘å¬ä¸¤ä¸ªç±»ä¸­éƒ½æ²¡æœ‰å¦ä¸€ä¸ªçš„å¼•ç”¨ï¼ï¼‰</li></ol><p>XDï¼š</p><ol><li><p>publisher-ç”Ÿäº§è€…ï¼Œ Listenerï¼ˆæ³¨è§£åˆ°æ–¹æ³•ï¼‰-æ¶ˆè´¹è€… publishEventå‡ æ¬¡ï¼Œlistenerå°±ä¼šæ¶ˆè´¹å‡ æ¬¡</p></li><li><p>ApplicationEvent å¯ä»¥ä¸å®ç°ï¼Œçœ‹é¡¶å±‚çš„è¿™ä¸ªæ¥å£æºç å…¶å®ä¹Ÿè½¬æˆäº† Objectï¼Œä½†æ˜¯æŒ‰è§„èŒƒæ³¨é‡Šæ¥è¯´å¸Œæœ›æ‰€æœ‰çš„äº‹ä»¶ç±»éƒ½æœ€å¥½å®ç° ApplicationEvent</p><ul><li><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">ApplicationEventPublisher</span><span class="token punctuation">.</span><span class="token keyword">class</span>

<span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
	

<span class="token comment">//æ‰€ä»¥äº‹ä»¶ç±»æ²¡æœ‰extends ApplicationEventä¹Ÿè¡Œå…¶å®èµ°çš„æ˜¯è¿™é‡Œ</span>
<span class="token keyword">void</span> <span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token class-name">Object</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><h1 id="ä¸‰ã€uuid" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€uuid"><span>ä¸‰ã€UUID</span></a></h1><blockquote><p>com.upupor.framework.utils.CcUtils#getUuId</p></blockquote><h1 id="å››ã€æ–‡ç« å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#å››ã€æ–‡ç« å‹ç¼©"><span>å››ã€æ–‡ç« å‹ç¼©</span></a></h1><p><code>com.upupor.framework.utils.DeflaterUtils</code></p><blockquote><p>åœ¨ Java ä¸­ï¼Œ<code>Deflater</code> æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®å‹ç¼©çš„ç±»ã€‚å®ƒæä¾›äº†ä¸€ç§åœ¨å†…å­˜ä¸­å‹ç¼©æ•°æ®çš„æ–¹å¼ï¼Œä½¿å¾—æ•°æ®å¯ä»¥æ›´æœ‰æ•ˆåœ°å­˜å‚¨å’Œä¼ è¾“ã€‚</p><p><code>Deflater</code> ç±»ä½¿ç”¨ DEFLATE å‹ç¼©ç®—æ³•ï¼Œè¿™æ˜¯ä¸€ç§æ— æŸæ•°æ®å‹ç¼©ç®—æ³•ï¼Œå¹¿æ³›åº”ç”¨äºè¯¸å¦‚ ZIP æ–‡ä»¶ã€HTTP å‹ç¼©å’Œå…¶ä»–æ•°æ®ä¼ è¾“åœºæ™¯ä¸­ã€‚</p><p>ä½¿ç”¨ <code>Deflater</code> ç±»å¯ä»¥å°†æ•°æ®å‹ç¼©ä¸ºå‹ç¼©æ ¼å¼ï¼Œç„¶åå¯ä»¥å°†å‹ç¼©åçš„æ•°æ®å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ã€ä¼ è¾“ç»™å…¶ä»–ç³»ç»Ÿæˆ–åœ¨å†…å­˜ä¸­è¿›è¡Œå¤„ç†ã€‚</p></blockquote><p><code>Deflater</code> å’Œ <code>base64</code> æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„æ¦‚å¿µå’ŒåŠŸèƒ½ã€‚</p><ol><li><code>Deflater</code> æ˜¯ç”¨äºæ•°æ®å‹ç¼©çš„ç±»ï¼Œå®ƒä½¿ç”¨ DEFLATE å‹ç¼©ç®—æ³•å°†æ•°æ®å‹ç¼©ä¸ºæ›´å°çš„å½¢å¼ã€‚å®ƒé€šè¿‡æ¶ˆé™¤æ•°æ®ä¸­çš„å†—ä½™å’Œé‡å¤ä¿¡æ¯æ¥å‡å°æ•°æ®çš„å¤§å°ï¼Œä½¿å¾—æ•°æ®å¯ä»¥æ›´æœ‰æ•ˆåœ°å­˜å‚¨å’Œä¼ è¾“ã€‚å‹ç¼©åçš„æ•°æ®å¯ä»¥åœ¨éœ€è¦æ—¶è¿›è¡Œè§£å‹ç¼©ä»¥æ¢å¤åŸå§‹æ•°æ®ã€‚</li><li><code>base64</code> æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼Œç”¨äºå°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºå¯æ‰“å°çš„ ASCII å­—ç¬¦ä¸²ã€‚å®ƒå¹¶ä¸è¿›è¡Œæ•°æ®å‹ç¼©ï¼Œè€Œæ˜¯å°†æ•°æ®æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œç¼–ç ï¼Œä»¥ä¾¿åœ¨ä¼ è¾“æˆ–ä¿å­˜æ—¶èƒ½å¤Ÿå¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚<code>base64</code> ç¼–ç å°†æ¯ 3 ä¸ªå­—èŠ‚çš„äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸º 4 ä¸ªå¯æ‰“å°å­—ç¬¦ï¼Œç¼–ç åçš„å­—ç¬¦ä¸²é•¿åº¦é€šå¸¸ä¼šæ¯”åŸå§‹æ•°æ®å¢åŠ çº¦ 33%ã€‚</li></ol><p><code>Deflater</code> å’Œ <code>base64</code> é€šå¸¸ç”¨äºä¸åŒçš„åœºæ™¯å’Œç›®çš„ï¼š</p><ul><li><code>Deflater</code> é€‚ç”¨äºéœ€è¦å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œä»¥å‡å°æ•°æ®çš„å¤§å°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´æˆ–åœ¨ç½‘ç»œä¼ è¾“ä¸­é™ä½å¸¦å®½æ¶ˆè€—çš„æƒ…å†µã€‚</li><li><code>base64</code> é€‚ç”¨äºéœ€è¦å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºå¯æ‰“å°çš„ ASCII å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚åœ¨ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®æ—¶ï¼Œç”±äºæŸäº›é€šä¿¡åè®®æˆ–æ•°æ®ä¼ è¾“çš„é™åˆ¶ï¼Œåªèƒ½ä¼ è¾“å¯æ‰“å°å­—ç¬¦ï¼Œè€Œä¸èƒ½ç›´æ¥ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®ã€‚</li></ul><h1 id="äº”ã€todo-è·å–æ–‡ç« å†…å®¹" tabindex="-1"><a class="header-anchor" href="#äº”ã€todo-è·å–æ–‡ç« å†…å®¹"><span>äº”ã€TODO-è·å–æ–‡ç« å†…å®¹</span></a></h1><blockquote><p>ä¸€å¼€å§‹æˆ‘åªæƒ³ç¡®è®¤æ–‡ç« å±•ç¤ºæ˜¯ä¸æ˜¯éœ€è¦ unzip è§£å‹ç¼©</p><p>æˆ‘ç°åœ¨éƒ½ä¸çŸ¥é“å…¥å£åœ¨å“ªï¼Œå¤´æ™•~ ä¸€æ­¥æ­¥çš„å¤ªææ€–äº† æºç </p></blockquote><h1 id="å…­ã€å“åº”æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#å…­ã€å“åº”æ—¶é—´"><span>å…­ã€å“åº”æ—¶é—´</span></a></h1><blockquote><p>åœ¨ Spring æ¡†æ¶ä¸­ï¼Œ<code>StopWatch</code> æ˜¯ä¸€ä¸ªç”¨äºæµ‹é‡ä»£ç æ‰§è¡Œæ—¶é—´çš„å·¥å…·ç±»ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è·Ÿè¸ªä»£ç å—çš„æ‰§è¡Œæ—¶é—´ï¼Œå¹¶å¯ä»¥ç”¨äºæ€§èƒ½åˆ†æã€è°ƒä¼˜å’Œç›‘æ§ã€‚</p></blockquote><p>åšå®¢åº•ä¸‹çš„é‚£ä¸ªè®¡æ—¶æ€ä¹ˆå®ç° æ€ä¹ˆå‰åçš„</p><ul><li>springçš„ StopWatch ç±» + @Around å®ç°ï¼ï¼ï¼</li><li><code>com.upupor.web.aspects.ControllerAspectAspect#doAround</code></li></ul><h1 id="ä¸ƒã€åŸºäºredisæ»‘åŠ¨çª—å£å®ç°ç”¨æˆ·é™æµ" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€åŸºäºredisæ»‘åŠ¨çª—å£å®ç°ç”¨æˆ·é™æµ"><span>ä¸ƒã€åŸºäºRedisæ»‘åŠ¨çª—å£å®ç°ç”¨æˆ·é™æµ</span></a></h1><p>com.upupor.test.UpuporLimiterTest</p><p>TODO ğŸ˜¡ è¿˜æ²¡èŠ±æ—¶é—´çœ‹</p><p>RuoYi ä¹Ÿæœ‰ï¼Œå¯¹æ¯”å®ç°é€»è¾‘</p><h1 id="å…«ã€é¡µé¢ä¸‹ç‰ˆæœ¬æ—¶é—´ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#å…«ã€é¡µé¢ä¸‹ç‰ˆæœ¬æ—¶é—´ä¿¡æ¯"><span>å…«ã€é¡µé¢ä¸‹ç‰ˆæœ¬æ—¶é—´ä¿¡æ¯</span></a></h1><p>å¯åŠ¨ç±»ç»™ä¸Šé™æ€å˜é‡ï¼ï¼ï¼åœ¨ <code>@Around(&quot;controllerLog()&quot;)</code> é‡Œè°ƒç”¨ bzï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰xhrå°±ä¼šè§¦å‘</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token constant">STATIC_SOURCE_VERSION</span><span class="token punctuation">,</span> <span class="token class-name">UpuporWebApplication</span><span class="token punctuation">.</span><span class="token constant">STATIC_SOURCE_VERSION</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UpuporWebApplication</span> <span class="token keyword">implements</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">STATIC_SOURCE_VERSION</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;druid.mysql.usePingMethod&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">STATIC_SOURCE_VERSION</span> <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="zã€çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#zã€çŸ¥è¯†ç‚¹"><span>Zã€çŸ¥è¯†ç‚¹</span></a></h1><h2 id="_1-å®ç°applicationcontextawareæ¥å£çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_1-å®ç°applicationcontextawareæ¥å£çš„ä½œç”¨"><span>1.å®ç°ApplicationContextAwareæ¥å£çš„ä½œç”¨</span></a></h2><blockquote><p>åœºæ™¯ï¼šå‘ç°å·¥å…·ç±»ä¸­ SpringContextUtils.getBean(TrueSend.class); å¥½å¥‡ä¸ºä»€ä¹ˆä¸@Autowaird</p></blockquote><p>å®ç° <code>ApplicationContextAware</code> æ¥å£çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªç±»è·å–å¯¹ Spring åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼ˆ<code>ApplicationContext</code>ï¼‰çš„è®¿é—®æƒé™ã€‚é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç±»å¯ä»¥è·å¾—å¯¹åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„å¼•ç”¨ï¼Œä»è€Œèƒ½å¤Ÿè¿›è¡Œæ›´é«˜çº§åˆ«çš„æ“ä½œï¼Œä¾‹å¦‚è·å–å’Œç®¡ç† Spring Beanã€å‘å¸ƒåº”ç”¨ç¨‹åºäº‹ä»¶ç­‰ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“ä¸€ä¸ªç±»å®ç°äº† <code>ApplicationContextAware</code> æ¥å£ï¼Œå®ƒå¿…é¡»å®ç°æ¥å£ä¸­çš„ <code>setApplicationContext()</code> æ–¹æ³•ã€‚Spring åœ¨åˆå§‹åŒ–è¯¥ç±»çš„å®ä¾‹æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ <code>setApplicationContext()</code> æ–¹æ³•ï¼Œå¹¶å°†åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚é€šè¿‡è¯¥æ–¹æ³•ï¼Œç±»å¯ä»¥å°†ä¼ é€’çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡å­˜å‚¨ä¸ºä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶è¿›è¡Œè®¿é—®ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContextAware</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBean</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>å³å¯åœ¨ <span class="token class-name">CcEmailUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span> ç­‰æ²¡æœ‰è¢«<span class="token class-name">Spring</span>ç®¡ç†çš„å·¥å…·ç±»ä¸­ä½¿ç”¨<span class="token class-name">Spring</span>å¯¹è±¡
    <span class="token class-name">TrueSend</span> trueSend <span class="token operator">=</span> <span class="token class-name">SpringContextUtils</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">TrueSend</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡å®ç° <code>ApplicationContextAware</code> æ¥å£ï¼Œç±»å¯ä»¥ç›´æ¥è®¿é—®åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼Œä»è€Œè·å¾—æ›´å¤šçš„çµæ´»æ€§å’ŒåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è·å–å…¶ä»– Bean çš„å¼•ç”¨ã€å‘å¸ƒåº”ç”¨ç¨‹åºäº‹ä»¶ã€è®¿é—®é…ç½®å±æ€§ç­‰ã€‚</p><h2 id="_2-spring-é™æ€èµ„æºå¯ç”¨ç‰ˆæœ¬æ§åˆ¶" tabindex="-1"><a class="header-anchor" href="#_2-spring-é™æ€èµ„æºå¯ç”¨ç‰ˆæœ¬æ§åˆ¶"><span>2.<a href="../JavaFramework/SpringBoot#9%EF%BC%89Spring-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%90%AF%E7%94%A8%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">Spring-é™æ€èµ„æºå¯ç”¨ç‰ˆæœ¬æ§åˆ¶</a></span></a></h2><blockquote><p>è®°åˆ°äº† SpringBoot.md ä¸­ï¼Œå…·ä½“ link title</p></blockquote><p>çŠ¹è®°æ¯•ä¸šç¬¬ä¸€å¹´æ—¶ï¼Œå…¬å¸æ¯æ¬¡å‘å¸ƒå®Œæˆåï¼Œéƒ½ä¼šåœ¨ä¸€ä¸ªç¾¤é‡Œé€šçŸ¥ã€ç‰ˆæœ¬æ›´æ–°ï¼Œå„éƒ¨é—¨æ¸…ç†ç¼“å­˜ï¼Œæœ‰é—®é¢˜åŠæ—¶åé¦ˆã€‘ä¹‹ç±»çš„è¯ã€‚å½’æ ¹ç»“åº•å°±æ˜¯èµ„æºç¼“å­˜çš„é—®é¢˜ï¼Œæµè§ˆå™¨ä¼šå°†è¯·æ±‚åˆ°çš„é™æ€èµ„æºï¼Œå¦‚JSã€CSSç­‰æ–‡ä»¶ç¼“å­˜åˆ°ç”¨æˆ·æœ¬åœ°ï¼Œå½“ç”¨æˆ·å†æ¬¡è®¿é—®æ—¶å°±ä¸éœ€è¦å†æ¬¡è¯·æ±‚è¿™äº›èµ„æºäº†ï¼Œä»¥æ­¤ä¹Ÿæ˜¯æå‡äº†ç”¨æˆ·ä½“éªŒã€‚ä½†æ˜¯ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™äº›èµ„æºç¼“å­˜ï¼Œå¯¼è‡´å®¢æˆ·ç«¯çš„é™æ€æ–‡ä»¶å¾€å¾€ä¸æ˜¯å½“å‰æœ€æ–°ç‰ˆæœ¬ã€‚åæ¥æœ‰åŒäº‹å¢åŠ äº†æ—¶é—´æˆ³ã€éšæœºæ•°ç­‰ï¼Œç¡®å®è¿™ä¹Ÿè§£å†³äº†å®¢æˆ·ç«¯ç¼“å­˜çš„é—®é¢˜ï¼Œä½†æ˜¯å´åˆå¸¦æ¥äº†æ–°çš„éº»çƒ¦ï¼Œå¯¼è‡´æ¯æ¬¡è®¿é—®éƒ½è¦è¯·æ±‚æœåŠ¡å™¨ï¼Œæ— å½¢ä¸­å¢åŠ äº†æœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><h2 id="_3-lucene" tabindex="-1"><a class="header-anchor" href="#_3-lucene"><span>3.Lucene</span></a></h2><p>Luceneå’ŒElasticsearchä¹‹é—´å­˜åœ¨å¯†åˆ‡çš„å…³è”ã€‚å®é™…ä¸Šï¼ŒElasticsearchæ˜¯å»ºç«‹åœ¨Luceneä¹‹ä¸Šçš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œå®ƒæä¾›äº†æ›´é«˜çº§çš„åŠŸèƒ½å’Œæ˜“ç”¨æ€§çš„æ¥å£ï¼Œä»¥ä¾¿äºæ„å»ºå’Œç®¡ç†å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼æœç´¢åº”ç”¨ç¨‹åºã€‚</p><p>Minio</p><ul><li><p>å¿…é¡»è¦æ‰‹åŠ¨ä¸Šä¼ ä¸èƒ½èµ„æºç®¡ç†å™¨å¤åˆ¶è¿›å»</p></li><li><p>èµ„æºç®¡ç†å™¨ä¸Šä¼ çš„æ–‡ä»¶ä¸æ˜¯æºæ–‡ä»¶ï¼Œå¥½åƒè¢«å®ƒåŠ å¯†äº†</p></li><li><p>é…åˆSpringçš„ç‰ˆæœ¬ åœ¨ä¸Šä¼ åˆ°minioæ—¶è®¡ç®—ä¸‹md5åå†ä¸Šä¼ </p><ul><li><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token comment"># ç”Ÿäº§</span>
targetDic <span class="token operator">=</span> <span class="token string">&quot;/upupor/apps/codes/upupor/upupor-web/src/main/resources/static&quot;</span>
targetPath <span class="token operator">=</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span>targetDic<span class="token punctuation">)</span>
ossTargetDic <span class="token operator">=</span> <span class="token string">&quot;/upupor_static&quot;</span>

<span class="token keyword">def</span> <span class="token function">getMd5</span><span class="token punctuation">(</span>localFile<span class="token punctuation">)</span><span class="token punctuation">:</span>
    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>localFile<span class="token punctuation">,</span><span class="token string">&#39;rb&#39;</span><span class="token punctuation">)</span>
    md5_obj <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
    md5_obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    hash_code <span class="token operator">=</span> md5_obj<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    md5 <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hash_code<span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> md5

<span class="token comment">#</span>
client <span class="token operator">=</span> Minio<span class="token punctuation">(</span>
    endpoint<span class="token operator">=</span><span class="token string">&quot;ip:port&quot;</span><span class="token punctuation">,</span>
    access_key<span class="token operator">=</span><span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">,</span>
    secret_key<span class="token operator">=</span><span class="token string">&quot;xxxxxx&quot;</span><span class="token punctuation">,</span>
    secure<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token comment"># client.trace_on(sys.stdout)</span>

<span class="token keyword">for</span> path<span class="token punctuation">,</span>dir_list<span class="token punctuation">,</span>file_list <span class="token keyword">in</span> targetPath<span class="token punctuation">:</span>
    <span class="token keyword">for</span> file_name <span class="token keyword">in</span> file_list<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">&#39;.map&#39;</span> <span class="token keyword">in</span> file_name<span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
        <span class="token keyword">if</span> <span class="token string">&#39;.DS_Store&#39;</span> <span class="token keyword">in</span> file_name<span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
        <span class="token comment"># æœ¬åœ°æ–‡ä»¶</span>
        localFile <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>path<span class="token punctuation">,</span> file_name<span class="token punctuation">)</span>
        <span class="token comment"># è®¡ç®—md5å€¼</span>
        md5value <span class="token operator">=</span> getMd5<span class="token punctuation">(</span>localFile<span class="token punctuation">)</span>
        <span class="token comment"># å°†md5å€¼æ·»åŠ åˆ°æ–‡ä»¶åä¸Š</span>
        local_file_md5_name <span class="token operator">=</span> localFile<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>targetDic<span class="token punctuation">,</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;\\\\&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.svg&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.svg&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.webp&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.webp&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.js&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.css&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.css&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.png&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.png&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.jpeg&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.jpeg&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.jpg&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">)</span>\\
                              <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&#39;.ico&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;-&#39;</span><span class="token operator">+</span>md5value<span class="token operator">+</span><span class="token string">&quot;.ico&quot;</span><span class="token punctuation">)</span>
        ossObjectName <span class="token operator">=</span> ossTargetDic <span class="token operator">+</span> local_file_md5_name
        <span class="token comment"># if exist == True:</span>
        <span class="token comment">#     print(&#39;å·²å­˜åœ¨,æ— éœ€ä¸Šä¼ ------------&#39;+ossObjectName)</span>
        <span class="token comment">#     continue</span>
        <span class="token comment"># print(&#39;æ­£åœ¨ä¸Šä¼ ... &#39; + ossObjectName)</span>

        in_get_content_type<span class="token operator">=</span><span class="token string">&quot;application/octet-stream&quot;</span><span class="token punctuation">;</span>
        md5FileName <span class="token operator">=</span> local_file_md5_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        suffix <span class="token operator">=</span> md5FileName<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> suffix <span class="token operator">==</span> <span class="token string">&#39;js&#39;</span><span class="token punctuation">:</span>
            in_get_content_type<span class="token operator">=</span><span class="token string">&#39;application/x-javascript&#39;</span>

        <span class="token keyword">if</span> suffix <span class="token operator">==</span> <span class="token string">&#39;css&#39;</span><span class="token punctuation">:</span>
            in_get_content_type<span class="token operator">=</span><span class="token string">&#39;text/css&#39;</span>

        
        <span class="token keyword">if</span> suffix <span class="token operator">==</span> <span class="token string">&#39;svg&#39;</span><span class="token punctuation">:</span>
            in_get_content_type<span class="token operator">=</span><span class="token string">&#39;image/svg+xml&#39;</span>

        <span class="token comment">#print(in_get_content_type)</span>
        <span class="token comment">#print(suffix)</span>
        client<span class="token punctuation">.</span>fput_object<span class="token punctuation">(</span>bucket_name<span class="token operator">=</span><span class="token string">&quot;upupor-img&quot;</span><span class="token punctuation">,</span> object_name<span class="token operator">=</span>ossObjectName<span class="token punctuation">,</span> file_path<span class="token operator">=</span>localFile<span class="token punctuation">,</span>content_type<span class="token operator">=</span>in_get_content_type<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>ossObjectName <span class="token operator">+</span> <span class="token string">&#39;  å·²ä¸Šä¼ &#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h1 id="todo" tabindex="-1"><a class="header-anchor" href="#todo"><span>TODO</span></a></h1><ul><li><p>blogæ–‡ç« åŠ å¯†æ–¹å¼ï¼Œä¸ºä»€ä¹ˆ</p><ul><li><p>com.upupor.framework.utils.DeflaterUtils</p><ul><li><p><code>Deflater</code> ç±»ä½¿ç”¨ DEFLATE å‹ç¼©ç®—æ³•ï¼Œè¿™æ˜¯ä¸€ç§æ— æŸæ•°æ®å‹ç¼©ç®—æ³•ï¼Œå¹¿æ³›åº”ç”¨äºè¯¸å¦‚ ZIP æ–‡ä»¶ã€HTTP å‹ç¼©å’Œå…¶ä»–æ•°æ®ä¼ è¾“åœºæ™¯ä¸­ã€‚</p><p>ä½¿ç”¨ <code>Deflater</code> ç±»å¯ä»¥å°†æ•°æ®å‹ç¼©ä¸ºå‹ç¼©æ ¼å¼ï¼Œç„¶åå¯ä»¥å°†å‹ç¼©åçš„æ•°æ®å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ã€ä¼ è¾“ç»™å…¶ä»–ç³»ç»Ÿæˆ–åœ¨å†…å­˜ä¸­è¿›è¡Œå¤„ç†ã€‚</p></li></ul></li></ul></li><li><p>è‰ç¨¿ï¼Ÿæ˜¯å®šæ—¶ä»»åŠ¡å®ç°å—</p><ul><li><p>å‰ç«¯å®ç°</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// è‡ªåŠ¨ä¿å­˜ 10ç§’æ‰§è¡Œä¸€æ¬¡</span>
    autoSaveInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">autoSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> auto_save_timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>ç«™å†…ä¿¡æ¯</p><ul><li>ä¸€å¼  message è¡¨</li></ul></li><li><p>LOG_PATH_IS_UNDEFINEDbackup æ–‡ä»¶å¤¹å‘ç°ä¼šå‹ç¼©é”™è¯¯æ—¥å¿—åˆ°é‡Œé¢ï¼</p><ul><li>å¥½åƒæ˜¯ <code>logback.xml</code> å®ç°</li></ul></li><li><p>ä¸Šä¼ éŸ³é¢‘</p><ul><li>js å®ç°çš„blob éŸ³é¢‘æ–‡ä»¶</li></ul></li><li><ul><li></li></ul></li></ul>`,71),o=[e];function c(l,i){return s(),a("div",null,o)}const d=n(t,[["render",c],["__file","upupor.html.vue"]]),k=JSON.parse('{"path":"/studynotes/upupor/upupor.html","title":"upuporStudy","lang":"zh-CN","frontmatter":{"description":"upuporStudy https://eco.upupor.com/upupor/ å¯ä»¥çœ‹è¿™ä¸ªç½‘å€ï¼Œè®°å½•ä½œè€…å¯¹è¿™ä¸ªBlogçš„å¾ˆå¤šæ€è·¯ã€‚ã€‚ã€‚ã€‚åŒ…æ‹¬MinIOã€mysqlçš„å¤‡ä»½ï¼Œä»¥åŠæœåŠ¡çš„éƒ¨ç½²ï¼ https://eco.upupor.com/assets/upupor-architecture.c16039e8.svghttps://eco.upupor...","head":[["meta",{"property":"og:url","content":"https://doc.zzq8.cn/studynotes/upupor/upupor.html"}],["meta",{"property":"og:site_name","content":"Zz"}],["meta",{"property":"og:title","content":"upuporStudy"}],["meta",{"property":"og:description","content":"upuporStudy https://eco.upupor.com/upupor/ å¯ä»¥çœ‹è¿™ä¸ªç½‘å€ï¼Œè®°å½•ä½œè€…å¯¹è¿™ä¸ªBlogçš„å¾ˆå¤šæ€è·¯ã€‚ã€‚ã€‚ã€‚åŒ…æ‹¬MinIOã€mysqlçš„å¤‡ä»½ï¼Œä»¥åŠæœåŠ¡çš„éƒ¨ç½²ï¼ https://eco.upupor.com/assets/upupor-architecture.c16039e8.svghttps://eco.upupor..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://eco.upupor.com/assets/upupor-architecture.c16039e8.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-26T06:52:58.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-26T06:52:58.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"upuporStudy\\",\\"image\\":[\\"https://eco.upupor.com/assets/upupor-architecture.c16039e8.svg\\"],\\"dateModified\\":\\"2024-05-26T06:52:58.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1.flyway","slug":"_1-flyway","link":"#_1-flyway","children":[]},{"level":2,"title":"2.ç¯å¢ƒå˜é‡","slug":"_2-ç¯å¢ƒå˜é‡","link":"#_2-ç¯å¢ƒå˜é‡","children":[]},{"level":2,"title":"1.äº‹ä»¶é©±åŠ¨-@EventListener","slug":"_1-äº‹ä»¶é©±åŠ¨-eventlistener","link":"#_1-äº‹ä»¶é©±åŠ¨-eventlistener","children":[]},{"level":2,"title":"1.å®ç°ApplicationContextAwareæ¥å£çš„ä½œç”¨","slug":"_1-å®ç°applicationcontextawareæ¥å£çš„ä½œç”¨","link":"#_1-å®ç°applicationcontextawareæ¥å£çš„ä½œç”¨","children":[]},{"level":2,"title":"2.Spring-é™æ€èµ„æºå¯ç”¨ç‰ˆæœ¬æ§åˆ¶","slug":"_2-spring-é™æ€èµ„æºå¯ç”¨ç‰ˆæœ¬æ§åˆ¶","link":"#_2-spring-é™æ€èµ„æºå¯ç”¨ç‰ˆæœ¬æ§åˆ¶","children":[]},{"level":2,"title":"3.Lucene","slug":"_3-lucene","link":"#_3-lucene","children":[]}],"git":{"createdTime":1712997543000,"updatedTime":1716706378000,"contributors":[{"name":"Fighting","email":"1024zzq@gmail.com","commits":1},{"name":"MiniPC","email":"1024zzq@gmail.com","commits":1}]},"readingTime":{"minutes":9.99,"words":2998},"filePathRelative":"studynotes/upupor/upupor.md","localizedDate":"2024å¹´4æœˆ13æ—¥","autoDesc":true}');export{d as comp,k as data};
